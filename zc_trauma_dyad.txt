= V4 Outline MultiLine NoSorting TabWidth=30

H="Outline"
/* 
********************HEADING******************** 

Project Name: The Trauma Dyad 

Date Started: 6/21/19

Primary Investigator: Zara Cooper
Funding Source: NPCRC

Created by: EBL

Primary Analyst: EBL
Secondary Analyst: MH

Datasets Used: nhats, nhats-linked Medicare claims only for full death info


*/
 
//STATA
// Global Macros use $ symbol to be called. 

//Clean NHATS 
global nhats "D:\nhats\shared\base_data\nhats cleaned"

//Intermediate Data Path
global intpath "D:\nhats\Projects\trauma\zc_trauma_dyad\data\int_data"

// Final Data Path
global datapath "D:\NHATS\Projects\trauma\zc_trauma_dyad\data\final_data"

//Log files path
global logpath "D:\NHATS\Projects\trauma\zc_trauma_dyad\output\logs"

//Log files path
global outpath "D:\NHATS\Projects\trauma\zc_trauma_dyad\output\in_progress"

H="********NHATS*********"


H="get trauma and iss from icdpic command"
import sas using "D:\NHATS\Projects\trauma\zc_trauma_dyad\ref_docs\Received from ZC 08192019\icd10to9.sas7bdat", case(lower) clear
keep icd9 icd10
gen diag=icd10
duplicates drop
tempfile xwalk
save `xwalk'


use "D:\NHATS\Shared\base_data\CMS_claims\Stata\ip_06_17.dta", clear
rename icd_dgns_cd* diag*
gen icd9=icd_dgns_vrsn_cd1=="9" if !missing(icd_dgns_vrsn_cd1)
gen icd9_alt=admit_date<td(01oct2015)
keep bene_id admit_date diag* icd9* clm_id
reshape long diag, i(clm_id) j(dnum)
drop if missing(diag)
/*tempfile t1
save `t1'
drop if icd9_alt==0
tempfile t2
save `t2'
use `t1'
drop if icd9_alt==1
duplicates drop clm_id diag, force
*/
drop if !inlist(substr(diag,1,1),"S","T") & !inlist(substr(diag,1,1),"8","9")
joinby diag using `xwalk', unm(master) _merge(xmerge)
replace diag=icd9cm if !icd9_alt
drop icd9cm
drop if inrange(real(substr(diag,1,3)),905,909) | inrange(real(substr(diag,1,3)),910,924) | inrange(real(substr(diag,1,3)),930,939)
drop if inlist(substr(diag,1,1),"7","N","V")
drop if missing(diag)
gsort clm_id dnum 
drop dnum
by clm_id: gen dnum=_n
*append using `t2'
reshape wide diag icd10cm, i(clm_id) j(dnum) 
save "${intpath}\ip_claims_for_trauma.dta", replace

trauma "${intpath}\ip_claims_for_trauma.dta" "${intpath}\icdpic_output.dta" 1 1 diag


use "${intpath}\icdpic_output.dta", clear
reshape long diag icd10cm sev_ issbr_ brl_ apc_ ecode_, i(clm_id) j(dnum)
encode apc, gen(apc)
label define apc 1 "Head/spinal cord" 2 "Thorax/anterior neck" 3 "Other serious" 4 "Other nonserious", modify
label values apc apc

drop if missing(diag)


replace diag=icd10 if !missing(icd10)


drop if missing(sev)


keep bene_id clm_id admit_date diag xiss niss apc

duplicates drop
sort bene_id clm_id admit_date diag xiss niss apc
by bene_id clm_id admit_date diag xiss niss: keep if _n==1
save "${intpath}\traumacodesfromstata", replace

H="get index in stata"
//grab aha data from 2017 to get trauma center info
use "D:\Outside_data\AHA data\aha2017.dta", clear
rename mcrnum prvdr_num
drop if missing(prvdr_num)
tempfile aha
save `aha'

//just pull ivw dates to match to the dx, only for rounds 1,5,7 to match to NSOC later
use "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", clear
keep if sp_ivw==1 & lml==0
keep spid ivw_date wave
merge m:1 spid using "D:\NHATS\Shared\raw\CMS\NHATS CMS DUA 28016\Crosswalks\xwalk_2016.dta", ///
keep(match master) nogen keepusing(bene)
sort spid wave
by spid: gen ivw_date_n1=ivw_date[_n-1]
by spid: gen ivw_date_p1=ivw_date[_n+1]
tempfile nhats
save `nhats'

//get trauma dx and iss info
import excel using "D:\NHATS\Projects\trauma\zc_trauma_dyad\ref_docs\icdtrauma_from_stata.xls", firstrow clear
rename dx dtrunc
keep dtrunc sev issb
replace issbr="Abdomen" if issbr=="4"
replace issbr="Chest" if issbr=="3"
replace issbr="Extremities" if issbr=="5"
replace issbr="Face" if issbr=="2"
replace issbr="External" if inlist(issbr,"6","9","General")
replace issbr="Head/Neck" if issbr=="1"

encode issbr, gen(region) label(issbr)

drop issbr
rename region issbr
tempfile t1
save `t1'

local type=1

/*pull claims, only inpatient*/
foreach x in ip_06 {

	use "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA/`x'_17.dta", clear
	if "`x'"=="ip_06" {
		merge m:1 prvdr_num using `aha', ///
		keep(match master) gen(aham) keepusing(traumhos)
		egen icu_days=rowtotal(icarecnt crnryday)
		gen ind_procedure=!missing(icd_prcdr_cd1)

		label define discharge_disp 1 "Home, no services" 2 "Home with services" ///
		3 "SNF" 4 "Rehab Facility" 5 "Hospice (including home)" 6 "Deceased" 7 "Other"
		gen discharge_disp=ptnt_dschrg_stus_cd=="01"
		replace discharge_disp=2 if inlist(ptnt_dschrg_stus_cd,"06","08")
		replace discharge_disp=3 if inlist(ptnt_dschrg_stus_cd,"03","61")
		replace discharge_disp=4 if inlist(ptnt_dschrg_stus_cd,"62")
		replace discharge_disp=5 if inlist(ptnt_dschrg_stus_cd,"50","51")
		replace discharge_disp=6 if inlist(ptnt_dschrg_stus_cd,"20","40","41","42")
		replace discharge_disp=7 if !discharge_disp
		label values discharge_disp discharge_disp
		gen los=disch_date-admit_date+1
		keep bene_id icd_dgns_cd* icd_dgns_e_cd* admit_date icu_days ind_procedure discharge_disp ///
		los traumhos clm_id
}
	
	else keep bene_id icd_dgns_cd* admit_date disch_date 
	gen clm_num=_n
	reshape long icd_dgns_cd icd_dgns_e_cd, i(clm_num) j(num)
	rename icd_dgns_cd diag
	rename icd_dgns_e_cd ecode
	*keep if inlist(substr(diag,1,1),"8","9","S","T") 
	drop if missing(diag)
	gen type=`type'
	local type=`type'+1

	if "`x'"!="pb_09" {
		tempfile `x'
		save ``x''
}
}

/*
append using `ip_06'
append using `op_09'*/
label define type 1 "IP" 2 "OP" 3 "PB"
label values type type

sort bene_id admit_date diag
duplicates drop

//icd9
gen trauma=inlist(substr(diag,1,1),"8") | (substr(diag,1,1)=="9" & inlist(substr(diag,2,1),"0","1","2","3","4","5"))
replace trauma=0 if inrange(real(substr(diag,1,3)),905,909) | inrange(real(substr(diag,1,3)),910,924) | inrange(real(substr(diag,1,3)),930,939)
//icd10
replace trauma=1 if (substr(diag,1,1)=="S" & inlist(substr(diag,7,1),"A","B","C")) | inlist(substr(diag,1,3),"T07","T14","T30","T31","T32") | (substr(diag,1,4)=="T79A" & substr(diag,3,1)!="0" & substr(diag,7,1)=="A") | (substr(diag,1,2)=="T2" & substr(diag,3,1)!="9" & substr(diag,7,1)=="A")
replace trauma=0 if inlist(substr(diag,7,1),"D","G","K","S") | (substr(diag,1,1)=="S" & substr(diag,3,1)=="0")


//tbi
gen tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"0") & ///
inlist(substr(diag,3,1),"0","1","3","4")

replace tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"0","1","2","3","4")

replace tbi=trauma==1 & diag=="95901"

replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"0","1","8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"9") ///
 & inlist(substr(diag,5,1),"1")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S06") & ///
inlist(substr(diag,4,1),"0","1","2","3","4","5","6","8","9")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"9") & ///
inlist(substr(diag,5,1),"0")


//motor vehicle crash--V87?
gen vehicle_crash=/*inlist(substr(ecode,1,4),"V890","V892","V894") ///
| inlist(substr(ecode,1,3),"X82","V38","V34","V30","V39","E81","V00","V02","V03") ///
| inlist(substr(ecode,1,3),"V04","V05","V09") ///
| inlist(substr(ecode,1,2),"V6")*/ inlist(substr(ecode,1,3),"V12","V13","V14") | inlist(substr(ecode,1,2),"V2","V3","V4","V5","V6","V7") | (inlist(substr(ecode,1,2),"E8") & inlist(substr(ecode,3,1),"1"/*,"2"*/))

//falls
gen fall=inlist(substr(ecode,1,3),"E88") | inlist(substr(ecode,1,1),"W") & ///
 inlist(substr(ecode,2,1),"0","1")

//get complications 
//note--only have ICD-9, need to get 10 from Zara at some point
gen ind_comp_intraop=inlist(substr(diag,1,3),"900","901","902","903","904") & num>1
replace ind_comp_intraop=1 if inlist(substr(diag,1,4),"4582","5121","9982","9991") & num>1
replace ind_comp_intraop=1 if inlist(substr(diag,1,5),"41511") & num>1
gen ind_comp_cardiac=inlist(substr(diag,1,3),"410","411") & num>1
replace ind_comp_cardiac=1 if inlist(substr(diag,1,4),"4275","9971","4294") & num>1

gen ind_comp_resp=inlist(substr(diag,1,3),"480","481","482","483","485","486","514") & num>1
replace ind_comp_resp=1 if inlist(substr(diag,1,4),"5070","5184","5185","7991","9973") & num>1
replace ind_comp_resp=1 if inlist(substr(diag,1,5),"51881") & num>1

gen ind_comp_vasc=1 if inlist(substr(diag,1,3),"430","431","433","434","435","436","451","453") & num>1
replace ind_comp_vasc=1 if inlist(substr(diag,1,4),"4151","442","4448","4599","9972","9997","9992") & num>1

gen ind_comp_wound=1 if inlist(substr(diag,1,3),"567") & num>1
replace ind_comp_wound=1 if inlist(substr(diag,1,4),"5688","5697","6088","9981","9983","9986") & num>1
replace ind_comp_wound=1 if inlist(substr(diag,1,5),"99814","99851") & num>1

gen ind_comp_genitourinary=1 if inlist(substr(diag,1,3),"590","591","596","597","604") & num>1
replace ind_comp_genitourinary=1 if inlist(substr(diag,1,4),"5933","5934","5935","5991","7882","9963","9975") & num>1

gen ind_comp_gastro=1 if inlist(substr(diag,1,3),"558","560") & num>1
replace ind_comp_gastro=1 if inlist(substr(diag,1,4),"5311","5312","5321","5322","5323","5401","7876") & num>1
replace ind_comp_gastro=1 if inlist(substr(diag,1,4),"9974","5692","5693","5695","5696","5793") & num>1
replace ind_comp_gastro=1 if inlist(substr(diag,1,5),"00845") & num>1

gen ind_comp_neuro=1 if inlist(substr(diag,1,3),"436","951","952","953","954","955","956","354","355") & num>1
replace ind_comp_neuro=1 if inlist(substr(diag,1,4),"9970","7234") & num>1

gen ind_comp_infect=1 if inlist(substr(diag,1,3),"038") & num>1
replace ind_comp_infect=1 if inlist(substr(diag,1,4),"9985","9993","0545","7907") & num>1
replace ind_comp_infect=1 if inlist(substr(diag,1,5),"53641","51901","99591","99592") & num>1

gen ind_comp_misc=1 if inlist(substr(diag,1,3),"584") & num>1
replace ind_comp_misc=1 if inlist(substr(diag,1,4),"0418","2768","4589","7823","7824","7855","9950","9954","9994") & num>1
replace ind_comp_misc=1 if inlist(substr(diag,1,4),"9996","9997","9984","9987","9988","9989","5364","5793") & num>1
replace ind_comp_misc=1 if inlist(substr(diag,1,5),"99586") & num>1

//icd10




replace ind_comp_intraop=1 if inlist(diag, "0DTE0ZZ", "0FB40ZZ", "0FB43ZZ", "6A800ZZ", "8E0H300", "D7811", "D7812", "E3611") & num>1
replace ind_comp_intraop=1 if inlist(diag, "E3612", "G9748", "G9749", "H59219", "H59229", "H9531", "H9532", "I2690") & num>1
replace ind_comp_intraop=1 if inlist(diag, "I2699", "I952", "I953", "I9581", "I9751", "I9752", "J9571", "J9572") & num>1
replace ind_comp_intraop=1 if inlist(diag, "J95811", "K9171", "K9172", "L7611", "L7612", "M96820", "M96821", "N9971") & num>1
replace ind_comp_intraop=1 if inlist(diag, "N9972", "NoPCS", "S090XXA", "S15009A", "S15209A", "S15309A", "S158XXA", "S159XXA") & num>1
replace ind_comp_intraop=1 if inlist(diag, "S2500XA", "S25109A", "S2520XA", "S25309A", "S25409A", "S25509A", "S25809A", "S2590XA") & num>1
replace ind_comp_intraop=1 if inlist(diag, "S3500XA", "S3510XA", "S35219A", "S35229A", "S35239A", "S35299A", "S35319A", "S35329A") & num>1
replace ind_comp_intraop=1 if inlist(diag, "S35339A", "S35349A", "S35403A", "S35406A", "S35513A", "S35516A", "S35533A", "S35536A") & num>1
replace ind_comp_intraop=1 if inlist(diag, "S3559XA", "S358X9A", "S3590XA", "S45009A", "S45109A", "S45209A", "S45809A", "S45909A") & num>1
replace ind_comp_intraop=1 if inlist(diag, "S55009A", "S55109A", "S55809A", "S55909A", "S65009A", "S65109A", "S65209A", "S65309A") & num>1
replace ind_comp_intraop=1 if inlist(diag, "S65409A", "S65509A", "S65809A", "S65909A", "S75009A", "S75109A", "S75209A", "S75809A") & num>1
replace ind_comp_intraop=1 if inlist(diag, "S75909A", "S85009A", "S85109A", "S85139A", "S85169A", "S85309A", "S85409A", "S85509A") & num>1
replace ind_comp_intraop=1 if inlist(diag, "S85809A", "S85909A", "S95109A", "S95809A", "S95902A", "T1490", "T800XXA", "T81718A") & num>1
replace ind_comp_intraop=1 if inlist(diag, "T8172XA", "T82817A", "T82818A", "T888XXA") & num>1



replace ind_comp_cardiac=1 if inlist(diag, "079P30Z", "079P3ZZ", "079P40Z", "079P4ZZ", "30230AZ", "30230G0", "30230G1", "30230X0") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "30230X1", "30230Y0", "30230Y1", "30233AZ", "30233G0", "30233G1", "30233X0", "30233X1") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "30233Y0", "30233Y1", "30240AZ", "30240G0", "30240G1", "30240X0", "30240X1", "30240Y0") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "30240Y1", "30243AZ", "30243G0", "30243G1", "30243X0", "30243X1", "30243Y0", "30243Y1") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "30250G0", "30250G1", "30250X0", "30250X1", "30250Y0", "30250Y1", "30253G0", "30253G1") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "30253X0", "30253X1", "30253Y0", "30253Y1", "30260G0", "30260G1", "30260X0", "30260X1") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "30260Y0", "30260Y1", "30263G0", "30263G1", "30263X0", "30263X1", "30263Y0", "30263Y1") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "3E03005", "3E03305", "3E04005", "3E04305", "3E05005", "3E05305", "3E06005", "3E06305") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "6A550Z3", "I200", "I2109", "I2111", "I2119", "I2129", "I213", "I214") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "I240", "I241", "I248", "I469", "I970", "I97110", "I97130", "I97190") & num>1
replace ind_comp_cardiac=1 if inlist(diag, "I97710", "I97790", "I9788", "I9789") & num>1


replace ind_comp_resp=1 if inlist(diag, "0D1N0Z4", "0D1N4Z4", "0D5P0ZZ", "0D5P3ZZ", "0D5P4ZZ", "0D5P7ZZ", "0D5P8ZZ", "0D9P00Z") & num>1
replace ind_comp_resp=1 if inlist(diag, "0D9P0ZX", "0D9P0ZZ", "0D9P30Z", "0D9P3ZX", "0D9P3ZZ", "0D9P40Z", "0D9P4ZX", "0D9P4ZZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0D9P7ZX", "0D9P7ZZ", "0D9P8ZX", "0D9P8ZZ", "0DBP0ZX", "0DBP0ZZ", "0DBP3ZX", "0DBP3ZZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0DBP4ZX", "0DBP4ZZ", "0DBP7ZX", "0DBP7ZZ", "0DBP8ZX", "0DBP8ZZ", "0DCP0ZZ", "0DCP3ZZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0DCP4ZZ", "0DJD3ZZ", "0DJD4ZZ", "0DJD7ZZ", "0DJD8ZZ", "0DTN0ZZ", "0DTN4ZZ", "0DTP0ZZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0DTP4ZZ", "0DTP7ZZ", "0DTP8ZZ", "0F758ZZ", "0F768ZZ", "0F788ZZ", "0F798ZZ", "0F7C8DZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0F7C8ZZ", "0F9970Z", "0F9C80Z", "0F9C8ZZ", "0FC50ZZ", "0FC60ZZ", "0FC80ZZ", "0FC90ZZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0FF50ZZ", "0FF53ZZ", "0FF54ZZ", "0FF57ZZ", "0FF60ZZ", "0FF63ZZ", "0FF64ZZ", "0FF67ZZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0FF80ZZ", "0FF83ZZ", "0FF84ZZ", "0FF87ZZ", "0FF90ZZ", "0FF93ZZ", "0FF94ZZ", "0FF97ZZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0FFC0ZZ", "0FFC3ZZ", "0FFC4ZZ", "0FFC7ZZ", "0PQC0ZZ", "0PQC3ZZ", "0PQC4ZZ", "0PQCXZZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0PQD0ZZ", "0PQD3ZZ", "0PQD4ZZ", "0PQDXZZ", "0PQF0ZZ", "0PQF3ZZ", "0PQF4ZZ", "0PQFXZZ") & num>1
replace ind_comp_resp=1 if inlist(diag, "0PQG0ZZ", "0PQG3ZZ", "0PQG4ZZ", "0PQGXZZ", "6A550Z0", "A481", "J120", "J121") & num>1
replace ind_comp_resp=1 if inlist(diag, "J122", "J1281", "J1289", "J129", "J13", "J14", "J150", "J151") & num>1
replace ind_comp_resp=1 if inlist(diag, "J1520", "J15211", "J15212", "J1529", "J153", "J154", "J155", "J156") & num>1
replace ind_comp_resp=1 if inlist(diag, "J157", "J158", "J159", "J160", "J168", "J180", "J181", "J182") & num>1
replace ind_comp_resp=1 if inlist(diag, "J189", "J690", "J810", "J811", "J951", "J952", "J953", "J95821") & num>1
replace ind_comp_resp=1 if inlist(diag, "J95822", "J95851", "J95859", "J9588", "J9589", "J9600", "J9620", "J9690") & num>1
replace ind_comp_resp=1 if inlist(diag, "R092") & num>1


replace ind_comp_vasc=1 if inlist(diag, "0D16074", "0D160J4", "0D160K4", "0D160Z4", "0D163J4", "0D16474", "0D164J4", "0D164K4") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0D164Z4", "0D16874", "0D168J4", "0D168K4", "0D168Z4", "0D560ZZ", "0D563ZZ", "0D564ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0D567ZZ", "0D568ZZ", "0D580ZZ", "0D583ZZ", "0D584ZZ", "0D587ZZ", "0D588ZZ", "0D590ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0D593ZZ", "0D594ZZ", "0D597ZZ", "0D598ZZ", "0D770ZZ", "0D773ZZ", "0D774ZZ", "0D777ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0D778ZZ", "0D870ZZ", "0D873ZZ", "0D874ZZ", "0D877ZZ", "0D878ZZ", "0D958ZX", "0D9600Z") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0D960ZZ", "0D9630Z", "0D963ZZ", "0D9640Z", "0D964ZZ", "0D967ZZ", "0D968ZX", "0D968ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0D980ZX", "0D983ZX", "0D984ZX", "0D987ZX", "0D990ZX", "0D993ZX", "0D994ZX", "0D997ZX") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0D998ZX", "0D9A0ZX", "0D9A3ZX", "0D9A4ZX", "0D9A7ZX", "0D9B0ZX", "0D9B3ZX", "0D9B4ZX") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0D9B7ZX", "0D9B8ZX", "0D9C8ZX", "0DB40ZZ", "0DB43ZZ", "0DB44ZZ", "0DB47ZZ", "0DB58ZX") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0DB60ZZ", "0DB63ZZ", "0DB64ZZ", "0DB67ZZ", "0DB68ZX", "0DB68ZZ", "0DB80ZX", "0DB80ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0DB83ZX", "0DB83ZZ", "0DB84ZX", "0DB84ZZ", "0DB87ZX", "0DB87ZZ", "0DB88ZX", "0DB88ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0DB90ZX", "0DB90ZZ", "0DB93ZX", "0DB93ZZ", "0DB94ZX", "0DB94ZZ", "0DB97ZX", "0DB97ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0DB98ZX", "0DB98ZZ", "0DBA0ZX", "0DBA3ZX", "0DBA4ZX", "0DBA7ZX", "0DBA8ZX", "0DBB0ZX") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0DBB3ZX", "0DBB4ZX", "0DBB7ZX", "0DBB8ZX", "0DBC8ZX", "0DC60ZZ", "0DC63ZZ", "0DC64ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0DH602Z", "0DH603Z", "0DH60UZ", "0DH63UZ", "0DH64UZ", "0DH67UZ", "0DH68UZ", "0DJ03ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0DJ07ZZ", "0DJ08ZZ", "0DJD4ZZ", "0DT40ZZ", "0DT44ZZ", "0DT47ZZ", "0DT48ZZ", "0DT70ZZ") & num>1
replace ind_comp_vasc=1 if inlist(diag, "0DT74ZZ", "0DT77ZZ", "0DT78ZZ", "6A550Z1", "8E0H30Z", "F0DZ8UZ", "G450", "G451") & num>1
replace ind_comp_vasc=1 if inlist(diag, "G458", "G459", "I2690", "I2692", "I2699", "I609", "I619", "I63019") & num>1
replace ind_comp_vasc=1 if inlist(diag, "I63119", "I63139", "I6320", "I63219", "I6322", "I63239", "I6330", "I6340") & num>1
replace ind_comp_vasc=1 if inlist(diag, "I6350", "I6359", "I6509", "I651", "I6529", "I658", "I659", "I6609") & num>1
replace ind_comp_vasc=1 if inlist(diag, "I6619", "I6629", "I669", "I67848", "I6789", "I745", "I748", "I8000") & num>1
replace ind_comp_vasc=1 if inlist(diag, "I8010", "I80209", "I80219", "I803", "I808", "I809", "I820", "I821") & num>1
replace ind_comp_vasc=1 if inlist(diag, "I82220", "I82221", "I82290", "I82291", "I823", "I82409", "I82419", "I82429") & num>1
replace ind_comp_vasc=1 if inlist(diag, "I82439", "I82449", "I82499", "I824Y9", "I824Z9", "I82509", "I82519", "I82529") & num>1
replace ind_comp_vasc=1 if inlist(diag, "I82539", "I82549", "I82599", "I825Y9", "I825Z9", "I82609", "I82619", "I82629") & num>1
replace ind_comp_vasc=1 if inlist(diag, "I82709", "I82719", "I82729", "I82819", "I82890", "I82891", "I8291", "I82A19") & num>1
replace ind_comp_vasc=1 if inlist(diag, "I82A29", "I82B19", "I82B29", "I82C19", "I82C29", "I999", "T800XXA", "T801XXA") & num>1
replace ind_comp_vasc=1 if inlist(diag, "T8040XA", "T80410A", "T80411A", "T80419A", "T8049XA", "T80A0XA", "T80A10A", "T80A11A") & num>1
replace ind_comp_vasc=1 if inlist(diag, "T80A19A", "T80A9XA", "T81718A", "T81719A", "T8172XA", "T82817A", "T82818A") & num>1

replace ind_comp_wound=1 if inlist(diag, "0T130ZB", "0T134ZB", "0T140ZB", "0T144ZB", "0T160Z6", "0T160Z7", "0T160Z8", "0T160ZA") & num>1
replace ind_comp_wound=1 if inlist(diag, "0T160ZB", "0T164Z6", "0T164Z7", "0T164Z8", "0T164ZA", "0T164ZB", "0T170Z6", "0T170Z7") & num>1
replace ind_comp_wound=1 if inlist(diag, "0T170Z8", "0T170ZA", "0T170ZB", "0T174Z6", "0T174Z7", "0T174Z8", "0T174ZA", "0T174ZB") & num>1
replace ind_comp_wound=1 if inlist(diag, "0T180Z6", "0T180Z7", "0T180Z8", "0T180ZA", "0T180ZB", "0T184Z6", "0T184Z7", "0T184Z8") & num>1
replace ind_comp_wound=1 if inlist(diag, "0T184ZA", "0T184ZB", "0TQ60ZZ", "0TQ63ZZ", "0TQ64ZZ", "0TQ67ZZ", "0TQ68ZZ", "0TQ70ZZ") & num>1
replace ind_comp_wound=1 if inlist(diag, "0TQ73ZZ", "0TQ74ZZ", "0TQ77ZZ", "0TQ78ZZ", "3E00XGC", "6A4Z0ZZ", "6A600ZZ", "D7801") & num>1
replace ind_comp_wound=1 if inlist(diag, "D7802", "D7821", "D7822", "E3601", "E3602", "G9731", "G9732", "G9751") & num>1
replace ind_comp_wound=1 if inlist(diag, "G9752", "H59111", "H59112", "H59113", "H59119", "H59121", "H59122", "H59123") & num>1
replace ind_comp_wound=1 if inlist(diag, "H59129", "H59311", "H59312", "H59313", "H59319", "H59321", "H59322", "H59323") & num>1
replace ind_comp_wound=1 if inlist(diag, "H59329", "H9521", "H9522", "H9541", "H9542", "I97410", "I97411", "I97418") & num>1
replace ind_comp_wound=1 if inlist(diag, "I9742", "I97610", "I97611", "I97618", "I9762", "J9561", "J9562", "J95830") & num>1
replace ind_comp_wound=1 if inlist(diag, "J95831", "K650", "K651", "K652", "K653", "K654", "K658", "K659") & num>1
replace ind_comp_wound=1 if inlist(diag, "K661", "K668", "K67", "K6812", "K6819", "K689", "K9161", "K9162") & num>1
replace ind_comp_wound=1 if inlist(diag, "K91840", "K91841", "K91850", "K91858", "L7601", "L7602", "L7621", "L7622") & num>1
replace ind_comp_wound=1 if inlist(diag, "M96810", "M96811", "M96830", "M96831", "N442", "N448", "N501", "N503") & num>1
replace ind_comp_wound=1 if inlist(diag, "N508", "N51", "N5312", "N5314", "N9961", "N9962", "N99820", "N99821") & num>1
replace ind_comp_wound=1 if inlist(diag, "R188", "R361", "T8130XA", "T8131XA", "T8132XA", "T8133XA", "T814XXA", "T8183XA") & num>1
replace ind_comp_wound=1 if inlist(diag, "T888XXA") & num>1


replace ind_comp_genitourinary=1 if inlist(diag, "0PJY0ZZ", "0PJY3ZZ", "0PJY4ZZ", "0T9000Z", "0T900ZZ", "0T9030Z", "0T903ZZ", "0T9040Z") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "0T904ZZ", "0T9100Z", "0T910ZZ", "0T9130Z", "0T913ZZ", "0T9140Z", "0T914ZZ", "0TB00ZZ") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "0TB03ZZ", "0TB04ZZ", "0TB10ZZ", "0TB13ZZ", "0TB14ZZ", "0TBB0ZZ", "0TBB3ZZ", "0TBB4ZZ") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "0TJ50ZZ", "0TJB0ZZ", "0TJB4ZZ", "0TN00ZZ", "0TN03ZZ", "0TN04ZZ", "0TN07ZZ", "0TN08ZZ") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "0TN10ZZ", "0TN13ZZ", "0TN14ZZ", "0TN17ZZ", "0TN18ZZ", "0TN60ZZ", "0TN63ZZ", "0TN64ZZ") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "0TN70ZZ", "0TN73ZZ", "0TN74ZZ", "0TNB0ZZ", "0TNB3ZZ", "0TNB4ZZ", "0TNC0ZZ", "0TNC3ZZ") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "0TNC4ZZ", "0TQD0ZZ", "0TQD3ZZ", "0TQD4ZZ", "0TQD7ZZ", "0TQD8ZZ", "0TQDXZZ", "0TSC0ZZ") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "0TSC4ZZ", "0TSD0ZZ", "0TSD4ZZ", "0TUC07Z", "0TUC0JZ", "0TUC0KZ", "0TUC47Z", "0TUC4JZ") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "0TUC4KZ", "0TUC77Z", "0TUC7JZ", "0TUC7KZ", "0TUC87Z", "0TUC8JZ", "0TUC8KZ", "0VT00ZZ") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "0WBH0ZZ", "0WBH3ZZ", "0WBH4ZZ", "0WJJ0ZZ", "0WJJ3ZZ", "0WJJ4ZZ", "3E013GC", "3E023GC") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "3E0K3GC", "5A12012", "N10", "N110", "N118", "N12", "N1330", "N134") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "N135", "N138", "N151", "N159", "N16", "N2884", "N2885", "N2886") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "N312", "N318", "N319", "N320", "N321", "N322", "N323", "N3281") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "N3289", "N329", "N340", "N341", "N342", "N343", "N360", "N3644") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "N451", "N452", "N453", "N454", "N51", "N99510", "N99511", "N99512") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "N99518", "N9989", "R338", "R339", "R3914", "T83090A", "T83098A", "T83198A") & num>1
replace ind_comp_genitourinary=1 if inlist(diag, "T8329XA", "T8339XA", "T83498A") & num>1



replace ind_comp_gastro=1 if inlist(diag, "0DQ80ZZ", "0DQ83ZZ", "0DQ84ZZ", "0DQ87ZZ", "0DQ88ZZ", "0DQE0ZZ", "0DQE3ZZ", "0DQE4ZZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0DQE7ZZ", "0DQE8ZZ", "0JH70MZ", "0JH73MZ", "0JH80MZ", "0JH83MZ", "0JPT0MZ", "0JPT3MZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0Q8D0ZZ", "0Q8D3ZZ", "0Q8D4ZZ", "0Q8F0ZZ", "0Q8F3ZZ", "0Q8F4ZZ", "0T130Z3", "0T130Z4") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0T130Z6", "0T130Z7", "0T130Z8", "0T130Z9", "0T130ZA", "0T130ZC", "0T130ZD", "0T144Z3") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0T144Z4", "0T144Z6", "0T144Z7", "0T144Z8", "0T144Z9", "0T144ZA", "0T144ZC", "0T144ZD") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0T820ZZ", "0T823ZZ", "0T824ZZ", "0TC37ZZ", "0TC38ZZ", "0TC47ZZ", "0TC48ZZ", "0TC67ZZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0TC68ZZ", "0TC77ZZ", "0TC78ZZ", "0TH90MZ", "0TH93MZ", "0TH94MZ", "0TH97MZ", "0TH98MZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0TL60CZ", "0TL60ZZ", "0TL63CZ", "0TL63ZZ", "0TL64CZ", "0TL64ZZ", "0TL67ZZ", "0TL68ZZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0TL70CZ", "0TL70ZZ", "0TL73CZ", "0TL73ZZ", "0TL74CZ", "0TL74ZZ", "0TL77ZZ", "0TL78ZZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0TP90MZ", "0TP93MZ", "0TP94MZ", "0TP97MZ", "0TP98MZ", "0TQ00ZZ", "0TQ03ZZ", "0TQ04ZZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0TQ07ZZ", "0TQ08ZZ", "0TQ10ZZ", "0TQ13ZZ", "0TQ14ZZ", "0TQ17ZZ", "0TQ18ZZ", "0TQ30ZZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0TQ33ZZ", "0TQ34ZZ", "0TQ37ZZ", "0TQ38ZZ", "0TQ40ZZ", "0TQ43ZZ", "0TQ44ZZ", "0TQ47ZZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0TQ48ZZ", "0TQB0ZZ", "0TQB3ZZ", "0TQB4ZZ", "0TQB7ZZ", "0TQB8ZZ", "0TS00ZZ", "0TS04ZZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0TS10ZZ", "0TS14ZZ", "0TS20ZZ", "0TS24ZZ", "0W3R0ZZ", "0W3R3ZZ", "0W3R4ZZ", "0W3R7ZZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0W3R8ZZ", "0WQFXZ2", "0WQFXZZ", "0YQA0ZZ", "0YQA3ZZ", "0YQA4ZZ", "0YU707Z", "0YU70JZ") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0YU70KZ", "0YU747Z", "0YU74JZ", "0YU74KZ", "0YU807Z", "0YU80JZ", "0YU80KZ", "0YU847Z") & num>1
replace ind_comp_gastro=1 if inlist(diag, "0YU84JZ", "0YU84KZ", "6A550Z2", "A047", "K251", "K252", "K261", "K262") & num>1
replace ind_comp_gastro=1 if inlist(diag, "K263", "K353", "K520", "K521", "K522", "K5281", "K5282", "K5289") & num>1
replace ind_comp_gastro=1 if inlist(diag, "K529", "K560", "K561", "K562", "K563", "K5641", "K5649", "K565") & num>1
replace ind_comp_gastro=1 if inlist(diag, "K5660", "K5669", "K567", "K624", "K625", "K630", "K912", "K913") & num>1
replace ind_comp_gastro=1 if inlist(diag, "K9181", "K9182", "K9183", "K9186", "K9189", "K9400", "K9402", "K9403") & num>1
replace ind_comp_gastro=1 if inlist(diag, "K9409", "K9410", "K9412", "K9413", "K9419", "R150", "R151", "R152") & num>1
replace ind_comp_gastro=1 if inlist(diag, "R159") & num>1



replace ind_comp_neuro=1 if inlist(diag, "02B50ZZ", "02B53ZZ", "02B54ZZ", "02QA0ZZ", "02QA3ZZ", "02QA4ZZ", "02QF0ZZ", "02QF3ZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "02QF4ZZ", "02QG0ZZ", "02QG3ZZ", "02QG4ZZ", "02QH0ZZ", "02QH3ZZ", "02QH4ZZ", "02QJ0ZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "02QJ3ZZ", "02QJ4ZZ", "02RM0JZ", "02RM4JZ", "02U50JZ", "02U53JZ", "02U54JZ", "02UM0JZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "02UM3JZ", "02UM4JZ", "08J0XZZ", "08J1XZZ", "0DB60ZZ", "0DB63ZZ", "0DB67ZZ", "0DT70ZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "0DT74ZZ", "0DT77ZZ", "0DT78ZZ", "4A07X0Z", "4A07X7Z", "4A07XBZ", "B30N0ZZ", "B30N1ZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "B30NYZZ", "B803ZZZ", "B804ZZZ", "B805ZZZ", "B806ZZZ", "B807ZZZ", "B845ZZZ", "B846ZZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "B847ZZZ", "C8191ZZ", "C819YZZ", "C81YYZZ", "F09Z2ZZ", "F09Z3ZZ", "F0CZ0ZZ", "F0CZ1ZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "F0CZ2KZ", "F0CZ2LZ", "F0CZ2NZ", "F0CZ2PZ", "F0CZ2QZ", "F0CZ2SZ", "F0CZ2TZ", "F0CZ2YZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "F0CZ2ZZ", "F0DZ0ZZ", "F0DZ1ZZ", "F0DZ2ZZ", "F0DZ5ZZ", "F0DZ8UZ", "F13Z0ZZ", "F13Z1ZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "F13Z2ZZ", "F13Z3ZZ", "F13Z4ZZ", "F13Z5ZZ", "F13Z6ZZ", "F13Z7ZZ", "F13Z8ZZ", "F13Z9ZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "F13ZBZZ", "F13ZCZZ", "F13ZDZZ", "F13ZFZZ", "F13ZGZZ", "F13ZHZZ", "F13ZJZZ", "F13ZMZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "F13ZNZZ", "F13ZPZZ", "F13ZQZZ", "F14Z0ZZ", "F14Z1ZZ", "F14Z2ZZ", "F14Z3ZZ", "F14Z4ZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "F14Z5ZZ", "F14Z6ZZ", "F14Z7ZZ", "F14Z8ZZ", "F15Z0ZZ", "F15Z1ZZ", "F15Z2ZZ", "F15Z3ZZ") & num>1
replace ind_comp_neuro=1 if inlist(diag, "F15Z4ZZ", "F15Z5ZZ", "F15Z6ZZ", "F15Z7ZZ", "G038", "G5600", "G5610", "G5620") & num>1
replace ind_comp_neuro=1 if inlist(diag, "G5630", "G5640", "G5680", "G5690", "G5700", "G5710", "G5720", "G5730") & num>1
replace ind_comp_neuro=1 if inlist(diag, "G5740", "G5750", "G5760", "G5770", "G5780", "G5790", "G587", "G589") & num>1
replace ind_comp_neuro=1 if inlist(diag, "G970", "G9781", "G9782", "I6789", "I97811", "I97821", "M5412", "M5413") & num>1
replace ind_comp_neuro=1 if inlist(diag, "NoPCS", "S0410XA", "S0420XA", "S0430XA", "S0440XA", "S0450XA", "S0460XA", "S0470XA") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S04819A", "S04899A", "S049XXA", "S14101A", "S14102A", "S14103A", "S14104A", "S14105A") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S14106A", "S14107A", "S14108A", "S14109A", "S14111A", "S14112A", "S14113A", "S14114A") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S14115A", "S14116A", "S14117A", "S14118A", "S14121A", "S14122A", "S14123A", "S14124A") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S14125A", "S14126A", "S14127A", "S14128A", "S14131A", "S14132A", "S14133A", "S14134A") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S14135A", "S14136A", "S14137A", "S14138A", "S14151A", "S14152A", "S14153A", "S14154A") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S14155A", "S14156A", "S14157A", "S14158A", "S142XXA", "S143XXA", "S145XXA", "S24101A") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S24102A", "S24103A", "S24104A", "S24109A", "S24111A", "S24112A", "S24113A", "S24114A") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S24131A", "S24132A", "S24133A", "S24134A", "S24151A", "S24152A", "S24153A", "S24154A") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S242XXA", "S243XXA", "S244XXA", "S248XXA", "S249XXA", "S34109A", "S34139A", "S3421XA") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S3422XA", "S343XXA", "S344XXA", "S345XXA", "S346XXA", "S349XXA", "S4400XA", "S4410XA") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S4420XA", "S4430XA", "S4440XA", "S4450XA", "S448X9A", "S4490XA", "S5400XA", "S5410XA") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S5420XA", "S5430XA", "S6400XA", "S6410XA", "S6420XA", "S6430XA", "S6440XA", "S7400XA") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S7410XA", "S7420XA", "S748X9A", "S7490XA", "S8400XA", "S8410XA", "S8420XA", "S84809A") & num>1
replace ind_comp_neuro=1 if inlist(diag, "S8490XA", "S9430XA", "S948X9A", "S9490XA") & num>1


replace ind_comp_infect=1 if inlist(diag, "0QSL3ZZ", "0QSL4ZZ", "0QSLXZZ", "0QSM3ZZ", "0QSM4ZZ", "0QSMXZZ", "0QSN3ZZ", "0QSN4ZZ") & num>1
replace ind_comp_infect=1 if inlist(diag, "0QSNXZZ", "0QSP3ZZ", "0QSP4ZZ", "0QSPXZZ", "3E0R3TZ", "3E0S3TZ", "8E0VX1D", "A403") & num>1
replace ind_comp_infect=1 if inlist(diag, "A409", "A4101", "A4102", "A411", "A412", "A413", "A414", "A4150") & num>1
replace ind_comp_infect=1 if inlist(diag, "A4151", "A4152", "A4153", "A4159", "A4189", "A419", "B007", "DWY18ZZ") & num>1
replace ind_comp_infect=1 if inlist(diag, "DWY28ZZ", "DWY38ZZ", "DWY48ZZ", "DWY58ZZ", "DWY68ZZ", "J9502", "K6811", "K9422") & num>1
replace ind_comp_infect=1 if inlist(diag, "R6520", "R7881", "T80211A", "T80212A", "T80219A", "T8022XA", "T8029XA", "T814XXA") & num>1
replace ind_comp_infect=1 if inlist(diag, "T880XXA") & num>1



replace ind_comp_misc=1 if inlist(diag, "0DQP0ZZ", "0DQP3ZZ", "0DQP4ZZ", "0DQP7ZZ", "0DQP8ZZ", "0HQ9XZZ", "0PBH0ZZ", "0PBH3ZZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0PBH4ZZ", "0PBJ0ZZ", "0PBJ3ZZ", "0PBJ4ZZ", "0PBK0ZZ", "0PBK3ZZ", "0PBK4ZZ", "0PBL0ZZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0PBL3ZZ", "0PBL4ZZ", "0PBM0ZZ", "0PBM3ZZ", "0PBM4ZZ", "0PBN0ZZ", "0PBN3ZZ", "0PBN4ZZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0PBP0ZZ", "0PBP3ZZ", "0PBP4ZZ", "0PBQ0ZZ", "0PBQ3ZZ", "0PBQ4ZZ", "0QH604Z", "0QH634Z") & num>1
replace ind_comp_misc=1 if inlist(diag, "0QH644Z", "0QH704Z", "0QH734Z", "0QH744Z", "0QH804Z", "0QH834Z", "0QH844Z", "0QH904Z") & num>1
replace ind_comp_misc=1 if inlist(diag, "0QH934Z", "0QH944Z", "0QHB04Z", "0QHB34Z", "0QHB44Z", "0QHC04Z", "0QHC34Z", "0QHC44Z") & num>1
replace ind_comp_misc=1 if inlist(diag, "0TMD0ZZ", "0TMD4ZZ", "0TQB0ZZ", "0TQB3ZZ", "0TQB4ZZ", "0TQB7ZZ", "0TQB8ZZ", "0TQD0ZZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0TQD3ZZ", "0TQD4ZZ", "0TQD7ZZ", "0TQD8ZZ", "0TQDXZZ", "0TRD07Z", "0TRD0JZ", "0TRD0KZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0TRD47Z", "0TRD4JZ", "0TRD4KZ", "0TRD77Z", "0TRD7JZ", "0TRD7KZ", "0TRD87Z", "0TRD8JZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0TRD8KZ", "0TRDX7Z", "0TRDXJZ", "0TRDXKZ", "0TSD0ZZ", "0TSD4ZZ", "0TUD07Z", "0TUD0JZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0TUD0KZ", "0TUD47Z", "0TUD4JZ", "0TUD4KZ", "0TUD77Z", "0TUD7JZ", "0TUD7KZ", "0TUD87Z") & num>1
replace ind_comp_misc=1 if inlist(diag, "0TUD8JZ", "0TUD8KZ", "0TUDX7Z", "0TUDXJZ", "0TUDXKZ", "0TVD0CZ", "0TVD0DZ", "0TVD0ZZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0TVD3CZ", "0TVD3DZ", "0TVD3ZZ", "0TVD4CZ", "0TVD4DZ", "0TVD4ZZ", "0TVD7DZ", "0TVD7ZZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0TVD8DZ", "0TVD8ZZ", "0TVDXZZ", "0UQG0ZZ", "0UQG3ZZ", "0UQG4ZZ", "0UQG7ZZ", "0UQG8ZZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0VQ50ZZ", "0VQ53ZZ", "0VQ54ZZ", "0VQ5XZZ", "0W3R0ZZ", "0W3R3ZZ", "0W3R4ZZ", "0W3R7ZZ") & num>1
replace ind_comp_misc=1 if inlist(diag, "0W3R8ZZ", "0WQFXZ2", "0WQFXZZ", "3E0134Z", "3E0234Z", "6A650ZZ", "8E0VX1C", "8E0VX63") & num>1
replace ind_comp_misc=1 if inlist(diag, "8E0ZXY6", "A493", "B960", "B966", "B967", "B9681", "B9689", "E876") & num>1
replace ind_comp_misc=1 if inlist(diag, "F0DZ8UZ", "H59029", "I959", "K912", "K9420", "K9422", "K9423", "K9429") & num>1
replace ind_comp_misc=1 if inlist(diag, "N170", "N171", "N172", "N178", "N179", "R17", "R570", "R571") & num>1
replace ind_comp_misc=1 if inlist(diag, "R578", "R579", "R600", "R601", "R609", "R6521", "T782XXA", "T8030XA") & num>1
replace ind_comp_misc=1 if inlist(diag, "T80310A", "T80311A", "T80319A", "T8039XA", "T8040XA", "T80410A", "T80411A", "T80419A") & num>1
replace ind_comp_misc=1 if inlist(diag, "T8049XA", "T8051XA", "T8052XA", "T8059XA", "T80A0XA", "T80A10A", "T80A11A", "T80A19A") & num>1
replace ind_comp_misc=1 if inlist(diag, "T80A9XA", "T81509A", "T81519A", "T81529A", "T81539A", "T8161XA", "T8169XA", "T8182XA") & num>1
replace ind_comp_misc=1 if inlist(diag, "T8189XA", "T819XXA", "T882XXA", "T883XXA") & num>1



egen ind_comp_any=rowmax(ind_comp*)
label var ind_comp_any "Any complication during index stay"

//use egen to add complications to the trauma dx rows
foreach x of varlist ind_comp* {
	replace `x'=0 if missing(`x')
	by bene_id clm_num type, sort: egen this=max(`x')
	replace `x'=this
	drop this
}

gen icd9=inlist(substr(diag,1,1),"8","9")


keep if trauma
duplicates drop

gen length=length(diag)
gen dtrunc=diag

merge m:1 dtrunc using `t1', keep(match master) gen(m1)
gen anym=m1==3

forvalues m=2/5 {

	replace dtrunc=substr(dtrunc,1,length-1)
	replace length=length-1

	merge m:1 dtrunc using `t1', update keep(match master match_update) gen(m`m')
	replace anym=1 if m`m'==3
	
}

rename discharge_disp z
save "${intpath}\traumacodesnewway.dta", replace




//bring in ISS & region from icdpic code from Molly
merge 1:1 clm_id admit_date bene_id diag using "${intpath}\traumacodesfromstata"

drop m* d* ecode num length
rename z discharge_disp
duplicates drop

tempfile trauma
save `trauma'

//use pre and post

foreach period in pre post {
if "`period'"=="pre" {
forvalues i=1/8 {
	use `nhats' if wave==`i', clear
	merge 1:m bene_id using `trauma', keep(match) nogen
	drop if admit_date>=ivw_date | (admit_date<ivw_date_n1 & !missing(ivw_date_n1)) | ///
	(ivw_date-admit_date>365)
	drop ivw_date_*
	rename ivw_date ivw_date
	rename wave wave
	tempfile traum`i'
	save `traum`i''
}
	local end 8
}

else {
forvalues i=1/8 {
	use `nhats' if wave==`i', clear
	merge 1:m bene_id using `trauma', keep(match) nogen
	drop if admit_date<ivw_date | admit_date-ivw_date>365 | admit_date>ivw_date_p1
	drop ivw_date_* 
	rename ivw_date ivw_date
	rename wave wave
	tempfile traum`i'
	save `traum`i''
}
	local end 8
}

clear
forvalues i=1/`end' {
	di `i'
	append using `traum`i''
}


//# of trauma hospitalizations
by spid wave, sort: gen n_trauma=_N
by spid: gen ind_prev_trauma=_n>1
label var n_trauma "Number of hospitalizations for trauma observed prior to wave (or since prev wave)"
label var ind_prev_trauma "Indicator index trauma is first traumatic hospitalization observed"




/*generate iss code using severity and body type

iss is the sum of the squared value of the three most-severely-injured body regions
iss is max (75) if the severity in any region is 6 (6=currently unsurvivable)
*/

/*it looks like the severity=9 are burn codes that (at least for ICD-9) don't 
have ISSs associated with them*/
replace severity=. if severity==9

levelsof issbr, local(levels)
foreach l of local levels {
	gen issbr_`l'=issbr==`l'
	local lab : label issbr `l'
	by bene_id clm_num type ivw_date, sort: egen ind_issbr_`l'=max(issbr_`l')
	label var ind_issbr_`l' "`lab'"
}
egen n_issbr=rowtotal(ind_issbr_*)
label var n_issbr "# of different body regions"

by bene_id clm_num type issbr, sort: egen maxsev=max(severity)
keep if severity==maxsev
drop maxsev

sort bene_id clm_num type severity
by bene_id clm_num type: keep if _n<=3
gen sev2=severity^2

by bene_id clm_num type: egen iss=total(sev2)
label var iss "ISS"
by bene_id clm_num type, sort: egen maxsev=max(severity)
replace iss=75 if maxsev==6
replace iss=. if iss==0
drop clm_num trauma severity issbr* anym sev2 maxsev 
rename admit_date index_date
destring traumhos, replace
by spid wave index_date, sort: egen ind_trauma_hosp=max(traumhos)
label var ind_trauma_hosp "Trauma hospital"
drop traumhos

//only keep highest iss per ivw
sort spid wave iss
by spid wave: keep if _n==_N
//only first per person
by spid: keep if _n==1



save "${intpath}\index_stay`period'", replace

keep spid bene_id index_date ivw_date
gen ivw_year=year(ivw_date)
saveold "${intpath}\index`period'", replace version(12)

}

H="10/7 get index changed"
//grab aha data from 2017 to get trauma center info
use "D:\Outside_data\AHA data\aha2017.dta", clear
rename mcrnum prvdr_num
drop if missing(prvdr_num) 
tempfile aha
save `aha'

//just pull ivw dates to match to the dx, only for rounds 1,5,7 to match to NSOC later
use "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", clear
keep if sp_ivw==1 & lml==0
keep spid ivw_date wave
merge m:1 spid using "D:\NHATS\Shared\raw\CMS\NHATS CMS DUA 28016\Crosswalks\xwalk_2016.dta", ///
keep(match master) nogen keepusing(bene)
sort spid wave
by spid: gen ivw_date_n1=ivw_date[_n-1]
by spid: gen ivw_date_p1=ivw_date[_n+1]
tempfile nhats
save `nhats'

//get trauma dx and iss info
import excel using "D:\NHATS\Projects\trauma\zc_trauma_dyad\ref_docs\icdtrauma_from_stata.xls", firstrow clear
rename dx dtrunc
keep dtrunc sev issb
replace issbr="Abdomen" if issbr=="4"
replace issbr="Chest" if issbr=="3"
replace issbr="Extremities" if issbr=="5"
replace issbr="Face" if issbr=="2"
replace issbr="External" if inlist(issbr,"6","9","General")
replace issbr="Head/Neck" if issbr=="1"

encode issbr, gen(region) label(issbr)

drop issbr
rename region issbr
tempfile t1
save `t1'

local type=1

/*pull claims, only inpatient*/
foreach x in ip_06 {

	use "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA/`x'_17.dta", clear
	if "`x'"=="ip_06" {
		merge m:1 prvdr_num using `aha', ///
		keep(match master) gen(aham) keepusing(traumhos)
		egen icu_days=rowtotal(icarecnt crnryday)
		gen ind_procedure=!missing(icd_prcdr_cd1)
		tab icd_prcdr_cd1
		
		label define discharge_disp 1 "Home, no services" 2 "Home with services" ///
		3 "SNF" 4 "Rehab Facility" 5 "Hospice (including home)" 6 "Deceased" 7 "Other"
		gen discharge_disp=ptnt_dschrg_stus_cd=="01"
		replace discharge_disp=2 if inlist(ptnt_dschrg_stus_cd,"06","08")
		replace discharge_disp=3 if inlist(ptnt_dschrg_stus_cd,"03","61")
		replace discharge_disp=4 if inlist(ptnt_dschrg_stus_cd,"62")
		replace discharge_disp=5 if inlist(ptnt_dschrg_stus_cd,"50","51")
		replace discharge_disp=6 if inlist(ptnt_dschrg_stus_cd,"20","40","41","42")
		replace discharge_disp=7 if !discharge_disp
		label values discharge_disp discharge_disp
		gen los=disch_date-admit_date+1
		keep bene_id icd_dgns_cd* icd_dgns_e_cd* admit_date icu_days ind_procedure discharge_disp ///
		los traumhos clm_id icd_prcdr_cd1
}
	
	else keep bene_id icd_dgns_cd* admit_date disch_date icd_prcdr_cd1
	gen clm_num=_n
	reshape long icd_dgns_cd icd_dgns_e_cd, i(clm_num) j(num)
	rename icd_dgns_cd diag
	rename icd_dgns_e_cd ecode
	*keep if inlist(substr(diag,1,1),"8","9","S","T") 
	drop if missing(diag)
	gen type=`type'
	local type=`type'+1

	if "`x'"!="pb_09" {
		tempfile `x'
		save ``x''
}
}

/*
append using `ip_06'
append using `op_09'*/
label define type 1 "IP" 2 "OP" 3 "PB"
label values type type

sort bene_id admit_date diag
duplicates drop

//icd9
gen trauma=inlist(substr(diag,1,1),"8") | (substr(diag,1,1)=="9" & inlist(substr(diag,2,1),"0","1","2","3","4","5"))
replace trauma=0 if inrange(real(substr(diag,1,3)),905,909) | inrange(real(substr(diag,1,3)),910,924) | inrange(real(substr(diag,1,3)),930,939)
//icd10
replace trauma=1 if (substr(diag,1,1)=="S" & inlist(substr(diag,7,1),"A","B","C")) | inlist(substr(diag,1,3),"T07","T14","T30","T31","T32") | (substr(diag,1,4)=="T79A" & substr(diag,3,1)!="0" & substr(diag,7,1)=="A") | (substr(diag,1,2)=="T2" & substr(diag,3,1)!="9" & substr(diag,7,1)=="A")
replace trauma=0 if inlist(substr(diag,7,1),"D","G","K","S") | (substr(diag,1,1)=="S" & substr(diag,3,1)=="0")


//tbi
gen tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"0") & ///
inlist(substr(diag,3,1),"0","1","3","4")

replace tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"0","1","2","3","4")

replace tbi=trauma==1 & diag=="95901"

replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"0","1","8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"9") ///
 & inlist(substr(diag,5,1),"1")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S06") & ///
inlist(substr(diag,4,1),"0","1","2","3","4","5","6","8","9")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"9") & ///
inlist(substr(diag,5,1),"0")


//motor vehicle crash--V87?
gen vehicle_crash=/*inlist(substr(ecode,1,4),"V890","V892","V894") ///
| inlist(substr(ecode,1,3),"X82","V38","V34","V30","V39","E81","V00","V02","V03") ///
| inlist(substr(ecode,1,3),"V04","V05","V09") ///
| inlist(substr(ecode,1,2),"V6")*/ inlist(substr(ecode,1,3),"V12","V13","V14") | inlist(substr(ecode,1,2),"V2","V3","V4","V5","V6","V7") | (inlist(substr(ecode,1,2),"E8") & inlist(substr(ecode,3,1),"1"/*,"2"*/))

//falls
gen fall=inlist(substr(ecode,1,3),"E88") | inlist(substr(ecode,1,1),"W") & ///
 inlist(substr(ecode,2,1),"0","1")

tempfile a 
save "`a'", 

import sas using "D:\NHATS\Projects\trauma\zc_trauma_dyad\ref_docs\Received from ZC 08192019\icd10to9.sas7bdat", case(lower) clear
keep icd9 icd10
gen diag=icd10
duplicates drop
tempfile xwalk
save `xwalk'

use "`a'", clear

joinby diag using `xwalk', unm(master) _merge(xmerge) 
 
rename diag diag1
gen diag=diag1 if xmerge==1
replace diag=icd9 if xmerge==3
drop xmerge


//get complications 
//note--only have ICD-9, need to get 10 from Zara at some point
gen ind_comp_intraop=inlist(substr(diag,1,3),"900","901","902","903","904") & num>1
replace ind_comp_intraop=inlist(substr(diag,1,4),"4582","5121","9982","9991") & num>1
replace ind_comp_intraop=inlist(substr(diag,1,5),"41511") & num>1

gen ind_comp_cardiac=inlist(substr(diag,1,3),"410","411") & num>1
replace ind_comp_cardiac=inlist(substr(diag,1,4),"4275","9971","4294") & num>1

gen ind_comp_resp=inlist(substr(diag,1,3),"480","481","482","483","485","486","514") & num>1
replace ind_comp_resp=inlist(substr(diag,1,4),"5070","5184","5185","7991","9973") & num>1
replace ind_comp_resp=inlist(substr(diag,1,5),"51881") & num>1

gen ind_comp_vasc=inlist(substr(diag,1,3),"430","431","433","434","435","436","451","453") & num>1
replace ind_comp_vasc=inlist(substr(diag,1,4),"4151","442","4448","4599","9972","9997","9992") & num>1

gen ind_comp_wound=inlist(substr(diag,1,3),"567") & num>1
replace ind_comp_wound=inlist(substr(diag,1,4),"5688","5697","6088","9981","9983","9986") & num>1
replace ind_comp_wound=inlist(substr(diag,1,5),"99814","99851") & num>1

gen ind_comp_genitourinary=inlist(substr(diag,1,3),"590","591","596","597","604") & num>1
replace ind_comp_genitourinary=inlist(substr(diag,1,4),"5933","5934","5935","5991","7882","9963","9975") & num>1

gen ind_comp_gastro=inlist(substr(diag,1,3),"558","560") & num>1
replace ind_comp_gastro=inlist(substr(diag,1,4),"5311","5312","5321","5322","5323","5401","7876") & num>1
replace ind_comp_gastro=inlist(substr(diag,1,4),"9974","5692","5693","5695","5696","5793") & num>1
replace ind_comp_gastro=inlist(substr(diag,1,5),"00845") & num>1

gen ind_comp_neuro=inlist(substr(diag,1,3),"436","951","952","953","954","955","956","354","355") & num>1
replace ind_comp_neuro=inlist(substr(diag,1,4),"9970","7234") & num>1

gen ind_comp_infect=inlist(substr(diag,1,3),"038") & num>1
replace ind_comp_infect=inlist(substr(diag,1,4),"9985","9993","0545","7907") & num>1
replace ind_comp_infect=inlist(substr(diag,1,5),"53641","51901","99591","99592") & num>1

gen ind_comp_misc=inlist(substr(diag,1,3),"584") & num>1
replace ind_comp_misc=inlist(substr(diag,1,4),"0418","2768","4589","7823","7824","7855","9950","9954","9994") & num>1
replace ind_comp_misc=inlist(substr(diag,1,4),"9996","9997","9984","9987","9988","9989","5364","5793") & num>1
replace ind_comp_misc=inlist(substr(diag,1,5),"99586") & num>1

egen ind_comp_any=rowmax(ind_comp*)
label var ind_comp_any "Any complication during index stay"

sort clm_num num 

foreach x in ind_comp_intraop ind_comp_cardiac ind_comp_resp ind_comp_vasc ind_comp_wound ind_comp_genitourinary ind_comp_gastro ind_comp_neuro ind_comp_infect ind_comp_misc ind_comp_any{
bys clm_id admit_date bene_id diag: egen `x'_max=max(`x')
drop `x'
}

duplicates drop clm_id admit_date bene_id diag, force

foreach x in ind_comp_intraop ind_comp_cardiac ind_comp_resp ind_comp_vasc ind_comp_wound ind_comp_genitourinary ind_comp_gastro ind_comp_neuro ind_comp_infect ind_comp_misc ind_comp_any{
rename `x'_max `x'
}

//use egen to add complications to the trauma dx rows
foreach x of varlist ind_comp* {
	by bene_id clm_num type, sort: egen this=max(`x')
	replace `x'=this
	drop this
}

gen icd9=inlist(substr(diag,1,1),"8","9")


keep if trauma
duplicates drop

label var icd_prcdr_cd1 "Procedure codes"

tabout icd_prcdr_cd1 using "D:\NHATS\Projects\trauma\zc_trauma_dyad\output\in_progress\tabout_procedure.rtf", replace c(col) sort
tab icd_prcdr_cd1, sort

gen length=length(diag)
gen dtrunc=diag

merge m:1 dtrunc using `t1', keep(match master) gen(m1)
gen anym=m1==3

forvalues m=2/5 {

	replace dtrunc=substr(dtrunc,1,length-1)
	replace length=length-1

	merge m:1 dtrunc using `t1', update keep(match master match_update) gen(m`m')
	replace anym=1 if m`m'==3
	
}

rename discharge_disp z
save "${intpath}\traumacodesnewway.dta", replace



//bring in ISS & region from icdpic code from Molly
merge 1:1 clm_id admit_date bene_id diag using "${intpath}\traumacodesfromstata"

drop m* d* ecode num length
rename z discharge_disp
duplicates drop

tempfile trauma
save `trauma'

//use pre and post

foreach period in pre post {
if "`period'"=="pre" {
forvalues i=1/8 {
	use `nhats' if wave==`i', clear
	merge 1:m bene_id using `trauma', keep(match) nogen
	drop if admit_date>=ivw_date | (admit_date<ivw_date_n1 & !missing(ivw_date_n1)) | ///
	(ivw_date-admit_date>365)
	drop ivw_date_*
	rename ivw_date ivw_date
	rename wave wave
	tempfile traum`i'
	save `traum`i''
}
	local end 8
}

else {
forvalues i=1/8 {
	use `nhats' if wave==`i', clear
	merge 1:m bene_id using `trauma', keep(match) nogen
	drop if admit_date<ivw_date | admit_date-ivw_date>365 | admit_date>ivw_date_p1
	drop ivw_date_* 
	rename ivw_date ivw_date
	rename wave wave
	tempfile traum`i'
	save `traum`i''
}
	local end 8
}

clear
forvalues i=1/`end' {
	di `i'
	append using `traum`i''
}


//# of trauma hospitalizations
by spid wave, sort: gen n_trauma=_N
by spid: gen ind_prev_trauma=_n>1
label var n_trauma "Number of hospitalizations for trauma observed prior to wave (or since prev wave)"
label var ind_prev_trauma "Indicator index trauma is first traumatic hospitalization observed"




/*generate iss code using severity and body type

iss is the sum of the squared value of the three most-severely-injured body regions
iss is max (75) if the severity in any region is 6 (6=currently unsurvivable)
*/

/*it looks like the severity=9 are burn codes that (at least for ICD-9) don't 
have ISSs associated with them*/
replace severity=. if severity==9

levelsof issbr, local(levels)
foreach l of local levels {
	gen issbr_`l'=issbr==`l'
	local lab : label issbr `l'
	by bene_id clm_num type ivw_date, sort: egen ind_issbr_`l'=max(issbr_`l')
	label var ind_issbr_`l' "`lab'"
}
egen n_issbr=rowtotal(ind_issbr_*)
label var n_issbr "# of different body regions"

by bene_id clm_num type issbr, sort: egen maxsev=max(severity)
keep if severity==maxsev
drop maxsev

sort bene_id clm_num type severity
by bene_id clm_num type: keep if _n<=3
gen sev2=severity^2

by bene_id clm_num type: egen iss=total(sev2)
label var iss "ISS"
by bene_id clm_num type, sort: egen maxsev=max(severity)
replace iss=75 if maxsev==6
replace iss=. if iss==0
drop clm_num trauma severity issbr* anym sev2 maxsev 
rename admit_date index_date
destring traumhos, replace
by spid wave index_date, sort: egen ind_trauma_hosp=max(traumhos)
label var ind_trauma_hosp "Trauma hospital"
drop traumhos

//only keep highest iss per ivw
sort spid wave iss
by spid wave: keep if _n==_N
//only first per person
by spid: keep if _n==1



save "${intpath}\index_stay`period'", replace

keep spid bene_id index_date ivw_date
gen ivw_year=year(ivw_date)
saveold "${intpath}\index`period'", replace version(12)

}

H="get Charlson"
foreach period in pre post {
use bene_id ivw_date using "${intpath}\index_stay`period'", clear

local start 06
foreach x in ip pb op snf hh hs dm {
	preserve
	merge 1:m bene_id using "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA/`x'_`start'_17.dta", ///
	keep(match) nogen
	keep if inrange(admit_date,ivw_date-365,ivw_date)
	keep bene_id icd_dgns_cd*
	gen num=_n
	reshape long icd_dgns_cd, i(num) j(obsn)
	drop num obsn
	duplicates drop
	tempfile `x'
	save ``x''
	restore
	local start 09
}

clear all
foreach x in ip pb op snf hh hs dm {
	append using ``x''
}

duplicates drop
rename icd dx

*Myocardial Infarction
gen charlson_1=(substr(dx,1,3)=="410" | ///
               substr(dx,1,3)=="412" | ///
			   substr(dx,1,3)=="I21" | ///
               substr(dx,1,3)=="I22" | ///
               substr(dx,1,4)=="I252")

*Congestive Heart Failure
gen charlson_2=(substr(dx,1,3)=="428" | ///
   			   substr(dx,1,4)=="I099" | ///
               substr(dx,1,4)=="I110" | ///
               substr(dx,1,4)=="I130" | ///
               substr(dx,1,4)=="I132" | ///
               substr(dx,1,4)=="I255" | ///
               substr(dx,1,4)=="I420" | ///
               substr(dx,1,4)=="I425" | ///
               substr(dx,1,4)=="I426" | ///
               substr(dx,1,4)=="I427" | ///
               substr(dx,1,4)=="I428" | ///
               substr(dx,1,4)=="I429" | ///
               substr(dx,1,3)=="I43"  | ///
               substr(dx,1,3)=="I50"  | ///
               substr(dx,1,4)=="P290")


*Periphral Vascular Disease
gen charlson_3=(substr(dx,1,4)=="0930" | ///
               substr(dx,1,4)=="4373" | ///
               substr(dx,1,3)=="440" | ///
               substr(dx,1,3)=="441" | ///
               substr(dx,1,4)=="4431" | ///
               substr(dx,1,4)=="4432" | ///
               substr(dx,1,4)=="4438" | ///
               substr(dx,1,4)=="4439" | ///
               substr(dx,1,4)=="4471" | ///
               substr(dx,1,4)=="5571" | ///
               substr(dx,1,4)=="5579" | ///
               substr(dx,1,4)=="V434" | ///
    		   substr(dx,1,3)=="I70" | ///
               substr(dx,1,3)=="I71" | ///
               substr(dx,1,4)=="I731" | ///
               substr(dx,1,4)=="I738" | ///
               substr(dx,1,4)=="I739" | ///
               substr(dx,1,4)=="I771" | ///
               substr(dx,1,4)=="I790" | ///
               substr(dx,1,4)=="I792" | ///
               substr(dx,1,4)=="K551" | ///
               substr(dx,1,4)=="K558" | ///
               substr(dx,1,4)=="K559" | ///
			   substr(dx,1,4)=="Z958" | ///
               substr(dx,1,4)=="Z959")

 *Cerebrovascular Disease 
gen charlson_4=(substr(dx,1,5)=="36234" | ///
               substr(dx,1,3)=="430" | ///
               substr(dx,1,3)=="431" | ///
               substr(dx,1,3)=="432" | ///
               substr(dx,1,3)=="433" | ///
               substr(dx,1,3)=="434" | ///
               substr(dx,1,3)=="435" | ///
               substr(dx,1,3)=="436" | ///
               substr(dx,1,3)=="437" | ///
               substr(dx,1,3)=="438" | ///
			   substr(dx,1,3)=="G45" | ///
               substr(dx,1,3)=="G46" | ///
               substr(dx,1,4)=="H340" | ///
               substr(dx,1,3)=="I60" | ///
               substr(dx,1,3)=="I61" | ///
               substr(dx,1,3)=="I62" | ///
               substr(dx,1,3)=="I63" | ///
               substr(dx,1,3)=="I64" | ///
               substr(dx,1,3)=="I65" | ///
			   substr(dx,1,3)=="I66" | ///
               substr(dx,1,3)=="I67" | ///
               substr(dx,1,3)=="I68" | ///
               substr(dx,1,3)=="I69")

*Dementia 
gen charlson_5=(substr(dx,1,3)=="290" | ///
               substr(dx,1,4)=="2941" | ///
               substr(dx,1,4)=="3312" | ///
			   substr(dx,1,3)=="F00" | ///
               substr(dx,1,3)=="F01" | ///
               substr(dx,1,3)=="F02" | ///
               substr(dx,1,3)=="F03" | ///
               substr(dx,1,4)=="F051" | ///
               substr(dx,1,3)=="G30" | ///
               substr(dx,1,4)=="G311")

	*Chronic Pulmonary Disease 
gen charlson_6=(substr(dx,1,4)=="4168" | ///
               substr(dx,1,4)=="4169" | ///
               substr(dx,1,3)=="490" | ///
               substr(dx,1,3)=="491" | ///
               substr(dx,1,3)=="492" | ///
               substr(dx,1,3)=="493" | ///
               substr(dx,1,3)=="494" | ///
               substr(dx,1,3)=="495" | ///
               substr(dx,1,3)=="496" | ///
               substr(dx,1,3)=="500" | ///
               substr(dx,1,3)=="501" | ///
               substr(dx,1,3)=="502" | ///
               substr(dx,1,3)=="503" | ///
               substr(dx,1,3)=="504" | ///
               substr(dx,1,3)=="505" | ///
               substr(dx,1,4)=="5064" | ///
               substr(dx,1,4)=="5081" | ///
               substr(dx,1,4)=="5088" | ///
			   substr(dx,1,4)=="I278" | ///
               substr(dx,1,4)=="I279" | ///
               substr(dx,1,3)=="J40" | ///
               substr(dx,1,3)=="J41" | ///
               substr(dx,1,3)=="J42" | ///
               substr(dx,1,3)=="J43" | ///
               substr(dx,1,3)=="J44" | ///
               substr(dx,1,3)=="J45" | ///
               substr(dx,1,3)=="J46" | ///
               substr(dx,1,3)=="J47" | ///
               substr(dx,1,3)=="J60" | ///
               substr(dx,1,3)=="J61" | ///
               substr(dx,1,3)=="J62" | ///
               substr(dx,1,3)=="J63" | ///
               substr(dx,1,3)=="J64" | ///
               substr(dx,1,3)=="J65" | ///
               substr(dx,1,3)=="J66" | ///
			   substr(dx,1,3)=="J67" | ///
               substr(dx,1,4)=="J684" | ///
               substr(dx,1,4)=="J701" | ///
               substr(dx,1,4)=="J703")

*Connective Tissue Disease-Rheumatic Disease
gen charlson_7=(substr(dx,1,4)=="4465" | ///
               substr(dx,1,4)=="7100" | ///
               substr(dx,1,4)=="7101" | ///
               substr(dx,1,4)=="7102" | ///
               substr(dx,1,4)=="7103" | ///
               substr(dx,1,4)=="7104" | ///
               substr(dx,1,4)=="7140" | ///
               substr(dx,1,4)=="7141" | ///
               substr(dx,1,4)=="7142" | ///
               substr(dx,1,4)=="7148" | ///
               substr(dx,1,3)=="725" | ///
			   substr(dx,1,3)=="M05" | ///
               substr(dx,1,3)=="M06" | ///
               substr(dx,1,4)=="M315" | ///
               substr(dx,1,3)=="M32" | ///
               substr(dx,1,3)=="M33" | ///
               substr(dx,1,3)=="M34" | ///
               substr(dx,1,4)=="M351" | ///
               substr(dx,1,4)=="M353" | ///
               substr(dx,1,4)=="M360")

*Peptic Ulcer Disease
gen charlson_8=(substr(dx,1,3)=="531" | ///
               substr(dx,1,3)=="532" | ///
               substr(dx,1,3)=="533" | ///
               substr(dx,1,3)=="534" | ///
			   substr(dx,1,3)=="K25" | ///
               substr(dx,1,3)=="K26" | ///
               substr(dx,1,3)=="K27" | ///
               substr(dx,1,3)=="K28")

*Mild Liver Disease 
gen charlson_9=(substr(dx,1,5)=="07022" | ///
               substr(dx,1,5)=="07023" | ///
               substr(dx,1,5)=="07032" | ///
               substr(dx,1,5)=="07033" | ///
               substr(dx,1,5)=="07044" | ///
               substr(dx,1,5)=="07054" | ///
               substr(dx,1,4)=="0706" | ///
               substr(dx,1,4)=="0709" | ///
               substr(dx,1,3)=="570" | ///
               substr(dx,1,3)=="571" | ///
               substr(dx,1,4)=="5733" | ///
               substr(dx,1,4)=="5734" | ///
               substr(dx,1,4)=="5738" | ///
               substr(dx,1,4)=="5739" | ///
               substr(dx,1,4)=="V427" | ///
			   substr(dx,1,3)=="B18" | ///
               substr(dx,1,4)=="K700" | ///
               substr(dx,1,4)=="K701" | ///
               substr(dx,1,4)=="K702" | ///
               substr(dx,1,4)=="K703" | ///
               substr(dx,1,4)=="K709" | ///
               substr(dx,1,4)=="K713" | ///
               substr(dx,1,4)=="K714" | ///
               substr(dx,1,4)=="K715" | ///
               substr(dx,1,4)=="K717" | ///
               substr(dx,1,3)=="K73" | ///
               substr(dx,1,3)=="K74" | ///
               substr(dx,1,4)=="K76" | ///
               substr(dx,1,4)=="K762" | ///
			   substr(dx,1,4)=="K763" | ///
               substr(dx,1,4)=="K764" | ///
               substr(dx,1,4)=="K768" | ///
			   substr(dx,1,4)=="K769" | ///
               substr(dx,1,4)=="Z944")

*Diabetes without complications 
gen charlson_10=(substr(dx,1,4)=="2500" | ///
               substr(dx,1,4)=="2501" | ///
               substr(dx,1,4)=="2502" | ///
               substr(dx,1,4)=="2503" | ///
               substr(dx,1,4)=="2508" | ///
               substr(dx,1,4)=="2509" | ///
			substr(dx,1,4)=="E100" | ///
		substr(dx,1,4)=="E101" | ///
		substr(dx,1,4)=="E106" | ///
		substr(dx,1,4)=="E108" | ///
		substr(dx,1,4)=="E109" | ///
		substr(dx,1,4)=="E110" | ///
        substr(dx,1,4)=="E111" | ///
		substr(dx,1,4)=="E116" | ///
		substr(dx,1,4)=="E118" | ///
		substr(dx,1,4)=="E119" | ///
		substr(dx,1,4)=="E120" | ///
		substr(dx,1,4)=="E121" | ///
		substr(dx,1,4)=="E126" | ///
		substr(dx,1,4)=="E128" | ///
		substr(dx,1,4)=="E129" | ///
		substr(dx,1,4)=="E130" | ///
		substr(dx,1,4)=="E131" | ///
		substr(dx,1,4)=="E136" | ///
		substr(dx,1,4)=="E138" | ///
        substr(dx,1,4)=="E139" | ///
		substr(dx,1,4)=="E140" | ///
		substr(dx,1,4)=="E141" | ///
		substr(dx,1,4)=="E146" | ///
		substr(dx,1,4)=="E148" | ///
		substr(dx,1,4)=="E149")

*Diabetes, complicated
gen charlson_11=(substr(dx,1,4)=="2504" | ///
		substr(dx,1,4)=="2505" | ///
		substr(dx,1,4)=="2506" | ///
		substr(dx,1,4)=="2507" | ///
        substr(dx,1,4)=="E102" | ///
		substr(dx,1,4)=="E103" | ///
		substr(dx,1,4)=="E104" | ///
		substr(dx,1,4)=="E105" | ///
		substr(dx,1,4)=="E107" | ///
		substr(dx,1,4)=="E112" | ///
		substr(dx,1,4)=="E113" | ///
		substr(dx,1,4)=="E114" | ///
        substr(dx,1,4)=="E115" | ///
		substr(dx,1,4)=="E117" | ///
        substr(dx,1,4)=="E122" | ///
		substr(dx,1,4)=="E123" | ///
		substr(dx,1,4)=="E124" | ///
		substr(dx,1,4)=="E125" | ///
		substr(dx,1,4)=="E127" | ///
		substr(dx,1,4)=="E132" | ///
		substr(dx,1,4)=="E133" | ///
		substr(dx,1,4)=="E134" | ///
        substr(dx,1,4)=="E135" | ///
		substr(dx,1,4)=="E137" | ///
		substr(dx,1,4)=="E142" | ///
		substr(dx,1,4)=="E143" | ///
		substr(dx,1,4)=="E144" | ///
        substr(dx,1,4)=="E145" | ///
		substr(dx,1,4)=="E147")

*Paraplegia and Hemiplegia 
gen charlson_12=(substr(dx,1,4)=="3341" | ///
		substr(dx,1,3)=="342" | ///
		substr(dx,1,3)=="343" | ///
		substr(dx,1,4)=="3440" | ///
		substr(dx,1,4)=="3441" | ///
		substr(dx,1,4)=="3442" | ///
		substr(dx,1,4)=="3443" | ///
                substr(dx,1,4)=="3444" | ///
		substr(dx,1,4)=="3445" | ///
		substr(dx,1,4)=="3446" | ///
		substr(dx,1,4)=="3449" | ///
		substr(dx,1,4)=="G041" | ///
		substr(dx,1,4)=="G114" | ///
		substr(dx,1,4)=="G801" | ///
		substr(dx,1,4)=="G802" | ///
		substr(dx,1,3)=="G81" | ///
		substr(dx,1,3)=="G82" | ///
		substr(dx,1,4)=="G830" | ///
        substr(dx,1,4)=="G834" | ///
		substr(dx,1,4)=="G839")

* Renal Disease 
gen charlson_13=(substr(dx,1,5)=="40301" | ///
		substr(dx,1,5)=="40311" | ///
		substr(dx,1,5)=="40391" | ///
		substr(dx,1,5)=="40402" | ///
		substr(dx,1,5)=="40403" | ///
		substr(dx,1,5)=="40412" | ///
		substr(dx,1,5)=="40413" | ///
                substr(dx,1,5)=="40492" | ///
		substr(dx,1,5)=="40493" | ///
		substr(dx,1,3)=="582" | ///
		substr(dx,1,4)=="5830" | ///
                substr(dx,1,4)=="5831" | ///
                substr(dx,1,4)=="5832" | ///
                substr(dx,1,4)=="5834" | ///
                substr(dx,1,4)=="5836" | ///
                substr(dx,1,4)=="5837" | ///
                substr(dx,1,3)=="585" | ///
                substr(dx,1,3)=="586" | ///
                substr(dx,1,4)=="5880" | ///
                substr(dx,1,4)=="V420" | ///
                substr(dx,1,4)=="V451" | ///
                substr(dx,1,3)=="V56" | ///
			substr(dx,1,4)=="I120" | ///
		substr(dx,1,4)=="I131" | ///
		substr(dx,1,4)=="N032" | ///
		substr(dx,1,4)=="N033" | ///
		substr(dx,1,4)=="N034" | ///
		substr(dx,1,4)=="N035" | ///
		substr(dx,1,4)=="N036" | ///
        substr(dx,1,4)=="N037" | ///
		substr(dx,1,4)=="N052" | ///
		substr(dx,1,4)=="N053" | ///
		substr(dx,1,4)=="N054" | ///
                substr(dx,1,4)=="N055" | ///
                substr(dx,1,4)=="N056" | ///
                substr(dx,1,4)=="N057" | ///
                substr(dx,1,3)=="N18" | ///
                substr(dx,1,3)=="N19" | ///
                substr(dx,1,4)=="N250" | ///
                substr(dx,1,4)=="Z490" | ///
                substr(dx,1,4)=="Z491" | ///
                substr(dx,1,4)=="Z492" | ///
                substr(dx,1,4)=="Z940" | ///
                substr(dx,1,4)=="Z992" )

*Cancer 
gen charlson_14=(substr(dx,1,2)=="14" | ///
		substr(dx,1,2)=="15" | ///
		substr(dx,1,2)=="16" | ///
		substr(dx,1,3)=="170" | ///
		substr(dx,1,3)=="171" | ///
		substr(dx,1,3)=="172" | ///
		substr(dx,1,3)=="174" | ///
		substr(dx,1,3)=="175" | ///
		substr(dx,1,3)=="176" | ///
		substr(dx,1,3)=="179" | ///
		substr(dx,1,2)=="18" | ///
		substr(dx,1,3)=="190" | ///
		substr(dx,1,3)=="191" | ///
		substr(dx,1,3)=="192" | ///
		substr(dx,1,3)=="193" | ///
		substr(dx,1,3)=="194" | ///
		substr(dx,1,3)=="195" | ///
                substr(dx,1,3)=="200" | ///
                substr(dx,1,3)=="201" | ///
                substr(dx,1,3)=="202" | ///
                substr(dx,1,3)=="203" | ///
                substr(dx,1,3)=="204" | ///
                substr(dx,1,3)=="205" | ///
                substr(dx,1,3)=="206" | ///
                substr(dx,1,3)=="207" | ///
                substr(dx,1,3)=="208" | ///
                substr(dx,1,4)=="2386" | ///
			substr(dx,1,3)=="C00" | ///
		substr(dx,1,3)=="C01" | ///
		substr(dx,1,3)=="C02" | ///
		substr(dx,1,3)=="C03" | ///
		substr(dx,1,3)=="C04" | ///
		substr(dx,1,3)=="C05" | ///
		substr(dx,1,3)=="C06" | ///
		substr(dx,1,3)=="C07" | ///
		substr(dx,1,3)=="C08" | ///
		substr(dx,1,3)=="C09" | ///
		substr(dx,1,3)=="C10" | ///
		substr(dx,1,3)=="C11" | ///
		substr(dx,1,3)=="C12" | ///
		substr(dx,1,3)=="C13" | ///
		substr(dx,1,3)=="C14" | ///
		substr(dx,1,3)=="C15" | ///
		substr(dx,1,3)=="C16" | ///
		substr(dx,1,3)=="C17" | ///
		substr(dx,1,3)=="C18" | ///
		substr(dx,1,3)=="C19" | ///
		substr(dx,1,3)=="C20" | ///
		substr(dx,1,3)=="C21" | ///
		substr(dx,1,3)=="C22" | ///
		substr(dx,1,3)=="C23" | ///
		substr(dx,1,3)=="C24" | ///
		substr(dx,1,3)=="C25" | ///
		substr(dx,1,3)=="C26" | ///
		substr(dx,1,3)=="C30" | ///
		substr(dx,1,3)=="C31" | ///
		substr(dx,1,3)=="C32" | ///
		substr(dx,1,3)=="C33" | ///
		substr(dx,1,3)=="C34" | ///
		substr(dx,1,3)=="C37" | ///
		substr(dx,1,3)=="C38" | ///
		substr(dx,1,3)=="C39" | ///
		substr(dx,1,3)=="C40" | ///
		substr(dx,1,3)=="C41" | ///
		substr(dx,1,3)=="C43" | ///
		substr(dx,1,3)=="C45" | ///
		substr(dx,1,3)=="C46" | ///
		substr(dx,1,3)=="C47" | ///
		substr(dx,1,3)=="C48" | ///
		substr(dx,1,3)=="C49" | ///
		substr(dx,1,3)=="C50" | ///
		substr(dx,1,3)=="C51" | ///
		substr(dx,1,3)=="C52" | ///
		substr(dx,1,3)=="C53" | ///
		substr(dx,1,3)=="C54" | ///
		substr(dx,1,3)=="C55" | ///
		substr(dx,1,3)=="C56" | ///
		substr(dx,1,3)=="C57" | ///
		substr(dx,1,3)=="C58" | ///
		substr(dx,1,3)=="C60" | ///
		substr(dx,1,3)=="C61" | ///
		substr(dx,1,3)=="C62" | ///
		substr(dx,1,3)=="C63" | ///
		substr(dx,1,3)=="C64" | ///
		substr(dx,1,3)=="C65" | ///
		substr(dx,1,3)=="C66" | ///
		substr(dx,1,3)=="C67" | ///
		substr(dx,1,3)=="C68" | ///
		substr(dx,1,3)=="C69" | ///
		substr(dx,1,3)=="C70" | ///
		substr(dx,1,3)=="C71" | ///
		substr(dx,1,3)=="C72" | ///
		substr(dx,1,3)=="C73" | ///
		substr(dx,1,3)=="C74" | ///
		substr(dx,1,3)=="C75" | ///
		substr(dx,1,3)=="C76" | ///
                substr(dx,1,3)=="C81" | ///
                substr(dx,1,3)=="C82" | ///
                substr(dx,1,3)=="C83" | ///
                substr(dx,1,3)=="C84" | ///
                substr(dx,1,3)=="C85" | ///
                substr(dx,1,3)=="C88" | ///
                substr(dx,1,3)=="C90" | ///
                substr(dx,1,3)=="C91" | ///
                substr(dx,1,3)=="C92" | ///
                substr(dx,1,3)=="C93" | ///
                substr(dx,1,3)=="C94" | ///
                substr(dx,1,3)=="C95" | ///
                substr(dx,1,3)=="C96" | /// 
                substr(dx,1,3)=="C97")

* Moderate or Severe Liver Disease 
gen charlson_15=(substr(dx,1,4)=="4560" | ///
		substr(dx,1,4)=="4561" | ///
		substr(dx,1,4)=="4562" | ///
		substr(dx,1,4)=="5722" | ///
		substr(dx,1,4)=="5723" | ///
		substr(dx,1,4)=="5724" | ///
      	substr(dx,1,4)=="5728" | ///
		substr(dx,1,4)=="I850" | ///
		substr(dx,1,4)=="I859" | ///
		substr(dx,1,4)=="I864" | ///
		substr(dx,1,4)=="I982" | ///
		substr(dx,1,4)=="K704" | ///
		substr(dx,1,4)=="K711" | ///
		substr(dx,1,4)=="K721" | ///
        substr(dx,1,4)=="K729" | ///
        substr(dx,1,4)=="K765" | ///
        substr(dx,1,4)=="K766" | ///
        substr(dx,1,4)=="K767")

  * Metastatic Carcinoma 
gen charlson_16=(substr(dx,1,3)=="196" | ///
		substr(dx,1,3)=="197" | ///
		substr(dx,1,3)=="198" | ///
		substr(dx,1,3)=="199" | ///
	substr(dx,1,3)=="C77" | ///
		substr(dx,1,3)=="C78" | ///
		substr(dx,1,3)=="C79" | ///
		substr(dx,1,3)=="C80" )

  * AIDS/HIV 
gen charlson_17=(substr(dx,1,3)=="042" | ///
		substr(dx,1,3)=="043" | ///
		substr(dx,1,3)=="044" | ///
		substr(dx,1,3)=="B20" | ///
		substr(dx,1,3)=="B21" | ///
        substr(dx,1,3)=="B22" | ///
		substr(dx,1,3)=="B24")
		
forvalues i=1/17 {
	by bene_id, sort: egen charls_`i'=max(charlson_`i')
	drop charlson_`i'
}
drop dx
duplicates drop

egen charls_index=rowtotal(charls*)
gen charls_index_wt=charls_index+charls_11+charls_12+charls_13+charls_14 ///
 +charls_15*2+charls_16*5+charls_16*5+charls_17*5
 
label var charls_1 "Myocardial infarction, Charlson"
label var charls_2 "Congestive Heart Failure, Charlson"
label var charls_3 "Peripheral Vascular Disease, Charlson"
label var charls_4 "Cerebrovascular disease, Charlson"
label var charls_5 "Dementia, Charlson"
label var charls_6 "Chronic Pulmonary Disease, Charlson"
label var charls_7 "Rheumatic disease, Charlson"
label var charls_8 "Peptic ulcer disease, Charlson"
label var charls_9 "Mild liver disease, Charlson"
label var charls_10 "Diabetes, uncomplicated, Charlson"
label var charls_11 "Diabetes, complicated, Charlson"
label var charls_12 "Hemiplegia or paraplegia, Charlson"
label var charls_13 "Renal disease, Charlson"
label var charls_14 "Any malignancy except neoplasm of skin, Charlson"
label var charls_15 "Mod or severe liver disease, Charlson"
label var charls_16 "Metastatic solid tumor, Charlson"
label var charls_17 "AIDS/HIV, Charlson"
label var charls_index "Charlson score index, not weighted"
label var charls_index_wt "Charlson score index, weighted"		
		
save "${intpath}\charlson`period'", replace

}

H="get utilization 12 weeks post discharge"
foreach period in pre post {
use bene_id index_date using "${intpath}\index_stay`period'", clear
rename index admit_date
//first get discharge date for index
merge 1:m bene_id admit_date using "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA\ip_06_17.dta", keep(match master) keepusing(disch_date) nogen

//1 person admitted twice on same day, keep one that had overnight stay
by bene_id, sort: drop if _N==2 & admit_date==disch_date
rename disch_date ddate
keep bene_id ddate
tempfile index
save `index'

//get readmissions
merge 1:m bene_id using "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA\ip_06_17.dta", keep(match master) nogen
gen inr=inrange(admit_date,ddate,ddate+84)
by bene_id, sort: egen n_readmit=total(inr)
gen er=inrange(erdaycnt,1,15000) & inr
by bene_id: egen n_ip_ed=total(er)
keep bene_id n_readm n_ip
duplicates drop
tempfile ip
save `ip'

//get ed visits from op
use `index', clear
merge 1:m bene_id  using "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA\op_09_17.dta", keep(match master) nogen keepusing(admit_date erday)
gen inr=inrange(admit_date,ddate,ddate+84)
gen er=inrange(erdaycnt,1,15000) & inr
by bene_id, sort: egen n_op_ed=total(er)
keep bene_id n_op
duplicates drop
tempfile op
save `op'


//snf & hh days
foreach x in snf hh {
	use `index', clear
	merge 1:m bene_id using "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA/`x'_09_17.dta", keep(match master) nogen
	gen inr=inrange(admit_date,ddate,ddate+84)
	replace disch_date=ddate+84 if disch_date>ddate+84
	gen los=disch_date-admit_date
	replace los=1 if los==0
	replace los=0 if !inr
	sort bene_id admit_date disch_date
	by bene_id, sort: egen n_`x'_days=total(los)
	keep bene_id n_`x'
	duplicates drop
	tempfile `x'
	save ``x''
}

use `index', clear
foreach x in ip op snf hh {
	merge 1:1 bene_id using ``x'', nogen keep(match)
}

egen n_ed_vis=rowtotal(n_ip n_op)
save "${intpath}/utilization`period'.dta", replace
}

H="merge nsoc and save final datasets"
//use NHATS only dataset, merge in NSOC, select variables for final dataset


//note--as of 6/28/19, NSOCs still in separate files, but will be unified later, so code will change

//create single NSOC dataset with select variables

use "${nhats}\nsoc_round_1", clear
gen wave=1
append using "${nhats}\nsoc_round_5"
replace wave=5 if missing(wave)
append using "${nhats}\nsoc_round_7"
replace wave=7 if missing(wave)

keep spid opid wave op_age cgfinwgt cgvarunit cgvarstrat ///
cg_female cg_spouse cg_relat* cg_educ cg_gt_hs ///
cg_lives_with_sp cg_medicaid cg_medicare ///
cg_living_children  work_4_pay cg_srh* total_hours_week op*adl*

tempfile nsoc
save `nsoc'

foreach period in pre post {
local period post
use "${intpath}\index_stay`period'" if !missing(spid), clear
merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", ///
keep(match master) nogen

egen adverse_mo=rowmax(adverse_insd adverse_out adverse_bed)
label var adverse_mo "Adv. cons. of unmet need: mobility"
egen adverse_sc=rowmax(adverse_dres adverse_toil adverse_bath adverse_eat)
label var adverse_sc "Adv. cons. of unmet need: self-care"
egen adverse_hh=rowmax(adverse_laun adverse_shop adverse_meal adverse_bank)
label var adverse_hh "Adv. cons. of unmet need: household"
egen adverse_any=rowmax(adverse*)
label var adverse_any "Adv. cons. of unmet need: any"

replace livearr=livearr-1 if livearr>2
replace livearr=4 if rcfres==1
replace livearr=5 if nhres==1
label define livearrang 1 "Lives alone" 3 "With others (and not spouse)" 4 "Residential Care Facility" ///
5 "Nursing Home", modify

replace married=0 if livearr==1 & missing(married)

gen inj_cat=1 if tbi==1
replace inj_cat=2 if !tbi & ind_issbr_6==1
replace inj_cat=3 if !tbi & ind_issbr_5==1
replace inj_cat=4 if !tbi & ind_issbr_1==1
replace inj_cat=5 if ind_issbr_2==1
replace inj_cat=6 if ind_issbr_3==1
replace inj_cat=7 if ind_issbr_4==1
replace inj_cat=8 if n_issbr>1
label define inj_cat 1 "TBI" 2 "Other Head/Neck" 3 "Face" 4 "Abdomen" 5 "Chest" ///
6 "External" 7 "Extremities" 8 "Multiple"
label values inj_cat inj_cat


keep spid wave ivw_date index_date icu_days ind_procedure los ind_comp* icd9 *iss* ///
age female race educ* aveincome income_quart* maritalstat married medicaid medigap ///
tricare livealone livearr rcfres nhres sr_numc prob_dem dem_3_cat adl_impair adl_index sr_phq2_depr apc ///
sr_gad2_a reg_doc_* sr_hosp* n_helpers n_paid ind_paid ind_no_helpers n_trauma ind_prev_trauma bene_id ///
spouse_help_ind tbi vehicle_crash fall inj discharge_disp ind_trauma_hosp death_date adverse* soc_iso frail ///
imputed_inc1 imputed_inc2 imputed_inc3 imputed_inc4 imputed_inc5

replace ind_trauma_hosp=0 if missing(ind_trauma_hosp)
replace frail=frail==2 if !missing(frail)
label var frail "Frail"
foreach x of varlist ind_comp* {
	replace `x'=0 if icd9==.
}
//merge charls & utilization
merge 1:1 bene_id using "${intpath}\charlson`period'", keepusing(charls_*wt) nogen
gen ch3plus=charls_index_wt>2 if !missing(charls)
label var ch3plus "Charlson score >2"

merge 1:1 bene_id using "${intpath}\utilization`period'", nogen
foreach x in readmit snf_days hh_days ed_vis {
	gen ind_`x'=n_`x'>0 if !missing(n_`x')
}


gen ind_died_84=death_date-ddate<=84
label var ind_died_84 "Died w/in 12 weeks of discharge"

gen adl_cat=adl_index==0 if !missing(adl_index)
replace adl_cat=2 if inrange(adl_index,1,2)
replace adl_cat=3 if inrange(adl_index,3,6)
label var adl_cat "ADLs, categorical"
label define adl_cat 1 "Independent in ADLs" 2 "Dependent in 1-2" 3 "Dependent in 3+"
label values adl_cat adl_cat

gen help_cat=ind_no_helpers
replace help_cat=2 if !ind_paid
replace help_cat=3 if n_helpers>n_paid
replace help_cat=4 if n_helpers==n_paid
label var help_cat "Caregiving, categorical"
label define help_cat 1 "No helpers" 2 "Informal help only" 3 "Informal & paid" ///
4 "Paid help only"
label values help_cat help_cat

label define race 1 "White/Other Non-Hispanic", modify
replace race=1 if race==3
rename race_cat race
label copy edulbl education
label values education education

//time trauma to ivw_date
gen traum2ivw=ivw_date-index_date
label var traum2 "Days from trauma to interview"

// Income adjusted for cpi inflation; now in terms of 2017 dollars.
gen income_adj=0
replace income_adj= (245.120/224.939)*aveincome if wave==1
replace income_adj= (245.120/229.594)*aveincome if wave==2
replace income_adj= (245.120/232.957)*aveincome if wave==3
replace income_adj= (245.120/236.736)*aveincome if wave==4
replace income_adj= (245.120/237.017)*aveincome if wave==5
replace income_adj= (245.120/240.007)*aveincome if wave==6
replace income_adj=aveincome if wave==7
label var income_adj "Income, adjusted to 2017$"

//ISS categorical
//9/6/19--run it using the niss from icdpic
replace niss=0 if niss==.
gen iss_cat=1 if niss==1
replace iss_cat=1 if inrange(niss,2,3)
replace iss_cat=3 if niss==4
replace iss_cat=4 if inrange(niss,5,8)
replace iss_cat=5 if niss==9
replace iss_cat=6 if niss>9

label define iss_cat 1 "ISS, categorical: 1-3" /*2 "  2-3"*/ 3 "  4" 4 "  5-8" 5 "  9" 6 "  10+"
label values iss_cat iss_cat

drop if missing(spid)

drop death_date ddate

save "${intpath}\trauma_dyad_nhats`period'", replace

preserve
merge 1:m spid wave using `nsoc', keep(match) nogen
save "${intpath}\trauma_dyad_nsoc`period'", replace
restore

}


H="xmerge pre/post into longitudinal dataset"
use "${intpath}\trauma_dyad_nhatspost", clear
duplicates report spid
keep spid wave ivw_date index_date
foreach x of varlist w i* {
rename `x' `x'_n1
}
gen wave=wave+1
tempfile pre
save `pre'

merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", keep(match master) 
replace _m=1 if !sp_ivw
replace ivw_date=mdy(ivw_month,1,ivw_year) if missing(ivw_date)

gen cat=_m==1
replace cat=2 if lml==1
replace cat=3 if _m==3 & cat!=2
replace cat=4 if _m==3 & wave==8 & lml!=1
label define cat 1 "No p1 interviews" 2 "LML interview only" 3 "P1 interview in waves 2-7" 4 "P1 interview wave 8" 
label values cat cat
tab cat
drop _m
replace wave=wave_n1
tempfile t1
save `t1'


use "${intpath}\trauma_dyad_nhatspre", clear
duplicates report spid
keep spid wave ivw_date index_date
foreach x of varlist w i* {
rename `x' `x'_p1
}
gen wave=wave-1
tempfile pre
save `pre'

merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", keep(match master) gen(othm)
replace othm=1 if !sp_ivw


*append using `t1'
*merge 1:1 spid wave using `t1'
gen cat=1 if othm==1
replace cat=2 if othm==3 
label define cat2 1 "First trauma prior to first interview" 2 "N1 interview in waves 1-6, P1 2-7" 3 "N1 interview wave 7, P1 8" 4 "N1 interview, only LML following trauma" 5 "No P1 interview following trauma" 6 "P1 interview, but >365 days after trauma", modify
label values cat cat2

tab cat
gen set=!missing(othm)
label var set "NHATS post trauma"
tempfile cat 
save `cat'
tab cat

use `t1', clear
tab cat
rename cat catn1
gen time=ivw_date-index_date
keep spid catn1 wave_n1 time index_date_n1

merge 1:1 spid using `cat'

replace cat=3 if catn1==4 & missing(cat)
replace cat=4 if catn1==2 & missing(cat)
replace cat=5 if catn1==1 & missing(cat)
replace cat=6 if missing(cat)

keep if inrange(cat,1,3)
replace wave_p1=8 if missing(wave_p1)
keep spid wave_n1 wave_p1 cat

tempfile t1 
save `t1'

local p post
foreach x in n1 p1 {
	preserve
	keep spid wave_`x'

	rename wave wave 
	merge 1:1 spid wave using "${intpath}\trauma_dyad_nhats`p'", keep(match) nogen keepusing(age female race education educ_hs_ind aveincome maritalstat medicaid medigap tricare livearrang livealone sr_phq2_depressed sr_gad2_anxiety dem_3_cat sr_numconditions1 reg_doc_have reg_doc_seen reg_doc_homevisit sr_hosp_ind sr_hosp_stays n_helpers n_paid_helpers ind_paid_helper ind_no_helpers income_quart married nhres rcfres prob_dem adl_index adl_impair spouse_help_ind ivw_date adl_cat help_cat soc_iso adverse_sc adverse_mo adverse_hh adverse_any soc_iso frail income_adj charls_index_wt ch3plus ind_trauma_hosp)

	rename * *_`x'
	rename spid spid

	tempfile `x'
	save ``x''
	restore
local p pre
}

use "${intpath}\trauma_dyad_nhatspre", clear
gen t=1
append using "${intpath}\trauma_dyad_nhatspost"
replace t=0 if missing(t)
sort spid t
by spid: keep if _n==1
keep spid index_date traum2ivw inj_cat /*charls_index_wt ch3plus*/ n_readmit n_ip_ed n_op_ed n_snf_days n_hh_days n_ed_vis ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84  traum2ivw //income_adj
tempfile t2
save `t2'
use `t1', clear
merge 1:1 spid wave_n1 using `n1', nogen
merge 1:1 spid wave_p1 using `p1', nogen
merge 1:1 spid using `t2', nogen keep(match)

save "${datapath}\sample_final.dta", replace


H="xtable 1"
foreach period in pre {

use "${datapath}\sample_final", clear
keep if !missing(ivw_date_p1)
drop *_n1
rename *_p1 *

local cvars1 age
local ivars1 female 
local catvars1 race /*education*/ livearrang
local cvars2
local ivars2 married educ_hs_ind medicaid medigap tricare
local catvars2
local cvars3 income_adj 
local ivars3 
local catvars3 income_quart
local cvars4 charls_index_wt
local ivars4 ch3plus prob_dem sr_phq2_depressed 
local catvars4 
local cvars5 n_helpers
local ivars5
local catvars5 help_cat

forvalues i=1/5 {
	local cativars`i'
	foreach x of local catvars`i' {
		di "`x'"
		local `x'
		levelsof `x', local(levels)
		foreach l of local levels {
			gen `x'`l'=`x'==`l' if !missing(`x')
			local lab : label `x' `l'
			label var `x'`l' "`lab'"
			local `x' ``x'' `x'`l'
}
		di "``x''"
		local cativars`i' `cativars`i'' ``x''
}
}

di "`catvars1'"
di "`cativars1'"

local rows
forvalues i=1/5 {
local rows `rows' `cvars`i'' `cvars`i'' `cvars`i'' `ivars`i'' `cativars`i''
}

local rn : word count `rows' 1
local r=1
local c=1

mat tab=J(`rn',2,.)
mat stars=J(`rn',2,0)

local n=_N
forvalues i=1/5 {
	foreach x of local cvars`i' {
		sum `x' /*if inlist(dem_cohort,`y')*/, d
		mat tab[`r',`c']=r(mean)
		mat tab [`r'+1,`c']=r(sd)
		mat tab[`r'+2,`c']=r(p50)
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		local r=`r'+3
		
}
	foreach x of local ivars`i' {
		sum `x' 
		if r(N)*r(mean)>=11 | r(N)==0 | r(N)==r(N)*r(mean) mat tab[`r',`c']=r(mean)*100
		else mat stars[`r',`c']=3
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		local r=`r'+1
}
	foreach x of local catvars`i' {
		sum `x'
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		
		foreach z of local `x' {
			sum `z' 
			if r(N)*r(mean)>=11 | r(N)==0 | r(N)==r(N)*r(mean) mat tab[`r',`c']=r(mean)*100
			else mat stars[`r',`c']=3
			local r=`r'+1
}
}
}
mat tab[`r',`c']=`n'
	

mat rownames tab=`cvars1' SD Median `ivars1' `cativars1' `ivars2' `cativars2' ///
income_adj SD Median `ivars3' `cativars3' charls_index_wt SD Median `ivars4' `cativars4' ///
n_helpers SD Median `ivars5' `cativars5' N

if "`period'"=="pre" local title Trauma with NHATS interview following
else local title Trauma with prior NHATS interview
frmttable using "${outpath}\table_1_`period'`c(current_date)'.rtf", ///
statmat(tab) title("Characteristics of Sample: `title'") ///
ctitles("" "Mean/%" "N Missing") varlabels ///
sdec(2,0) annotate(stars) asymbol(*,**,NR) replace
}

H="xtable 1 pre/post"

use "${datapath}\sample_final", clear
keep if !missing(ivw_date_n1)


local cvars1 age
local ivars1 female 
local catvars1 race /*education*/
local cvars2
local ivars2 married educ_hs_ind medicaid medigap tricare
local catvars2 livearrang
local cvars3 income_adj 
local ivars3 
local catvars3 income_quart
local cvars4 charls_index_wt
local ivars4 ch3plus prob_dem sr_phq2_depressed 
local catvars4 
local cvars5 n_helpers
local ivars5
local catvars5 help_cat

keep spid age* female* race* livearrang* married* educ_hs_ind* medicaid* medigap* tricare* income_adj* income_quart* charls_index_wt* ch3plus* prob_dem* sr_phq2_depressed* n_helpers* help_cat*

rename *_n1 *0
rename *_p1 *1
/*
foreach x of varlist charls_index_wt ch3plus {
	*gen `x'1=`x'
	*rename `x' `x'0
}*/

foreach x of varlist *0 {
	local l`x' : var label `x'
}

reshape long `cvars1' `ivars1' `catvars1' `cvars2' `ivars2' `catvars2' `ivars3' `ivars4' `ivars5' `cvars3' `cvars4' `cvars5' `catvars3' `catvars4' `catvars5', i(spid) j(post)

foreach x of varlist `cvars1' `ivars1' `ivars2' `catvars1' `cvars2' `catvars2'  `ivars3' `ivars4' `ivars5' `cvars3' `cvars4' `cvars5' `catvars3' `catvars4' `catvars5' {
	label var `x' "`l`x'0'"
}

forvalues i=1/5 {
	local cativars`i'
	foreach x of local catvars`i' {
		gen l`x'=.
		local lab : var label `x'
		label var l`x' "`lab'"
		di "`x'"
		local `x'
		levelsof `x', local(levels)
		foreach l of local levels {
			gen `x'`l'=`x'==`l' if !missing(`x')
			local lab : label `x' `l'
			label var `x'`l' "`lab'"
			local `x' ``x'' `x'`l'
}
		di "``x''"
		local cativars`i' `cativars`i'' ``x''
}
}

di "`catvars1'"
di "`cativars1'"

local rows
forvalues i=1/5 {
local rows `rows' `cvars`i'' `cvars`i'' `cvars`i'' `ivars`i'' `catvars`i'' `cativars`i''
}

local rn : word count `rows' 1
local r=1
local c=1

mat tab=J(`rn',3,.)
mat stars=J(`rn',3,0)

local n=_N
foreach t in 0 1 {
forvalues i=1/5 {
	foreach x of local cvars`i' {
		sum `x' if post==`t', d
		mat tab[`r',`c']=r(mean)
		mat tab [`r'+1,`c']=r(sd)
		mat tab[`r'+2,`c']=r(p50)
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		if `t'==1 {
		reg `x' post, cluster(spid)
		test post 
		mat tab[`r',`c'+1]=r(p)
		mat stars[`r',`c'+1]=(r(p)<.05) + (r(p)<.01)
		}
		local r=`r'+3
		
}
	foreach x of local ivars`i' {
		sum `x' if post==`t'
		if r(N)*r(mean)>=11 | r(N)==0 | r(N)==r(N)*r(mean) mat tab[`r',`c']=r(mean)*100
		else mat stars[`r',`c']=3
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		if `t'==1 {
		logit `x' post, cluster(spid)
		test post 
		mat tab[`r',`c'+1]=r(p)
		mat stars[`r',`c'+1]=(r(p)<.05) + (r(p)<.01)
}
		local r=`r'+1
}
	foreach x of local catvars`i' {
		sum `x' if post==`t'
		if `t'==1 {
		tab `x' post, chi2 
		mat tab[`r',3]=r(p)
		mat stars[`r',3]=(r(p)<.05) + (r(p)<.01)
		*if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		*else mat stars[`r',`c'+1]=3
}		
		local r=`r'+1
		foreach z of local `x' {
			sum `z' if post==`t'
			if r(N)*r(mean)>=11 | r(N)==0 | r(N)==r(N)*r(mean) mat tab[`r',`c']=r(mean)*100
			else mat stars[`r',`c']=3
			local r=`r'+1
}
}
}
mat tab[`r',`c']=`n'
	local r=1
	local c=`c'+1
}	

mat rownames tab=`cvars1' SD Median `ivars1' `catvars1' `cativars1' `cvars2' `ivars2' `catvars2' `cativars2'   `cvars3' SD Median `ivars3' `catvars3' `cativars3'    `cvars4' SD Median `ivars4' `catvars4' `cativars4'    `cvars5' SD Median `ivars5' `catvars5' `cativars5'  N

if "`period'"=="pre" local title Trauma with NHATS interview following
else local title Trauma with prior NHATS interview
frmttable using "${outpath}\table_1_preandpost`c(current_date)'.rtf", ///
statmat(tab) title("Characteristics of Sample: `title'") ///
ctitles("" "Pre-trauma" "Post-trauma" "P-value") varlabels ///
sdec(2,2,3) annotate(stars) asymbol(*,**,NR) replace


H="xinjury & hospitalization characteristics"
foreach period in pre post {
/*gen _row1=.
label var _row1 "Trauma characteristics"
gen _row2=.
label var _row2 "Stay characteristics"
gen _row3=. 
label var _row3 "12 week utilization and outcomes"
*/
clear all
use "${intpath}\trauma_dyad_nhats`period'", clear
replace iss=niss
local cvars1 traum2ivw
local ivars1  ind_trauma_hosp
local catvars1 apc //inj_cat
local cvars2
local ivars2 fall vehicle_crash 
local catvars2
local cvars3 iss
local ivars3 
local catvars3 iss_cat //apc
local cvars4 los icu_days
local ivars4 ind_procedure ind_comp_any 
local catvars4 
local cvars5 n_readmit n_snf_days n_hh_days n_ed_vis
local ivars5 ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84
local catvars5 

di "`period'"
forvalues i=1/5 {
	di "`i'"
	foreach x of local catvars`i' {
		local cativars`i'
		di "`x'"
		local `x'
		di "``x''"	
		levelsof `x', local(levels)
		foreach l of local levels {
			gen `x'`l'=`x'==`l' if !missing(`x')
			local lab : label `x' `l'
			label var `x'`l' "`lab'"
			local `x' ``x'' `x'`l'
}
		di "``x''"
		local cativars`i' `cativars`i'' ``x''
}
}

di "`catvars1'"
di "`cativars1'"

local rows
forvalues i=1/5 {
local rows `rows' `cvars`i'' `cvars`i'' `cvars`i'' `ivars`i'' `cativars`i''
}

local rn : word count `rows' 1
local r=1
local c=1

mat tab=J(`rn',2,.)
mat stars=J(`rn',2,0)

local n=_N
forvalues i=1/5 {
	foreach x of local cvars`i' {
		qui sum `x' /*if inlist(dem_cohort,`y')*/, d
		mat tab[`r',`c']=r(mean)
		mat tab [`r'+1,`c']=r(sd)
		mat tab[`r'+2,`c']=r(p50)
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		local r=`r'+3
		
}
	foreach x of local ivars`i' {
		qui sum `x' 
		if (r(N)*r(mean)>=11 & r(N)-r(N)*r(mean)>=11) | r(N)==0 | r(N)-r(N)*r(mean)==0 mat tab[`r',`c']=r(mean)*100
		else mat stars[`r',`c']=3
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		local r=`r'+1
}
	foreach x of local catvars`i' {
		qui sum `x'
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		foreach z of local `x' {
			qui sum `z' 
			if r(N)*r(mean)>=11 | r(N)==0 | r(N)-r(N)*r(mean)==0 mat tab[`r',`c']=r(mean)*100
			else mat stars[`r',`c']=3
			local r=`r'+1
}
}
}
mat tab[`r',`c']=`n'
	
/*
local cvars1 traum2ivw
local ivars1  
local catvars1 inj_cat
local cvars2
local ivars2 fall vehicle_crash 
local catvars2
local cvars3 iss
local ivars3 
local catvars3 iss_cat
local cvars4 los icu_days
local ivars4 ind_procedure ind_comp_any 
local catvars4 
local cvars5 n_readmit n_snf_days n_hh_days n_ed_vis
local ivars5 ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84
local catvars5 
*/
mat rownames tab=`cvars1' SD Median `ivars1' `cativars1' `ivars2' `cativars2' ///
`cvars3' SD Median `ivars3' `cativars3' los SD Median icu_days SD Median `ivars4' `cativars4' ///
n_readmit SD Median n_snf_days SD Median n_hh_days SD Median n_ed_vis SD Median `ivars5' `cativars5' N

if "`period'"=="pre" local title Trauma with NHATS interview following
else local title Trauma with prior NHATS interview
frmttable using "${outpath}\stay_and_util_tables_`period'`c(current_date)'.rtf", ///
statmat(tab) title("Characteristics of trauma and utilization:" "`title'") ///
ctitles("" "Mean/%" "N Missing") varlabels ///
sdec(2,0) annotate(stars) asymbol(*,**,NR) replace

local rn : word count ind_comp_intraop ind_comp_cardiac ind_comp_resp ind_comp_vasc ind_comp_wound ind_comp_genitourinary ind_comp_gastro ind_comp_neuro ind_comp_infect ind_comp_misc ind_comp_any

//ebl--9/6/19--drop this for now because there's so little that's shareable. worth looking at again after update for icd10.
/*
mat tab=J(`rn',2,.)
mat stars=J(`rn',2,0)
local r=1

foreach x of varlist ind_comp* {
	qui sum `x' 
	if (r(N)*r(mean)>=11 & r(N)-r(N)*r(mean)>=11) | r(N)==0 | r(N)-r(N)*r(mean)==0 mat tab[`r',1]=r(mean)*r(N)
	else mat stars[`r',1]=3
	if (r(N)*r(mean)>=11 & r(N)-r(N)*r(mean)>=11) | r(N)==0 | r(N)-r(N)*r(mean)==0 mat tab[`r',2]=r(mean)*100
	else mat stars[`r',2]=3
	local r=`r'+1
}

mat rownames tab=ind_comp_intraop ind_comp_cardiac ind_comp_resp ind_comp_vasc ind_comp_wound ind_comp_genitourinary ind_comp_gastro ind_comp_neuro ind_comp_infect ind_comp_misc ind_comp_any

frmttable using "${outpath}\stay_and_util_tables_`period'`c(current_date)'.rtf", ///
addtable statmat(tab) title("Complications, detailed") ///
ctitles("" "N" "%") sdec(0,2) annotate(stars) asymbol(*,**,NR)
*/
}


H="xpre and post characteristics"

use "${datapath}\sample_final", clear
keep if !missing(ivw_date_n1)


*local cvars1 charls_index_wt
local ivars1 prob_dem sr_phq2_depressed soc_iso adverse_any adverse_sc adverse_mo adverse_hh  frail adl_impair
local catvars1 adl_cat 
local cvars2 n_helpers
local catvars2 help_cat

keep spid  prob_dem* sr_phq2_dep* n_helpers* help_cat* adl* soc_iso* adverse_sc* adverse_mo* adverse_hh* adverse_any* soc_iso* frail*

rename *_n1 *0
rename *_p1 *1
foreach x of varlist *0 {
	local l`x' : var label `x'
}

reshape long `ivars1' `catvars1' `cvars2' `catvars2', i(spid) j(post)

foreach x of varlist `ivars1' `catvars1' `cvars2' `catvars2' {
	label var `x' "`l`x'0'"
}

forvalues i=1/5 {
	local cativars`i'
	foreach x of local catvars`i' {
		gen l`x'=.
		local lab : var label `x'
		label var l`x' "`lab'"
		di "`x'"
		local `x'
		levelsof `x', local(levels)
		foreach l of local levels {
			gen `x'`l'=`x'==`l' if !missing(`x')
			local lab : label `x' `l'
			label var `x'`l' "`lab'"
			local `x' ``x'' `x'`l'
}
		di "``x''"
		local cativars`i' `cativars`i'' ``x''
}
}

di "`catvars1'"
di "`cativars1'"

local rows
forvalues i=1/5 {
local rows `rows' `cvars`i'' `cvars`i'' `cvars`i'' `ivars`i'' `catvars`i'' `cativars`i''
}

local rn : word count `rows' 1
local r=1
local c=1

mat tab=J(`rn',3,.)
mat stars=J(`rn',3,0)

local n=_N
foreach t in 0 1 {
forvalues i=1/5 {
	foreach x of local cvars`i' {
		sum `x' if post==`t', d
		mat tab[`r',`c']=r(mean)
		mat tab [`r'+1,`c']=r(sd)
		mat tab[`r'+2,`c']=r(p50)
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		if `t'==1 {
		reg `x' post, cluster(spid)
		test post 
		mat tab[`r',`c'+1]=r(p)
		mat stars[`r',`c'+1]=(r(p)<.05) + (r(p)<.01)
		}
		local r=`r'+3
		
}
	foreach x of local ivars`i' {
		sum `x' if post==`t'
		if r(N)*r(mean)>=11 | r(N)==0 | r(N)==r(N)*r(mean) mat tab[`r',`c']=r(mean)*100
		else mat stars[`r',`c']=3
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		if `t'==1 {
		logit `x' post, cluster(spid)
		test post 
		mat tab[`r',`c'+1]=r(p)
		mat stars[`r',`c'+1]=(r(p)<.05) + (r(p)<.01)
}
		local r=`r'+1
}
	foreach x of local catvars`i' {
		sum `x' if post==`t'
		if `t'==1 {
		tab `x' post, chi2 
		mat tab[`r',3]=r(p)
		mat stars[`r',3]=(r(p)<.05) + (r(p)<.01)
		*if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		*else mat stars[`r',`c'+1]=3
}		
		local r=`r'+1
		foreach z of local `x' {
			sum `z' if post==`t'
			if r(N)*r(mean)>=11 | r(N)==0 | r(N)==r(N)*r(mean) mat tab[`r',`c']=r(mean)*100
			else mat stars[`r',`c']=3
			local r=`r'+1
}
}
}
mat tab[`r',`c']=`n'
	local r=1
	local c=`c'+1
}	

mat rownames tab=`cvars1' `ivars1' `catvars1' `cativars1' `cvars2' SD Median `ivars2' `catvars2' `cativars2'  N

if "`period'"=="pre" local title Trauma with NHATS interview following
else local title Trauma with prior NHATS interview
frmttable using "${outpath}\table_1_`period'`c(current_date)'.rtf", ///
statmat(tab) title("Characteristics of Sample: `title'") ///
ctitles("" "Pre-trauma" "Post-trauma" "P-value") varlabels ///
sdec(2,2,3) annotate(stars) asymbol(*,**,NR) replace


H="xregression"
use spid  *date* using "${datapath}\sample_final", clear
merge 1:1 spid using "${intpath}\index.dta", keepusing(bene_id) nogen keep(match)
merge 1:m bene_id using "D:\NHATS\Shared\base_data\CMS_claims\Stata\snf_09_17.dta", keep(match) nogen keepusing(admit_date disch_date)
keep if inrange(ivw_date_p1,admit_date,disch_date) | inrange(ivw_date_n1,admit_date,disch_date)
gen ind_snf=1
label var ind_snf "In a SNF at the time of the interview"
keep spid ind_snf
duplicates drop
tempfile t1
save `t1'

use "${datapath}\sample_final", clear
gen wave=wave_p1
merge 1:1 spid wave using "${nhats}\sp_round_1_8.dta", keep(match) nogen keepusing(tot_hrswk_help_i)

keep if !missing(ivw_date_n1)
merge m:1 spid using "${intpath}\trauma_dyad_nhatspre", keep(match)
replace iss=niss
replace traum2=abs(traum2)

replace tot_hrswk_help_i=0 if missing(tot_hrswk_help_i)
replace medicaid_n1=0 if missing(medicaid_n1)
replace ch3plus_n1=0 if missing(ch3plus_n1)
local xvars iss c.age_n1 female_n1 i.race_n1 /*married_n1*/  i.livearrang_n1 educ_hs_ind_n1 /*medicaid_n1 i.income_quart_n1*/ ind_trauma_hosp ch3plus_n1 prob_dem_n1 sr_phq2_depressed_n1 traum2ivw
sum `xvars' if !ind_snf & !nhres_p1 & !nhres_n1
replace livearrang_n1=4 if livearrang_n1==5 
label define livearrang 4 "Res Care Facility or NH", modify
merge 1:1 spid using `t1', keep(match master) nogen
replace ind_snf=0 if missing(ind_snf)
reg n_helpers_p1 `xvars'

reg n_helpers_p1 iss

glm tot_hrswk_help_i `xvars', link(log) fam(gamma)

*sum `xvars'
rename tot_hrswk  hrswk_p1
replace wave=wave_n1
merge 1:1 spid wave using "${nhats}\sp_round_1_8.dta", keep(match) nogen keepusing(tot_hrswk_help_i)

rename tot_hrswk hrswk_n1
replace hrswk_n1=0 if hrswk_n1==.
local xvars  c.age_n1 female_n1 i.race_n1 /*married_n1*/  i.livearrang_n1 educ_hs_ind_n1 /*medicaid_n1 i.income_quart_n1*/ ind_trauma_hosp ch3plus_n1 prob_dem_n1 //sr_phq2_depressed_n1


corr hrswk_p1 age_n1 female_n1 educ_hs_ind_n1 ind_trauma_hosp ch3plus_n1 prob_dem_n1 hrswk_n1
hist hrswk_p1





local cvars1 iss age_n1 
local ivars1 female_n1
local catvars1 race livearrang
local ivars2 educ_hs_ind_n1 ind_trauma_hosp ch3plus_n1 prob_dem_n1
local cvars3 hrswk_n1

forvalues i=1/5 {
	local cativars`i'
	foreach x of local catvars`i' {
		di "`x'"
		local `x'
		levelsof `x'_n1, local(levels)
		foreach l of local levels {
			gen `x'`l'=`x'_n1==`l' if !missing(`x'_n1)
			local lab : label `x' `l'
			label var `x'`l' "`lab'"
			local `x' ``x'' `x'`l'
}
		di "``x''"
		local cativars`i' `cativars`i'' ``x''
}
}

di "`catvars1'"
di "`cativars1'"

local rows
forvalues i=1/5 {
local rows `rows' `cvars`i''  `ivars`i'' `cativars`i''
}

local rn : word count `rows' 
local r=1
local c=1

mat tab=J(`rn',2,.)
mat stars=J(`rn',2,0)
 
foreach x of local rows {
	sum `x'
	mat tab[`r',1]=r(mean)
	if r(max)==1 mat tab[`r',1]=r(mean)*100
	reg hrswk_p1 `x'
	test `x'
	*mat tab[`r',2]=r(p)
	glm hrswk_p1 `x', link(log) fam(gamma)
	test `x'
	mat tab[`r',2]=r(p)
	local r=`r'+1
}	

mat rownames tab=`rows' 

local xvars  c.age_n1 female_n1 i.race_n1 /*married_n1*/  i.livearrang_n1 educ_hs_ind_n1 /*medicaid_n1 i.income_quart_n1*/ ind_trauma_hosp ch3plus_n1 prob_dem_n1 //sr_phq2_depressed_n1

log using "${outpath}\trauma_regression_log`c(current_date)'", replace
//skew is 2.7; 6% have no hours
sum hrswk_p1
hist hrswk_p1, 
graph export "${outpath}\hist_hours.pdf", replace


corr hrswk_p1 iss age_n1 female_n1 educ_hs_ind_n1 ind_trauma_hosp ch3plus_n1 prob_dem_n1 hrswk_n1



frmttable, statmat(tab) ctitles("" "Mean" "P-value") varlabels note("P-values from unadjusted GLM with log link and gamma family of hours worked on listed variable") title("Significance of bivariate relationship")

//excluding people if they're a nursing home resident or in a SNF at either interview
gen exclude=nhres_n1==1 | nhres_p1==1 | ind_snf==1

//no substantial missingness--results not shareable off the server for small cell size
qui sum `xvars' if !exclude

//excluding NH folks (not controlling for prior status)
glm hrswk_p1 iss `xvars' if !nhres_p1 & !nhres_n1 & !ind_snf, link(log) fam(gamma) eform

//excluding NH, controlling for prior status
glm hrswk_p1 iss `xvars' hrswk_n1 if !nhres_p1 & !nhres_n1 & !ind_snf, link(log) fam(gamma) eform

/*gen ind_maj_trauma=iss>15 if !missing(iss)

glm hrswk_p1 ind_maj_trauma `xvars' hrswk_n1 if !nhres_p1 & !nhres_n1 & !ind_snf, link(log) fam(gamma) eform

hist n_helpers_p1
graph export "${outpath}\hist_helpers.pdf", replace

reg n_helpers_p1 `xvars' n_helpers_n1 if !nhres_p1 & !nhres_n1 & !ind_snf

*/

log close
translate "${outpath}\trauma_regression_log`c(current_date)'.smcl" "${outpath}\trauma_regression_log`c(current_date)'.pdf", replace

H="**********NSOC**********"


H="xget index in stata"
//grab aha data from 2017 to get trauma center info
use "D:\Outside_data\AHA data\aha2017.dta", clear
rename mcrnum prvdr_num
drop if missing(prvdr_num)
tempfile aha
save `aha'

//just pull ivw dates to match to the dx, only for rounds 1,5,7 to match to NSOC later
use "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_7.dta", clear
keep if sp_ivw==1 & lml==0
keep spid ivw_date wave
merge m:1 spid using "D:\NHATS\Shared\raw\CMS\NHATS CMS DUA 28016\Crosswalks\xwalk_2016.dta", ///
keep(match master) nogen keepusing(bene)
sort spid wave
by spid: gen ivw_date_n1=ivw_date[_n-1]
tempfile nhats
save `nhats'

//get trauma dx and iss info
import excel using "D:\NHATS\Projects\trauma\zc_trauma_dyad\ref_docs\icdtrauma_from_stata.xls", firstrow clear
rename dx dtrunc
keep dtrunc sev issb
replace issbr="Abdomen" if issbr=="4"
replace issbr="Chest" if issbr=="3"
replace issbr="Extremities" if issbr=="5"
replace issbr="Face" if issbr=="2"
replace issbr="External" if inlist(issbr,"6","9","General")
replace issbr="Head/Neck" if issbr=="1"

encode issbr, gen(region) label(issbr)

drop issbr
rename region issbr
tempfile t1
save `t1'

local type=1

/*pull claims, only inpatient*/
foreach x in ip_06 {

	use "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA/`x'_17.dta", clear
	if "`x'"=="ip_06" {
		merge m:1 prvdr_num using `aha', ///
		keep(match master) gen(aham) keepusing(traumhos)
		egen icu_days=rowtotal(icarecnt crnryday)
		gen ind_procedure=!missing(icd_prcdr_cd1)

		label define discharge_disp 1 "Home, no services" 2 "Home with services" ///
		3 "SNF" 4 "Rehab Facility" 5 "Hospice (including home)" 6 "Other"
		gen discharge_disp=ptnt_dschrg_stus_cd=="01"
		replace discharge_disp=2 if inlist(ptnt_dschrg_stus_cd,"06","08")
		replace discharge_disp=3 if inlist(ptnt_dschrg_stus_cd,"03","61")
		replace discharge_disp=4 if inlist(ptnt_dschrg_stus_cd,"62")
		replace discharge_disp=5 if inlist(ptnt_dschrg_stus_cd,"50","51")
		replace discharge_disp=6 if !discharge_disp
		label values discharge_disp discharge_disp
		gen los=disch_date-admit_date+1
		keep bene_id icd_dgns_cd* icd_dgns_e_cd* admit_date icu_days ind_procedure discharge_disp ///
		los traumhos
}
	
	else keep bene_id icd_dgns_cd* admit_date disch_date 
	gen clm_num=_n
	reshape long icd_dgns_cd icd_dgns_e_cd, i(clm_num) j(num)
	rename icd_dgns_cd diag
	rename icd_dgns_e_cd ecode
	*keep if inlist(substr(diag,1,1),"8","9","S","T") 
	drop if missing(diag)
	gen type=`type'
	local type=`type'+1

	if "`x'"!="pb_09" {
		tempfile `x'
		save ``x''
}
}

/*
append using `ip_06'
append using `op_09'*/
label define type 1 "IP" 2 "OP" 3 "PB"
label values type type

sort bene_id admit_date diag
duplicates drop

gen trauma=0

replace trauma=1 if substr(diag,1,5)=="S0000" ///
| substr(diag,1,5)=="S0001" ///
| substr(diag,1,5)=="S0002" ///
| substr(diag,1,5)=="S0003" ///
| substr(diag,1,5)=="S0005" ///
| substr(diag,1,5)=="S0007" ///
| substr(diag,1,5)=="S0010" ///
| substr(diag,1,5)=="S0011" ///
| substr(diag,1,5)=="S0012" ///
| substr(diag,1,6)=="S00201" ///
| substr(diag,1,6)=="S00202" ///
| substr(diag,1,6)=="S00209" ///
| substr(diag,1,6)=="S00211" ///
| substr(diag,1,6)=="S00212" ///
| substr(diag,1,6)=="S00219" ///
| substr(diag,1,6)=="S00251" ///
| substr(diag,1,6)=="S00271" ///
| substr(diag,1,6)=="S00272" ///
| substr(diag,1,5)=="S0030" ///
| substr(diag,1,5)=="S0031" ///
| substr(diag,1,5)=="S0033" ///
| substr(diag,1,5)=="S0037" ///
| substr(diag,1,6)=="S00401" ///
| substr(diag,1,6)=="S00402" ///
| substr(diag,1,6)=="S00409" ///
| substr(diag,1,6)=="S00411" ///
| substr(diag,1,6)=="S00412" ///
| substr(diag,1,6)=="S00419" ///
| substr(diag,1,6)=="S00431" ///
| substr(diag,1,6)=="S00432" ///
| substr(diag,1,6)=="S00439" ///
| substr(diag,1,6)=="S00501" ///
| substr(diag,1,6)=="S00502" ///
| substr(diag,1,6)=="S00511" ///
| substr(diag,1,6)=="S00512" ///
| substr(diag,1,6)=="S00521" ///
| substr(diag,1,6)=="S00531" ///
| substr(diag,1,6)=="S00532" ///
| substr(diag,1,6)=="S00571" ///
| substr(diag,1,6)=="S00572" ///
| substr(diag,1,5)=="S0080" ///
| substr(diag,1,5)=="S0081" ///
| substr(diag,1,5)=="S0082" ///
| substr(diag,1,5)=="S0083" 

replace trauma=1 if  substr(diag,1,5)=="S0085" ///
| substr(diag,1,5)=="S0087" ///
| substr(diag,1,5)=="S0090" ///
| substr(diag,1,5)=="S0091" ///
| substr(diag,1,5)=="S0093" ///
| substr(diag,1,5)=="S0100" ///
| substr(diag,1,5)=="S0101" ///
| substr(diag,1,5)=="S0102" ///
| substr(diag,1,5)=="S0103" ///
| substr(diag,1,5)=="S0104" ///
| substr(diag,1,5)=="S0105" ///
| substr(diag,1,6)=="S01101" ///
| substr(diag,1,6)=="S01102" ///
| substr(diag,1,6)=="S01109" ///
| substr(diag,1,6)=="S01111" ///
| substr(diag,1,6)=="S01112" ///
| substr(diag,1,6)=="S01119" ///
| substr(diag,1,6)=="S01121" ///
| substr(diag,1,6)=="S01122" ///
| substr(diag,1,6)=="S01129" ///
| substr(diag,1,6)=="S01131" ///
| substr(diag,1,6)=="S01132" ///
| substr(diag,1,6)=="S01139" ///
| substr(diag,1,6)=="S01141" ///
| substr(diag,1,6)=="S01142" ///
| substr(diag,1,6)=="S01151" ///
| substr(diag,1,6)=="S01152" ///
| substr(diag,1,6)=="S01159" ///
| substr(diag,1,5)=="S0120" ///
| substr(diag,1,5)=="S0121" ///
| substr(diag,1,5)=="S0122" ///
| substr(diag,1,5)=="S0123" ///
| substr(diag,1,5)=="S0124" ///
| substr(diag,1,5)=="S0125" ///
| substr(diag,1,6)=="S01301" ///
| substr(diag,1,6)=="S01302" ///
| substr(diag,1,6)=="S01309" ///
| substr(diag,1,6)=="S01311" ///
| substr(diag,1,6)=="S01312" ///
| substr(diag,1,6)=="S01319" ///
| substr(diag,1,6)=="S01321" ///
| substr(diag,1,6)=="S01322" ///
| substr(diag,1,6)=="S01329" ///
| substr(diag,1,6)=="S01331" ///
| substr(diag,1,6)=="S01332" ///
| substr(diag,1,6)=="S01351" ///
| substr(diag,1,6)=="S01352" ///
| substr(diag,1,6)=="S01401" ///
| substr(diag,1,6)=="S01402" ///
| substr(diag,1,6)=="S01409" ///
| substr(diag,1,6)=="S01411" ///
| substr(diag,1,6)=="S01412" ///
| substr(diag,1,6)=="S01419" ///
| substr(diag,1,6)=="S01421" ///
| substr(diag,1,6)=="S01422" ///
| substr(diag,1,6)=="S01429" ///
| substr(diag,1,6)=="S01431" ///
| substr(diag,1,6)=="S01432" ///
| substr(diag,1,6)=="S01439" ///
| substr(diag,1,6)=="S01441" ///
| substr(diag,1,6)=="S01442" ///
| substr(diag,1,6)=="S01451" ///
| substr(diag,1,6)=="S01452" ///
| substr(diag,1,6)=="S01459" ///
| substr(diag,1,6)=="S01501" ///
| substr(diag,1,6)=="S01502" ///
| substr(diag,1,6)=="S01511" ///
| substr(diag,1,6)=="S01512" ///
| substr(diag,1,6)=="S01521" ///
| substr(diag,1,6)=="S01522" ///
| substr(diag,1,6)=="S01531" ///
| substr(diag,1,6)=="S01532" ///
| substr(diag,1,6)=="S01541" ///
| substr(diag,1,6)=="S01542" ///
| substr(diag,1,6)=="S01551" ///
| substr(diag,1,6)=="S01552" ///
| substr(diag,1,5)=="S0180" ///
| substr(diag,1,5)=="S0181" ///
| substr(diag,1,5)=="S0182" ///
| substr(diag,1,5)=="S0183" ///
| substr(diag,1,5)=="S0184" ///
| substr(diag,1,5)=="S0185" ///
| substr(diag,1,5)=="S0190" ///
| substr(diag,1,5)=="S0191" ///
| substr(diag,1,5)=="S0192" ///
| substr(diag,1,5)=="S0193" ///
| substr(diag,1,5)=="S0194" ///
| substr(diag,1,5)=="S0195" ///
| substr(diag,1,4)=="S020" ///
| substr(diag,1,5)=="S0210" ///
| substr(diag,1,6)=="S02110" ///
| substr(diag,1,6)=="S02111" ///
| substr(diag,1,6)=="S02112" ///
| substr(diag,1,6)=="S02113" ///
| substr(diag,1,6)=="S02118" ///
| substr(diag,1,6)=="S02119" ///
| substr(diag,1,5)=="S0219" ///
| substr(diag,1,4)=="S022" ///
| substr(diag,1,4)=="S023" ///
| substr(diag,1,6)=="S02400" ///
| substr(diag,1,6)=="S02401" ///
| substr(diag,1,6)=="S02402" ///
| substr(diag,1,6)=="S02411" ///
| substr(diag,1,6)=="S02412" ///
| substr(diag,1,6)=="S02413" ///
| substr(diag,1,5)=="S0242" ///
| substr(diag,1,4)=="S025" ///
| substr(diag,1,6)=="S02600" 


replace trauma=1 if  substr(diag,1,6)=="S02609" ///
| substr(diag,1,5)=="S0261" ///
| substr(diag,1,5)=="S0262" ///
| substr(diag,1,5)=="S0263" ///
| substr(diag,1,5)=="S0264" ///
| substr(diag,1,5)=="S0265" ///
| substr(diag,1,5)=="S0266" ///
| substr(diag,1,5)=="S0267" ///
| substr(diag,1,5)=="S0269" ///
| substr(diag,1,4)=="S028" ///
| substr(diag,1,5)=="S0291" ///
| substr(diag,1,5)=="S0292" ///
| substr(diag,1,4)=="S030" ///
| substr(diag,1,4)=="S031" ///
| substr(diag,1,4)=="S032" ///
| substr(diag,1,4)=="S034" ///
| substr(diag,1,4)=="S038" ///
| substr(diag,1,6)=="S04011" ///
| substr(diag,1,6)=="S04012" ///
| substr(diag,1,6)=="S04019" ///
| substr(diag,1,6)=="S04032" ///
| substr(diag,1,5)=="S0410" ///
| substr(diag,1,5)=="S0411" ///
| substr(diag,1,5)=="S0412" ///
| substr(diag,1,5)=="S0421" ///
| substr(diag,1,5)=="S0431" ///
| substr(diag,1,5)=="S0432" ///
| substr(diag,1,5)=="S0440" ///
| substr(diag,1,5)=="S0441" ///
| substr(diag,1,5)=="S0442" ///
| substr(diag,1,5)=="S0450" ///
| substr(diag,1,5)=="S0451" ///
| substr(diag,1,5)=="S0452" ///
| substr(diag,1,5)=="S0460" ///
| substr(diag,1,5)=="S0462" ///
| substr(diag,1,6)=="S04819" ///
| substr(diag,1,6)=="S04891" ///
| substr(diag,1,6)=="S04892" ///
| substr(diag,1,6)=="S04899" ///
| substr(diag,1,4)=="S049" ///
| substr(diag,1,5)=="S0500" ///
| substr(diag,1,5)=="S0501" ///
| substr(diag,1,5)=="S0502" ///
| substr(diag,1,5)=="S0510" ///
| substr(diag,1,5)=="S0511" ///
| substr(diag,1,5)=="S0512" ///
| substr(diag,1,5)=="S0520" ///
| substr(diag,1,5)=="S0521" ///
| substr(diag,1,5)=="S0522" ///
| substr(diag,1,5)=="S0530" ///
| substr(diag,1,5)=="S0531" ///
| substr(diag,1,5)=="S0532" ///
| substr(diag,1,5)=="S0540" ///
| substr(diag,1,5)=="S0541" ///
| substr(diag,1,5)=="S0542" ///
| substr(diag,1,5)=="S0550" ///
| substr(diag,1,5)=="S0551" ///
| substr(diag,1,5)=="S0552" ///
| substr(diag,1,5)=="S0560" ///
| substr(diag,1,5)=="S0561" ///
| substr(diag,1,5)=="S0562" ///
| substr(diag,1,5)=="S0570" ///
| substr(diag,1,5)=="S0571" ///
| substr(diag,1,5)=="S0572" ///
| substr(diag,1,4)=="S058" ///
| substr(diag,1,5)=="S0590" ///
| substr(diag,1,5)=="S0591" ///
| substr(diag,1,5)=="S0592" ///
| substr(diag,1,4)=="S060" ///
| substr(diag,1,4)=="S061" ///
| substr(diag,1,4)=="S062" ///
| substr(diag,1,6)=="S06300" ///
| substr(diag,1,6)=="S06301" ///
| substr(diag,1,6)=="S06303" ///
| substr(diag,1,6)=="S06304" ///
| substr(diag,1,6)=="S06305" ///
| substr(diag,1,6)=="S06306" ///
| substr(diag,1,6)=="S06307" ///
| substr(diag,1,6)=="S06308" ///
| substr(diag,1,6)=="S06309" ///
| substr(diag,1,6)=="S06310" ///
| substr(diag,1,6)=="S06311" ///
| substr(diag,1,6)=="S06312" ///
| substr(diag,1,6)=="S06313" ///
| substr(diag,1,6)=="S06314" ///
| substr(diag,1,6)=="S06315" ///
| substr(diag,1,6)=="S06316" ///
| substr(diag,1,6)=="S06317" ///
| substr(diag,1,6)=="S06318" ///
| substr(diag,1,6)=="S06319" ///
| substr(diag,1,6)=="S06320" ///
| substr(diag,1,6)=="S06321" ///
| substr(diag,1,6)=="S06322" ///
| substr(diag,1,6)=="S06323" ///
| substr(diag,1,6)=="S06324" ///
| substr(diag,1,6)=="S06325" ///
| substr(diag,1,6)=="S06326" ///
| substr(diag,1,6)=="S06327" ///
| substr(diag,1,6)=="S06328" ///
| substr(diag,1,6)=="S06329" ///
| substr(diag,1,6)=="S06330" ///
| substr(diag,1,6)=="S06331" ///
| substr(diag,1,6)=="S06332" ///
| substr(diag,1,6)=="S06333" ///
| substr(diag,1,6)=="S06334" ///
| substr(diag,1,6)=="S06335" ///
| substr(diag,1,6)=="S06336" ///
| substr(diag,1,6)=="S06337" ///
| substr(diag,1,6)=="S06338" ///
| substr(diag,1,6)=="S06339" ///
| substr(diag,1,6)=="S06340" ///
| substr(diag,1,6)=="S06341" ///
| substr(diag,1,6)=="S06342" ///
| substr(diag,1,6)=="S06343" ///
| substr(diag,1,6)=="S06344" ///
| substr(diag,1,6)=="S06345" ///
| substr(diag,1,6)=="S06346" ///
| substr(diag,1,6)=="S06347" ///
| substr(diag,1,6)=="S06348" ///
| substr(diag,1,6)=="S06349" ///
| substr(diag,1,6)=="S06350" ///
| substr(diag,1,6)=="S06351" ///
| substr(diag,1,6)=="S06352" ///
| substr(diag,1,6)=="S06353" ///
| substr(diag,1,6)=="S06354" ///
| substr(diag,1,6)=="S06355" ///
| substr(diag,1,6)=="S06356" ///
| substr(diag,1,6)=="S06357" ///
| substr(diag,1,6)=="S06358" ///
| substr(diag,1,6)=="S06359" ///
| substr(diag,1,6)=="S06360" ///
| substr(diag,1,6)=="S06361" ///
| substr(diag,1,6)=="S06362" ///
| substr(diag,1,6)=="S06363" ///
| substr(diag,1,6)=="S06364" ///
| substr(diag,1,6)=="S06365" ///
| substr(diag,1,6)=="S06366" ///
| substr(diag,1,6)=="S06367" ///
| substr(diag,1,6)=="S06368" ///
| substr(diag,1,6)=="S06369" ///
| substr(diag,1,6)=="S06370" ///
| substr(diag,1,6)=="S06371" ///
| substr(diag,1,6)=="S06373" ///
| substr(diag,1,6)=="S06374" ///
| substr(diag,1,6)=="S06375" ///
| substr(diag,1,6)=="S06376" ///
| substr(diag,1,6)=="S06377" ///
| substr(diag,1,6)=="S06378" ///
| substr(diag,1,6)=="S06379" ///
| substr(diag,1,6)=="S06380" ///
| substr(diag,1,6)=="S06381" ///
| substr(diag,1,6)=="S06382" ///
| substr(diag,1,6)=="S06383" ///
| substr(diag,1,6)=="S06384" ///
| substr(diag,1,6)=="S06385" ///
| substr(diag,1,6)=="S06386" ///
| substr(diag,1,6)=="S06387" ///
| substr(diag,1,6)=="S06388" ///
| substr(diag,1,6)=="S06389" ///
| substr(diag,1,4)=="S064" ///
| substr(diag,1,4)=="S065" ///
| substr(diag,1,4)=="S066" ///
| substr(diag,1,6)=="S06810" ///
| substr(diag,1,6)=="S06811" ///
| substr(diag,1,6)=="S06816" ///
| substr(diag,1,6)=="S06817" ///
| substr(diag,1,6)=="S06818" ///
| substr(diag,1,6)=="S06819" ///
| substr(diag,1,6)=="S06820" ///
| substr(diag,1,6)=="S06821" ///
| substr(diag,1,6)=="S06824" ///
| substr(diag,1,6)=="S06826" ///
| substr(diag,1,6)=="S06829" ///
| substr(diag,1,6)=="S06890" ///
| substr(diag,1,6)=="S06891" ///
| substr(diag,1,6)=="S06892" ///
| substr(diag,1,6)=="S06893" ///
| substr(diag,1,6)=="S06894" ///
| substr(diag,1,6)=="S06895" ///
| substr(diag,1,6)=="S06896" ///
| substr(diag,1,6)=="S06897" ///
| substr(diag,1,6)=="S06898" ///
| substr(diag,1,6)=="S06899" ///
| substr(diag,1,4)=="S069" ///
| substr(diag,1,4)=="S070" ///
| substr(diag,1,4)=="S071" ///
| substr(diag,1,4)=="S078" ///
| substr(diag,1,4)=="S079" ///
| substr(diag,1,4)=="S080" ///
| substr(diag,1,6)=="S08111" ///
| substr(diag,1,6)=="S08112" ///
| substr(diag,1,6)=="S08119" ///
| substr(diag,1,6)=="S08121" ///
| substr(diag,1,6)=="S08122" ///
| substr(diag,1,6)=="S08129" ///
| substr(diag,1,6)=="S08811" ///
| substr(diag,1,6)=="S08812" 
 
replace trauma=1 if  substr(diag,1,4)=="S090" ///
| substr(diag,1,5)=="S0910" ///
| substr(diag,1,5)=="S0911" ///
| substr(diag,1,5)=="S0912" ///
| substr(diag,1,5)=="S0919" ///
| substr(diag,1,5)=="S0920" ///
| substr(diag,1,5)=="S0921" ///
| substr(diag,1,5)=="S0922" ///
| substr(diag,1,6)=="S09301" ///
| substr(diag,1,6)=="S09302" ///
| substr(diag,1,6)=="S09309" ///
| substr(diag,1,6)=="S09391" ///
| substr(diag,1,6)=="S09392" ///
| substr(diag,1,6)=="S09399" ///
| substr(diag,1,4)=="S098" ///
| substr(diag,1,5)=="S0990" ///
| substr(diag,1,5)=="S0991" ///
| substr(diag,1,5)=="S0992" ///
| substr(diag,1,5)=="S0993" ///
| substr(diag,1,4)=="S100" ///
| substr(diag,1,5)=="S1010" ///
| substr(diag,1,5)=="S1011" ///
| substr(diag,1,5)=="S1080" ///
| substr(diag,1,5)=="S1081" ///
| substr(diag,1,5)=="S1083" ///
| substr(diag,1,5)=="S1085" ///
| substr(diag,1,5)=="S1086" ///
| substr(diag,1,5)=="S1087" ///
| substr(diag,1,5)=="S1090" ///
| substr(diag,1,5)=="S1091" ///
| substr(diag,1,5)=="S1093" ///
| substr(diag,1,5)=="S1094" ///
| substr(diag,1,6)=="S11011" ///
| substr(diag,1,6)=="S11012" ///
| substr(diag,1,6)=="S11013" ///
| substr(diag,1,6)=="S11019" ///
| substr(diag,1,6)=="S11021" ///
| substr(diag,1,6)=="S11022" ///
| substr(diag,1,6)=="S11023" ///
| substr(diag,1,6)=="S11024" ///
| substr(diag,1,6)=="S11029" ///
| substr(diag,1,6)=="S11033" ///
| substr(diag,1,5)=="S1110" ///
| substr(diag,1,5)=="S1111" ///
| substr(diag,1,5)=="S1114" ///
| substr(diag,1,5)=="S1120" ///
| substr(diag,1,5)=="S1121" ///
| substr(diag,1,5)=="S1122" ///
| substr(diag,1,5)=="S1123" ///
| substr(diag,1,5)=="S1124" ///
| substr(diag,1,5)=="S1180" ///
| substr(diag,1,5)=="S1181" ///
| substr(diag,1,5)=="S1182" ///
| substr(diag,1,5)=="S1183" ///
| substr(diag,1,5)=="S1184" ///
| substr(diag,1,5)=="S1185" ///
| substr(diag,1,5)=="S1189" ///
| substr(diag,1,5)=="S1190" ///
| substr(diag,1,5)=="S1191" ///
| substr(diag,1,5)=="S1192" ///
| substr(diag,1,5)=="S1193" ///
| substr(diag,1,5)=="S1194" ///
| substr(diag,1,5)=="S1195" ///
| substr(diag,1,6)=="S12000" ///
| substr(diag,1,6)=="S12001" ///
| substr(diag,1,5)=="S1201" ///
| substr(diag,1,5)=="S1202" ///
| substr(diag,1,6)=="S12030" ///
| substr(diag,1,6)=="S12031" ///
| substr(diag,1,6)=="S12040" ///
| substr(diag,1,6)=="S12041" ///
| substr(diag,1,6)=="S12090" ///
| substr(diag,1,6)=="S12091" 


replace trauma=1 if  substr(diag,1,6)=="S12100" ///
| substr(diag,1,6)=="S12101" ///
| substr(diag,1,6)=="S12110" ///
| substr(diag,1,6)=="S12111" ///
| substr(diag,1,6)=="S12112" ///
| substr(diag,1,6)=="S12120" ///
| substr(diag,1,6)=="S12121" ///
| substr(diag,1,6)=="S12130" ///
| substr(diag,1,5)=="S1214" ///
| substr(diag,1,6)=="S12150" ///
| substr(diag,1,6)=="S12151" ///
| substr(diag,1,6)=="S12190" ///
| substr(diag,1,6)=="S12191" ///
| substr(diag,1,6)=="S12200" ///
| substr(diag,1,6)=="S12201" ///
| substr(diag,1,6)=="S12230" ///
| substr(diag,1,6)=="S12231" ///
| substr(diag,1,5)=="S1224" ///
| substr(diag,1,6)=="S12250" ///
| substr(diag,1,6)=="S12251" ///
| substr(diag,1,6)=="S12290" ///
| substr(diag,1,6)=="S12291" ///
| substr(diag,1,6)=="S12300" ///
| substr(diag,1,6)=="S12301" ///
| substr(diag,1,6)=="S12330" ///
| substr(diag,1,6)=="S12331" ///
| substr(diag,1,6)=="S12350" ///
| substr(diag,1,6)=="S12351" ///
| substr(diag,1,6)=="S12390" ///
| substr(diag,1,6)=="S12391" ///
| substr(diag,1,6)=="S12400" ///
| substr(diag,1,6)=="S12401" ///
| substr(diag,1,6)=="S12430" ///
| substr(diag,1,6)=="S12431" ///
| substr(diag,1,5)=="S1244" ///
| substr(diag,1,6)=="S12450" ///
| substr(diag,1,6)=="S12451" ///
| substr(diag,1,6)=="S12490" ///
| substr(diag,1,6)=="S12491" ///
| substr(diag,1,6)=="S12500" ///
| substr(diag,1,6)=="S12501" ///
| substr(diag,1,6)=="S12530" ///
| substr(diag,1,6)=="S12531" ///
| substr(diag,1,5)=="S1254" ///
| substr(diag,1,6)=="S12550" ///
| substr(diag,1,6)=="S12551" ///
| substr(diag,1,6)=="S12590" ///
| substr(diag,1,6)=="S12591" ///
| substr(diag,1,6)=="S12600" ///
| substr(diag,1,6)=="S12601" ///
| substr(diag,1,6)=="S12630" ///
| substr(diag,1,6)=="S12631" ///
| substr(diag,1,5)=="S1264" ///
| substr(diag,1,6)=="S12650" ///
| substr(diag,1,6)=="S12651" ///
| substr(diag,1,6)=="S12690" ///
| substr(diag,1,6)=="S12691" ///
| substr(diag,1,4)=="S128" ///
| substr(diag,1,4)=="S129" ///
| substr(diag,1,4)=="S130" ///
| substr(diag,1,6)=="S13100" ///
| substr(diag,1,6)=="S13101" ///
| substr(diag,1,6)=="S13110" ///
| substr(diag,1,6)=="S13111" ///
| substr(diag,1,6)=="S13120" ///
| substr(diag,1,6)=="S13121" ///
| substr(diag,1,6)=="S13130" ///
| substr(diag,1,6)=="S13131" ///
| substr(diag,1,6)=="S13140" ///
| substr(diag,1,6)=="S13141" ///
| substr(diag,1,6)=="S13150" ///
| substr(diag,1,6)=="S13151" ///
| substr(diag,1,6)=="S13160" ///
| substr(diag,1,6)=="S13161" ///
| substr(diag,1,6)=="S13170" ///
| substr(diag,1,6)=="S13171" ///
| substr(diag,1,6)=="S13180" ///
| substr(diag,1,6)=="S13181" ///
| substr(diag,1,5)=="S1320" ///
| substr(diag,1,5)=="S1329" ///
| substr(diag,1,4)=="S134" ///
| substr(diag,1,4)=="S135" ///
| substr(diag,1,4)=="S138" ///
| substr(diag,1,4)=="S139" ///
| substr(diag,1,4)=="S140" ///
| substr(diag,1,6)=="S14101" ///
| substr(diag,1,6)=="S14102" ///
| substr(diag,1,6)=="S14103" ///
| substr(diag,1,6)=="S14104" ///
| substr(diag,1,6)=="S14105" ///
| substr(diag,1,6)=="S14106" ///
| substr(diag,1,6)=="S14107" ///
| substr(diag,1,6)=="S14108" ///
| substr(diag,1,6)=="S14109" ///
| substr(diag,1,6)=="S14111" ///
| substr(diag,1,6)=="S14112" ///
| substr(diag,1,6)=="S14113" ///
| substr(diag,1,6)=="S14114" ///
| substr(diag,1,6)=="S14115" ///
| substr(diag,1,6)=="S14116" ///
| substr(diag,1,6)=="S14117" ///
| substr(diag,1,6)=="S14118" ///
| substr(diag,1,6)=="S14119" ///
| substr(diag,1,6)=="S14121" ///
| substr(diag,1,6)=="S14122" ///
| substr(diag,1,6)=="S14123" ///
| substr(diag,1,6)=="S14124" ///
| substr(diag,1,6)=="S14125" ///
| substr(diag,1,6)=="S14126" ///
| substr(diag,1,6)=="S14127" ///
| substr(diag,1,6)=="S14128" ///
| substr(diag,1,6)=="S14129" ///
| substr(diag,1,6)=="S14132" ///
| substr(diag,1,6)=="S14133" ///
| substr(diag,1,6)=="S14134" ///
| substr(diag,1,6)=="S14135" ///
| substr(diag,1,6)=="S14136" ///
| substr(diag,1,6)=="S14137" ///
| substr(diag,1,6)=="S14141" ///
| substr(diag,1,6)=="S14142" ///
| substr(diag,1,6)=="S14143" ///
| substr(diag,1,6)=="S14145" ///
| substr(diag,1,6)=="S14146" ///
| substr(diag,1,6)=="S14149" ///
| substr(diag,1,6)=="S14151" ///
| substr(diag,1,6)=="S14152" ///
| substr(diag,1,6)=="S14153" ///
| substr(diag,1,6)=="S14154" ///
| substr(diag,1,6)=="S14155" ///
| substr(diag,1,6)=="S14156" ///
| substr(diag,1,6)=="S14157" ///
| substr(diag,1,6)=="S14158" ///
| substr(diag,1,6)=="S14159" ///
| substr(diag,1,4)=="S142" ///
| substr(diag,1,4)=="S143" ///
| substr(diag,1,4)=="S144" ///
| substr(diag,1,4)=="S145" ///
| substr(diag,1,4)=="S148" ///
| substr(diag,1,4)=="S149" ///
| substr(diag,1,6)=="S15001" ///
| substr(diag,1,6)=="S15002" ///
| substr(diag,1,6)=="S15009" ///
| substr(diag,1,6)=="S15011" ///
| substr(diag,1,6)=="S15012" ///
| substr(diag,1,6)=="S15019" ///
| substr(diag,1,6)=="S15021" ///
| substr(diag,1,6)=="S15022" ///
| substr(diag,1,6)=="S15029" ///
| substr(diag,1,6)=="S15091" ///
| substr(diag,1,6)=="S15092" ///
| substr(diag,1,6)=="S15099" ///
| substr(diag,1,6)=="S15101" ///
| substr(diag,1,6)=="S15102" ///
| substr(diag,1,6)=="S15109" ///
| substr(diag,1,6)=="S15111" ///
| substr(diag,1,6)=="S15112" ///
| substr(diag,1,6)=="S15119" ///
| substr(diag,1,6)=="S15121" ///
| substr(diag,1,6)=="S15122" ///
| substr(diag,1,6)=="S15129" ///
| substr(diag,1,6)=="S15191" ///
| substr(diag,1,6)=="S15192" ///
| substr(diag,1,6)=="S15199" ///
| substr(diag,1,6)=="S15201" ///
| substr(diag,1,6)=="S15209" ///
| substr(diag,1,6)=="S15211" ///
| substr(diag,1,6)=="S15212" ///
| substr(diag,1,6)=="S15219" ///
| substr(diag,1,6)=="S15221" ///
| substr(diag,1,6)=="S15222" ///
| substr(diag,1,6)=="S15229" ///
| substr(diag,1,6)=="S15291" ///
| substr(diag,1,6)=="S15292" ///
| substr(diag,1,6)=="S15301" ///
| substr(diag,1,6)=="S15302" ///
| substr(diag,1,6)=="S15309" ///
| substr(diag,1,6)=="S15311" ///
| substr(diag,1,6)=="S15312" ///
| substr(diag,1,6)=="S15321" ///
| substr(diag,1,6)=="S15322" ///
| substr(diag,1,6)=="S15329" ///
| substr(diag,1,6)=="S15391" ///
| substr(diag,1,6)=="S15392" ///
| substr(diag,1,4)=="S158" ///
| substr(diag,1,4)=="S159" ///
| substr(diag,1,4)=="S161" ///
| substr(diag,1,4)=="S162" ///
| substr(diag,1,4)=="S168" ///
| substr(diag,1,4)=="S169" ///
| substr(diag,1,4)=="S170" ///
| substr(diag,1,4)=="S179" ///
| substr(diag,1,5)=="S1980" ///
| substr(diag,1,5)=="S1981" ///
| substr(diag,1,5)=="S1982" ///
| substr(diag,1,5)=="S1983" ///
| substr(diag,1,5)=="S1984" ///
| substr(diag,1,5)=="S1985" ///
| substr(diag,1,5)=="S1989" ///
| substr(diag,1,4)=="S199" ///
| substr(diag,1,5)=="S2000" ///
| substr(diag,1,5)=="S2001" ///
| substr(diag,1,5)=="S2002" ///
| substr(diag,1,6)=="S20111"
 
replace trauma=1 if  substr(diag,1,6)=="S20112" ///
| substr(diag,1,6)=="S20119" ///
| substr(diag,1,5)=="S2020" ///
| substr(diag,1,6)=="S20211" ///
| substr(diag,1,6)=="S20212" ///
| substr(diag,1,6)=="S20219" ///
| substr(diag,1,6)=="S20221" ///
| substr(diag,1,6)=="S20222" ///
| substr(diag,1,6)=="S20229" ///
| substr(diag,1,6)=="S20301" ///
| substr(diag,1,6)=="S20302" ///
| substr(diag,1,6)=="S20309" ///
| substr(diag,1,6)=="S20311" ///
| substr(diag,1,6)=="S20312" ///
| substr(diag,1,6)=="S20319" ///
| substr(diag,1,6)=="S20401" ///
| substr(diag,1,6)=="S20402" ///
| substr(diag,1,6)=="S20409" ///
| substr(diag,1,6)=="S20411" ///
| substr(diag,1,6)=="S20412" ///
| substr(diag,1,6)=="S20419" ///
| substr(diag,1,6)=="S20452" ///
| substr(diag,1,5)=="S2090" ///
| substr(diag,1,5)=="S2091" ///
| substr(diag,1,6)=="S21002" ///
| substr(diag,1,6)=="S21009" ///
| substr(diag,1,6)=="S21011" ///
| substr(diag,1,6)=="S21012" ///
| substr(diag,1,6)=="S21021" ///
| substr(diag,1,6)=="S21022" ///
| substr(diag,1,6)=="S21031" ///
| substr(diag,1,6)=="S21041" ///
| substr(diag,1,6)=="S21052" ///
| substr(diag,1,6)=="S21101" ///
| substr(diag,1,6)=="S21102" ///
| substr(diag,1,6)=="S21109" ///
| substr(diag,1,6)=="S21111" ///
| substr(diag,1,6)=="S21112" ///
| substr(diag,1,6)=="S21119" ///
| substr(diag,1,6)=="S21121" ///
| substr(diag,1,6)=="S21122" ///
| substr(diag,1,6)=="S21129" ///
| substr(diag,1,6)=="S21131" ///
| substr(diag,1,6)=="S21132" ///
| substr(diag,1,6)=="S21139" ///
| substr(diag,1,6)=="S21141" ///
| substr(diag,1,6)=="S21142" ///
| substr(diag,1,6)=="S21149" ///
| substr(diag,1,6)=="S21151" ///
| substr(diag,1,6)=="S21152" ///
| substr(diag,1,6)=="S21201" ///
| substr(diag,1,6)=="S21202" ///
| substr(diag,1,6)=="S21209" ///
| substr(diag,1,6)=="S21211" ///
| substr(diag,1,6)=="S21212" ///
| substr(diag,1,6)=="S21219" ///
| substr(diag,1,6)=="S21221" ///
| substr(diag,1,6)=="S21222" ///
| substr(diag,1,6)=="S21229" ///
| substr(diag,1,6)=="S21231" ///
| substr(diag,1,6)=="S21232" ///
| substr(diag,1,6)=="S21239" ///
| substr(diag,1,6)=="S21241" ///
| substr(diag,1,6)=="S21242" ///
| substr(diag,1,6)=="S21249" ///
| substr(diag,1,6)=="S21259" ///
| substr(diag,1,6)=="S21301" ///
| substr(diag,1,6)=="S21302" ///
| substr(diag,1,6)=="S21309" ///
| substr(diag,1,6)=="S21311" ///
| substr(diag,1,6)=="S21312" ///
| substr(diag,1,6)=="S21319" ///
| substr(diag,1,6)=="S21321" ///
| substr(diag,1,6)=="S21322" ///
| substr(diag,1,6)=="S21331" ///
| substr(diag,1,6)=="S21332" ///
| substr(diag,1,6)=="S21339" ///
| substr(diag,1,6)=="S21341" ///
| substr(diag,1,6)=="S21342" ///
| substr(diag,1,6)=="S21349" ///
| substr(diag,1,6)=="S21401" ///
| substr(diag,1,6)=="S21402" ///
| substr(diag,1,6)=="S21409" ///
| substr(diag,1,6)=="S21411" ///
| substr(diag,1,6)=="S21412" ///
| substr(diag,1,6)=="S21419" ///
| substr(diag,1,6)=="S21421" ///
| substr(diag,1,6)=="S21422" ///
| substr(diag,1,6)=="S21429" ///
| substr(diag,1,6)=="S21431" ///
| substr(diag,1,6)=="S21432" ///
| substr(diag,1,6)=="S21439" ///
| substr(diag,1,6)=="S21441" ///
| substr(diag,1,6)=="S21442" ///
| substr(diag,1,5)=="S2190" ///
| substr(diag,1,5)=="S2191" ///
| substr(diag,1,5)=="S2192" ///
| substr(diag,1,5)=="S2193" ///
| substr(diag,1,5)=="S2194" ///
| substr(diag,1,5)=="S2195" ///
| substr(diag,1,6)=="S22000" ///
| substr(diag,1,6)=="S22001" ///
| substr(diag,1,6)=="S22002" ///
| substr(diag,1,6)=="S22008" ///
| substr(diag,1,6)=="S22009" ///
| substr(diag,1,6)=="S22010" ///
| substr(diag,1,6)=="S22011" ///
| substr(diag,1,6)=="S22012" ///
| substr(diag,1,6)=="S22018" ///
| substr(diag,1,6)=="S22019" ///
| substr(diag,1,6)=="S22020" ///
| substr(diag,1,6)=="S22021" ///
| substr(diag,1,6)=="S22022" ///
| substr(diag,1,6)=="S22028" ///
| substr(diag,1,6)=="S22029" ///
| substr(diag,1,6)=="S22030" ///
| substr(diag,1,6)=="S22031" ///
| substr(diag,1,6)=="S22032" ///
| substr(diag,1,6)=="S22038" ///
| substr(diag,1,6)=="S22039" ///
| substr(diag,1,6)=="S22040" ///
| substr(diag,1,6)=="S22041" ///
| substr(diag,1,6)=="S22042" ///
| substr(diag,1,6)=="S22048" ///
| substr(diag,1,6)=="S22049" ///
| substr(diag,1,6)=="S22050" ///
| substr(diag,1,6)=="S22051" ///
| substr(diag,1,6)=="S22052" ///
| substr(diag,1,6)=="S22058" ///
| substr(diag,1,6)=="S22059" ///
| substr(diag,1,6)=="S22060" ///
| substr(diag,1,6)=="S22061" ///
| substr(diag,1,6)=="S22062" ///
| substr(diag,1,6)=="S22068" ///
| substr(diag,1,6)=="S22069" ///
| substr(diag,1,6)=="S22070" ///
| substr(diag,1,6)=="S22071" ///
| substr(diag,1,6)=="S22072" ///
| substr(diag,1,6)=="S22078" ///
| substr(diag,1,6)=="S22079" ///
| substr(diag,1,6)=="S22080" ///
| substr(diag,1,6)=="S22081" ///
| substr(diag,1,6)=="S22082" ///
| substr(diag,1,6)=="S22088" ///
| substr(diag,1,6)=="S22089" ///
| substr(diag,1,5)=="S2220" ///
| substr(diag,1,5)=="S2221" ///
| substr(diag,1,5)=="S2222" ///
| substr(diag,1,5)=="S2223" ///
| substr(diag,1,5)=="S2224" ///
| substr(diag,1,5)=="S2231" ///
| substr(diag,1,5)=="S2232" ///
| substr(diag,1,5)=="S2239" ///
| substr(diag,1,5)=="S2241" ///
| substr(diag,1,5)=="S2242" ///
| substr(diag,1,5)=="S2243" ///
| substr(diag,1,5)=="S2249" ///
| substr(diag,1,4)=="S225" ///
| substr(diag,1,4)=="S229" ///
| substr(diag,1,4)=="S230" ///
| substr(diag,1,6)=="S23101" ///
| substr(diag,1,6)=="S23110" ///
| substr(diag,1,6)=="S23111" ///
| substr(diag,1,6)=="S23123" ///
| substr(diag,1,6)=="S23131" ///
| substr(diag,1,6)=="S23133" ///
| substr(diag,1,6)=="S23141" ///
| substr(diag,1,6)=="S23142" ///
| substr(diag,1,6)=="S23143" ///
| substr(diag,1,6)=="S23150" ///
| substr(diag,1,6)=="S23151" ///
| substr(diag,1,6)=="S23153" ///
| substr(diag,1,6)=="S23160" ///
| substr(diag,1,6)=="S23161" ///
| substr(diag,1,6)=="S23162" ///
| substr(diag,1,6)=="S23163" ///
| substr(diag,1,6)=="S23170" ///
| substr(diag,1,6)=="S23171" ///
| substr(diag,1,5)=="S2320" ///
| substr(diag,1,5)=="S2329" ///
| substr(diag,1,4)=="S233" ///
| substr(diag,1,5)=="S2341" ///
| substr(diag,1,6)=="S23420" ///
| substr(diag,1,6)=="S23428" ///
| substr(diag,1,6)=="S23429" ///
| substr(diag,1,4)=="S238" ///
| substr(diag,1,4)=="S239" ///
| substr(diag,1,4)=="S240" ///
| substr(diag,1,6)=="S24101" ///
| substr(diag,1,6)=="S24102" ///
| substr(diag,1,6)=="S24103" ///
| substr(diag,1,6)=="S24104" ///
| substr(diag,1,6)=="S24109" ///
| substr(diag,1,6)=="S24111" ///
| substr(diag,1,6)=="S24112" ///
| substr(diag,1,6)=="S24113" ///
| substr(diag,1,6)=="S24114" ///
| substr(diag,1,6)=="S24119" ///
| substr(diag,1,6)=="S24132" ///
| substr(diag,1,6)=="S24133" ///
| substr(diag,1,6)=="S24134" ///
| substr(diag,1,6)=="S24139" ///
| substr(diag,1,6)=="S24142" ///
| substr(diag,1,6)=="S24144" ///
| substr(diag,1,6)=="S24149" ///
| substr(diag,1,6)=="S24151" ///
| substr(diag,1,6)=="S24152" ///
| substr(diag,1,6)=="S24153" ///
| substr(diag,1,6)=="S24154" 


replace trauma=1 if  substr(diag,1,4)=="S242" ///
| substr(diag,1,4)=="S249" ///
| substr(diag,1,5)=="S2500" ///
| substr(diag,1,5)=="S2501" ///
| substr(diag,1,5)=="S2502" ///
| substr(diag,1,5)=="S2509" ///
| substr(diag,1,6)=="S25101" ///
| substr(diag,1,6)=="S25102" ///
| substr(diag,1,6)=="S25109" ///
| substr(diag,1,6)=="S25111" ///
| substr(diag,1,6)=="S25112" ///
| substr(diag,1,6)=="S25119" ///
| substr(diag,1,6)=="S25121" ///
| substr(diag,1,6)=="S25122" ///
| substr(diag,1,6)=="S25191" ///
| substr(diag,1,6)=="S25192" ///
| substr(diag,1,5)=="S2520" ///
| substr(diag,1,5)=="S2521" ///
| substr(diag,1,5)=="S2522" ///
| substr(diag,1,5)=="S2529" ///
| substr(diag,1,6)=="S25301" ///
| substr(diag,1,6)=="S25302" ///
| substr(diag,1,6)=="S25309" ///
| substr(diag,1,6)=="S25311" ///
| substr(diag,1,6)=="S25312" ///
| substr(diag,1,6)=="S25322" ///
| substr(diag,1,6)=="S25392" ///
| substr(diag,1,6)=="S25401" ///
| substr(diag,1,6)=="S25409" ///
| substr(diag,1,6)=="S25411" ///
| substr(diag,1,6)=="S25412" ///
| substr(diag,1,6)=="S25419" ///
| substr(diag,1,6)=="S25422" ///
| substr(diag,1,6)=="S25429" ///
| substr(diag,1,6)=="S25491" ///
| substr(diag,1,6)=="S25501" ///
| substr(diag,1,6)=="S25509" ///
| substr(diag,1,6)=="S25511" ///
| substr(diag,1,6)=="S25512" ///
| substr(diag,1,6)=="S25519" ///
| substr(diag,1,6)=="S25599" ///
| substr(diag,1,6)=="S25801" ///
| substr(diag,1,6)=="S25802" ///
| substr(diag,1,6)=="S25809" ///
| substr(diag,1,6)=="S25811" ///
| substr(diag,1,6)=="S25812" ///
| substr(diag,1,6)=="S25819" ///
| substr(diag,1,6)=="S25891" ///
| substr(diag,1,6)=="S25892" ///
| substr(diag,1,6)=="S25899" ///
| substr(diag,1,5)=="S2590" ///
| substr(diag,1,5)=="S2591" ///
| substr(diag,1,5)=="S2599" ///
| substr(diag,1,5)=="S2600" ///
| substr(diag,1,5)=="S2601" ///
| substr(diag,1,6)=="S26020" ///
| substr(diag,1,6)=="S26021" ///
| substr(diag,1,6)=="S26022" ///
| substr(diag,1,5)=="S2609" ///
| substr(diag,1,5)=="S2610" ///
| substr(diag,1,5)=="S2611" ///
| substr(diag,1,5)=="S2612" ///
| substr(diag,1,5)=="S2619" ///
| substr(diag,1,5)=="S2690" ///
| substr(diag,1,5)=="S2691" ///
| substr(diag,1,5)=="S2692" ///
| substr(diag,1,5)=="S2699" ///
| substr(diag,1,4)=="S270" ///
| substr(diag,1,4)=="S271" ///
| substr(diag,1,4)=="S272" ///
| substr(diag,1,6)=="S27301" ///
| substr(diag,1,6)=="S27302" ///
| substr(diag,1,6)=="S27309" ///
| substr(diag,1,6)=="S27311" ///
| substr(diag,1,6)=="S27312" ///
| substr(diag,1,6)=="S27319" ///
| substr(diag,1,6)=="S27321" ///
| substr(diag,1,6)=="S27322" ///
| substr(diag,1,6)=="S27329" ///
| substr(diag,1,6)=="S27331" ///
| substr(diag,1,6)=="S27332" ///
| substr(diag,1,6)=="S27339" ///
| substr(diag,1,6)=="S27391" ///
| substr(diag,1,6)=="S27392" ///
| substr(diag,1,6)=="S27399" ///
| substr(diag,1,6)=="S27402" ///
| substr(diag,1,6)=="S27409" ///
| substr(diag,1,6)=="S27421" ///
| substr(diag,1,6)=="S27422" ///
| substr(diag,1,6)=="S27431" ///
| substr(diag,1,6)=="S27491" ///
| substr(diag,1,5)=="S2753" ///
| substr(diag,1,5)=="S2760" ///
| substr(diag,1,5)=="S2763" ///
| substr(diag,1,5)=="S2769" ///
| substr(diag,1,6)=="S27802" ///
| substr(diag,1,6)=="S27803" ///
| substr(diag,1,6)=="S27808" ///
| substr(diag,1,6)=="S27809" ///
| substr(diag,1,6)=="S27812" ///
| substr(diag,1,6)=="S27813" ///
| substr(diag,1,6)=="S27818" ///
| substr(diag,1,6)=="S27819" ///
| substr(diag,1,6)=="S27892" ///
| substr(diag,1,6)=="S27893" 


replace trauma=1 if substr(diag,1,6)=="S27898" ///
| substr(diag,1,6)=="S27899" ///
| substr(diag,1,4)=="S279" ///
| substr(diag,1,4)=="S280" ///
| substr(diag,1,4)=="S281" ///
| substr(diag,1,6)=="S28222" ///
| substr(diag,1,6)=="S29001" ///
| substr(diag,1,6)=="S29009" ///
| substr(diag,1,6)=="S29011" ///
| substr(diag,1,6)=="S29012" ///
| substr(diag,1,6)=="S29019" ///
| substr(diag,1,6)=="S29021" ///
| substr(diag,1,6)=="S29022" ///
| substr(diag,1,6)=="S29029" ///
| substr(diag,1,6)=="S29091" ///
| substr(diag,1,6)=="S29092" ///
| substr(diag,1,6)=="S29099" ///
| substr(diag,1,4)=="S298" ///
| substr(diag,1,4)=="S299" ///
| substr(diag,1,4)=="S300" ///
| substr(diag,1,4)=="S301" ///
| substr(diag,1,6)=="S30201" ///
| substr(diag,1,6)=="S30202" ///
| substr(diag,1,5)=="S3021" ///
| substr(diag,1,5)=="S3022" ///
| substr(diag,1,5)=="S3023" ///
| substr(diag,1,4)=="S303" ///
| substr(diag,1,6)=="S30810" ///
| substr(diag,1,6)=="S30811" ///
| substr(diag,1,6)=="S30812" ///
| substr(diag,1,6)=="S30813" ///
| substr(diag,1,6)=="S30816" ///
| substr(diag,1,6)=="S30817" ///
| substr(diag,1,6)=="S30820" ///
| substr(diag,1,6)=="S30841" ///
| substr(diag,1,6)=="S30850" ///
| substr(diag,1,6)=="S30851" ///
| substr(diag,1,6)=="S30857" ///
| substr(diag,1,6)=="S30870" ///
| substr(diag,1,6)=="S30871" ///
| substr(diag,1,5)=="S3091" ///
| substr(diag,1,5)=="S3092" ///
| substr(diag,1,5)=="S3094" ///
| substr(diag,1,6)=="S31000" ///
| substr(diag,1,6)=="S31001" ///
| substr(diag,1,6)=="S31010" ///
| substr(diag,1,6)=="S31011" ///
| substr(diag,1,6)=="S31020" ///
| substr(diag,1,6)=="S31021" ///
| substr(diag,1,6)=="S31030" ///
| substr(diag,1,6)=="S31031" ///
| substr(diag,1,6)=="S31040" ///
| substr(diag,1,6)=="S31041" ///
| substr(diag,1,6)=="S31100" ///
| substr(diag,1,6)=="S31101" ///
| substr(diag,1,6)=="S31102" ///
| substr(diag,1,6)=="S31103" ///
| substr(diag,1,6)=="S31104" ///
| substr(diag,1,6)=="S31105" ///
| substr(diag,1,6)=="S31109" ///
| substr(diag,1,6)=="S31110" ///
| substr(diag,1,6)=="S31111" ///
| substr(diag,1,6)=="S31112" ///
| substr(diag,1,6)=="S31113" ///
| substr(diag,1,6)=="S31114" ///
| substr(diag,1,6)=="S31115" ///
| substr(diag,1,6)=="S31119" ///
| substr(diag,1,6)=="S31120" ///
| substr(diag,1,6)=="S31121" ///
| substr(diag,1,6)=="S31122" ///
| substr(diag,1,6)=="S31123" ///
| substr(diag,1,6)=="S31124" ///
| substr(diag,1,6)=="S31125" ///
| substr(diag,1,6)=="S31129" ///
| substr(diag,1,6)=="S31130" ///
| substr(diag,1,6)=="S31131" ///
| substr(diag,1,6)=="S31132" ///
| substr(diag,1,6)=="S31133" ///
| substr(diag,1,6)=="S31134" ///
| substr(diag,1,6)=="S31135" ///
| substr(diag,1,6)=="S31139" ///
| substr(diag,1,6)=="S31140" ///
| substr(diag,1,6)=="S31141" ///
| substr(diag,1,6)=="S31142" ///
| substr(diag,1,6)=="S31143" ///
| substr(diag,1,6)=="S31144" ///
| substr(diag,1,6)=="S31145" ///
| substr(diag,1,6)=="S31149" ///
| substr(diag,1,6)=="S31150" ///
| substr(diag,1,6)=="S31152" ///
| substr(diag,1,6)=="S31153" ///
| substr(diag,1,6)=="S31159" ///
| substr(diag,1,5)=="S3120"  


replace trauma=1 if  substr(diag,1,5)=="S3121" ///
| substr(diag,1,5)=="S3122" ///
| substr(diag,1,5)=="S3123" ///
| substr(diag,1,5)=="S3124" ///
| substr(diag,1,5)=="S3125" ///
| substr(diag,1,5)=="S3130" ///
| substr(diag,1,5)=="S3131" ///
| substr(diag,1,5)=="S3132" ///
| substr(diag,1,5)=="S3133" ///
| substr(diag,1,5)=="S3134" ///
| substr(diag,1,5)=="S3135" ///
| substr(diag,1,5)=="S3140" ///
| substr(diag,1,5)=="S3141" ///
| substr(diag,1,5)=="S3142" ///
| substr(diag,1,5)=="S3143" ///
| substr(diag,1,5)=="S3144" ///
| substr(diag,1,6)=="S31501" ///
| substr(diag,1,6)=="S31502" ///
| substr(diag,1,6)=="S31511" ///
| substr(diag,1,6)=="S31512" ///
| substr(diag,1,6)=="S31522" ///
| substr(diag,1,6)=="S31531" ///
| substr(diag,1,6)=="S31541" ///
| substr(diag,1,6)=="S31600" ///
| substr(diag,1,6)=="S31601" ///
| substr(diag,1,6)=="S31602" ///
| substr(diag,1,6)=="S31603" ///
| substr(diag,1,6)=="S31604" ///
| substr(diag,1,6)=="S31605" ///
| substr(diag,1,6)=="S31609" ///
| substr(diag,1,6)=="S31610" ///
| substr(diag,1,6)=="S31611" ///
| substr(diag,1,6)=="S31612" ///
| substr(diag,1,6)=="S31613" ///
| substr(diag,1,6)=="S31614" ///
| substr(diag,1,6)=="S31615" ///
| substr(diag,1,6)=="S31619" ///
| substr(diag,1,6)=="S31620" ///
| substr(diag,1,6)=="S31621" ///
| substr(diag,1,6)=="S31622" ///
| substr(diag,1,6)=="S31623" ///
| substr(diag,1,6)=="S31624" ///
| substr(diag,1,6)=="S31625" ///
| substr(diag,1,6)=="S31629" ///
| substr(diag,1,6)=="S31630" ///
| substr(diag,1,6)=="S31631" ///
| substr(diag,1,6)=="S31632" ///
| substr(diag,1,6)=="S31633" ///
| substr(diag,1,6)=="S31634" ///
| substr(diag,1,6)=="S31635" ///
| substr(diag,1,6)=="S31639" ///
| substr(diag,1,6)=="S31640" ///
| substr(diag,1,6)=="S31641" ///
| substr(diag,1,6)=="S31643" ///
| substr(diag,1,6)=="S31644" ///
| substr(diag,1,6)=="S31645" ///
| substr(diag,1,6)=="S31649" ///
| substr(diag,1,6)=="S31801" ///
| substr(diag,1,6)=="S31802" ///
| substr(diag,1,6)=="S31803" ///
| substr(diag,1,6)=="S31804" ///
| substr(diag,1,6)=="S31809" ///
| substr(diag,1,6)=="S31811" ///
| substr(diag,1,6)=="S31812" ///
| substr(diag,1,6)=="S31813" ///
| substr(diag,1,6)=="S31814" ///
| substr(diag,1,6)=="S31815" ///
| substr(diag,1,6)=="S31819" ///
| substr(diag,1,6)=="S31821" ///
| substr(diag,1,6)=="S31822" ///
| substr(diag,1,6)=="S31823" ///
| substr(diag,1,6)=="S31824" ///
| substr(diag,1,6)=="S31825" ///
| substr(diag,1,6)=="S31829" ///
| substr(diag,1,6)=="S31831" ///
| substr(diag,1,6)=="S31832" ///
| substr(diag,1,6)=="S31839" ///
| substr(diag,1,6)=="S32000" ///
| substr(diag,1,6)=="S32001" ///
| substr(diag,1,6)=="S32002" ///
| substr(diag,1,6)=="S32008" ///
| substr(diag,1,6)=="S32009" ///
| substr(diag,1,6)=="S32010" ///
| substr(diag,1,6)=="S32011" ///
| substr(diag,1,6)=="S32012"  


replace trauma=1 if  substr(diag,1,6)=="S32018" ///
| substr(diag,1,6)=="S32019" ///
| substr(diag,1,6)=="S32020" ///
| substr(diag,1,6)=="S32021" ///
| substr(diag,1,6)=="S32022" ///
| substr(diag,1,6)=="S32028" ///
| substr(diag,1,6)=="S32029" ///
| substr(diag,1,6)=="S32030" ///
| substr(diag,1,6)=="S32031" ///
| substr(diag,1,6)=="S32032" ///
| substr(diag,1,6)=="S32038" ///
| substr(diag,1,6)=="S32039" ///
| substr(diag,1,6)=="S32040" ///
| substr(diag,1,6)=="S32041" ///
| substr(diag,1,6)=="S32042" ///
| substr(diag,1,6)=="S32048" ///
| substr(diag,1,6)=="S32049" ///
| substr(diag,1,6)=="S32050" ///
| substr(diag,1,6)=="S32051" ///
| substr(diag,1,6)=="S32052" ///
| substr(diag,1,6)=="S32058" ///
| substr(diag,1,6)=="S32059" ///
| substr(diag,1,5)=="S3210" ///
| substr(diag,1,6)=="S32110" ///
| substr(diag,1,6)=="S32111" ///
| substr(diag,1,6)=="S32112" ///
| substr(diag,1,6)=="S32119" ///
| substr(diag,1,6)=="S32120" ///
| substr(diag,1,6)=="S32121" ///
| substr(diag,1,6)=="S32122" ///
| substr(diag,1,6)=="S32129" ///
| substr(diag,1,6)=="S32130" ///
| substr(diag,1,6)=="S32131" ///
| substr(diag,1,6)=="S32132" ///
| substr(diag,1,6)=="S32139" ///
| substr(diag,1,5)=="S3214" ///
| substr(diag,1,5)=="S3215" ///
| substr(diag,1,5)=="S3216" ///
| substr(diag,1,5)=="S3217" ///
| substr(diag,1,5)=="S3219" ///
| substr(diag,1,4)=="S322" ///
| substr(diag,1,6)=="S32301" ///
| substr(diag,1,6)=="S32302" ///
| substr(diag,1,6)=="S32309" ///
| substr(diag,1,6)=="S32311" ///
| substr(diag,1,6)=="S32312" ///
| substr(diag,1,6)=="S32313" ///
| substr(diag,1,6)=="S32314" ///
| substr(diag,1,6)=="S32315" ///
| substr(diag,1,6)=="S32391" ///
| substr(diag,1,6)=="S32392" ///
| substr(diag,1,6)=="S32399" ///
| substr(diag,1,6)=="S32401" ///
| substr(diag,1,6)=="S32402" ///
| substr(diag,1,6)=="S32409" ///
| substr(diag,1,6)=="S32411" ///
| substr(diag,1,6)=="S32412" ///
| substr(diag,1,6)=="S32413" ///
| substr(diag,1,6)=="S32414" ///
| substr(diag,1,6)=="S32415" ///
| substr(diag,1,6)=="S32416" ///
| substr(diag,1,6)=="S32421" ///
| substr(diag,1,6)=="S32422" ///
| substr(diag,1,6)=="S32423" ///
| substr(diag,1,6)=="S32424" ///
| substr(diag,1,6)=="S32425" ///
| substr(diag,1,6)=="S32426" ///
| substr(diag,1,6)=="S32431" ///
| substr(diag,1,6)=="S32432" ///
| substr(diag,1,6)=="S32433" ///
| substr(diag,1,6)=="S32434" ///
| substr(diag,1,6)=="S32435" ///
| substr(diag,1,6)=="S32436" ///
| substr(diag,1,6)=="S32441" ///
| substr(diag,1,6)=="S32442" ///
| substr(diag,1,6)=="S32443" ///
| substr(diag,1,6)=="S32444" ///
| substr(diag,1,6)=="S32445" ///
| substr(diag,1,6)=="S32446" ///
| substr(diag,1,6)=="S32451" ///
| substr(diag,1,6)=="S32452" ///
| substr(diag,1,6)=="S32453" ///
| substr(diag,1,6)=="S32454" ///
| substr(diag,1,6)=="S32455" ///
| substr(diag,1,6)=="S32456" ///
| substr(diag,1,6)=="S32461"  


replace trauma=1 if  substr(diag,1,6)=="S32462" ///
| substr(diag,1,6)=="S32464" ///
| substr(diag,1,6)=="S32465" ///
| substr(diag,1,6)=="S32471" ///
| substr(diag,1,6)=="S32472" ///
| substr(diag,1,6)=="S32473" ///
| substr(diag,1,6)=="S32474" ///
| substr(diag,1,6)=="S32475" ///
| substr(diag,1,6)=="S32476" ///
| substr(diag,1,6)=="S32481" ///
| substr(diag,1,6)=="S32482" ///
| substr(diag,1,6)=="S32484" ///
| substr(diag,1,6)=="S32485" ///
| substr(diag,1,6)=="S32491" ///
| substr(diag,1,6)=="S32492" ///
| substr(diag,1,6)=="S32499" ///
| substr(diag,1,6)=="S32501" ///
| substr(diag,1,6)=="S32502" ///
| substr(diag,1,6)=="S32509" ///
| substr(diag,1,6)=="S32511" ///
| substr(diag,1,6)=="S32512" ///
| substr(diag,1,6)=="S32519" ///
| substr(diag,1,6)=="S32591" ///
| substr(diag,1,6)=="S32592" ///
| substr(diag,1,6)=="S32599" ///
| substr(diag,1,6)=="S32601" ///
| substr(diag,1,6)=="S32602" ///
| substr(diag,1,6)=="S32609" ///
| substr(diag,1,6)=="S32611" ///
| substr(diag,1,6)=="S32612" ///
| substr(diag,1,6)=="S32614" ///
| substr(diag,1,6)=="S32615" ///
| substr(diag,1,6)=="S32616" ///
| substr(diag,1,6)=="S32691" ///
| substr(diag,1,6)=="S32692" ///
| substr(diag,1,6)=="S32699" ///
| substr(diag,1,6)=="S32810" ///
| substr(diag,1,6)=="S32811" ///
| substr(diag,1,5)=="S3282" ///
| substr(diag,1,5)=="S3289" ///
| substr(diag,1,4)=="S329" ///
| substr(diag,1,4)=="S330" ///
| substr(diag,1,6)=="S33101" ///
| substr(diag,1,6)=="S33111" ///
| substr(diag,1,6)=="S33120" ///
| substr(diag,1,6)=="S33121" ///
| substr(diag,1,6)=="S33130" ///
| substr(diag,1,6)=="S33131" ///
| substr(diag,1,6)=="S33140" ///
| substr(diag,1,6)=="S33141" ///
| substr(diag,1,4)=="S332" ///
| substr(diag,1,5)=="S3330" ///
| substr(diag,1,5)=="S3339" ///
| substr(diag,1,4)=="S334" ///
| substr(diag,1,4)=="S335" ///
| substr(diag,1,4)=="S336" ///
| substr(diag,1,4)=="S338" ///
| substr(diag,1,4)=="S339" ///
| substr(diag,1,5)=="S3401" ///
| substr(diag,1,6)=="S34101" ///
| substr(diag,1,6)=="S34102" ///
| substr(diag,1,6)=="S34103" ///
| substr(diag,1,6)=="S34104" ///
| substr(diag,1,6)=="S34105" ///
| substr(diag,1,6)=="S34109" ///
| substr(diag,1,6)=="S34111" ///
| substr(diag,1,6)=="S34112" ///
| substr(diag,1,6)=="S34119" ///
| substr(diag,1,6)=="S34121" ///
| substr(diag,1,6)=="S34122" ///
| substr(diag,1,6)=="S34123" ///
| substr(diag,1,6)=="S34124" ///
| substr(diag,1,6)=="S34125" ///
| substr(diag,1,6)=="S34129" ///
| substr(diag,1,6)=="S34139" ///
| substr(diag,1,5)=="S3421" ///
| substr(diag,1,5)=="S3422" ///
| substr(diag,1,4)=="S343"  


replace trauma=1 if  substr(diag,1,4)=="S344" ///
| substr(diag,1,4)=="S345" ///
| substr(diag,1,4)=="S346" ///
| substr(diag,1,4)=="S348" ///
| substr(diag,1,4)=="S349" ///
| substr(diag,1,5)=="S3500" ///
| substr(diag,1,5)=="S3501" ///
| substr(diag,1,5)=="S3502" ///
| substr(diag,1,5)=="S3509" ///
| substr(diag,1,5)=="S3510" ///
| substr(diag,1,5)=="S3511" ///
| substr(diag,1,5)=="S3512" ///
| substr(diag,1,5)=="S3519" ///
| substr(diag,1,6)=="S35211" ///
| substr(diag,1,6)=="S35212" ///
| substr(diag,1,6)=="S35218" ///
| substr(diag,1,6)=="S35219" ///
| substr(diag,1,6)=="S35221" ///
| substr(diag,1,6)=="S35222" ///
| substr(diag,1,6)=="S35228" ///
| substr(diag,1,6)=="S35229" ///
| substr(diag,1,6)=="S35231" ///
| substr(diag,1,6)=="S35232" ///
| substr(diag,1,6)=="S35239" ///
| substr(diag,1,6)=="S35291" ///
| substr(diag,1,6)=="S35292" ///
| substr(diag,1,6)=="S35298" ///
| substr(diag,1,6)=="S35299" ///
| substr(diag,1,6)=="S35311" ///
| substr(diag,1,6)=="S35319" ///
| substr(diag,1,6)=="S35321" ///
| substr(diag,1,6)=="S35328" ///
| substr(diag,1,6)=="S35329" ///
| substr(diag,1,6)=="S35331" ///
| substr(diag,1,6)=="S35339" ///
| substr(diag,1,6)=="S35341" ///
| substr(diag,1,6)=="S35348" ///
| substr(diag,1,6)=="S35401" ///
| substr(diag,1,6)=="S35402" ///
| substr(diag,1,6)=="S35403" ///
| substr(diag,1,6)=="S35404" ///
| substr(diag,1,6)=="S35405" ///
| substr(diag,1,6)=="S35406" ///
| substr(diag,1,6)=="S35411" ///
| substr(diag,1,6)=="S35412" ///
| substr(diag,1,6)=="S35413" ///
| substr(diag,1,6)=="S35414" ///
| substr(diag,1,6)=="S35415" ///
| substr(diag,1,6)=="S35416" ///
| substr(diag,1,6)=="S35491" ///
| substr(diag,1,6)=="S35492" ///
| substr(diag,1,6)=="S35493" ///
| substr(diag,1,6)=="S35494" ///
| substr(diag,1,5)=="S3550" ///
| substr(diag,1,6)=="S35511" ///
| substr(diag,1,6)=="S35512" ///
| substr(diag,1,6)=="S35513" ///
| substr(diag,1,6)=="S35514" ///
| substr(diag,1,6)=="S35515" ///
| substr(diag,1,6)=="S35516" ///
| substr(diag,1,6)=="S35531" ///
| substr(diag,1,6)=="S35532" ///
| substr(diag,1,5)=="S3559" ///
| substr(diag,1,4)=="S358" ///
| substr(diag,1,5)=="S3590" ///
| substr(diag,1,5)=="S3591" ///
| substr(diag,1,5)=="S3599" ///
| substr(diag,1,5)=="S3600" ///
| substr(diag,1,6)=="S36020" ///
| substr(diag,1,6)=="S36021" ///
| substr(diag,1,6)=="S36029" ///
| substr(diag,1,6)=="S36030" ///
| substr(diag,1,6)=="S36031" ///
| substr(diag,1,6)=="S36032" ///
| substr(diag,1,6)=="S36039" ///
| substr(diag,1,5)=="S3609" ///
| substr(diag,1,6)=="S36112" ///
| substr(diag,1,6)=="S36113" ///
| substr(diag,1,6)=="S36114" ///
| substr(diag,1,6)=="S36115" ///
| substr(diag,1,6)=="S36116" ///
| substr(diag,1,6)=="S36118" ///
| substr(diag,1,6)=="S36119" ///
| substr(diag,1,6)=="S36122" ///
| substr(diag,1,6)=="S36123" ///
| substr(diag,1,6)=="S36128" ///
| substr(diag,1,6)=="S36129" ///
| substr(diag,1,5)=="S3613" ///
| substr(diag,1,6)=="S36200" ///
| substr(diag,1,6)=="S36201" ///
| substr(diag,1,6)=="S36202"  


replace trauma=1 if substr(diag,1,6)=="S36209" ///
| substr(diag,1,6)=="S36220" ///
| substr(diag,1,6)=="S36221" ///
| substr(diag,1,6)=="S36222" ///
| substr(diag,1,6)=="S36229" ///
| substr(diag,1,6)=="S36230" ///
| substr(diag,1,6)=="S36231" ///
| substr(diag,1,6)=="S36232" ///
| substr(diag,1,6)=="S36239" ///
| substr(diag,1,6)=="S36240" ///
| substr(diag,1,6)=="S36241" ///
| substr(diag,1,6)=="S36242" ///
| substr(diag,1,6)=="S36249" ///
| substr(diag,1,6)=="S36250" ///
| substr(diag,1,6)=="S36251" ///
| substr(diag,1,6)=="S36252" ///
| substr(diag,1,6)=="S36259" ///
| substr(diag,1,6)=="S36260" ///
| substr(diag,1,6)=="S36261" ///
| substr(diag,1,6)=="S36262" ///
| substr(diag,1,6)=="S36269" ///
| substr(diag,1,6)=="S36290" ///
| substr(diag,1,6)=="S36291" ///
| substr(diag,1,6)=="S36292" ///
| substr(diag,1,6)=="S36299" ///
| substr(diag,1,5)=="S3630" ///
| substr(diag,1,5)=="S3632" ///
| substr(diag,1,5)=="S3633" ///
| substr(diag,1,5)=="S3639" ///
| substr(diag,1,6)=="S36400" ///
| substr(diag,1,6)=="S36408" ///
| substr(diag,1,6)=="S36409" ///
| substr(diag,1,6)=="S36410" ///
| substr(diag,1,6)=="S36418" ///
| substr(diag,1,6)=="S36419" ///
| substr(diag,1,6)=="S36420" ///
| substr(diag,1,6)=="S36428" ///
| substr(diag,1,6)=="S36429" ///
| substr(diag,1,6)=="S36430" ///
| substr(diag,1,6)=="S36438" ///
| substr(diag,1,6)=="S36439" ///
| substr(diag,1,6)=="S36490" ///
| substr(diag,1,6)=="S36498" ///
| substr(diag,1,6)=="S36499" ///
| substr(diag,1,6)=="S36500" ///
| substr(diag,1,6)=="S36501" ///
| substr(diag,1,6)=="S36502" ///
| substr(diag,1,6)=="S36503" ///
| substr(diag,1,6)=="S36508" ///
| substr(diag,1,6)=="S36509" ///
| substr(diag,1,6)=="S36510" ///
| substr(diag,1,6)=="S36511" ///
| substr(diag,1,6)=="S36512" ///
| substr(diag,1,6)=="S36513" ///
| substr(diag,1,6)=="S36519" ///
| substr(diag,1,6)=="S36520" ///
| substr(diag,1,6)=="S36521" ///
| substr(diag,1,6)=="S36522" ///
| substr(diag,1,6)=="S36523" ///
| substr(diag,1,6)=="S36528" ///
| substr(diag,1,6)=="S36529" ///
| substr(diag,1,6)=="S36530" ///
| substr(diag,1,6)=="S36531" ///
| substr(diag,1,6)=="S36532" ///
| substr(diag,1,6)=="S36533" ///
| substr(diag,1,6)=="S36538" ///
| substr(diag,1,6)=="S36539" ///
| substr(diag,1,6)=="S36590" ///
| substr(diag,1,6)=="S36591" ///
| substr(diag,1,6)=="S36592" ///
| substr(diag,1,6)=="S36593" ///
| substr(diag,1,6)=="S36598" ///
| substr(diag,1,6)=="S36599" ///
| substr(diag,1,5)=="S3660" ///
| substr(diag,1,5)=="S3661" ///
| substr(diag,1,5)=="S3662"  


replace trauma=1 if  substr(diag,1,5)=="S3663" ///
| substr(diag,1,5)=="S3669" ///
| substr(diag,1,5)=="S3681" ///
| substr(diag,1,6)=="S36892" ///
| substr(diag,1,6)=="S36893" ///
| substr(diag,1,6)=="S36898" ///
| substr(diag,1,6)=="S36899" ///
| substr(diag,1,5)=="S3690" ///
| substr(diag,1,5)=="S3692" ///
| substr(diag,1,5)=="S3693" ///
| substr(diag,1,5)=="S3699" ///
| substr(diag,1,6)=="S37001" ///
| substr(diag,1,6)=="S37002" ///
| substr(diag,1,6)=="S37009" ///
| substr(diag,1,6)=="S37011" ///
| substr(diag,1,6)=="S37012" ///
| substr(diag,1,6)=="S37019" ///
| substr(diag,1,6)=="S37021" ///
| substr(diag,1,6)=="S37022" ///
| substr(diag,1,6)=="S37029" ///
| substr(diag,1,6)=="S37031" ///
| substr(diag,1,6)=="S37032" ///
| substr(diag,1,6)=="S37039" ///
| substr(diag,1,6)=="S37041" ///
| substr(diag,1,6)=="S37042" ///
| substr(diag,1,6)=="S37049" ///
| substr(diag,1,6)=="S37051" ///
| substr(diag,1,6)=="S37052" ///
| substr(diag,1,6)=="S37059" ///
| substr(diag,1,6)=="S37061" ///
| substr(diag,1,6)=="S37062" ///
| substr(diag,1,6)=="S37069" ///
| substr(diag,1,6)=="S37091" ///
| substr(diag,1,6)=="S37092" ///
| substr(diag,1,6)=="S37099" ///
| substr(diag,1,5)=="S3710" ///
| substr(diag,1,5)=="S3712" ///
| substr(diag,1,5)=="S3713" ///
| substr(diag,1,5)=="S3719" ///
| substr(diag,1,5)=="S3720" ///
| substr(diag,1,5)=="S3722" ///
| substr(diag,1,5)=="S3723" ///
| substr(diag,1,5)=="S3729" ///
| substr(diag,1,5)=="S3730" ///
| substr(diag,1,5)=="S3732" ///
| substr(diag,1,5)=="S3733" ///
| substr(diag,1,5)=="S3739" ///
| substr(diag,1,6)=="S37421" ///
| substr(diag,1,6)=="S37431" ///
| substr(diag,1,6)=="S37439" ///
| substr(diag,1,6)=="S37521" ///
| substr(diag,1,6)=="S37522" ///
| substr(diag,1,5)=="S3760" ///
| substr(diag,1,5)=="S3762" ///
| substr(diag,1,5)=="S3763" ///
| substr(diag,1,5)=="S3769" ///
| substr(diag,1,6)=="S37812" ///
| substr(diag,1,6)=="S37813" ///
| substr(diag,1,6)=="S37818" ///
| substr(diag,1,6)=="S37819" ///
| substr(diag,1,6)=="S37823" ///
| substr(diag,1,6)=="S37892" ///
| substr(diag,1,6)=="S37893" ///
| substr(diag,1,6)=="S37898" ///
| substr(diag,1,6)=="S37899" ///
| substr(diag,1,5)=="S3790" ///
| substr(diag,1,5)=="S3792" ///
| substr(diag,1,5)=="S3799" ///
| substr(diag,1,6)=="S38001" ///
| substr(diag,1,5)=="S3802" ///
| substr(diag,1,4)=="S381" ///
| substr(diag,1,6)=="S38221" ///
| substr(diag,1,6)=="S38222" ///
| substr(diag,1,6)=="S38231" ///
| substr(diag,1,6)=="S38232" ///
| substr(diag,1,6)=="S39001" ///
| substr(diag,1,6)=="S39003" ///
| substr(diag,1,6)=="S39011" ///
| substr(diag,1,6)=="S39012" ///
| substr(diag,1,6)=="S39013" ///
| substr(diag,1,6)=="S39021" ///
| substr(diag,1,6)=="S39022" ///
| substr(diag,1,6)=="S39023"  


replace trauma=1 if substr(diag,1,6)=="S39091" ///
| substr(diag,1,6)=="S39092" ///
| substr(diag,1,6)=="S39093" ///
| substr(diag,1,5)=="S3981" ///
| substr(diag,1,5)=="S3982" ///
| substr(diag,1,5)=="S3983" ///
| substr(diag,1,6)=="S39840" ///
| substr(diag,1,6)=="S39848" ///
| substr(diag,1,5)=="S3991" ///
| substr(diag,1,5)=="S3992" ///
| substr(diag,1,5)=="S3993" ///
| substr(diag,1,5)=="S3994" ///
| substr(diag,1,6)=="S40011" ///
| substr(diag,1,6)=="S40012" ///
| substr(diag,1,6)=="S40019" ///
| substr(diag,1,6)=="S40021" ///
| substr(diag,1,6)=="S40022" ///
| substr(diag,1,6)=="S40029" ///
| substr(diag,1,6)=="S40211" ///
| substr(diag,1,6)=="S40212" ///
| substr(diag,1,6)=="S40219" ///
| substr(diag,1,6)=="S40811" ///
| substr(diag,1,6)=="S40812" ///
| substr(diag,1,6)=="S40819" ///
| substr(diag,1,6)=="S40841" ///
| substr(diag,1,6)=="S40851" ///
| substr(diag,1,6)=="S40869" ///
| substr(diag,1,6)=="S40872" ///
| substr(diag,1,6)=="S40911" ///
| substr(diag,1,6)=="S40912" ///
| substr(diag,1,6)=="S40919" ///
| substr(diag,1,6)=="S40921" ///
| substr(diag,1,6)=="S40922" ///
| substr(diag,1,6)=="S40929" ///
| substr(diag,1,6)=="S41001" ///
| substr(diag,1,6)=="S41002" ///
| substr(diag,1,6)=="S41009" ///
| substr(diag,1,6)=="S41011" ///
| substr(diag,1,6)=="S41012" ///
| substr(diag,1,6)=="S41019" ///
| substr(diag,1,6)=="S41021" ///
| substr(diag,1,6)=="S41022" ///
| substr(diag,1,6)=="S41029" ///
| substr(diag,1,6)=="S41031" ///
| substr(diag,1,6)=="S41032" ///
| substr(diag,1,6)=="S41039" ///
| substr(diag,1,6)=="S41041" ///
| substr(diag,1,6)=="S41042" ///
| substr(diag,1,6)=="S41051" ///
| substr(diag,1,6)=="S41052" ///
| substr(diag,1,6)=="S41059" ///
| substr(diag,1,6)=="S41101" ///
| substr(diag,1,6)=="S41102" ///
| substr(diag,1,6)=="S41109" ///
| substr(diag,1,6)=="S41111" ///
| substr(diag,1,6)=="S41112" ///
| substr(diag,1,6)=="S41119" ///
| substr(diag,1,6)=="S41121" ///
| substr(diag,1,6)=="S41122" ///
| substr(diag,1,6)=="S41129" ///
| substr(diag,1,6)=="S41131" ///
| substr(diag,1,6)=="S41132" ///
| substr(diag,1,6)=="S41139" ///
| substr(diag,1,6)=="S41141" ///
| substr(diag,1,6)=="S41142" ///
| substr(diag,1,6)=="S41149" ///
| substr(diag,1,6)=="S41151" ///
| substr(diag,1,6)=="S41152" ///
| substr(diag,1,6)=="S41159" ///
| substr(diag,1,6)=="S42001" ///
| substr(diag,1,6)=="S42002" ///
| substr(diag,1,6)=="S42009" ///
| substr(diag,1,6)=="S42011" ///
| substr(diag,1,6)=="S42012" ///
| substr(diag,1,6)=="S42013" ///
| substr(diag,1,6)=="S42014" ///
| substr(diag,1,6)=="S42015" ///
| substr(diag,1,6)=="S42016" ///
| substr(diag,1,6)=="S42017"  


replace trauma=1 if substr(diag,1,6)=="S42018" ///
| substr(diag,1,6)=="S42019" ///
| substr(diag,1,6)=="S42021" ///
| substr(diag,1,6)=="S42022" ///
| substr(diag,1,6)=="S42023" ///
| substr(diag,1,6)=="S42024" ///
| substr(diag,1,6)=="S42025" ///
| substr(diag,1,6)=="S42026" ///
| substr(diag,1,6)=="S42031" ///
| substr(diag,1,6)=="S42032" ///
| substr(diag,1,6)=="S42033" ///
| substr(diag,1,6)=="S42034" ///
| substr(diag,1,6)=="S42035" ///
| substr(diag,1,6)=="S42036" ///
| substr(diag,1,6)=="S42101" ///
| substr(diag,1,6)=="S42102" ///
| substr(diag,1,6)=="S42109" ///
| substr(diag,1,6)=="S42111" ///
| substr(diag,1,6)=="S42112" ///
| substr(diag,1,6)=="S42113" ///
| substr(diag,1,6)=="S42114" ///
| substr(diag,1,6)=="S42115" ///
| substr(diag,1,6)=="S42116" ///
| substr(diag,1,6)=="S42121" ///
| substr(diag,1,6)=="S42122" ///
| substr(diag,1,6)=="S42123" ///
| substr(diag,1,6)=="S42124" ///
| substr(diag,1,6)=="S42125" ///
| substr(diag,1,6)=="S42126" ///
| substr(diag,1,6)=="S42131" ///
| substr(diag,1,6)=="S42132" ///
| substr(diag,1,6)=="S42133" ///
| substr(diag,1,6)=="S42134" ///
| substr(diag,1,6)=="S42135" ///
| substr(diag,1,6)=="S42136" ///
| substr(diag,1,6)=="S42141" ///
| substr(diag,1,6)=="S42142" ///
| substr(diag,1,6)=="S42143" ///
| substr(diag,1,6)=="S42144" ///
| substr(diag,1,6)=="S42145" ///
| substr(diag,1,6)=="S42151" ///
| substr(diag,1,6)=="S42152" ///
| substr(diag,1,6)=="S42153" ///
| substr(diag,1,6)=="S42154" ///
| substr(diag,1,6)=="S42155" ///
| substr(diag,1,6)=="S42156" ///
| substr(diag,1,6)=="S42191" ///
| substr(diag,1,6)=="S42192" ///
| substr(diag,1,6)=="S42199" ///
| substr(diag,1,6)=="S42201" ///
| substr(diag,1,6)=="S42202" ///
| substr(diag,1,6)=="S42209" ///
| substr(diag,1,6)=="S42211" ///
| substr(diag,1,6)=="S42212" ///
| substr(diag,1,6)=="S42213" ///
| substr(diag,1,6)=="S42214" ///
| substr(diag,1,6)=="S42215" ///
| substr(diag,1,6)=="S42216" ///
| substr(diag,1,6)=="S42221" ///
| substr(diag,1,6)=="S42222" ///
| substr(diag,1,6)=="S42223" ///
| substr(diag,1,6)=="S42224" ///
| substr(diag,1,6)=="S42225" ///
| substr(diag,1,6)=="S42231" ///
| substr(diag,1,6)=="S42232" ///
| substr(diag,1,6)=="S42239" ///
| substr(diag,1,6)=="S42241" ///
| substr(diag,1,6)=="S42242" ///
| substr(diag,1,6)=="S42251" ///
| substr(diag,1,6)=="S42252" ///
| substr(diag,1,6)=="S42253" ///
| substr(diag,1,6)=="S42254" ///
| substr(diag,1,6)=="S42255" ///
| substr(diag,1,6)=="S42256" ///
| substr(diag,1,6)=="S42261" ///
| substr(diag,1,6)=="S42262" ///
| substr(diag,1,6)=="S42264" ///
| substr(diag,1,6)=="S42265" ///
| substr(diag,1,6)=="S42272" ///
| substr(diag,1,6)=="S42291" ///
| substr(diag,1,6)=="S42292" ///
| substr(diag,1,6)=="S42293" ///
| substr(diag,1,6)=="S42294" ///
| substr(diag,1,6)=="S42295" ///
| substr(diag,1,6)=="S42296" ///
| substr(diag,1,6)=="S42301" ///
| substr(diag,1,6)=="S42302" ///
| substr(diag,1,6)=="S42309" ///
| substr(diag,1,6)=="S42311" ///
| substr(diag,1,6)=="S42312" ///
| substr(diag,1,6)=="S42321" ///
| substr(diag,1,6)=="S42322" ///
| substr(diag,1,6)=="S42323" ///
| substr(diag,1,6)=="S42324" ///
| substr(diag,1,6)=="S42325" ///
| substr(diag,1,6)=="S42331" ///
| substr(diag,1,6)=="S42332" ///
| substr(diag,1,6)=="S42334" ///
| substr(diag,1,6)=="S42335" ///
| substr(diag,1,6)=="S42341" ///
| substr(diag,1,6)=="S42342" ///
| substr(diag,1,6)=="S42344" ///
| substr(diag,1,6)=="S42345" ///
| substr(diag,1,6)=="S42351" ///
| substr(diag,1,6)=="S42352" ///
| substr(diag,1,6)=="S42353" ///
| substr(diag,1,6)=="S42354" ///
| substr(diag,1,6)=="S42355" ///
| substr(diag,1,6)=="S42361" ///
| substr(diag,1,6)=="S42362" ///
| substr(diag,1,6)=="S42363" ///
| substr(diag,1,6)=="S42364" ///
| substr(diag,1,6)=="S42365" ///
| substr(diag,1,6)=="S42391" ///
| substr(diag,1,6)=="S42392" ///
| substr(diag,1,6)=="S42399" ///
| substr(diag,1,6)=="S42401" ///
| substr(diag,1,6)=="S42402" ///
| substr(diag,1,6)=="S42409" ///
| substr(diag,1,6)=="S42411" ///
| substr(diag,1,6)=="S42412" ///
| substr(diag,1,6)=="S42413" ///
| substr(diag,1,6)=="S42414" ///
| substr(diag,1,6)=="S42415" ///
| substr(diag,1,6)=="S42416" ///
| substr(diag,1,6)=="S42421" ///
| substr(diag,1,6)=="S42422" ///
| substr(diag,1,6)=="S42423" ///
| substr(diag,1,6)=="S42424" ///
| substr(diag,1,6)=="S42425" ///
| substr(diag,1,6)=="S42431" ///
| substr(diag,1,6)=="S42432" ///
| substr(diag,1,6)=="S42433" ///
| substr(diag,1,6)=="S42434" ///
| substr(diag,1,6)=="S42435" ///
| substr(diag,1,6)=="S42441" ///
| substr(diag,1,6)=="S42442" ///
| substr(diag,1,6)=="S42443" ///
| substr(diag,1,6)=="S42444" ///
| substr(diag,1,6)=="S42445" ///
| substr(diag,1,6)=="S42447" ///
| substr(diag,1,6)=="S42448" ///
| substr(diag,1,6)=="S42451" ///
| substr(diag,1,6)=="S42452" ///
| substr(diag,1,6)=="S42453" ///
| substr(diag,1,6)=="S42454" ///
| substr(diag,1,6)=="S42455" ///
| substr(diag,1,6)=="S42456" ///
| substr(diag,1,6)=="S42461" ///
| substr(diag,1,6)=="S42462" ///
| substr(diag,1,6)=="S42464" ///
| substr(diag,1,6)=="S42465" ///
| substr(diag,1,6)=="S42466" ///
| substr(diag,1,6)=="S42471" ///
| substr(diag,1,6)=="S42472" ///
| substr(diag,1,6)=="S42473" ///
| substr(diag,1,6)=="S42474" ///
| substr(diag,1,6)=="S42475" ///
| substr(diag,1,6)=="S42476" ///
| substr(diag,1,6)=="S42481" ///
| substr(diag,1,6)=="S42491" ///
| substr(diag,1,6)=="S42492" ///
| substr(diag,1,6)=="S42494" ///
| substr(diag,1,6)=="S42495"  


replace trauma=1 if substr(diag,1,6)=="S42496" ///
| substr(diag,1,5)=="S4290" ///
| substr(diag,1,5)=="S4291" ///
| substr(diag,1,5)=="S4292" ///
| substr(diag,1,6)=="S43001" ///
| substr(diag,1,6)=="S43002" ///
| substr(diag,1,6)=="S43003" ///
| substr(diag,1,6)=="S43004" ///
| substr(diag,1,6)=="S43005" ///
| substr(diag,1,6)=="S43006" ///
| substr(diag,1,6)=="S43011" ///
| substr(diag,1,6)=="S43012" ///
| substr(diag,1,6)=="S43013" ///
| substr(diag,1,6)=="S43014" ///
| substr(diag,1,6)=="S43015" ///
| substr(diag,1,6)=="S43016" ///
| substr(diag,1,6)=="S43021" ///
| substr(diag,1,6)=="S43022" ///
| substr(diag,1,6)=="S43023" ///
| substr(diag,1,6)=="S43024" ///
| substr(diag,1,6)=="S43025" ///
| substr(diag,1,6)=="S43026" ///
| substr(diag,1,6)=="S43031" ///
| substr(diag,1,6)=="S43032" ///
| substr(diag,1,6)=="S43034" ///
| substr(diag,1,6)=="S43035" ///
| substr(diag,1,6)=="S43036" ///
| substr(diag,1,6)=="S43081" ///
| substr(diag,1,6)=="S43082" ///
| substr(diag,1,6)=="S43083" ///
| substr(diag,1,6)=="S43084" ///
| substr(diag,1,6)=="S43085" ///
| substr(diag,1,6)=="S43086" ///
| substr(diag,1,6)=="S43101" ///
| substr(diag,1,6)=="S43102" ///
| substr(diag,1,6)=="S43109" ///
| substr(diag,1,6)=="S43111" ///
| substr(diag,1,6)=="S43112" ///
| substr(diag,1,6)=="S43119" ///
| substr(diag,1,6)=="S43121" ///
| substr(diag,1,6)=="S43122" ///
| substr(diag,1,6)=="S43131" ///
| substr(diag,1,6)=="S43132" ///
| substr(diag,1,6)=="S43141" ///
| substr(diag,1,6)=="S43142" ///
| substr(diag,1,6)=="S43152" ///
| substr(diag,1,6)=="S43201" ///
| substr(diag,1,6)=="S43202" ///
| substr(diag,1,6)=="S43203" ///
| substr(diag,1,6)=="S43204" ///
| substr(diag,1,6)=="S43205" ///
| substr(diag,1,6)=="S43206" ///
| substr(diag,1,6)=="S43211" ///
| substr(diag,1,6)=="S43212" ///
| substr(diag,1,6)=="S43214" ///
| substr(diag,1,6)=="S43215" ///
| substr(diag,1,6)=="S43221" ///
| substr(diag,1,6)=="S43222" ///
| substr(diag,1,6)=="S43224" ///
| substr(diag,1,6)=="S43225" ///
| substr(diag,1,6)=="S43302" ///
| substr(diag,1,6)=="S43304" ///
| substr(diag,1,6)=="S43305" ///
| substr(diag,1,6)=="S43306" ///
| substr(diag,1,6)=="S43314" ///
| substr(diag,1,6)=="S43315" ///
| substr(diag,1,6)=="S43391" ///
| substr(diag,1,6)=="S43395" ///
| substr(diag,1,6)=="S43401" ///
| substr(diag,1,6)=="S43402" ///
| substr(diag,1,6)=="S43409" ///
| substr(diag,1,6)=="S43411" ///
| substr(diag,1,6)=="S43412" ///
| substr(diag,1,6)=="S43419" ///
| substr(diag,1,6)=="S43421" ///
| substr(diag,1,6)=="S43422" ///
| substr(diag,1,6)=="S43429" ///
| substr(diag,1,6)=="S43431" ///
| substr(diag,1,6)=="S43432" ///
| substr(diag,1,6)=="S43491" ///
| substr(diag,1,6)=="S43492" ///
| substr(diag,1,6)=="S43499" ///
| substr(diag,1,5)=="S4350" ///
| substr(diag,1,5)=="S4351" ///
| substr(diag,1,5)=="S4352" ///
| substr(diag,1,5)=="S4361" ///
| substr(diag,1,5)=="S4380" ///
| substr(diag,1,5)=="S4381" ///
| substr(diag,1,5)=="S4382" ///
| substr(diag,1,5)=="S4390" ///
| substr(diag,1,5)=="S4391" ///
| substr(diag,1,5)=="S4392" ///
| substr(diag,1,5)=="S4400" ///
| substr(diag,1,5)=="S4401" ///
| substr(diag,1,5)=="S4402" ///
| substr(diag,1,5)=="S4410" ///
| substr(diag,1,5)=="S4411" ///
| substr(diag,1,5)=="S4412" ///
| substr(diag,1,5)=="S4420" ///
| substr(diag,1,5)=="S4421" ///
| substr(diag,1,5)=="S4422" ///
| substr(diag,1,5)=="S4430" ///
| substr(diag,1,5)=="S4431" ///
| substr(diag,1,5)=="S4432" ///
| substr(diag,1,5)=="S4442" ///
| substr(diag,1,5)=="S4451" ///
| substr(diag,1,4)=="S448" ///
| substr(diag,1,5)=="S4490" ///
| substr(diag,1,5)=="S4491" ///
| substr(diag,1,5)=="S4492" ///
| substr(diag,1,6)=="S45001" ///
| substr(diag,1,6)=="S45002"  


replace trauma=1 if  substr(diag,1,6)=="S45009" ///
| substr(diag,1,6)=="S45011" ///
| substr(diag,1,6)=="S45012" ///
| substr(diag,1,6)=="S45091" ///
| substr(diag,1,6)=="S45092" ///
| substr(diag,1,6)=="S45101" ///
| substr(diag,1,6)=="S45109" ///
| substr(diag,1,6)=="S45111" ///
| substr(diag,1,6)=="S45112" ///
| substr(diag,1,6)=="S45119" ///
| substr(diag,1,6)=="S45191" ///
| substr(diag,1,6)=="S45192" ///
| substr(diag,1,6)=="S45201" ///
| substr(diag,1,6)=="S45202" ///
| substr(diag,1,6)=="S45209" ///
| substr(diag,1,6)=="S45211" ///
| substr(diag,1,6)=="S45212" ///
| substr(diag,1,6)=="S45291" ///
| substr(diag,1,6)=="S45292" ///
| substr(diag,1,6)=="S45309" ///
| substr(diag,1,6)=="S45311" ///
| substr(diag,1,6)=="S45312" ///
| substr(diag,1,6)=="S45319" ///
| substr(diag,1,6)=="S45392" ///
| substr(diag,1,6)=="S45802" ///
| substr(diag,1,6)=="S45811" ///
| substr(diag,1,6)=="S45812" ///
| substr(diag,1,6)=="S45892" ///
| substr(diag,1,6)=="S45901" ///
| substr(diag,1,6)=="S45909" ///
| substr(diag,1,6)=="S45911" ///
| substr(diag,1,6)=="S45919" ///
| substr(diag,1,6)=="S46001" ///
| substr(diag,1,6)=="S46009" ///
| substr(diag,1,6)=="S46011" ///
| substr(diag,1,6)=="S46012" ///
| substr(diag,1,6)=="S46019" ///
| substr(diag,1,6)=="S46021" ///
| substr(diag,1,6)=="S46022" ///
| substr(diag,1,6)=="S46091" ///
| substr(diag,1,6)=="S46092" ///
| substr(diag,1,6)=="S46102" ///
| substr(diag,1,6)=="S46111" ///
| substr(diag,1,6)=="S46112" ///
| substr(diag,1,6)=="S46121" ///
| substr(diag,1,6)=="S46122" ///
| substr(diag,1,6)=="S46191" ///
| substr(diag,1,6)=="S46201" ///
| substr(diag,1,6)=="S46211" ///
| substr(diag,1,6)=="S46212" ///
| substr(diag,1,6)=="S46221" ///
| substr(diag,1,6)=="S46222" ///
| substr(diag,1,6)=="S46229" ///
| substr(diag,1,6)=="S46291" ///
| substr(diag,1,6)=="S46292" ///
| substr(diag,1,6)=="S46301" ///
| substr(diag,1,6)=="S46302" ///
| substr(diag,1,6)=="S46311" ///
| substr(diag,1,6)=="S46312" ///
| substr(diag,1,6)=="S46319" ///
| substr(diag,1,6)=="S46321" ///
| substr(diag,1,6)=="S46322" ///
| substr(diag,1,6)=="S46391" ///
| substr(diag,1,6)=="S46392" ///
| substr(diag,1,6)=="S46399" ///
| substr(diag,1,6)=="S46801" ///
| substr(diag,1,6)=="S46802" ///
| substr(diag,1,6)=="S46811" ///
| substr(diag,1,6)=="S46812" ///
| substr(diag,1,6)=="S46821" ///
| substr(diag,1,6)=="S46822" ///
| substr(diag,1,6)=="S46829" ///
| substr(diag,1,6)=="S46891" ///
| substr(diag,1,6)=="S46892" ///
| substr(diag,1,6)=="S46901" ///
| substr(diag,1,6)=="S46909" ///
| substr(diag,1,6)=="S46911" ///
| substr(diag,1,6)=="S46912" ///
| substr(diag,1,6)=="S46919" ///
| substr(diag,1,6)=="S46922" ///
| substr(diag,1,6)=="S46929" ///
| substr(diag,1,6)=="S46992" ///
| substr(diag,1,6)=="S46999" ///
| substr(diag,1,4)=="S471" ///
| substr(diag,1,4)=="S472" ///
| substr(diag,1,4)=="S479" ///
| substr(diag,1,6)=="S48011" ///
| substr(diag,1,6)=="S48111" ///
| substr(diag,1,6)=="S48112" ///
| substr(diag,1,6)=="S48121" ///
| substr(diag,1,6)=="S48122" ///
| substr(diag,1,6)=="S48921" ///
| substr(diag,1,6)=="S48929" ///
| substr(diag,1,6)=="S49001" ///
| substr(diag,1,6)=="S49002" ///
| substr(diag,1,6)=="S49011" ///
| substr(diag,1,6)=="S49021" ///
| substr(diag,1,6)=="S49022" ///
| substr(diag,1,6)=="S49091"  


replace trauma=1 if  substr(diag,1,6)=="S49092" ///
| substr(diag,1,6)=="S49099" ///
| substr(diag,1,6)=="S49101" ///
| substr(diag,1,6)=="S49121" ///
| substr(diag,1,6)=="S49131" ///
| substr(diag,1,6)=="S49132" ///
| substr(diag,1,6)=="S49141" ///
| substr(diag,1,6)=="S49191" ///
| substr(diag,1,6)=="S49192" ///
| substr(diag,1,5)=="S4980" ///
| substr(diag,1,5)=="S4981" ///
| substr(diag,1,5)=="S4982" ///
| substr(diag,1,5)=="S4990" ///
| substr(diag,1,5)=="S4991" ///
| substr(diag,1,5)=="S4992" ///
| substr(diag,1,5)=="S5000" ///
| substr(diag,1,5)=="S5001" ///
| substr(diag,1,5)=="S5002" ///
| substr(diag,1,5)=="S5010" ///
| substr(diag,1,5)=="S5011" ///
| substr(diag,1,5)=="S5012" ///
| substr(diag,1,6)=="S50311" ///
| substr(diag,1,6)=="S50312" ///
| substr(diag,1,6)=="S50319" ///
| substr(diag,1,6)=="S50351" ///
| substr(diag,1,6)=="S50352" ///
| substr(diag,1,6)=="S50359" ///
| substr(diag,1,6)=="S50372" ///
| substr(diag,1,6)=="S50811" ///
| substr(diag,1,6)=="S50812" ///
| substr(diag,1,6)=="S50819" ///
| substr(diag,1,6)=="S50851" ///
| substr(diag,1,6)=="S50852" ///
| substr(diag,1,6)=="S50871" ///
| substr(diag,1,6)=="S50872" ///
| substr(diag,1,6)=="S50901" ///
| substr(diag,1,6)=="S50902" ///
| substr(diag,1,6)=="S50911" ///
| substr(diag,1,6)=="S50912" ///
| substr(diag,1,6)=="S51001" ///
| substr(diag,1,6)=="S51002" ///
| substr(diag,1,6)=="S51009" ///
| substr(diag,1,6)=="S51011" ///
| substr(diag,1,6)=="S51012" ///
| substr(diag,1,6)=="S51019" ///
| substr(diag,1,6)=="S51021" ///
| substr(diag,1,6)=="S51022" ///
| substr(diag,1,6)=="S51029" ///
| substr(diag,1,6)=="S51031" ///
| substr(diag,1,6)=="S51032" ///
| substr(diag,1,6)=="S51039" ///
| substr(diag,1,6)=="S51041" ///
| substr(diag,1,6)=="S51042" ///
| substr(diag,1,6)=="S51051" ///
| substr(diag,1,6)=="S51052" ///
| substr(diag,1,6)=="S51801" ///
| substr(diag,1,6)=="S51802" ///
| substr(diag,1,6)=="S51809" ///
| substr(diag,1,6)=="S51811" ///
| substr(diag,1,6)=="S51812" ///
| substr(diag,1,6)=="S51819" ///
| substr(diag,1,6)=="S51821" ///
| substr(diag,1,6)=="S51822" ///
| substr(diag,1,6)=="S51829" ///
| substr(diag,1,6)=="S51831" ///
| substr(diag,1,6)=="S51832" ///
| substr(diag,1,6)=="S51839" ///
| substr(diag,1,6)=="S51841" ///
| substr(diag,1,6)=="S51842" ///
| substr(diag,1,6)=="S51849" ///
| substr(diag,1,6)=="S51851"  


replace trauma=1 if  substr(diag,1,6)=="S51852" ///
| substr(diag,1,6)=="S52001" ///
| substr(diag,1,6)=="S52002" ///
| substr(diag,1,6)=="S52009" ///
| substr(diag,1,6)=="S52011" ///
| substr(diag,1,6)=="S52012" ///
| substr(diag,1,6)=="S52021" ///
| substr(diag,1,6)=="S52022" ///
| substr(diag,1,6)=="S52023" ///
| substr(diag,1,6)=="S52024" ///
| substr(diag,1,6)=="S52025" ///
| substr(diag,1,6)=="S52026" ///
| substr(diag,1,6)=="S52031" ///
| substr(diag,1,6)=="S52032" ///
| substr(diag,1,6)=="S52033" ///
| substr(diag,1,6)=="S52034" ///
| substr(diag,1,6)=="S52035" ///
| substr(diag,1,6)=="S52036" ///
| substr(diag,1,6)=="S52041" ///
| substr(diag,1,6)=="S52042" ///
| substr(diag,1,6)=="S52043" ///
| substr(diag,1,6)=="S52044" ///
| substr(diag,1,6)=="S52045" ///
| substr(diag,1,6)=="S52046" ///
| substr(diag,1,6)=="S52091" ///
| substr(diag,1,6)=="S52092" ///
| substr(diag,1,6)=="S52099" ///
| substr(diag,1,6)=="S52101" ///
| substr(diag,1,6)=="S52102" ///
| substr(diag,1,6)=="S52109" ///
| substr(diag,1,6)=="S52111" ///
| substr(diag,1,6)=="S52112" ///
| substr(diag,1,6)=="S52121" ///
| substr(diag,1,6)=="S52122" ///
| substr(diag,1,6)=="S52123" ///
| substr(diag,1,6)=="S52124" ///
| substr(diag,1,6)=="S52125" ///
| substr(diag,1,6)=="S52126" ///
| substr(diag,1,6)=="S52131" ///
| substr(diag,1,6)=="S52132" ///
| substr(diag,1,6)=="S52133" ///
| substr(diag,1,6)=="S52134" ///
| substr(diag,1,6)=="S52135" ///
| substr(diag,1,6)=="S52136" ///
| substr(diag,1,6)=="S52181" ///
| substr(diag,1,6)=="S52182" ///
| substr(diag,1,6)=="S52201" ///
| substr(diag,1,6)=="S52202" ///
| substr(diag,1,6)=="S52209" ///
| substr(diag,1,6)=="S52211" ///
| substr(diag,1,6)=="S52212" ///
| substr(diag,1,6)=="S52221" ///
| substr(diag,1,6)=="S52222" ///
| substr(diag,1,6)=="S52223" ///
| substr(diag,1,6)=="S52224" ///
| substr(diag,1,6)=="S52225" ///
| substr(diag,1,6)=="S52231" ///
| substr(diag,1,6)=="S52232" ///
| substr(diag,1,6)=="S52233" ///
| substr(diag,1,6)=="S52234" ///
| substr(diag,1,6)=="S52235" ///
| substr(diag,1,6)=="S52241" ///
| substr(diag,1,6)=="S52242" ///
| substr(diag,1,6)=="S52243" ///
| substr(diag,1,6)=="S52251" ///
| substr(diag,1,6)=="S52252" ///
| substr(diag,1,6)=="S52253" ///
| substr(diag,1,6)=="S52254" ///
| substr(diag,1,6)=="S52255" ///
| substr(diag,1,6)=="S52261" ///
| substr(diag,1,6)=="S52262" ///
| substr(diag,1,6)=="S52263" ///
| substr(diag,1,6)=="S52264" ///
| substr(diag,1,6)=="S52265" ///
| substr(diag,1,6)=="S52271" ///
| substr(diag,1,6)=="S52272" ///
| substr(diag,1,6)=="S52279" ///
| substr(diag,1,6)=="S52291" ///
| substr(diag,1,6)=="S52292" ///
| substr(diag,1,6)=="S52301" ///
| substr(diag,1,6)=="S52302" ///
| substr(diag,1,6)=="S52309" ///
| substr(diag,1,6)=="S52311" ///
| substr(diag,1,6)=="S52312" ///
| substr(diag,1,6)=="S52321" ///
| substr(diag,1,6)=="S52322" ///
| substr(diag,1,6)=="S52323" ///
| substr(diag,1,6)=="S52324" ///
| substr(diag,1,6)=="S52325" ///
| substr(diag,1,6)=="S52331" ///
| substr(diag,1,6)=="S52332" ///
| substr(diag,1,6)=="S52334" ///
| substr(diag,1,6)=="S52335" ///
| substr(diag,1,6)=="S52341" ///
| substr(diag,1,6)=="S52342" ///
| substr(diag,1,6)=="S52351" ///
| substr(diag,1,6)=="S52352" ///
| substr(diag,1,6)=="S52353" ///
| substr(diag,1,6)=="S52354" ///
| substr(diag,1,6)=="S52355" ///
| substr(diag,1,6)=="S52361" ///
| substr(diag,1,6)=="S52364" ///
| substr(diag,1,6)=="S52365" ///
| substr(diag,1,6)=="S52371" ///
| substr(diag,1,6)=="S52372" ///
| substr(diag,1,6)=="S52382" ///
| substr(diag,1,6)=="S52391" ///
| substr(diag,1,6)=="S52392" ///
| substr(diag,1,6)=="S52501" ///
| substr(diag,1,6)=="S52502" ///
| substr(diag,1,6)=="S52509" ///
| substr(diag,1,6)=="S52511" ///
| substr(diag,1,6)=="S52512" ///
| substr(diag,1,6)=="S52513" ///
| substr(diag,1,6)=="S52514" ///
| substr(diag,1,6)=="S52515" ///
| substr(diag,1,6)=="S52516" ///
| substr(diag,1,6)=="S52521" ///
| substr(diag,1,6)=="S52522" ///
| substr(diag,1,6)=="S52529" ///
| substr(diag,1,6)=="S52531" ///
| substr(diag,1,6)=="S52532" ///
| substr(diag,1,6)=="S52539" ///
| substr(diag,1,6)=="S52541"  


replace trauma=1 if  substr(diag,1,6)=="S52542" ///
| substr(diag,1,6)=="S52551" ///
| substr(diag,1,6)=="S52552" ///
| substr(diag,1,6)=="S52559" ///
| substr(diag,1,6)=="S52561" ///
| substr(diag,1,6)=="S52562" ///
| substr(diag,1,6)=="S52569" ///
| substr(diag,1,6)=="S52571" ///
| substr(diag,1,6)=="S52572" ///
| substr(diag,1,6)=="S52579" ///
| substr(diag,1,6)=="S52591" ///
| substr(diag,1,6)=="S52592" ///
| substr(diag,1,6)=="S52601" ///
| substr(diag,1,6)=="S52602" ///
| substr(diag,1,6)=="S52609" ///
| substr(diag,1,6)=="S52611" ///
| substr(diag,1,6)=="S52612" ///
| substr(diag,1,6)=="S52613" ///
| substr(diag,1,6)=="S52614" ///
| substr(diag,1,6)=="S52615" ///
| substr(diag,1,6)=="S52621" ///
| substr(diag,1,6)=="S52622" ///
| substr(diag,1,6)=="S52691" ///
| substr(diag,1,6)=="S52692" ///
| substr(diag,1,6)=="S52699" ///
| substr(diag,1,5)=="S5290" ///
| substr(diag,1,5)=="S5291" ///
| substr(diag,1,5)=="S5292" ///
| substr(diag,1,6)=="S53001" ///
| substr(diag,1,6)=="S53002" ///
| substr(diag,1,6)=="S53003" ///
| substr(diag,1,6)=="S53004" ///
| substr(diag,1,6)=="S53005" ///
| substr(diag,1,6)=="S53006" ///
| substr(diag,1,6)=="S53011" ///
| substr(diag,1,6)=="S53012" ///
| substr(diag,1,6)=="S53014" ///
| substr(diag,1,6)=="S53015" ///
| substr(diag,1,6)=="S53016" ///
| substr(diag,1,6)=="S53021" ///
| substr(diag,1,6)=="S53022" ///
| substr(diag,1,6)=="S53024" ///
| substr(diag,1,6)=="S53025" ///
| substr(diag,1,6)=="S53026" ///
| substr(diag,1,6)=="S53031" ///
| substr(diag,1,6)=="S53032" ///
| substr(diag,1,6)=="S53091" ///
| substr(diag,1,6)=="S53092" ///
| substr(diag,1,6)=="S53093" ///
| substr(diag,1,6)=="S53094" ///
| substr(diag,1,6)=="S53095" ///
| substr(diag,1,6)=="S53096" ///
| substr(diag,1,6)=="S53101" ///
| substr(diag,1,6)=="S53102" ///
| substr(diag,1,6)=="S53103" ///
| substr(diag,1,6)=="S53104" ///
| substr(diag,1,6)=="S53105" ///
| substr(diag,1,6)=="S53106" ///
| substr(diag,1,6)=="S53114" ///
| substr(diag,1,6)=="S53121" ///
| substr(diag,1,6)=="S53122" ///
| substr(diag,1,6)=="S53124" ///
| substr(diag,1,6)=="S53125" ///
| substr(diag,1,6)=="S53132" ///
| substr(diag,1,6)=="S53134" ///
| substr(diag,1,6)=="S53135" ///
| substr(diag,1,6)=="S53136" ///
| substr(diag,1,6)=="S53141" ///
| substr(diag,1,6)=="S53144" ///
| substr(diag,1,6)=="S53145" ///
| substr(diag,1,6)=="S53192" ///
| substr(diag,1,6)=="S53194" ///
| substr(diag,1,6)=="S53195" ///
| substr(diag,1,5)=="S5320" ///
| substr(diag,1,5)=="S5321" ///
| substr(diag,1,5)=="S5322" ///
| substr(diag,1,5)=="S5330" ///
| substr(diag,1,5)=="S5331" ///
| substr(diag,1,5)=="S5332" ///
| substr(diag,1,6)=="S53401" ///
| substr(diag,1,6)=="S53402" ///
| substr(diag,1,6)=="S53409" ///
| substr(diag,1,6)=="S53421" ///
| substr(diag,1,6)=="S53422" ///
| substr(diag,1,6)=="S53431"  


replace trauma=1 if  substr(diag,1,6)=="S53432" ///
| substr(diag,1,6)=="S53442" ///
| substr(diag,1,6)=="S53449" ///
| substr(diag,1,6)=="S53492" ///
| substr(diag,1,5)=="S5400" ///
| substr(diag,1,5)=="S5401" ///
| substr(diag,1,5)=="S5402" ///
| substr(diag,1,5)=="S5410" ///
| substr(diag,1,5)=="S5411" ///
| substr(diag,1,5)=="S5412" ///
| substr(diag,1,5)=="S5420" ///
| substr(diag,1,5)=="S5421" ///
| substr(diag,1,5)=="S5422" ///
| substr(diag,1,5)=="S5430" ///
| substr(diag,1,5)=="S5431" ///
| substr(diag,1,5)=="S5432" ///
| substr(diag,1,4)=="S548" ///
| substr(diag,1,5)=="S5492" ///
| substr(diag,1,6)=="S55001" ///
| substr(diag,1,6)=="S55002" ///
| substr(diag,1,6)=="S55009" ///
| substr(diag,1,6)=="S55011" ///
| substr(diag,1,6)=="S55012" ///
| substr(diag,1,6)=="S55019" ///
| substr(diag,1,6)=="S55091" ///
| substr(diag,1,6)=="S55092" ///
| substr(diag,1,6)=="S55101" ///
| substr(diag,1,6)=="S55102" ///
| substr(diag,1,6)=="S55111" ///
| substr(diag,1,6)=="S55112" ///
| substr(diag,1,6)=="S55119" ///
| substr(diag,1,6)=="S55191" ///
| substr(diag,1,6)=="S55192" ///
| substr(diag,1,6)=="S55211" ///
| substr(diag,1,6)=="S55212" ///
| substr(diag,1,6)=="S55812" ///
| substr(diag,1,6)=="S55891" ///
| substr(diag,1,6)=="S55892" ///
| substr(diag,1,6)=="S55911" ///
| substr(diag,1,6)=="S56021" ///
| substr(diag,1,6)=="S56022" ///
| substr(diag,1,6)=="S56101" ///
| substr(diag,1,6)=="S56103" ///
| substr(diag,1,6)=="S56121" ///
| substr(diag,1,6)=="S56122" ///
| substr(diag,1,6)=="S56123" ///
| substr(diag,1,6)=="S56124" ///
| substr(diag,1,6)=="S56125" ///
| substr(diag,1,6)=="S56126" ///
| substr(diag,1,6)=="S56127" ///
| substr(diag,1,6)=="S56128" ///
| substr(diag,1,6)=="S56129" ///
| substr(diag,1,6)=="S56191" ///
| substr(diag,1,6)=="S56199" ///
| substr(diag,1,6)=="S56201" ///
| substr(diag,1,6)=="S56202" ///
| substr(diag,1,6)=="S56211" ///
| substr(diag,1,6)=="S56212" ///
| substr(diag,1,6)=="S56221" ///
| substr(diag,1,6)=="S56222" ///
| substr(diag,1,6)=="S56291" ///
| substr(diag,1,6)=="S56292" ///
| substr(diag,1,6)=="S56321" ///
| substr(diag,1,6)=="S56322" ///
| substr(diag,1,6)=="S56329" ///
| substr(diag,1,6)=="S56391" ///
| substr(diag,1,6)=="S56401" ///
| substr(diag,1,6)=="S56419" ///
| substr(diag,1,6)=="S56421" ///
| substr(diag,1,6)=="S56422" ///
| substr(diag,1,6)=="S56423" ///
| substr(diag,1,6)=="S56424" ///
| substr(diag,1,6)=="S56425" ///
| substr(diag,1,6)=="S56426" ///
| substr(diag,1,6)=="S56427" ///
| substr(diag,1,6)=="S56428" ///
| substr(diag,1,6)=="S56429" ///
| substr(diag,1,6)=="S56492" ///
| substr(diag,1,6)=="S56501" ///
| substr(diag,1,6)=="S56502" ///
| substr(diag,1,6)=="S56521" ///
| substr(diag,1,6)=="S56522" ///
| substr(diag,1,6)=="S56591" ///
| substr(diag,1,6)=="S56592" ///
| substr(diag,1,6)=="S56811" ///
| substr(diag,1,6)=="S56821" ///
| substr(diag,1,6)=="S56822" ///
| substr(diag,1,6)=="S56891" ///
| substr(diag,1,6)=="S56892" ///
| substr(diag,1,6)=="S56901" ///
| substr(diag,1,6)=="S56902" ///
| substr(diag,1,6)=="S56912" ///
| substr(diag,1,6)=="S56921" ///
| substr(diag,1,6)=="S56922" ///
| substr(diag,1,6)=="S56929" ///
| substr(diag,1,6)=="S56992" ///
| substr(diag,1,5)=="S5701" ///
| substr(diag,1,5)=="S5702" ///
| substr(diag,1,5)=="S5780" ///
| substr(diag,1,5)=="S5781" ///
| substr(diag,1,5)=="S5782" ///
| substr(diag,1,6)=="S58011"  


replace trauma=1 if  substr(diag,1,6)=="S58012" ///
| substr(diag,1,6)=="S58021" ///
| substr(diag,1,6)=="S58022" ///
| substr(diag,1,6)=="S58029" ///
| substr(diag,1,6)=="S58111" ///
| substr(diag,1,6)=="S58112" ///
| substr(diag,1,6)=="S58121" ///
| substr(diag,1,6)=="S58122" ///
| substr(diag,1,6)=="S58129" ///
| substr(diag,1,6)=="S58911" ///
| substr(diag,1,6)=="S58921" ///
| substr(diag,1,6)=="S58929" ///
| substr(diag,1,6)=="S59001" ///
| substr(diag,1,6)=="S59002" ///
| substr(diag,1,6)=="S59011" ///
| substr(diag,1,6)=="S59012" ///
| substr(diag,1,6)=="S59021" ///
| substr(diag,1,6)=="S59022" ///
| substr(diag,1,6)=="S59032" ///
| substr(diag,1,6)=="S59041" ///
| substr(diag,1,6)=="S59042" ///
| substr(diag,1,6)=="S59091" ///
| substr(diag,1,6)=="S59092" ///
| substr(diag,1,6)=="S59109" ///
| substr(diag,1,6)=="S59111" ///
| substr(diag,1,6)=="S59122" ///
| substr(diag,1,6)=="S59192" ///
| substr(diag,1,6)=="S59201" ///
| substr(diag,1,6)=="S59202" ///
| substr(diag,1,6)=="S59209" ///
| substr(diag,1,6)=="S59211" ///
| substr(diag,1,6)=="S59212" ///
| substr(diag,1,6)=="S59221" ///
| substr(diag,1,6)=="S59222" ///
| substr(diag,1,6)=="S59231" ///
| substr(diag,1,6)=="S59232" ///
| substr(diag,1,6)=="S59241" ///
| substr(diag,1,6)=="S59291" ///
| substr(diag,1,6)=="S59292" ///
| substr(diag,1,6)=="S59801" ///
| substr(diag,1,6)=="S59802" ///
| substr(diag,1,6)=="S59809" ///
| substr(diag,1,6)=="S59811" ///
| substr(diag,1,6)=="S59812" ///
| substr(diag,1,6)=="S59901" ///
| substr(diag,1,6)=="S59902" ///
| substr(diag,1,6)=="S59911" ///
| substr(diag,1,6)=="S59912" ///
| substr(diag,1,6)=="S59919" ///
| substr(diag,1,5)=="S6000" ///
| substr(diag,1,6)=="S60011" ///
| substr(diag,1,6)=="S60012" ///
| substr(diag,1,6)=="S60021" ///
| substr(diag,1,6)=="S60022" ///
| substr(diag,1,6)=="S60029" ///
| substr(diag,1,6)=="S60031" ///
| substr(diag,1,6)=="S60032" ///
| substr(diag,1,6)=="S60039" ///
| substr(diag,1,6)=="S60041" ///
| substr(diag,1,6)=="S60042" ///
| substr(diag,1,6)=="S60051" ///
| substr(diag,1,6)=="S60052" ///
| substr(diag,1,5)=="S6010" ///
| substr(diag,1,6)=="S60111" ///
| substr(diag,1,6)=="S60141" ///
| substr(diag,1,6)=="S60142" ///
| substr(diag,1,6)=="S60152" ///
| substr(diag,1,6)=="S60211" ///
| substr(diag,1,6)=="S60212" ///
| substr(diag,1,6)=="S60219" ///
| substr(diag,1,6)=="S60221" ///
| substr(diag,1,6)=="S60222" ///
| substr(diag,1,6)=="S60229" ///
| substr(diag,1,6)=="S60311" ///
| substr(diag,1,6)=="S60312" ///
| substr(diag,1,6)=="S60319" ///
| substr(diag,1,6)=="S60351" ///
| substr(diag,1,6)=="S60391" ///
| substr(diag,1,6)=="S60410" ///
| substr(diag,1,6)=="S60411" ///
| substr(diag,1,6)=="S60412" ///
| substr(diag,1,6)=="S60413" ///
| substr(diag,1,6)=="S60414" ///
| substr(diag,1,6)=="S60415" ///
| substr(diag,1,6)=="S60416" ///
| substr(diag,1,6)=="S60417" ///
| substr(diag,1,6)=="S60418" ///
| substr(diag,1,6)=="S60419" ///
| substr(diag,1,6)=="S60429" ///
| substr(diag,1,6)=="S60453" ///
| substr(diag,1,6)=="S60456"  


replace trauma=1 if substr(diag,1,6)=="S60475" ///
| substr(diag,1,6)=="S60511" ///
| substr(diag,1,6)=="S60512" ///
| substr(diag,1,6)=="S60519" ///
| substr(diag,1,6)=="S60551" ///
| substr(diag,1,6)=="S60552" ///
| substr(diag,1,6)=="S60571" ///
| substr(diag,1,6)=="S60572" ///
| substr(diag,1,6)=="S60811" ///
| substr(diag,1,6)=="S60812" ///
| substr(diag,1,6)=="S60819" ///
| substr(diag,1,6)=="S60851" ///
| substr(diag,1,6)=="S60911" ///
| substr(diag,1,6)=="S60912" ///
| substr(diag,1,6)=="S60922" ///
| substr(diag,1,6)=="S60929" ///
| substr(diag,1,6)=="S60943" ///
| substr(diag,1,6)=="S61001" ///
| substr(diag,1,6)=="S61002" ///
| substr(diag,1,6)=="S61009" ///
| substr(diag,1,6)=="S61011" ///
| substr(diag,1,6)=="S61012" ///
| substr(diag,1,6)=="S61019" ///
| substr(diag,1,6)=="S61021" ///
| substr(diag,1,6)=="S61031" ///
| substr(diag,1,6)=="S61032" ///
| substr(diag,1,6)=="S61039" ///
| substr(diag,1,6)=="S61041" ///
| substr(diag,1,6)=="S61051" ///
| substr(diag,1,6)=="S61052" ///
| substr(diag,1,6)=="S61101" ///
| substr(diag,1,6)=="S61102" ///
| substr(diag,1,6)=="S61109" ///
| substr(diag,1,6)=="S61111" ///
| substr(diag,1,6)=="S61112" ///
| substr(diag,1,6)=="S61121" ///
| substr(diag,1,6)=="S61131" ///
| substr(diag,1,6)=="S61132" ///
| substr(diag,1,6)=="S61152" ///
| substr(diag,1,6)=="S61200" ///
| substr(diag,1,6)=="S61201" ///
| substr(diag,1,6)=="S61202" ///
| substr(diag,1,6)=="S61203" ///
| substr(diag,1,6)=="S61204" ///
| substr(diag,1,6)=="S61205" ///
| substr(diag,1,6)=="S61206" ///
| substr(diag,1,6)=="S61207" ///
| substr(diag,1,6)=="S61208" ///
| substr(diag,1,6)=="S61209" ///
| substr(diag,1,6)=="S61210" ///
| substr(diag,1,6)=="S61211" ///
| substr(diag,1,6)=="S61212" ///
| substr(diag,1,6)=="S61213" ///
| substr(diag,1,6)=="S61214" ///
| substr(diag,1,6)=="S61215" ///
| substr(diag,1,6)=="S61216" ///
| substr(diag,1,6)=="S61217" ///
| substr(diag,1,6)=="S61218" ///
| substr(diag,1,6)=="S61219" ///
| substr(diag,1,6)=="S61220" ///
| substr(diag,1,6)=="S61221" ///
| substr(diag,1,6)=="S61222" ///
| substr(diag,1,6)=="S61223" ///
| substr(diag,1,6)=="S61224" ///
| substr(diag,1,6)=="S61225" ///
| substr(diag,1,6)=="S61227" ///
| substr(diag,1,6)=="S61229" ///
| substr(diag,1,6)=="S61230" ///
| substr(diag,1,6)=="S61231" ///
| substr(diag,1,6)=="S61232" ///
| substr(diag,1,6)=="S61233" ///
| substr(diag,1,6)=="S61234" ///
| substr(diag,1,6)=="S61235" ///
| substr(diag,1,6)=="S61237" ///
| substr(diag,1,6)=="S61239" ///
| substr(diag,1,6)=="S61240" ///
| substr(diag,1,6)=="S61241" ///
| substr(diag,1,6)=="S61242" ///
| substr(diag,1,6)=="S61243" ///
| substr(diag,1,6)=="S61244" ///
| substr(diag,1,6)=="S61245" ///
| substr(diag,1,6)=="S61247" ///
| substr(diag,1,6)=="S61250" ///
| substr(diag,1,6)=="S61251" ///
| substr(diag,1,6)=="S61252" ///
| substr(diag,1,6)=="S61253" ///
| substr(diag,1,6)=="S61254" ///
| substr(diag,1,6)=="S61255" ///
| substr(diag,1,6)=="S61257" ///
| substr(diag,1,6)=="S61258" ///
| substr(diag,1,6)=="S61259" ///
| substr(diag,1,6)=="S61300" ///
| substr(diag,1,6)=="S61301" ///
| substr(diag,1,6)=="S61302" ///
| substr(diag,1,6)=="S61303" ///
| substr(diag,1,6)=="S61304" ///
| substr(diag,1,6)=="S61307" ///
| substr(diag,1,6)=="S61308" ///
| substr(diag,1,6)=="S61309" ///
| substr(diag,1,6)=="S61310" ///
| substr(diag,1,6)=="S61311" ///
| substr(diag,1,6)=="S61312" ///
| substr(diag,1,6)=="S61313" ///
| substr(diag,1,6)=="S61314" ///
| substr(diag,1,6)=="S61315" ///
| substr(diag,1,6)=="S61316" ///
| substr(diag,1,6)=="S61317"  


replace trauma=1 if  substr(diag,1,6)=="S61318" ///
| substr(diag,1,6)=="S61319" ///
| substr(diag,1,6)=="S61321" ///
| substr(diag,1,6)=="S61323" ///
| substr(diag,1,6)=="S61324" ///
| substr(diag,1,6)=="S61325" ///
| substr(diag,1,6)=="S61326" ///
| substr(diag,1,6)=="S61327" ///
| substr(diag,1,6)=="S61335" ///
| substr(diag,1,6)=="S61353" ///
| substr(diag,1,6)=="S61357" ///
| substr(diag,1,6)=="S61401" ///
| substr(diag,1,6)=="S61402" ///
| substr(diag,1,6)=="S61409" ///
| substr(diag,1,6)=="S61411" ///
| substr(diag,1,6)=="S61412" ///
| substr(diag,1,6)=="S61419" ///
| substr(diag,1,6)=="S61421" ///
| substr(diag,1,6)=="S61422" ///
| substr(diag,1,6)=="S61429" ///
| substr(diag,1,6)=="S61431" ///
| substr(diag,1,6)=="S61432" ///
| substr(diag,1,6)=="S61439" ///
| substr(diag,1,6)=="S61441" ///
| substr(diag,1,6)=="S61442" ///
| substr(diag,1,6)=="S61451" ///
| substr(diag,1,6)=="S61452" ///
| substr(diag,1,6)=="S61459" ///
| substr(diag,1,6)=="S61501" ///
| substr(diag,1,6)=="S61502" ///
| substr(diag,1,6)=="S61509" ///
| substr(diag,1,6)=="S61511" ///
| substr(diag,1,6)=="S61512" ///
| substr(diag,1,6)=="S61519" ///
| substr(diag,1,6)=="S61521" ///
| substr(diag,1,6)=="S61522" ///
| substr(diag,1,6)=="S61531" ///
| substr(diag,1,6)=="S61532" ///
| substr(diag,1,6)=="S61539" ///
| substr(diag,1,6)=="S61541" ///
| substr(diag,1,6)=="S61551" ///
| substr(diag,1,6)=="S61552" ///
| substr(diag,1,6)=="S62001" ///
| substr(diag,1,6)=="S62002" ///
| substr(diag,1,6)=="S62009" ///
| substr(diag,1,6)=="S62011" ///
| substr(diag,1,6)=="S62012" ///
| substr(diag,1,6)=="S62014" ///
| substr(diag,1,6)=="S62015" ///
| substr(diag,1,6)=="S62021" ///
| substr(diag,1,6)=="S62022" ///
| substr(diag,1,6)=="S62023" ///
| substr(diag,1,6)=="S62024" ///
| substr(diag,1,6)=="S62025" ///
| substr(diag,1,6)=="S62031" ///
| substr(diag,1,6)=="S62032" ///
| substr(diag,1,6)=="S62033" ///
| substr(diag,1,6)=="S62034" ///
| substr(diag,1,6)=="S62035" ///
| substr(diag,1,6)=="S62101" ///
| substr(diag,1,6)=="S62102" ///
| substr(diag,1,6)=="S62109" ///
| substr(diag,1,6)=="S62111" ///
| substr(diag,1,6)=="S62112" ///
| substr(diag,1,6)=="S62113" ///
| substr(diag,1,6)=="S62114" ///
| substr(diag,1,6)=="S62115" ///
| substr(diag,1,6)=="S62116" ///
| substr(diag,1,6)=="S62121" ///
| substr(diag,1,6)=="S62122" ///
| substr(diag,1,6)=="S62125" ///
| substr(diag,1,6)=="S62126" ///
| substr(diag,1,6)=="S62131" ///
| substr(diag,1,6)=="S62132" ///
| substr(diag,1,6)=="S62135" ///
| substr(diag,1,6)=="S62136" ///
| substr(diag,1,6)=="S62141" ///
| substr(diag,1,6)=="S62142" ///
| substr(diag,1,6)=="S62144" ///
| substr(diag,1,6)=="S62145" ///
| substr(diag,1,6)=="S62146" ///
| substr(diag,1,6)=="S62151" ///
| substr(diag,1,6)=="S62152" ///
| substr(diag,1,6)=="S62155" ///
| substr(diag,1,6)=="S62156" ///
| substr(diag,1,6)=="S62162" ///
| substr(diag,1,6)=="S62164" ///
| substr(diag,1,6)=="S62165" ///
| substr(diag,1,6)=="S62166" ///
| substr(diag,1,6)=="S62171" ///
| substr(diag,1,6)=="S62172" ///
| substr(diag,1,6)=="S62173" ///
| substr(diag,1,6)=="S62174" ///
| substr(diag,1,6)=="S62175" ///
| substr(diag,1,6)=="S62176" ///
| substr(diag,1,6)=="S62181" ///
| substr(diag,1,6)=="S62182" ///
| substr(diag,1,6)=="S62201" ///
| substr(diag,1,6)=="S62202" ///
| substr(diag,1,6)=="S62209" ///
| substr(diag,1,6)=="S62211" ///
| substr(diag,1,6)=="S62212" ///
| substr(diag,1,6)=="S62221" ///
| substr(diag,1,6)=="S62222" ///
| substr(diag,1,6)=="S62225" ///
| substr(diag,1,6)=="S62231" ///
| substr(diag,1,6)=="S62232" ///
| substr(diag,1,6)=="S62233" ///
| substr(diag,1,6)=="S62234" ///
| substr(diag,1,6)=="S62235" ///
| substr(diag,1,6)=="S62236" ///
| substr(diag,1,6)=="S62242" ///
| substr(diag,1,6)=="S62244" ///
| substr(diag,1,6)=="S62245" ///
| substr(diag,1,6)=="S62251" ///
| substr(diag,1,6)=="S62252" ///
| substr(diag,1,6)=="S62255" ///
| substr(diag,1,6)=="S62291" ///
| substr(diag,1,6)=="S62292" ///
| substr(diag,1,6)=="S62299" ///
| substr(diag,1,6)=="S62300" ///
| substr(diag,1,6)=="S62301" ///
| substr(diag,1,6)=="S62302" ///
| substr(diag,1,6)=="S62303" ///
| substr(diag,1,6)=="S62304" ///
| substr(diag,1,6)=="S62305" ///
| substr(diag,1,6)=="S62306"  


replace trauma=1 if  substr(diag,1,6)=="S62307" ///
| substr(diag,1,6)=="S62308" ///
| substr(diag,1,6)=="S62309" ///
| substr(diag,1,6)=="S62310" ///
| substr(diag,1,6)=="S62311" ///
| substr(diag,1,6)=="S62312" ///
| substr(diag,1,6)=="S62313" ///
| substr(diag,1,6)=="S62314" ///
| substr(diag,1,6)=="S62315" ///
| substr(diag,1,6)=="S62316" ///
| substr(diag,1,6)=="S62317" ///
| substr(diag,1,6)=="S62318" ///
| substr(diag,1,6)=="S62319" ///
| substr(diag,1,6)=="S62320" ///
| substr(diag,1,6)=="S62321" ///
| substr(diag,1,6)=="S62322" ///
| substr(diag,1,6)=="S62323" ///
| substr(diag,1,6)=="S62324" ///
| substr(diag,1,6)=="S62325" ///
| substr(diag,1,6)=="S62326" ///
| substr(diag,1,6)=="S62327" ///
| substr(diag,1,6)=="S62328" ///
| substr(diag,1,6)=="S62329" ///
| substr(diag,1,6)=="S62330" ///
| substr(diag,1,6)=="S62331" ///
| substr(diag,1,6)=="S62332" ///
| substr(diag,1,6)=="S62333" ///
| substr(diag,1,6)=="S62334" ///
| substr(diag,1,6)=="S62335" ///
| substr(diag,1,6)=="S62336" ///
| substr(diag,1,6)=="S62337" ///
| substr(diag,1,6)=="S62339" ///
| substr(diag,1,6)=="S62340" ///
| substr(diag,1,6)=="S62341" ///
| substr(diag,1,6)=="S62342" ///
| substr(diag,1,6)=="S62343" ///
| substr(diag,1,6)=="S62344" ///
| substr(diag,1,6)=="S62345" ///
| substr(diag,1,6)=="S62346" ///
| substr(diag,1,6)=="S62347" ///
| substr(diag,1,6)=="S62349" ///
| substr(diag,1,6)=="S62350" ///
| substr(diag,1,6)=="S62351" ///
| substr(diag,1,6)=="S62352" ///
| substr(diag,1,6)=="S62353" ///
| substr(diag,1,6)=="S62354" ///
| substr(diag,1,6)=="S62355" ///
| substr(diag,1,6)=="S62356" ///
| substr(diag,1,6)=="S62357" ///
| substr(diag,1,6)=="S62359" ///
| substr(diag,1,6)=="S62360" ///
| substr(diag,1,6)=="S62361" ///
| substr(diag,1,6)=="S62362" ///
| substr(diag,1,6)=="S62363" ///
| substr(diag,1,6)=="S62364" ///
| substr(diag,1,6)=="S62365" ///
| substr(diag,1,6)=="S62366" ///
| substr(diag,1,6)=="S62367" ///
| substr(diag,1,6)=="S62369" ///
| substr(diag,1,6)=="S62390" ///
| substr(diag,1,6)=="S62391" ///
| substr(diag,1,6)=="S62392" ///
| substr(diag,1,6)=="S62393" ///
| substr(diag,1,6)=="S62394" ///
| substr(diag,1,6)=="S62395" ///
| substr(diag,1,6)=="S62396" ///
| substr(diag,1,6)=="S62397" ///
| substr(diag,1,6)=="S62398" ///
| substr(diag,1,6)=="S62399" ///
| substr(diag,1,6)=="S62501" ///
| substr(diag,1,6)=="S62502" ///
| substr(diag,1,6)=="S62509" ///
| substr(diag,1,6)=="S62511" ///
| substr(diag,1,6)=="S62512" ///
| substr(diag,1,6)=="S62514" ///
| substr(diag,1,6)=="S62515" ///
| substr(diag,1,6)=="S62521" ///
| substr(diag,1,6)=="S62522" ///
| substr(diag,1,6)=="S62524" ///
| substr(diag,1,6)=="S62525" ///
| substr(diag,1,6)=="S62600" ///
| substr(diag,1,6)=="S62601" ///
| substr(diag,1,6)=="S62602" ///
| substr(diag,1,6)=="S62603" ///
| substr(diag,1,6)=="S62604" ///
| substr(diag,1,6)=="S62605" ///
| substr(diag,1,6)=="S62606" ///
| substr(diag,1,6)=="S62607" ///
| substr(diag,1,6)=="S62608" ///
| substr(diag,1,6)=="S62609" ///
| substr(diag,1,6)=="S62610" ///
| substr(diag,1,6)=="S62611" ///
| substr(diag,1,6)=="S62612" ///
| substr(diag,1,6)=="S62613" ///
| substr(diag,1,6)=="S62614" ///
| substr(diag,1,6)=="S62615" ///
| substr(diag,1,6)=="S62616" ///
| substr(diag,1,6)=="S62617" ///
| substr(diag,1,6)=="S62618" ///
| substr(diag,1,6)=="S62619" ///
| substr(diag,1,6)=="S62620" ///
| substr(diag,1,6)=="S62621" ///
| substr(diag,1,6)=="S62622" ///
| substr(diag,1,6)=="S62623" ///
| substr(diag,1,6)=="S62624" ///
| substr(diag,1,6)=="S62625" ///
| substr(diag,1,6)=="S62626" ///
| substr(diag,1,6)=="S62627" ///
| substr(diag,1,6)=="S62628" ///
| substr(diag,1,6)=="S62629" ///
| substr(diag,1,6)=="S62630" ///
| substr(diag,1,6)=="S62631" ///
| substr(diag,1,6)=="S62632" ///
| substr(diag,1,6)=="S62633" ///
| substr(diag,1,6)=="S62634" ///
| substr(diag,1,6)=="S62635" ///
| substr(diag,1,6)=="S62636" ///
| substr(diag,1,6)=="S62637" ///
| substr(diag,1,6)=="S62639" ///
| substr(diag,1,6)=="S62640" ///
| substr(diag,1,6)=="S62641" ///
| substr(diag,1,6)=="S62642"  


replace trauma=1 if  substr(diag,1,6)=="S62643" ///
| substr(diag,1,6)=="S62644" ///
| substr(diag,1,6)=="S62645" ///
| substr(diag,1,6)=="S62646" ///
| substr(diag,1,6)=="S62647" ///
| substr(diag,1,6)=="S62648" ///
| substr(diag,1,6)=="S62649" ///
| substr(diag,1,6)=="S62650" ///
| substr(diag,1,6)=="S62651" ///
| substr(diag,1,6)=="S62652" ///
| substr(diag,1,6)=="S62653" ///
| substr(diag,1,6)=="S62654" ///
| substr(diag,1,6)=="S62655" ///
| substr(diag,1,6)=="S62656" ///
| substr(diag,1,6)=="S62657" ///
| substr(diag,1,6)=="S62660" ///
| substr(diag,1,6)=="S62661" ///
| substr(diag,1,6)=="S62662" ///
| substr(diag,1,6)=="S62663" ///
| substr(diag,1,6)=="S62664" ///
| substr(diag,1,6)=="S62665" ///
| substr(diag,1,6)=="S62666" ///
| substr(diag,1,6)=="S62667" ///
| substr(diag,1,6)=="S62669" ///
| substr(diag,1,5)=="S6290" ///
| substr(diag,1,5)=="S6291" ///
| substr(diag,1,5)=="S6292" ///
| substr(diag,1,6)=="S63001" ///
| substr(diag,1,6)=="S63002" ///
| substr(diag,1,6)=="S63003" ///
| substr(diag,1,6)=="S63004" ///
| substr(diag,1,6)=="S63005" ///
| substr(diag,1,6)=="S63006" ///
| substr(diag,1,6)=="S63011" ///
| substr(diag,1,6)=="S63012" ///
| substr(diag,1,6)=="S63014" ///
| substr(diag,1,6)=="S63015" ///
| substr(diag,1,6)=="S63016" ///
| substr(diag,1,6)=="S63021" ///
| substr(diag,1,6)=="S63022" ///
| substr(diag,1,6)=="S63024" ///
| substr(diag,1,6)=="S63025" ///
| substr(diag,1,6)=="S63026" ///
| substr(diag,1,6)=="S63031" ///
| substr(diag,1,6)=="S63032" ///
| substr(diag,1,6)=="S63034" ///
| substr(diag,1,6)=="S63035" ///
| substr(diag,1,6)=="S63044" ///
| substr(diag,1,6)=="S63045" ///
| substr(diag,1,6)=="S63046" ///
| substr(diag,1,6)=="S63051" ///
| substr(diag,1,6)=="S63052" ///
| substr(diag,1,6)=="S63054" ///
| substr(diag,1,6)=="S63055" ///
| substr(diag,1,6)=="S63056" ///
| substr(diag,1,6)=="S63061" ///
| substr(diag,1,6)=="S63062" ///
| substr(diag,1,6)=="S63064" ///
| substr(diag,1,6)=="S63065" ///
| substr(diag,1,6)=="S63066" ///
| substr(diag,1,6)=="S63071" ///
| substr(diag,1,6)=="S63072" ///
| substr(diag,1,6)=="S63074" ///
| substr(diag,1,6)=="S63075" ///
| substr(diag,1,6)=="S63091" ///
| substr(diag,1,6)=="S63092" ///
| substr(diag,1,6)=="S63094" ///
| substr(diag,1,6)=="S63095" ///
| substr(diag,1,6)=="S63096" ///
| substr(diag,1,6)=="S63102" ///
| substr(diag,1,6)=="S63104" ///
| substr(diag,1,6)=="S63105" ///
| substr(diag,1,6)=="S63106" ///
| substr(diag,1,6)=="S63111" ///
| substr(diag,1,6)=="S63112" ///
| substr(diag,1,6)=="S63114" ///
| substr(diag,1,6)=="S63115" ///
| substr(diag,1,6)=="S63116" ///
| substr(diag,1,6)=="S63121" ///
| substr(diag,1,6)=="S63124" ///
| substr(diag,1,6)=="S63125" ///
| substr(diag,1,6)=="S63126" ///
| substr(diag,1,6)=="S63131" ///
| substr(diag,1,6)=="S63132" ///
| substr(diag,1,6)=="S63135" ///
| substr(diag,1,6)=="S63142" ///
| substr(diag,1,6)=="S63144" ///
| substr(diag,1,6)=="S63145" ///
| substr(diag,1,6)=="S63200" ///
| substr(diag,1,6)=="S63201" ///
| substr(diag,1,6)=="S63202" ///
| substr(diag,1,6)=="S63203" ///
| substr(diag,1,6)=="S63206" ///
| substr(diag,1,6)=="S63211" ///
| substr(diag,1,6)=="S63213" ///
| substr(diag,1,6)=="S63215" ///
| substr(diag,1,6)=="S63217" ///
| substr(diag,1,6)=="S63230" ///
| substr(diag,1,6)=="S63231" ///
| substr(diag,1,6)=="S63235" ///
| substr(diag,1,6)=="S63236" ///
| substr(diag,1,6)=="S63237"  


replace trauma=1 if  substr(diag,1,6)=="S63239" ///
| substr(diag,1,6)=="S63241" ///
| substr(diag,1,6)=="S63245" ///
| substr(diag,1,6)=="S63250" ///
| substr(diag,1,6)=="S63251" ///
| substr(diag,1,6)=="S63252" ///
| substr(diag,1,6)=="S63253" ///
| substr(diag,1,6)=="S63254" ///
| substr(diag,1,6)=="S63255" ///
| substr(diag,1,6)=="S63256" ///
| substr(diag,1,6)=="S63257" ///
| substr(diag,1,6)=="S63258" ///
| substr(diag,1,6)=="S63259" ///
| substr(diag,1,6)=="S63260" ///
| substr(diag,1,6)=="S63261" ///
| substr(diag,1,6)=="S63262" ///
| substr(diag,1,6)=="S63263" ///
| substr(diag,1,6)=="S63264" ///
| substr(diag,1,6)=="S63265" ///
| substr(diag,1,6)=="S63266" ///
| substr(diag,1,6)=="S63267" ///
| substr(diag,1,6)=="S63268" ///
| substr(diag,1,6)=="S63269" ///
| substr(diag,1,6)=="S63271" ///
| substr(diag,1,6)=="S63277" ///
| substr(diag,1,6)=="S63279" ///
| substr(diag,1,6)=="S63280" ///
| substr(diag,1,6)=="S63281" ///
| substr(diag,1,6)=="S63282" ///
| substr(diag,1,6)=="S63283" ///
| substr(diag,1,6)=="S63284" ///
| substr(diag,1,6)=="S63285" ///
| substr(diag,1,6)=="S63286" ///
| substr(diag,1,6)=="S63287" ///
| substr(diag,1,6)=="S63288" ///
| substr(diag,1,6)=="S63289" ///
| substr(diag,1,6)=="S63290" ///
| substr(diag,1,6)=="S63291" ///
| substr(diag,1,6)=="S63292" ///
| substr(diag,1,6)=="S63293" ///
| substr(diag,1,6)=="S63294" ///
| substr(diag,1,6)=="S63295" ///
| substr(diag,1,6)=="S63296" ///
| substr(diag,1,6)=="S63297" ///
| substr(diag,1,6)=="S63301" ///
| substr(diag,1,6)=="S63302" ///
| substr(diag,1,6)=="S63321" ///
| substr(diag,1,6)=="S63322" ///
| substr(diag,1,6)=="S63331" ///
| substr(diag,1,6)=="S63391" ///
| substr(diag,1,6)=="S63392" ///
| substr(diag,1,6)=="S63400" ///
| substr(diag,1,6)=="S63401" ///
| substr(diag,1,6)=="S63404" ///
| substr(diag,1,6)=="S63405" ///
| substr(diag,1,6)=="S63415" ///
| substr(diag,1,6)=="S63416" ///
| substr(diag,1,6)=="S63417" ///
| substr(diag,1,6)=="S63418" ///
| substr(diag,1,6)=="S63419" ///
| substr(diag,1,6)=="S63430" ///
| substr(diag,1,6)=="S63433" ///
| substr(diag,1,6)=="S63434" ///
| substr(diag,1,6)=="S63437" ///
| substr(diag,1,6)=="S63496" ///
| substr(diag,1,6)=="S63498" ///
| substr(diag,1,6)=="S63501" ///
| substr(diag,1,6)=="S63502" ///
| substr(diag,1,6)=="S63509" ///
| substr(diag,1,6)=="S63511" ///
| substr(diag,1,6)=="S63512" ///
| substr(diag,1,6)=="S63519" ///
| substr(diag,1,6)=="S63521" ///
| substr(diag,1,6)=="S63591" ///
| substr(diag,1,6)=="S63592" ///
| substr(diag,1,6)=="S63601" ///
| substr(diag,1,6)=="S63602" ///
| substr(diag,1,6)=="S63609" ///
| substr(diag,1,6)=="S63610" ///
| substr(diag,1,6)=="S63611" ///
| substr(diag,1,6)=="S63612" ///
| substr(diag,1,6)=="S63617" ///
| substr(diag,1,6)=="S63619" ///
| substr(diag,1,6)=="S63621" ///
| substr(diag,1,6)=="S63622" ///
| substr(diag,1,6)=="S63630" ///
| substr(diag,1,6)=="S63631" ///
| substr(diag,1,6)=="S63632" ///
| substr(diag,1,6)=="S63633" ///
| substr(diag,1,6)=="S63634" ///
| substr(diag,1,6)=="S63635" ///
| substr(diag,1,6)=="S63636" ///
| substr(diag,1,6)=="S63637" ///
| substr(diag,1,6)=="S63641" ///
| substr(diag,1,6)=="S63642" ///
| substr(diag,1,6)=="S63649" ///
| substr(diag,1,6)=="S63650" ///
| substr(diag,1,6)=="S63654" ///
| substr(diag,1,6)=="S63656" ///
| substr(diag,1,6)=="S63658" ///
| substr(diag,1,6)=="S63691" ///
| substr(diag,1,4)=="S638" ///
| substr(diag,1,5)=="S6390" ///
| substr(diag,1,5)=="S6391" ///
| substr(diag,1,5)=="S6392" ///
| substr(diag,1,5)=="S6400" ///
| substr(diag,1,5)=="S6401" ///
| substr(diag,1,5)=="S6402" ///
| substr(diag,1,5)=="S6410" ///
| substr(diag,1,5)=="S6411" ///
| substr(diag,1,5)=="S6412" ///
| substr(diag,1,5)=="S6420"  


replace trauma=1 if  substr(diag,1,5)=="S6421" ///
| substr(diag,1,5)=="S6422" ///
| substr(diag,1,5)=="S6430" ///
| substr(diag,1,5)=="S6431" ///
| substr(diag,1,5)=="S6432" ///
| substr(diag,1,5)=="S6440" ///
| substr(diag,1,6)=="S64490" ///
| substr(diag,1,6)=="S64491" ///
| substr(diag,1,6)=="S64492" ///
| substr(diag,1,6)=="S64493" ///
| substr(diag,1,6)=="S64494" ///
| substr(diag,1,6)=="S64495" ///
| substr(diag,1,6)=="S64496" ///
| substr(diag,1,6)=="S64497" ///
| substr(diag,1,6)=="S64498" ///
| substr(diag,1,4)=="S648" ///
| substr(diag,1,5)=="S6490" ///
| substr(diag,1,5)=="S6492" ///
| substr(diag,1,6)=="S65002" ///
| substr(diag,1,6)=="S65009" ///
| substr(diag,1,6)=="S65011" ///
| substr(diag,1,6)=="S65012" ///
| substr(diag,1,6)=="S65091" ///
| substr(diag,1,6)=="S65092" ///
| substr(diag,1,6)=="S65101" ///
| substr(diag,1,6)=="S65102" ///
| substr(diag,1,6)=="S65109" ///
| substr(diag,1,6)=="S65111" ///
| substr(diag,1,6)=="S65112" ///
| substr(diag,1,6)=="S65119" ///
| substr(diag,1,6)=="S65192" ///
| substr(diag,1,6)=="S65211" ///
| substr(diag,1,6)=="S65212" ///
| substr(diag,1,6)=="S65311" ///
| substr(diag,1,6)=="S65401" ///
| substr(diag,1,6)=="S65411" ///
| substr(diag,1,6)=="S65412" ///
| substr(diag,1,6)=="S65504" ///
| substr(diag,1,6)=="S65508" ///
| substr(diag,1,6)=="S65509" ///
| substr(diag,1,6)=="S65510" ///
| substr(diag,1,6)=="S65511" ///
| substr(diag,1,6)=="S65512" ///
| substr(diag,1,6)=="S65513" ///
| substr(diag,1,6)=="S65514" ///
| substr(diag,1,6)=="S65515" ///
| substr(diag,1,6)=="S65516" ///
| substr(diag,1,6)=="S65517" ///
| substr(diag,1,6)=="S65518" ///
| substr(diag,1,6)=="S65519" ///
| substr(diag,1,6)=="S65590" ///
| substr(diag,1,6)=="S65591" ///
| substr(diag,1,6)=="S65592" ///
| substr(diag,1,6)=="S65594" ///
| substr(diag,1,6)=="S65596" ///
| substr(diag,1,6)=="S65599" ///
| substr(diag,1,6)=="S65801" ///
| substr(diag,1,6)=="S65809" ///
| substr(diag,1,6)=="S65811" ///
| substr(diag,1,6)=="S65812" ///
| substr(diag,1,6)=="S65902" ///
| substr(diag,1,6)=="S66021" ///
| substr(diag,1,6)=="S66022" ///
| substr(diag,1,6)=="S66091" ///
| substr(diag,1,6)=="S66100" ///
| substr(diag,1,6)=="S66102" ///
| substr(diag,1,6)=="S66104" ///
| substr(diag,1,6)=="S66105" ///
| substr(diag,1,6)=="S66106" ///
| substr(diag,1,6)=="S66112" ///
| substr(diag,1,6)=="S66119" ///
| substr(diag,1,6)=="S66120" ///
| substr(diag,1,6)=="S66121" ///
| substr(diag,1,6)=="S66122" ///
| substr(diag,1,6)=="S66123" ///
| substr(diag,1,6)=="S66124" ///
| substr(diag,1,6)=="S66125" ///
| substr(diag,1,6)=="S66126" ///
| substr(diag,1,6)=="S66127" ///
| substr(diag,1,6)=="S66128" ///
| substr(diag,1,6)=="S66129" ///
| substr(diag,1,6)=="S66190" ///
| substr(diag,1,6)=="S66191" ///
| substr(diag,1,6)=="S66192" ///
| substr(diag,1,6)=="S66201" ///
| substr(diag,1,6)=="S66202" ///
| substr(diag,1,6)=="S66221" ///
| substr(diag,1,6)=="S66222" ///
| substr(diag,1,6)=="S66300" ///
| substr(diag,1,6)=="S66301" ///
| substr(diag,1,6)=="S66302" ///
| substr(diag,1,6)=="S66303" ///
| substr(diag,1,6)=="S66304" ///
| substr(diag,1,6)=="S66305" ///
| substr(diag,1,6)=="S66306" ///
| substr(diag,1,6)=="S66307" ///
| substr(diag,1,6)=="S66308" ///
| substr(diag,1,6)=="S66309" ///
| substr(diag,1,6)=="S66310" ///
| substr(diag,1,6)=="S66312" ///
| substr(diag,1,6)=="S66313" ///
| substr(diag,1,6)=="S66314" ///
| substr(diag,1,6)=="S66315" ///
| substr(diag,1,6)=="S66319" ///
| substr(diag,1,6)=="S66320" ///
| substr(diag,1,6)=="S66321" ///
| substr(diag,1,6)=="S66322" ///
| substr(diag,1,6)=="S66323" ///
| substr(diag,1,6)=="S66324"  


replace trauma=1 if  substr(diag,1,6)=="S66325" ///
| substr(diag,1,6)=="S66326" ///
| substr(diag,1,6)=="S66327" ///
| substr(diag,1,6)=="S66328" ///
| substr(diag,1,6)=="S66329" ///
| substr(diag,1,6)=="S66391" ///
| substr(diag,1,6)=="S66392" ///
| substr(diag,1,6)=="S66393" ///
| substr(diag,1,6)=="S66394" ///
| substr(diag,1,6)=="S66395" ///
| substr(diag,1,6)=="S66396" ///
| substr(diag,1,6)=="S66397" ///
| substr(diag,1,6)=="S66399" ///
| substr(diag,1,6)=="S66421" ///
| substr(diag,1,6)=="S66422" ///
| substr(diag,1,6)=="S66492" ///
| substr(diag,1,6)=="S66509" ///
| substr(diag,1,6)=="S66514" ///
| substr(diag,1,6)=="S66521" ///
| substr(diag,1,6)=="S66522" ///
| substr(diag,1,6)=="S66523" ///
| substr(diag,1,6)=="S66524" ///
| substr(diag,1,6)=="S66525" ///
| substr(diag,1,6)=="S66526" ///
| substr(diag,1,6)=="S66527" ///
| substr(diag,1,6)=="S66529" ///
| substr(diag,1,6)=="S66592" ///
| substr(diag,1,6)=="S66811" ///
| substr(diag,1,6)=="S66812" ///
| substr(diag,1,6)=="S66821" ///
| substr(diag,1,6)=="S66822" ///
| substr(diag,1,6)=="S66891" ///
| substr(diag,1,6)=="S66892" ///
| substr(diag,1,6)=="S66901" ///
| substr(diag,1,6)=="S66902" ///
| substr(diag,1,6)=="S66911" ///
| substr(diag,1,6)=="S66912" ///
| substr(diag,1,6)=="S66919" ///
| substr(diag,1,6)=="S66921" ///
| substr(diag,1,6)=="S66922" ///
| substr(diag,1,6)=="S66929" ///
| substr(diag,1,6)=="S66991" ///
| substr(diag,1,5)=="S6701" ///
| substr(diag,1,5)=="S6702" ///
| substr(diag,1,5)=="S6710" ///
| substr(diag,1,6)=="S67190" ///
| substr(diag,1,6)=="S67191" ///
| substr(diag,1,6)=="S67192" ///
| substr(diag,1,6)=="S67193" ///
| substr(diag,1,6)=="S67194" ///
| substr(diag,1,6)=="S67195" ///
| substr(diag,1,6)=="S67196" ///
| substr(diag,1,6)=="S67197" ///
| substr(diag,1,6)=="S67198" ///
| substr(diag,1,5)=="S6720" ///
| substr(diag,1,5)=="S6721" ///
| substr(diag,1,5)=="S6722" ///
| substr(diag,1,5)=="S6730" ///
| substr(diag,1,5)=="S6731" ///
| substr(diag,1,5)=="S6732" ///
| substr(diag,1,5)=="S6740" ///
| substr(diag,1,5)=="S6741" ///
| substr(diag,1,5)=="S6790" ///
| substr(diag,1,5)=="S6791" ///
| substr(diag,1,6)=="S68011" ///
| substr(diag,1,6)=="S68012" ///
| substr(diag,1,6)=="S68019" ///
| substr(diag,1,6)=="S68021" ///
| substr(diag,1,6)=="S68022" ///
| substr(diag,1,6)=="S68110" ///
| substr(diag,1,6)=="S68111" ///
| substr(diag,1,6)=="S68112" ///
| substr(diag,1,6)=="S68113" ///
| substr(diag,1,6)=="S68114" ///
| substr(diag,1,6)=="S68115" ///
| substr(diag,1,6)=="S68116" ///
| substr(diag,1,6)=="S68117" ///
| substr(diag,1,6)=="S68119" ///
| substr(diag,1,6)=="S68120" ///
| substr(diag,1,6)=="S68121" ///
| substr(diag,1,6)=="S68122" ///
| substr(diag,1,6)=="S68123" ///
| substr(diag,1,6)=="S68124" ///
| substr(diag,1,6)=="S68125" ///
| substr(diag,1,6)=="S68126" ///
| substr(diag,1,6)=="S68127" ///
| substr(diag,1,6)=="S68128" ///
| substr(diag,1,6)=="S68129" ///
| substr(diag,1,6)=="S68411" ///
| substr(diag,1,6)=="S68412" ///
| substr(diag,1,6)=="S68419" ///
| substr(diag,1,6)=="S68421" ///
| substr(diag,1,6)=="S68422" ///
| substr(diag,1,6)=="S68511" ///
| substr(diag,1,6)=="S68512" ///
| substr(diag,1,6)=="S68519" ///
| substr(diag,1,6)=="S68521" ///
| substr(diag,1,6)=="S68522" ///
| substr(diag,1,6)=="S68529" ///
| substr(diag,1,6)=="S68610" ///
| substr(diag,1,6)=="S68611" ///
| substr(diag,1,6)=="S68612" ///
| substr(diag,1,6)=="S68613" ///
| substr(diag,1,6)=="S68614" ///
| substr(diag,1,6)=="S68615" ///
| substr(diag,1,6)=="S68616"  


replace trauma=1 if  substr(diag,1,6)=="S68617" ///
| substr(diag,1,6)=="S68619" ///
| substr(diag,1,6)=="S68620" ///
| substr(diag,1,6)=="S68621" ///
| substr(diag,1,6)=="S68622" ///
| substr(diag,1,6)=="S68623" ///
| substr(diag,1,6)=="S68624" ///
| substr(diag,1,6)=="S68625" ///
| substr(diag,1,6)=="S68626" ///
| substr(diag,1,6)=="S68627" ///
| substr(diag,1,6)=="S68628" ///
| substr(diag,1,6)=="S68629" ///
| substr(diag,1,6)=="S68711" ///
| substr(diag,1,6)=="S68712" ///
| substr(diag,1,6)=="S68721" ///
| substr(diag,1,6)=="S68722" ///
| substr(diag,1,6)=="S68729" ///
| substr(diag,1,5)=="S6980" ///
| substr(diag,1,5)=="S6981" ///
| substr(diag,1,5)=="S6982" ///
| substr(diag,1,5)=="S6990" ///
| substr(diag,1,5)=="S6991" ///
| substr(diag,1,5)=="S6992" ///
| substr(diag,1,5)=="S7000" ///
| substr(diag,1,5)=="S7001" ///
| substr(diag,1,5)=="S7002" ///
| substr(diag,1,5)=="S7010" ///
| substr(diag,1,5)=="S7011" ///
| substr(diag,1,5)=="S7012" ///
| substr(diag,1,6)=="S70211" ///
| substr(diag,1,6)=="S70212" ///
| substr(diag,1,6)=="S70219" ///
| substr(diag,1,6)=="S70252" ///
| substr(diag,1,6)=="S70259" ///
| substr(diag,1,6)=="S70279" ///
| substr(diag,1,6)=="S70311" ///
| substr(diag,1,6)=="S70312" ///
| substr(diag,1,6)=="S70319" ///
| substr(diag,1,6)=="S70342" ///
| substr(diag,1,6)=="S70352" ///
| substr(diag,1,6)=="S70912" ///
| substr(diag,1,6)=="S71001" ///
| substr(diag,1,6)=="S71002" ///
| substr(diag,1,6)=="S71009" ///
| substr(diag,1,6)=="S71011" ///
| substr(diag,1,6)=="S71012" ///
| substr(diag,1,6)=="S71019" ///
| substr(diag,1,6)=="S71021" ///
| substr(diag,1,6)=="S71022" ///
| substr(diag,1,6)=="S71029" ///
| substr(diag,1,6)=="S71031" ///
| substr(diag,1,6)=="S71032" ///
| substr(diag,1,6)=="S71039" ///
| substr(diag,1,6)=="S71041" ///
| substr(diag,1,6)=="S71042" ///
| substr(diag,1,6)=="S71101" ///
| substr(diag,1,6)=="S71102" ///
| substr(diag,1,6)=="S71109" ///
| substr(diag,1,6)=="S71111" ///
| substr(diag,1,6)=="S71112" ///
| substr(diag,1,6)=="S71119" ///
| substr(diag,1,6)=="S71121" ///
| substr(diag,1,6)=="S71122" ///
| substr(diag,1,6)=="S71129" ///
| substr(diag,1,6)=="S71131" ///
| substr(diag,1,6)=="S71132" ///
| substr(diag,1,6)=="S71139" ///
| substr(diag,1,6)=="S71141" ///
| substr(diag,1,6)=="S71142" ///
| substr(diag,1,6)=="S71149" ///
| substr(diag,1,6)=="S71151" ///
| substr(diag,1,6)=="S71152" ///
| substr(diag,1,6)=="S72001" ///
| substr(diag,1,6)=="S72002" ///
| substr(diag,1,6)=="S72009" ///
| substr(diag,1,6)=="S72011" ///
| substr(diag,1,6)=="S72012" ///
| substr(diag,1,6)=="S72019" ///
| substr(diag,1,6)=="S72021" ///
| substr(diag,1,6)=="S72022" ///
| substr(diag,1,6)=="S72023" ///
| substr(diag,1,6)=="S72024" ///
| substr(diag,1,6)=="S72025" ///
| substr(diag,1,6)=="S72031" ///
| substr(diag,1,6)=="S72032" ///
| substr(diag,1,6)=="S72034" ///
| substr(diag,1,6)=="S72035" ///
| substr(diag,1,6)=="S72041" ///
| substr(diag,1,6)=="S72042" ///
| substr(diag,1,6)=="S72044" ///
| substr(diag,1,6)=="S72045" ///
| substr(diag,1,6)=="S72046" ///
| substr(diag,1,6)=="S72051" ///
| substr(diag,1,6)=="S72052" ///
| substr(diag,1,6)=="S72059" ///
| substr(diag,1,6)=="S72061" ///
| substr(diag,1,6)=="S72062" ///
| substr(diag,1,6)=="S72064" ///
| substr(diag,1,6)=="S72065" ///
| substr(diag,1,6)=="S72091" ///
| substr(diag,1,6)=="S72092"  


replace trauma=1 if  substr(diag,1,6)=="S72099" ///
| substr(diag,1,6)=="S72101" ///
| substr(diag,1,6)=="S72102" ///
| substr(diag,1,6)=="S72109" ///
| substr(diag,1,6)=="S72111" ///
| substr(diag,1,6)=="S72112" ///
| substr(diag,1,6)=="S72113" ///
| substr(diag,1,6)=="S72114" ///
| substr(diag,1,6)=="S72115" ///
| substr(diag,1,6)=="S72116" ///
| substr(diag,1,6)=="S72121" ///
| substr(diag,1,6)=="S72122" ///
| substr(diag,1,6)=="S72123" ///
| substr(diag,1,6)=="S72124" ///
| substr(diag,1,6)=="S72125" ///
| substr(diag,1,6)=="S72126" ///
| substr(diag,1,6)=="S72131" ///
| substr(diag,1,6)=="S72132" ///
| substr(diag,1,6)=="S72141" ///
| substr(diag,1,6)=="S72142" ///
| substr(diag,1,6)=="S72143" ///
| substr(diag,1,6)=="S72144" ///
| substr(diag,1,6)=="S72145" ///
| substr(diag,1,6)=="S72146" ///
| substr(diag,1,5)=="S7221" ///
| substr(diag,1,5)=="S7222" ///
| substr(diag,1,5)=="S7223" ///
| substr(diag,1,5)=="S7224" ///
| substr(diag,1,5)=="S7225" ///
| substr(diag,1,5)=="S7226" ///
| substr(diag,1,6)=="S72301" ///
| substr(diag,1,6)=="S72302" ///
| substr(diag,1,6)=="S72309" ///
| substr(diag,1,6)=="S72321" ///
| substr(diag,1,6)=="S72322" ///
| substr(diag,1,6)=="S72323" ///
| substr(diag,1,6)=="S72324" ///
| substr(diag,1,6)=="S72325" ///
| substr(diag,1,6)=="S72331" ///
| substr(diag,1,6)=="S72332" ///
| substr(diag,1,6)=="S72333" ///
| substr(diag,1,6)=="S72334" ///
| substr(diag,1,6)=="S72335" ///
| substr(diag,1,6)=="S72341" ///
| substr(diag,1,6)=="S72342" ///
| substr(diag,1,6)=="S72343" ///
| substr(diag,1,6)=="S72344" ///
| substr(diag,1,6)=="S72345" ///
| substr(diag,1,6)=="S72351" ///
| substr(diag,1,6)=="S72352" ///
| substr(diag,1,6)=="S72353" ///
| substr(diag,1,6)=="S72354" ///
| substr(diag,1,6)=="S72355" ///
| substr(diag,1,6)=="S72361" ///
| substr(diag,1,6)=="S72362" ///
| substr(diag,1,6)=="S72364" ///
| substr(diag,1,6)=="S72391" ///
| substr(diag,1,6)=="S72392" ///
| substr(diag,1,6)=="S72399" ///
| substr(diag,1,6)=="S72401" ///
| substr(diag,1,6)=="S72402" ///
| substr(diag,1,6)=="S72409" ///
| substr(diag,1,6)=="S72411" ///
| substr(diag,1,6)=="S72412" ///
| substr(diag,1,6)=="S72413" ///
| substr(diag,1,6)=="S72414" ///
| substr(diag,1,6)=="S72415" ///
| substr(diag,1,6)=="S72416" ///
| substr(diag,1,6)=="S72421" ///
| substr(diag,1,6)=="S72422" ///
| substr(diag,1,6)=="S72423" ///
| substr(diag,1,6)=="S72424" ///
| substr(diag,1,6)=="S72425" ///
| substr(diag,1,6)=="S72431" ///
| substr(diag,1,6)=="S72432" ///
| substr(diag,1,6)=="S72433" ///
| substr(diag,1,6)=="S72434" ///
| substr(diag,1,6)=="S72435" ///
| substr(diag,1,6)=="S72441" ///
| substr(diag,1,6)=="S72442" ///
| substr(diag,1,6)=="S72444" ///
| substr(diag,1,6)=="S72445" ///
| substr(diag,1,6)=="S72451" ///
| substr(diag,1,6)=="S72452" ///
| substr(diag,1,6)=="S72453" ///
| substr(diag,1,6)=="S72454" ///
| substr(diag,1,6)=="S72455" ///
| substr(diag,1,6)=="S72461" ///
| substr(diag,1,6)=="S72462" ///
| substr(diag,1,6)=="S72463"  


replace trauma=1 if substr(diag,1,6)=="S72464" ///
| substr(diag,1,6)=="S72465" ///
| substr(diag,1,6)=="S72471" ///
| substr(diag,1,6)=="S72472" ///
| substr(diag,1,6)=="S72491" ///
| substr(diag,1,6)=="S72492" ///
| substr(diag,1,6)=="S72499" ///
| substr(diag,1,4)=="S728" ///
| substr(diag,1,5)=="S7290" ///
| substr(diag,1,5)=="S7291" ///
| substr(diag,1,5)=="S7292" ///
| substr(diag,1,6)=="S73001" ///
| substr(diag,1,6)=="S73002" ///
| substr(diag,1,6)=="S73003" ///
| substr(diag,1,6)=="S73004" ///
| substr(diag,1,6)=="S73005" ///
| substr(diag,1,6)=="S73006" ///
| substr(diag,1,6)=="S73011" ///
| substr(diag,1,6)=="S73012" ///
| substr(diag,1,6)=="S73014" ///
| substr(diag,1,6)=="S73015" ///
| substr(diag,1,6)=="S73016" ///
| substr(diag,1,6)=="S73022" ///
| substr(diag,1,6)=="S73025" ///
| substr(diag,1,6)=="S73031" ///
| substr(diag,1,6)=="S73032" ///
| substr(diag,1,6)=="S73034" ///
| substr(diag,1,6)=="S73035" ///
| substr(diag,1,6)=="S73042" ///
| substr(diag,1,6)=="S73044" ///
| substr(diag,1,6)=="S73045" ///
| substr(diag,1,6)=="S73101" ///
| substr(diag,1,6)=="S73102" ///
| substr(diag,1,6)=="S73109" ///
| substr(diag,1,6)=="S73112" ///
| substr(diag,1,6)=="S73191" ///
| substr(diag,1,6)=="S73192" ///
| substr(diag,1,6)=="S73199" ///
| substr(diag,1,5)=="S7400" ///
| substr(diag,1,5)=="S7401" ///
| substr(diag,1,5)=="S7402" ///
| substr(diag,1,5)=="S7410" ///
| substr(diag,1,5)=="S7411" ///
| substr(diag,1,5)=="S7412" ///
| substr(diag,1,5)=="S7421" ///
| substr(diag,1,4)=="S748" ///
| substr(diag,1,5)=="S7491" ///
| substr(diag,1,5)=="S7492" ///
| substr(diag,1,6)=="S75001" ///
| substr(diag,1,6)=="S75002" ///
| substr(diag,1,6)=="S75009" ///
| substr(diag,1,6)=="S75011" ///
| substr(diag,1,6)=="S75012" ///
| substr(diag,1,6)=="S75019" ///
| substr(diag,1,6)=="S75021" ///
| substr(diag,1,6)=="S75022" ///
| substr(diag,1,6)=="S75029" ///
| substr(diag,1,6)=="S75091" ///
| substr(diag,1,6)=="S75092" ///
| substr(diag,1,6)=="S75099" ///
| substr(diag,1,6)=="S75101" ///
| substr(diag,1,6)=="S75102" ///
| substr(diag,1,6)=="S75109" ///
| substr(diag,1,6)=="S75111" ///
| substr(diag,1,6)=="S75112" ///
| substr(diag,1,6)=="S75119" ///
| substr(diag,1,6)=="S75121" ///
| substr(diag,1,6)=="S75122" ///
| substr(diag,1,6)=="S75129" ///
| substr(diag,1,6)=="S75191" ///
| substr(diag,1,6)=="S75192" ///
| substr(diag,1,6)=="S75199" ///
| substr(diag,1,6)=="S75209" ///
| substr(diag,1,6)=="S75212" ///
| substr(diag,1,6)=="S75222" ///
| substr(diag,1,6)=="S75801" ///
| substr(diag,1,6)=="S75811" ///
| substr(diag,1,6)=="S75812" ///
| substr(diag,1,6)=="S75891" ///
| substr(diag,1,6)=="S75892" ///
| substr(diag,1,6)=="S75902" ///
| substr(diag,1,6)=="S75991" ///
| substr(diag,1,6)=="S76001" ///
| substr(diag,1,6)=="S76002" ///
| substr(diag,1,6)=="S76011" ///
| substr(diag,1,6)=="S76012" ///
| substr(diag,1,6)=="S76019" ///
| substr(diag,1,6)=="S76021" ///
| substr(diag,1,6)=="S76022" ///
| substr(diag,1,6)=="S76029" ///
| substr(diag,1,6)=="S76091" ///
| substr(diag,1,6)=="S76092" ///
| substr(diag,1,6)=="S76099" ///
| substr(diag,1,6)=="S76102" ///
| substr(diag,1,6)=="S76111" ///
| substr(diag,1,6)=="S76112"  


replace trauma=1 if  substr(diag,1,6)=="S76119" ///
| substr(diag,1,6)=="S76121" ///
| substr(diag,1,6)=="S76122" ///
| substr(diag,1,6)=="S76129" ///
| substr(diag,1,6)=="S76191" ///
| substr(diag,1,6)=="S76192" ///
| substr(diag,1,6)=="S76199" ///
| substr(diag,1,6)=="S76202" ///
| substr(diag,1,6)=="S76211" ///
| substr(diag,1,6)=="S76212" ///
| substr(diag,1,6)=="S76222" ///
| substr(diag,1,6)=="S76291" ///
| substr(diag,1,6)=="S76309" ///
| substr(diag,1,6)=="S76311" ///
| substr(diag,1,6)=="S76312" ///
| substr(diag,1,6)=="S76319" ///
| substr(diag,1,6)=="S76321" ///
| substr(diag,1,6)=="S76322" ///
| substr(diag,1,6)=="S76329" ///
| substr(diag,1,6)=="S76391" ///
| substr(diag,1,6)=="S76392" ///
| substr(diag,1,6)=="S76802" ///
| substr(diag,1,6)=="S76811" ///
| substr(diag,1,6)=="S76812" ///
| substr(diag,1,6)=="S76821" ///
| substr(diag,1,6)=="S76822" ///
| substr(diag,1,6)=="S76829" ///
| substr(diag,1,6)=="S76891" ///
| substr(diag,1,6)=="S76892" ///
| substr(diag,1,6)=="S76899" ///
| substr(diag,1,6)=="S76901" ///
| substr(diag,1,6)=="S76911" ///
| substr(diag,1,6)=="S76912" ///
| substr(diag,1,6)=="S76921" ///
| substr(diag,1,6)=="S76922" ///
| substr(diag,1,6)=="S76992" ///
| substr(diag,1,5)=="S7710" ///
| substr(diag,1,5)=="S7711" ///
| substr(diag,1,5)=="S7712" ///
| substr(diag,1,5)=="S7720" ///
| substr(diag,1,5)=="S7722" ///
| substr(diag,1,6)=="S78111" ///
| substr(diag,1,6)=="S78112" ///
| substr(diag,1,6)=="S78119" ///
| substr(diag,1,6)=="S78121" ///
| substr(diag,1,6)=="S78122" ///
| substr(diag,1,6)=="S78129" ///
| substr(diag,1,6)=="S79001" ///
| substr(diag,1,6)=="S79002" ///
| substr(diag,1,6)=="S79011" ///
| substr(diag,1,6)=="S79012" ///
| substr(diag,1,6)=="S79091" ///
| substr(diag,1,6)=="S79092" ///
| substr(diag,1,6)=="S79101" ///
| substr(diag,1,6)=="S79102" ///
| substr(diag,1,6)=="S79111" ///
| substr(diag,1,6)=="S79112" ///
| substr(diag,1,6)=="S79121" ///
| substr(diag,1,6)=="S79122" ///
| substr(diag,1,6)=="S79131" ///
| substr(diag,1,6)=="S79132" ///
| substr(diag,1,6)=="S79191" ///
| substr(diag,1,6)=="S79192" ///
| substr(diag,1,6)=="S79811" ///
| substr(diag,1,6)=="S79812" ///
| substr(diag,1,6)=="S79819" ///
| substr(diag,1,6)=="S79821" ///
| substr(diag,1,6)=="S79822" ///
| substr(diag,1,6)=="S79829" ///
| substr(diag,1,6)=="S79911" ///
| substr(diag,1,6)=="S79912" ///
| substr(diag,1,6)=="S79919" ///
| substr(diag,1,6)=="S79921" ///
| substr(diag,1,6)=="S79922" ///
| substr(diag,1,6)=="S79929" ///
| substr(diag,1,5)=="S8000" ///
| substr(diag,1,5)=="S8001" ///
| substr(diag,1,5)=="S8002" ///
| substr(diag,1,5)=="S8010" ///
| substr(diag,1,5)=="S8011" ///
| substr(diag,1,5)=="S8012" ///
| substr(diag,1,6)=="S80211" ///
| substr(diag,1,6)=="S80212" ///
| substr(diag,1,6)=="S80219" ///
| substr(diag,1,6)=="S80221" ///
| substr(diag,1,6)=="S80251" ///
| substr(diag,1,6)=="S80252" ///
| substr(diag,1,6)=="S80811" ///
| substr(diag,1,6)=="S80812" ///
| substr(diag,1,6)=="S80819" ///
| substr(diag,1,6)=="S80821" ///
| substr(diag,1,6)=="S80822" ///
| substr(diag,1,6)=="S80829" ///
| substr(diag,1,6)=="S80872" ///
| substr(diag,1,6)=="S80911" ///
| substr(diag,1,6)=="S80912"  


replace trauma=1 if substr(diag,1,6)=="S80921" ///
| substr(diag,1,6)=="S80922" ///
| substr(diag,1,6)=="S81001" ///
| substr(diag,1,6)=="S81002" ///
| substr(diag,1,6)=="S81009" ///
| substr(diag,1,6)=="S81011" ///
| substr(diag,1,6)=="S81012" ///
| substr(diag,1,6)=="S81019" ///
| substr(diag,1,6)=="S81021" ///
| substr(diag,1,6)=="S81022" ///
| substr(diag,1,6)=="S81029" ///
| substr(diag,1,6)=="S81031" ///
| substr(diag,1,6)=="S81032" ///
| substr(diag,1,6)=="S81039" ///
| substr(diag,1,6)=="S81041" ///
| substr(diag,1,6)=="S81042" ///
| substr(diag,1,6)=="S81051" ///
| substr(diag,1,6)=="S81052" ///
| substr(diag,1,6)=="S81801" ///
| substr(diag,1,6)=="S81802" ///
| substr(diag,1,6)=="S81809" ///
| substr(diag,1,6)=="S81811" ///
| substr(diag,1,6)=="S81812" ///
| substr(diag,1,6)=="S81819" ///
| substr(diag,1,6)=="S81821" ///
| substr(diag,1,6)=="S81822" ///
| substr(diag,1,6)=="S81829" ///
| substr(diag,1,6)=="S81831" ///
| substr(diag,1,6)=="S81832" ///
| substr(diag,1,6)=="S81839" ///
| substr(diag,1,6)=="S81841" ///
| substr(diag,1,6)=="S81842" ///
| substr(diag,1,6)=="S81851" ///
| substr(diag,1,6)=="S81852" ///
| substr(diag,1,6)=="S81859" ///
| substr(diag,1,6)=="S82001" ///
| substr(diag,1,6)=="S82002" ///
| substr(diag,1,6)=="S82009" ///
| substr(diag,1,6)=="S82011" ///
| substr(diag,1,6)=="S82012" ///
| substr(diag,1,6)=="S82014" ///
| substr(diag,1,6)=="S82015" ///
| substr(diag,1,6)=="S82021" ///
| substr(diag,1,6)=="S82022" ///
| substr(diag,1,6)=="S82024" ///
| substr(diag,1,6)=="S82025" ///
| substr(diag,1,6)=="S82031" ///
| substr(diag,1,6)=="S82032" ///
| substr(diag,1,6)=="S82034" ///
| substr(diag,1,6)=="S82035" ///
| substr(diag,1,6)=="S82041" ///
| substr(diag,1,6)=="S82042" ///
| substr(diag,1,6)=="S82043" ///
| substr(diag,1,6)=="S82044" ///
| substr(diag,1,6)=="S82045" ///
| substr(diag,1,6)=="S82046" ///
| substr(diag,1,6)=="S82091" ///
| substr(diag,1,6)=="S82092" ///
| substr(diag,1,6)=="S82099" ///
| substr(diag,1,6)=="S82101" ///
| substr(diag,1,6)=="S82102" ///
| substr(diag,1,6)=="S82109" ///
| substr(diag,1,6)=="S82111" ///
| substr(diag,1,6)=="S82112" ///
| substr(diag,1,6)=="S82113" ///
| substr(diag,1,6)=="S82114" ///
| substr(diag,1,6)=="S82115" ///
| substr(diag,1,6)=="S82116" ///
| substr(diag,1,6)=="S82121" ///
| substr(diag,1,6)=="S82122" ///
| substr(diag,1,6)=="S82123" ///
| substr(diag,1,6)=="S82124" ///
| substr(diag,1,6)=="S82125" 


replace trauma=1 if substr(diag,1,6)=="S82126" ///
| substr(diag,1,6)=="S82131" ///
| substr(diag,1,6)=="S82132" ///
| substr(diag,1,6)=="S82133" ///
| substr(diag,1,6)=="S82134" ///
| substr(diag,1,6)=="S82135" ///
| substr(diag,1,6)=="S82141" ///
| substr(diag,1,6)=="S82142" ///
| substr(diag,1,6)=="S82143" ///
| substr(diag,1,6)=="S82144" ///
| substr(diag,1,6)=="S82145" ///
| substr(diag,1,6)=="S82146" ///
| substr(diag,1,6)=="S82151" ///
| substr(diag,1,6)=="S82152" ///
| substr(diag,1,6)=="S82153" ///
| substr(diag,1,6)=="S82154" ///
| substr(diag,1,6)=="S82155" ///
| substr(diag,1,6)=="S82161" ///
| substr(diag,1,6)=="S82162" ///
| substr(diag,1,6)=="S82191" ///
| substr(diag,1,6)=="S82192" ///
| substr(diag,1,6)=="S82199" ///
| substr(diag,1,6)=="S82201" ///
| substr(diag,1,6)=="S82202" ///
| substr(diag,1,6)=="S82209" ///
| substr(diag,1,6)=="S82221" ///
| substr(diag,1,6)=="S82222" ///
| substr(diag,1,6)=="S82223" ///
| substr(diag,1,6)=="S82224" ///
| substr(diag,1,6)=="S82225" ///
| substr(diag,1,6)=="S82231" ///
| substr(diag,1,6)=="S82232" ///
| substr(diag,1,6)=="S82234" ///
| substr(diag,1,6)=="S82235" ///
| substr(diag,1,6)=="S82241" ///
| substr(diag,1,6)=="S82242" ///
| substr(diag,1,6)=="S82243" ///
| substr(diag,1,6)=="S82244" ///
| substr(diag,1,6)=="S82245" ///
| substr(diag,1,6)=="S82246" ///
| substr(diag,1,6)=="S82251" ///
| substr(diag,1,6)=="S82252" ///
| substr(diag,1,6)=="S82253" ///
| substr(diag,1,6)=="S82254" ///
| substr(diag,1,6)=="S82255" ///
| substr(diag,1,6)=="S82261" ///
| substr(diag,1,6)=="S82262" ///
| substr(diag,1,6)=="S82264" ///
| substr(diag,1,6)=="S82265" ///
| substr(diag,1,6)=="S82291" ///
| substr(diag,1,6)=="S82292" ///
| substr(diag,1,6)=="S82301" ///
| substr(diag,1,6)=="S82302" ///
| substr(diag,1,6)=="S82309" ///
| substr(diag,1,6)=="S82311" ///
| substr(diag,1,6)=="S82312" ///
| substr(diag,1,6)=="S82391" ///
| substr(diag,1,6)=="S82392" ///
| substr(diag,1,6)=="S82399" ///
| substr(diag,1,6)=="S82401" ///
| substr(diag,1,6)=="S82402" ///
| substr(diag,1,6)=="S82409" ///
| substr(diag,1,6)=="S82421" ///
| substr(diag,1,6)=="S82422" ///
| substr(diag,1,6)=="S82423" ///
| substr(diag,1,6)=="S82424" ///
| substr(diag,1,6)=="S82425" ///
| substr(diag,1,6)=="S82431" ///
| substr(diag,1,6)=="S82432" ///
| substr(diag,1,6)=="S82433" ///
| substr(diag,1,6)=="S82434" ///
| substr(diag,1,6)=="S82435" ///
| substr(diag,1,6)=="S82436" ///
| substr(diag,1,6)=="S82441" ///
| substr(diag,1,6)=="S82442" ///
| substr(diag,1,6)=="S82443" ///
| substr(diag,1,6)=="S82444" ///
| substr(diag,1,6)=="S82445" ///
| substr(diag,1,6)=="S82451" ///
| substr(diag,1,6)=="S82452" ///
| substr(diag,1,6)=="S82453" ///
| substr(diag,1,6)=="S82454" ///
| substr(diag,1,6)=="S82455" ///
| substr(diag,1,6)=="S82456" ///
| substr(diag,1,6)=="S82461" ///
| substr(diag,1,6)=="S82462" ///
| substr(diag,1,6)=="S82463" ///
| substr(diag,1,6)=="S82464" ///
| substr(diag,1,6)=="S82465" ///
| substr(diag,1,6)=="S82491" ///
| substr(diag,1,6)=="S82492" ///
| substr(diag,1,5)=="S8251" ///
| substr(diag,1,5)=="S8252" ///
| substr(diag,1,5)=="S8253" ///
| substr(diag,1,5)=="S8254" ///
| substr(diag,1,5)=="S8255" ///
| substr(diag,1,5)=="S8256" ///
| substr(diag,1,5)=="S8261" ///
| substr(diag,1,5)=="S8262" ///
| substr(diag,1,5)=="S8263" ///
| substr(diag,1,5)=="S8264" ///
| substr(diag,1,5)=="S8265" ///
| substr(diag,1,5)=="S8266" ///
| substr(diag,1,6)=="S82811" ///
| substr(diag,1,6)=="S82812" ///
| substr(diag,1,6)=="S82821" ///
| substr(diag,1,6)=="S82822" ///
| substr(diag,1,6)=="S82831" ///
| substr(diag,1,6)=="S82832" ///
| substr(diag,1,6)=="S82839" ///
| substr(diag,1,6)=="S82841" ///
| substr(diag,1,6)=="S82842" ///
| substr(diag,1,6)=="S82843" ///
| substr(diag,1,6)=="S82844" ///
| substr(diag,1,6)=="S82845" ///
| substr(diag,1,6)=="S82851" ///
| substr(diag,1,6)=="S82852" ///
| substr(diag,1,6)=="S82853" ///
| substr(diag,1,6)=="S82854" ///
| substr(diag,1,6)=="S82855" ///
| substr(diag,1,6)=="S82856" ///
| substr(diag,1,6)=="S82861" ///
| substr(diag,1,6)=="S82862" ///
| substr(diag,1,6)=="S82865" ///
| substr(diag,1,6)=="S82871" ///
| substr(diag,1,6)=="S82872" ///
| substr(diag,1,6)=="S82873" ///
| substr(diag,1,6)=="S82874" 


replace trauma=1 if  substr(diag,1,6)=="S82875" ///
| substr(diag,1,6)=="S82891" ///
| substr(diag,1,6)=="S82892" ///
| substr(diag,1,6)=="S82899" ///
| substr(diag,1,5)=="S8290" ///
| substr(diag,1,5)=="S8291" ///
| substr(diag,1,5)=="S8292" ///
| substr(diag,1,6)=="S83001" ///
| substr(diag,1,6)=="S83002" ///
| substr(diag,1,6)=="S83004" ///
| substr(diag,1,6)=="S83005" ///
| substr(diag,1,6)=="S83006" ///
| substr(diag,1,6)=="S83012" ///
| substr(diag,1,6)=="S83014" ///
| substr(diag,1,6)=="S83015" ///
| substr(diag,1,6)=="S83091" ///
| substr(diag,1,6)=="S83094" ///
| substr(diag,1,6)=="S83095" ///
| substr(diag,1,6)=="S83096" ///
| substr(diag,1,6)=="S83101" ///
| substr(diag,1,6)=="S83102" ///
| substr(diag,1,6)=="S83103" ///
| substr(diag,1,6)=="S83104" ///
| substr(diag,1,6)=="S83105" ///
| substr(diag,1,6)=="S83106" ///
| substr(diag,1,6)=="S83111" ///
| substr(diag,1,6)=="S83112" ///
| substr(diag,1,6)=="S83114" ///
| substr(diag,1,6)=="S83115" ///
| substr(diag,1,6)=="S83116" ///
| substr(diag,1,6)=="S83121" ///
| substr(diag,1,6)=="S83124" ///
| substr(diag,1,6)=="S83125" ///
| substr(diag,1,6)=="S83134" ///
| substr(diag,1,6)=="S83135" ///
| substr(diag,1,6)=="S83136" ///
| substr(diag,1,6)=="S83141" ///
| substr(diag,1,6)=="S83142" ///
| substr(diag,1,6)=="S83144" ///
| substr(diag,1,6)=="S83145" ///
| substr(diag,1,6)=="S83191" ///
| substr(diag,1,6)=="S83192" ///
| substr(diag,1,6)=="S83194" ///
| substr(diag,1,6)=="S83195" ///
| substr(diag,1,6)=="S83196" ///
| substr(diag,1,6)=="S83200" ///
| substr(diag,1,6)=="S83201" ///
| substr(diag,1,6)=="S83202" ///
| substr(diag,1,6)=="S83203" ///
| substr(diag,1,6)=="S83204" ///
| substr(diag,1,6)=="S83206" ///
| substr(diag,1,6)=="S83207" ///
| substr(diag,1,6)=="S83209" ///
| substr(diag,1,6)=="S83211" ///
| substr(diag,1,6)=="S83212" ///
| substr(diag,1,6)=="S83221" ///
| substr(diag,1,6)=="S83222" ///
| substr(diag,1,6)=="S83231" ///
| substr(diag,1,6)=="S83232" ///
| substr(diag,1,6)=="S83241" ///
| substr(diag,1,6)=="S83242" ///
| substr(diag,1,6)=="S83249" ///
| substr(diag,1,6)=="S83251" ///
| substr(diag,1,6)=="S83252" ///
| substr(diag,1,6)=="S83261" ///
| substr(diag,1,6)=="S83262" ///
| substr(diag,1,6)=="S83271" ///
| substr(diag,1,6)=="S83272" ///
| substr(diag,1,6)=="S83281" ///
| substr(diag,1,6)=="S83282" ///
| substr(diag,1,5)=="S8330" ///
| substr(diag,1,5)=="S8331" ///
| substr(diag,1,5)=="S8332" ///
| substr(diag,1,6)=="S83401" ///
| substr(diag,1,6)=="S83402" ///
| substr(diag,1,6)=="S83409" ///
| substr(diag,1,6)=="S83411" ///
| substr(diag,1,6)=="S83412" ///
| substr(diag,1,6)=="S83419" ///
| substr(diag,1,6)=="S83421" ///
| substr(diag,1,6)=="S83422" ///
| substr(diag,1,6)=="S83429" ///
| substr(diag,1,6)=="S83501" ///
| substr(diag,1,6)=="S83502" ///
| substr(diag,1,6)=="S83509" ///
| substr(diag,1,6)=="S83511" ///
| substr(diag,1,6)=="S83512" ///
| substr(diag,1,6)=="S83519" ///
| substr(diag,1,6)=="S83521" ///
| substr(diag,1,6)=="S83522" ///
| substr(diag,1,6)=="S83529" ///
| substr(diag,1,5)=="S8361" ///
| substr(diag,1,5)=="S8362" ///
| substr(diag,1,4)=="S838" ///
| substr(diag,1,5)=="S8390" ///
| substr(diag,1,5)=="S8391" ///
| substr(diag,1,5)=="S8392" ///
| substr(diag,1,5)=="S8400" ///
| substr(diag,1,5)=="S8401" ///
| substr(diag,1,5)=="S8402" ///
| substr(diag,1,5)=="S8410" ///
| substr(diag,1,5)=="S8411" ///
| substr(diag,1,5)=="S8412" ///
| substr(diag,1,6)=="S84802" ///
| substr(diag,1,5)=="S8490" ///
| substr(diag,1,5)=="S8491" ///
| substr(diag,1,5)=="S8492" ///
| substr(diag,1,6)=="S85001" ///
| substr(diag,1,6)=="S85002" ///
| substr(diag,1,6)=="S85009" ///
| substr(diag,1,6)=="S85011" ///
| substr(diag,1,6)=="S85012" ///
| substr(diag,1,6)=="S85019" ///
| substr(diag,1,6)=="S85091" ///
| substr(diag,1,6)=="S85092" ///
| substr(diag,1,6)=="S85099" ///
| substr(diag,1,6)=="S85101" ///
| substr(diag,1,6)=="S85102" ///
| substr(diag,1,6)=="S85109" ///
| substr(diag,1,6)=="S85111" ///
| substr(diag,1,6)=="S85112" ///
| substr(diag,1,6)=="S85119" ///
| substr(diag,1,6)=="S85121" ///
| substr(diag,1,6)=="S85122" ///
| substr(diag,1,6)=="S85131" ///
| substr(diag,1,6)=="S85132" ///
| substr(diag,1,6)=="S85139" ///
| substr(diag,1,6)=="S85141" ///
| substr(diag,1,6)=="S85142" ///
| substr(diag,1,6)=="S85149" ///
| substr(diag,1,6)=="S85151" ///
| substr(diag,1,6)=="S85152" ///
| substr(diag,1,6)=="S85159" ///
| substr(diag,1,6)=="S85161" ///
| substr(diag,1,6)=="S85162" ///
| substr(diag,1,6)=="S85171" ///
| substr(diag,1,6)=="S85172" ///
| substr(diag,1,6)=="S85181" ///
| substr(diag,1,6)=="S85182" ///
| substr(diag,1,6)=="S85201" ///
| substr(diag,1,6)=="S85202"  


replace trauma=1 if  substr(diag,1,6)=="S85211" ///
| substr(diag,1,6)=="S85212" ///
| substr(diag,1,6)=="S85219" ///
| substr(diag,1,6)=="S85292" ///
| substr(diag,1,6)=="S85302" ///
| substr(diag,1,6)=="S85311" ///
| substr(diag,1,6)=="S85312" ///
| substr(diag,1,6)=="S85409" ///
| substr(diag,1,6)=="S85412" ///
| substr(diag,1,6)=="S85491" ///
| substr(diag,1,6)=="S85509" ///
| substr(diag,1,6)=="S85511" ///
| substr(diag,1,6)=="S85512" ///
| substr(diag,1,6)=="S85519" ///
| substr(diag,1,6)=="S85591" ///
| substr(diag,1,6)=="S85801" ///
| substr(diag,1,6)=="S85811" ///
| substr(diag,1,6)=="S85812" ///
| substr(diag,1,6)=="S85891" ///
| substr(diag,1,6)=="S85892" ///
| substr(diag,1,6)=="S85899" ///
| substr(diag,1,6)=="S85901" ///
| substr(diag,1,6)=="S85909" ///
| substr(diag,1,6)=="S85912" ///
| substr(diag,1,6)=="S85919" ///
| substr(diag,1,6)=="S86011" ///
| substr(diag,1,6)=="S86012" ///
| substr(diag,1,6)=="S86019" ///
| substr(diag,1,6)=="S86021" ///
| substr(diag,1,6)=="S86022" ///
| substr(diag,1,6)=="S86029" ///
| substr(diag,1,6)=="S86091" ///
| substr(diag,1,6)=="S86102" ///
| substr(diag,1,6)=="S86111" ///
| substr(diag,1,6)=="S86112" ///
| substr(diag,1,6)=="S86121" ///
| substr(diag,1,6)=="S86122" ///
| substr(diag,1,6)=="S86129" ///
| substr(diag,1,6)=="S86191" ///
| substr(diag,1,6)=="S86192" ///
| substr(diag,1,6)=="S86201" ///
| substr(diag,1,6)=="S86211" ///
| substr(diag,1,6)=="S86212" ///
| substr(diag,1,6)=="S86221" ///
| substr(diag,1,6)=="S86222" ///
| substr(diag,1,6)=="S86291" ///
| substr(diag,1,6)=="S86292" ///
| substr(diag,1,6)=="S86302" ///
| substr(diag,1,6)=="S86311" ///
| substr(diag,1,6)=="S86312" ///
| substr(diag,1,6)=="S86321" ///
| substr(diag,1,6)=="S86322" ///
| substr(diag,1,6)=="S86329" ///
| substr(diag,1,6)=="S86391" ///
| substr(diag,1,6)=="S86392" ///
| substr(diag,1,6)=="S86801" ///
| substr(diag,1,6)=="S86802" ///
| substr(diag,1,6)=="S86811" ///
| substr(diag,1,6)=="S86812" ///
| substr(diag,1,6)=="S86819" ///
| substr(diag,1,6)=="S86821" ///
| substr(diag,1,6)=="S86822" ///
| substr(diag,1,6)=="S86891" ///
| substr(diag,1,6)=="S86892" ///
| substr(diag,1,6)=="S86901" ///
| substr(diag,1,6)=="S86902" ///
| substr(diag,1,6)=="S86909" ///
| substr(diag,1,6)=="S86911" ///
| substr(diag,1,6)=="S86912" ///
| substr(diag,1,6)=="S86919" ///
| substr(diag,1,6)=="S86921" ///
| substr(diag,1,6)=="S86922" ///
| substr(diag,1,6)=="S86929" ///
| substr(diag,1,6)=="S86992" ///
| substr(diag,1,6)=="S86999" ///
| substr(diag,1,5)=="S8700" ///
| substr(diag,1,5)=="S8701" ///
| substr(diag,1,5)=="S8702" ///
| substr(diag,1,5)=="S8780" ///
| substr(diag,1,5)=="S8781" ///
| substr(diag,1,5)=="S8782" ///
| substr(diag,1,6)=="S88011" ///
| substr(diag,1,6)=="S88012" ///
| substr(diag,1,6)=="S88021" ///
| substr(diag,1,6)=="S88022" ///
| substr(diag,1,6)=="S88029" ///
| substr(diag,1,6)=="S88111" ///
| substr(diag,1,6)=="S88112" ///
| substr(diag,1,6)=="S88119" ///
| substr(diag,1,6)=="S88121" ///
| substr(diag,1,6)=="S88122" ///
| substr(diag,1,6)=="S88129" ///
| substr(diag,1,6)=="S88921" ///
| substr(diag,1,6)=="S88922" ///
| substr(diag,1,6)=="S88929" ///
| substr(diag,1,6)=="S89001" ///
| substr(diag,1,6)=="S89002" ///
| substr(diag,1,6)=="S89011" ///
| substr(diag,1,6)=="S89012" ///
| substr(diag,1,6)=="S89021" ///
| substr(diag,1,6)=="S89022" ///
| substr(diag,1,6)=="S89029" ///
| substr(diag,1,6)=="S89031" ///
| substr(diag,1,6)=="S89042" ///
| substr(diag,1,6)=="S89091" ///
| substr(diag,1,6)=="S89092" ///
| substr(diag,1,6)=="S89101" ///
| substr(diag,1,6)=="S89102" ///
| substr(diag,1,6)=="S89111" ///
| substr(diag,1,6)=="S89121" ///
| substr(diag,1,6)=="S89122" ///
| substr(diag,1,6)=="S89131" ///
| substr(diag,1,6)=="S89132" ///
| substr(diag,1,6)=="S89141" ///
| substr(diag,1,6)=="S89142" ///
| substr(diag,1,6)=="S89149" ///
| substr(diag,1,6)=="S89191" ///
| substr(diag,1,6)=="S89192" ///
| substr(diag,1,6)=="S89199" ///
| substr(diag,1,6)=="S89201" ///
| substr(diag,1,6)=="S89202" ///
| substr(diag,1,6)=="S89211" ///
| substr(diag,1,6)=="S89212" ///
| substr(diag,1,6)=="S89221" ///
| substr(diag,1,6)=="S89291" ///
| substr(diag,1,6)=="S89292" ///
| substr(diag,1,6)=="S89299" ///
| substr(diag,1,6)=="S89301"  


replace trauma=1 if  substr(diag,1,6)=="S89302" ///
| substr(diag,1,6)=="S89309" ///
| substr(diag,1,6)=="S89311" ///
| substr(diag,1,6)=="S89312" ///
| substr(diag,1,6)=="S89321" ///
| substr(diag,1,6)=="S89322" ///
| substr(diag,1,6)=="S89391" ///
| substr(diag,1,6)=="S89392" ///
| substr(diag,1,5)=="S8980" ///
| substr(diag,1,5)=="S8981" ///
| substr(diag,1,5)=="S8982" ///
| substr(diag,1,5)=="S8990" ///
| substr(diag,1,5)=="S8991" ///
| substr(diag,1,5)=="S8992" ///
| substr(diag,1,5)=="S9000" ///
| substr(diag,1,5)=="S9001" ///
| substr(diag,1,5)=="S9002" ///
| substr(diag,1,6)=="S90111" ///
| substr(diag,1,6)=="S90112" ///
| substr(diag,1,6)=="S90121" ///
| substr(diag,1,6)=="S90122" ///
| substr(diag,1,6)=="S90211" ///
| substr(diag,1,6)=="S90212" ///
| substr(diag,1,6)=="S90229" ///
| substr(diag,1,5)=="S9030" ///
| substr(diag,1,5)=="S9031" ///
| substr(diag,1,5)=="S9032" ///
| substr(diag,1,6)=="S90411" ///
| substr(diag,1,6)=="S90412" ///
| substr(diag,1,6)=="S90413" ///
| substr(diag,1,6)=="S90414" ///
| substr(diag,1,6)=="S90415" ///
| substr(diag,1,6)=="S90416" ///
| substr(diag,1,6)=="S90511" ///
| substr(diag,1,6)=="S90512" ///
| substr(diag,1,6)=="S90519" ///
| substr(diag,1,6)=="S90522" ///
| substr(diag,1,6)=="S90811" ///
| substr(diag,1,6)=="S90812" ///
| substr(diag,1,6)=="S90819" ///
| substr(diag,1,6)=="S90821" ///
| substr(diag,1,6)=="S90822" ///
| substr(diag,1,6)=="S90852" ///
| substr(diag,1,6)=="S90911" ///
| substr(diag,1,6)=="S90929" ///
| substr(diag,1,6)=="S91001" ///
| substr(diag,1,6)=="S91002" ///
| substr(diag,1,6)=="S91009" ///
| substr(diag,1,6)=="S91011" ///
| substr(diag,1,6)=="S91012" ///
| substr(diag,1,6)=="S91019" ///
| substr(diag,1,6)=="S91021" ///
| substr(diag,1,6)=="S91022" ///
| substr(diag,1,6)=="S91029" ///
| substr(diag,1,6)=="S91031" ///
| substr(diag,1,6)=="S91032" ///
| substr(diag,1,6)=="S91041" ///
| substr(diag,1,6)=="S91042" ///
| substr(diag,1,6)=="S91051" ///
| substr(diag,1,6)=="S91052" ///
| substr(diag,1,6)=="S91101" ///
| substr(diag,1,6)=="S91102" ///
| substr(diag,1,6)=="S91105" ///
| substr(diag,1,6)=="S91109" ///
| substr(diag,1,6)=="S91111" ///
| substr(diag,1,6)=="S91112" ///
| substr(diag,1,6)=="S91113" ///
| substr(diag,1,6)=="S91114" ///
| substr(diag,1,6)=="S91115" ///
| substr(diag,1,6)=="S91116" ///
| substr(diag,1,6)=="S91119" ///
| substr(diag,1,6)=="S91121" ///
| substr(diag,1,6)=="S91124" ///
| substr(diag,1,6)=="S91129" ///
| substr(diag,1,6)=="S91131" ///
| substr(diag,1,6)=="S91132" ///
| substr(diag,1,6)=="S91134" ///
| substr(diag,1,6)=="S91135" ///
| substr(diag,1,6)=="S91141" ///
| substr(diag,1,6)=="S91142" ///
| substr(diag,1,6)=="S91155" ///
| substr(diag,1,6)=="S91201" ///
| substr(diag,1,6)=="S91202" ///
| substr(diag,1,6)=="S91204" ///
| substr(diag,1,6)=="S91205" ///
| substr(diag,1,6)=="S91209" ///
| substr(diag,1,6)=="S91211" ///
| substr(diag,1,6)=="S91212" ///
| substr(diag,1,6)=="S91214" ///
| substr(diag,1,6)=="S91215" ///
| substr(diag,1,6)=="S91235" ///
| substr(diag,1,6)=="S91239" ///
| substr(diag,1,6)=="S91301" ///
| substr(diag,1,6)=="S91302" ///
| substr(diag,1,6)=="S91309" ///
| substr(diag,1,6)=="S91311" ///
| substr(diag,1,6)=="S91312" ///
| substr(diag,1,6)=="S91319" ///
| substr(diag,1,6)=="S91321" ///
| substr(diag,1,6)=="S91322" ///
| substr(diag,1,6)=="S91331" ///
| substr(diag,1,6)=="S91332" ///
| substr(diag,1,6)=="S91339" ///
| substr(diag,1,6)=="S91341" ///
| substr(diag,1,6)=="S91342" ///
| substr(diag,1,6)=="S91351" ///
| substr(diag,1,6)=="S91352" ///
| substr(diag,1,6)=="S92001" ///
| substr(diag,1,6)=="S92002" ///
| substr(diag,1,6)=="S92009" ///
| substr(diag,1,6)=="S92011" ///
| substr(diag,1,6)=="S92012" ///
| substr(diag,1,6)=="S92013" ///
| substr(diag,1,6)=="S92014" ///
| substr(diag,1,6)=="S92015" ///
| substr(diag,1,6)=="S92016" ///
| substr(diag,1,6)=="S92021" ///
| substr(diag,1,6)=="S92022" ///
| substr(diag,1,6)=="S92023" ///
| substr(diag,1,6)=="S92024" ///
| substr(diag,1,6)=="S92025" ///
| substr(diag,1,6)=="S92031" ///
| substr(diag,1,6)=="S92032" ///
| substr(diag,1,6)=="S92034" ///
| substr(diag,1,6)=="S92035" ///
| substr(diag,1,6)=="S92041"  


replace trauma=1 if substr(diag,1,6)=="S92042" ///
| substr(diag,1,6)=="S92044" ///
| substr(diag,1,6)=="S92045" ///
| substr(diag,1,6)=="S92051" ///
| substr(diag,1,6)=="S92052" ///
| substr(diag,1,6)=="S92053" ///
| substr(diag,1,6)=="S92054" ///
| substr(diag,1,6)=="S92055" ///
| substr(diag,1,6)=="S92061" ///
| substr(diag,1,6)=="S92062" ///
| substr(diag,1,6)=="S92063" ///
| substr(diag,1,6)=="S92064" ///
| substr(diag,1,6)=="S92065" ///
| substr(diag,1,6)=="S92066" ///
| substr(diag,1,6)=="S92101" ///
| substr(diag,1,6)=="S92102" ///
| substr(diag,1,6)=="S92109" ///
| substr(diag,1,6)=="S92111" ///
| substr(diag,1,6)=="S92112" ///
| substr(diag,1,6)=="S92113" ///
| substr(diag,1,6)=="S92114" ///
| substr(diag,1,6)=="S92115" ///
| substr(diag,1,6)=="S92121" ///
| substr(diag,1,6)=="S92122" ///
| substr(diag,1,6)=="S92123" ///
| substr(diag,1,6)=="S92124" ///
| substr(diag,1,6)=="S92125" ///
| substr(diag,1,6)=="S92131" ///
| substr(diag,1,6)=="S92132" ///
| substr(diag,1,6)=="S92133" ///
| substr(diag,1,6)=="S92134" ///
| substr(diag,1,6)=="S92135" ///
| substr(diag,1,6)=="S92141" ///
| substr(diag,1,6)=="S92142" ///
| substr(diag,1,6)=="S92144" ///
| substr(diag,1,6)=="S92145" ///
| substr(diag,1,6)=="S92151" ///
| substr(diag,1,6)=="S92152" ///
| substr(diag,1,6)=="S92153" ///
| substr(diag,1,6)=="S92154" ///
| substr(diag,1,6)=="S92155" ///
| substr(diag,1,6)=="S92191" ///
| substr(diag,1,6)=="S92192" ///
| substr(diag,1,6)=="S92201" ///
| substr(diag,1,6)=="S92202" ///
| substr(diag,1,6)=="S92209" ///
| substr(diag,1,6)=="S92211" ///
| substr(diag,1,6)=="S92212" ///
| substr(diag,1,6)=="S92213" ///
| substr(diag,1,6)=="S92214" ///
| substr(diag,1,6)=="S92215" ///
| substr(diag,1,6)=="S92221" ///
| substr(diag,1,6)=="S92222" ///
| substr(diag,1,6)=="S92223" ///
| substr(diag,1,6)=="S92224" ///
| substr(diag,1,6)=="S92225" ///
| substr(diag,1,6)=="S92231" ///
| substr(diag,1,6)=="S92232" ///
| substr(diag,1,6)=="S92234" ///
| substr(diag,1,6)=="S92235" ///
| substr(diag,1,6)=="S92241" ///
| substr(diag,1,6)=="S92242" ///
| substr(diag,1,6)=="S92243" ///
| substr(diag,1,6)=="S92244" ///
| substr(diag,1,6)=="S92245" ///
| substr(diag,1,6)=="S92246" ///
| substr(diag,1,6)=="S92251" ///
| substr(diag,1,6)=="S92252" ///
| substr(diag,1,6)=="S92253" ///
| substr(diag,1,6)=="S92254" ///
| substr(diag,1,6)=="S92255" ///
| substr(diag,1,6)=="S92301" ///
| substr(diag,1,6)=="S92302" ///
| substr(diag,1,6)=="S92309" ///
| substr(diag,1,6)=="S92311" ///
| substr(diag,1,6)=="S92312" ///
| substr(diag,1,6)=="S92313" ///
| substr(diag,1,6)=="S92314" ///
| substr(diag,1,6)=="S92315" ///
| substr(diag,1,6)=="S92321" ///
| substr(diag,1,6)=="S92322" ///
| substr(diag,1,6)=="S92323" ///
| substr(diag,1,6)=="S92324" ///
| substr(diag,1,6)=="S92325" ///
| substr(diag,1,6)=="S92326" ///
| substr(diag,1,6)=="S92331" ///
| substr(diag,1,6)=="S92332" ///
| substr(diag,1,6)=="S92333" ///
| substr(diag,1,6)=="S92334" ///
| substr(diag,1,6)=="S92335" ///
| substr(diag,1,6)=="S92336" ///
| substr(diag,1,6)=="S92341" ///
| substr(diag,1,6)=="S92342" ///
| substr(diag,1,6)=="S92343" ///
| substr(diag,1,6)=="S92344" ///
| substr(diag,1,6)=="S92345" ///
| substr(diag,1,6)=="S92346" ///
| substr(diag,1,6)=="S92351" ///
| substr(diag,1,6)=="S92352" ///
| substr(diag,1,6)=="S92353" ///
| substr(diag,1,6)=="S92354" ///
| substr(diag,1,6)=="S92355" ///
| substr(diag,1,6)=="S92356" ///
| substr(diag,1,6)=="S92401" ///
| substr(diag,1,6)=="S92402" ///
| substr(diag,1,6)=="S92403" ///
| substr(diag,1,6)=="S92404" ///
| substr(diag,1,6)=="S92405" ///
| substr(diag,1,6)=="S92406" ///
| substr(diag,1,6)=="S92411" ///
| substr(diag,1,6)=="S92412" ///
| substr(diag,1,6)=="S92413" ///
| substr(diag,1,6)=="S92414" ///
| substr(diag,1,6)=="S92415" ///
| substr(diag,1,6)=="S92421" ///
| substr(diag,1,6)=="S92422" ///
| substr(diag,1,6)=="S92424" ///
| substr(diag,1,6)=="S92425" ///
| substr(diag,1,6)=="S92426" ///
| substr(diag,1,6)=="S92491" ///
| substr(diag,1,6)=="S92492" ///
| substr(diag,1,6)=="S92499" ///
| substr(diag,1,6)=="S92501" ///
| substr(diag,1,6)=="S92502" ///
| substr(diag,1,6)=="S92503" ///
| substr(diag,1,6)=="S92504" ///
| substr(diag,1,6)=="S92505" ///
| substr(diag,1,6)=="S92506" ///
| substr(diag,1,6)=="S92511" ///
| substr(diag,1,6)=="S92512" ///
| substr(diag,1,6)=="S92513" ///
| substr(diag,1,6)=="S92514" ///
| substr(diag,1,6)=="S92515"  


replace trauma=1 if  substr(diag,1,6)=="S92516" ///
| substr(diag,1,6)=="S92521" ///
| substr(diag,1,6)=="S92523" ///
| substr(diag,1,6)=="S92524" ///
| substr(diag,1,6)=="S92525" ///
| substr(diag,1,6)=="S92531" ///
| substr(diag,1,6)=="S92532" ///
| substr(diag,1,6)=="S92534" ///
| substr(diag,1,6)=="S92535" ///
| substr(diag,1,6)=="S92591" ///
| substr(diag,1,6)=="S92592" ///
| substr(diag,1,6)=="S92599" ///
| substr(diag,1,6)=="S92901" ///
| substr(diag,1,6)=="S92902" ///
| substr(diag,1,6)=="S92909" ///
| substr(diag,1,6)=="S92911" ///
| substr(diag,1,6)=="S92912" ///
| substr(diag,1,5)=="S9301" ///
| substr(diag,1,5)=="S9302" ///
| substr(diag,1,5)=="S9303" ///
| substr(diag,1,5)=="S9304" ///
| substr(diag,1,5)=="S9305" ///
| substr(diag,1,5)=="S9306" ///
| substr(diag,1,6)=="S93101" ///
| substr(diag,1,6)=="S93104" ///
| substr(diag,1,6)=="S93105" ///
| substr(diag,1,6)=="S93106" ///
| substr(diag,1,6)=="S93111" ///
| substr(diag,1,6)=="S93112" ///
| substr(diag,1,6)=="S93113" ///
| substr(diag,1,6)=="S93114" ///
| substr(diag,1,6)=="S93115" ///
| substr(diag,1,6)=="S93116" ///
| substr(diag,1,6)=="S93119" ///
| substr(diag,1,6)=="S93121" ///
| substr(diag,1,6)=="S93122" ///
| substr(diag,1,6)=="S93124" ///
| substr(diag,1,6)=="S93125" ///
| substr(diag,1,6)=="S93126" ///
| substr(diag,1,6)=="S93129" ///
| substr(diag,1,6)=="S93131" ///
| substr(diag,1,6)=="S93133" ///
| substr(diag,1,6)=="S93141" ///
| substr(diag,1,6)=="S93301" ///
| substr(diag,1,6)=="S93304" ///
| substr(diag,1,6)=="S93306" ///
| substr(diag,1,6)=="S93311" ///
| substr(diag,1,6)=="S93312" ///
| substr(diag,1,6)=="S93314" ///
| substr(diag,1,6)=="S93315" ///
| substr(diag,1,6)=="S93316" ///
| substr(diag,1,6)=="S93321" ///
| substr(diag,1,6)=="S93322" ///
| substr(diag,1,6)=="S93323" ///
| substr(diag,1,6)=="S93324" ///
| substr(diag,1,6)=="S93325" ///
| substr(diag,1,6)=="S93326" ///
| substr(diag,1,6)=="S93331" ///
| substr(diag,1,6)=="S93332" ///
| substr(diag,1,6)=="S93333" ///
| substr(diag,1,6)=="S93334" ///
| substr(diag,1,6)=="S93335" ///
| substr(diag,1,6)=="S93336" ///
| substr(diag,1,6)=="S93401" ///
| substr(diag,1,6)=="S93402" ///
| substr(diag,1,6)=="S93409" ///
| substr(diag,1,6)=="S93411" ///
| substr(diag,1,6)=="S93412" ///
| substr(diag,1,6)=="S93421" ///
| substr(diag,1,6)=="S93422" ///
| substr(diag,1,6)=="S93431" ///
| substr(diag,1,6)=="S93432" ///
| substr(diag,1,6)=="S93439" ///
| substr(diag,1,6)=="S93491" ///
| substr(diag,1,6)=="S93492" ///
| substr(diag,1,6)=="S93499" ///
| substr(diag,1,6)=="S93502" ///
| substr(diag,1,6)=="S93513" ///
| substr(diag,1,6)=="S93522" ///
| substr(diag,1,6)=="S93524" ///
| substr(diag,1,6)=="S93525" ///
| substr(diag,1,6)=="S93601" ///
| substr(diag,1,6)=="S93602" ///
| substr(diag,1,6)=="S93609" ///
| substr(diag,1,6)=="S93611" ///
| substr(diag,1,6)=="S93621" ///
| substr(diag,1,6)=="S93622" ///
| substr(diag,1,6)=="S93629" ///
| substr(diag,1,6)=="S93691" ///
| substr(diag,1,5)=="S9402" ///
| substr(diag,1,5)=="S9421" ///
| substr(diag,1,5)=="S9422" ///
| substr(diag,1,5)=="S9430" ///
| substr(diag,1,5)=="S9431" ///
| substr(diag,1,5)=="S9432" ///
| substr(diag,1,4)=="S948" ///
| substr(diag,1,5)=="S9491" ///
| substr(diag,1,5)=="S9492" ///
| substr(diag,1,6)=="S95011" ///
| substr(diag,1,6)=="S95012" ///
| substr(diag,1,6)=="S95091" ///
| substr(diag,1,6)=="S95101" ///
| substr(diag,1,6)=="S95111" ///
| substr(diag,1,6)=="S95809" ///
| substr(diag,1,6)=="S95892" ///
| substr(diag,1,6)=="S95912" ///
| substr(diag,1,6)=="S95991" ///
| substr(diag,1,6)=="S96011" ///
| substr(diag,1,6)=="S96019" ///
| substr(diag,1,6)=="S96021" ///
| substr(diag,1,6)=="S96022" ///
| substr(diag,1,6)=="S96111" ///
| substr(diag,1,6)=="S96121" ///
| substr(diag,1,6)=="S96122" ///
| substr(diag,1,6)=="S96191" ///
| substr(diag,1,6)=="S96209" ///
| substr(diag,1,6)=="S96212" ///
| substr(diag,1,6)=="S96221" ///
| substr(diag,1,6)=="S96292" ///
| substr(diag,1,6)=="S96811" ///
| substr(diag,1,6)=="S96812" ///
| substr(diag,1,6)=="S96819" ///
| substr(diag,1,6)=="S96821" ///
| substr(diag,1,6)=="S96822" ///
| substr(diag,1,6)=="S96891" ///
| substr(diag,1,6)=="S96892" ///
| substr(diag,1,6)=="S96901" ///
| substr(diag,1,6)=="S96911" ///
| substr(diag,1,6)=="S96912"  


replace trauma=1 if substr(diag,1,6)=="S96919" ///
| substr(diag,1,6)=="S96921" ///
| substr(diag,1,6)=="S96922" ///
| substr(diag,1,6)=="S96929" ///
| substr(diag,1,6)=="S96991" ///
| substr(diag,1,5)=="S9701" ///
| substr(diag,1,5)=="S9702" ///
| substr(diag,1,6)=="S97101" ///
| substr(diag,1,6)=="S97109" ///
| substr(diag,1,6)=="S97112" ///
| substr(diag,1,6)=="S97121" ///
| substr(diag,1,6)=="S97122" ///
| substr(diag,1,5)=="S9780" ///
| substr(diag,1,5)=="S9781" ///
| substr(diag,1,5)=="S9782" ///
| substr(diag,1,6)=="S98011" ///
| substr(diag,1,6)=="S98012" ///
| substr(diag,1,6)=="S98021" ///
| substr(diag,1,6)=="S98022" ///
| substr(diag,1,6)=="S98111" ///
| substr(diag,1,6)=="S98112" ///
| substr(diag,1,6)=="S98119" ///
| substr(diag,1,6)=="S98121" ///
| substr(diag,1,6)=="S98122" ///
| substr(diag,1,6)=="S98131" ///
| substr(diag,1,6)=="S98132" ///
| substr(diag,1,6)=="S98139" ///
| substr(diag,1,6)=="S98141" ///
| substr(diag,1,6)=="S98142" ///
| substr(diag,1,6)=="S98211" ///
| substr(diag,1,6)=="S98212" ///
| substr(diag,1,6)=="S98219" ///
| substr(diag,1,6)=="S98221" ///
| substr(diag,1,6)=="S98229" ///
| substr(diag,1,6)=="S98321" ///
| substr(diag,1,6)=="S98322" ///
| substr(diag,1,6)=="S98911" ///
| substr(diag,1,6)=="S98912" ///
| substr(diag,1,6)=="S98921" ///
| substr(diag,1,6)=="S98922" ///
| substr(diag,1,6)=="S99811" ///
| substr(diag,1,6)=="S99812" ///
| substr(diag,1,6)=="S99821" ///
| substr(diag,1,6)=="S99822" ///
| substr(diag,1,6)=="S99829" ///
| substr(diag,1,6)=="S99911" ///
| substr(diag,1,6)=="S99912" ///
| substr(diag,1,6)=="S99919" ///
| substr(diag,1,6)=="S99921" ///
| substr(diag,1,6)=="S99922" ///
| substr(diag,1,5)=="T2000" ///
| substr(diag,1,6)=="T20019" ///
| substr(diag,1,5)=="T2002" ///
| substr(diag,1,5)=="T2003" ///
| substr(diag,1,5)=="T2004" ///
| substr(diag,1,5)=="T2005" ///
| substr(diag,1,5)=="T2006" ///
| substr(diag,1,5)=="T2007" 


replace trauma=1 if  substr(diag,1,5)=="T2009" ///
| substr(diag,1,5)=="T2010" ///
| substr(diag,1,6)=="T20111" ///
| substr(diag,1,6)=="T20112" ///
| substr(diag,1,6)=="T20119" ///
| substr(diag,1,5)=="T2012" ///
| substr(diag,1,5)=="T2013" ///
| substr(diag,1,5)=="T2014" ///
| substr(diag,1,5)=="T2015" ///
| substr(diag,1,5)=="T2016" ///
| substr(diag,1,5)=="T2017" ///
| substr(diag,1,5)=="T2019" ///
| substr(diag,1,5)=="T2020" ///
| substr(diag,1,6)=="T20211" ///
| substr(diag,1,6)=="T20212" ///
| substr(diag,1,6)=="T20219" ///
| substr(diag,1,5)=="T2022" ///
| substr(diag,1,5)=="T2023" ///
| substr(diag,1,5)=="T2024" ///
| substr(diag,1,5)=="T2025" ///
| substr(diag,1,5)=="T2026" ///
| substr(diag,1,5)=="T2027" ///
| substr(diag,1,5)=="T2029" ///
| substr(diag,1,5)=="T2030" ///
| substr(diag,1,6)=="T20311" ///
| substr(diag,1,6)=="T20312" ///
| substr(diag,1,5)=="T2032" ///
| substr(diag,1,5)=="T2033" ///
| substr(diag,1,5)=="T2034" ///
| substr(diag,1,5)=="T2035" ///
| substr(diag,1,5)=="T2036" ///
| substr(diag,1,5)=="T2037" ///
| substr(diag,1,5)=="T2039" ///
| substr(diag,1,5)=="T2040" ///
| substr(diag,1,5)=="T2042" ///
| substr(diag,1,5)=="T2045" ///
| substr(diag,1,5)=="T2046" ///
| substr(diag,1,5)=="T2050" ///
| substr(diag,1,6)=="T20512" ///
| substr(diag,1,5)=="T2052" ///
| substr(diag,1,5)=="T2053" ///
| substr(diag,1,5)=="T2054" ///
| substr(diag,1,5)=="T2055" ///
| substr(diag,1,5)=="T2056" ///
| substr(diag,1,5)=="T2062" ///
| substr(diag,1,5)=="T2066" ///
| substr(diag,1,5)=="T2067" ///
| substr(diag,1,5)=="T2069" ///
| substr(diag,1,5)=="T2100" ///
| substr(diag,1,5)=="T2101" ///
| substr(diag,1,5)=="T2102" ///
| substr(diag,1,5)=="T2103" ///
| substr(diag,1,5)=="T2104" ///
| substr(diag,1,5)=="T2105" ///
| substr(diag,1,5)=="T2106" ///
| substr(diag,1,5)=="T2107" ///
| substr(diag,1,5)=="T2109" ///
| substr(diag,1,5)=="T2110" ///
| substr(diag,1,5)=="T2111" ///
| substr(diag,1,5)=="T2112" ///
| substr(diag,1,5)=="T2113" ///
| substr(diag,1,5)=="T2114" ///
| substr(diag,1,5)=="T2115" ///
| substr(diag,1,5)=="T2116" ///
| substr(diag,1,5)=="T2117" ///
| substr(diag,1,5)=="T2120" ///
| substr(diag,1,5)=="T2121" ///
| substr(diag,1,5)=="T2122" ///
| substr(diag,1,5)=="T2123" ///
| substr(diag,1,5)=="T2124" ///
| substr(diag,1,5)=="T2125" ///
| substr(diag,1,5)=="T2126" ///
| substr(diag,1,5)=="T2127" ///
| substr(diag,1,5)=="T2129" ///
| substr(diag,1,5)=="T2130" ///
| substr(diag,1,5)=="T2131" ///
| substr(diag,1,5)=="T2132" ///
| substr(diag,1,5)=="T2133" ///
| substr(diag,1,5)=="T2134" ///
| substr(diag,1,5)=="T2135" ///
| substr(diag,1,5)=="T2136" ///
| substr(diag,1,5)=="T2139" ///
| substr(diag,1,5)=="T2141" ///
| substr(diag,1,5)=="T2143" ///
| substr(diag,1,5)=="T2149" ///
| substr(diag,1,5)=="T2161" ///
| substr(diag,1,5)=="T2163" ///
| substr(diag,1,5)=="T2164" ///
| substr(diag,1,5)=="T2165" ///
| substr(diag,1,5)=="T2166" ///
| substr(diag,1,5)=="T2171" ///
| substr(diag,1,5)=="T2172" ///
| substr(diag,1,5)=="T2200" ///
| substr(diag,1,6)=="T22011" ///
| substr(diag,1,6)=="T22012" ///
| substr(diag,1,6)=="T22019" ///
| substr(diag,1,6)=="T22021" ///
| substr(diag,1,6)=="T22029" ///
| substr(diag,1,6)=="T22031" ///
| substr(diag,1,6)=="T22032" ///
| substr(diag,1,6)=="T22041" ///
| substr(diag,1,6)=="T22051" ///
| substr(diag,1,6)=="T22052" ///
| substr(diag,1,6)=="T22091" ///
| substr(diag,1,6)=="T22092" ///
| substr(diag,1,5)=="T2210" ///
| substr(diag,1,6)=="T22111" ///
| substr(diag,1,6)=="T22112" ///
| substr(diag,1,6)=="T22119" ///
| substr(diag,1,6)=="T22121" ///
| substr(diag,1,6)=="T22122" ///
| substr(diag,1,6)=="T22131" ///
| substr(diag,1,6)=="T22132" ///
| substr(diag,1,6)=="T22139" ///
| substr(diag,1,6)=="T22141" ///
| substr(diag,1,6)=="T22151" ///
| substr(diag,1,6)=="T22152" ///
| substr(diag,1,6)=="T22159" ///
| substr(diag,1,6)=="T22191" ///
| substr(diag,1,6)=="T22192" ///
| substr(diag,1,5)=="T2220" ///
| substr(diag,1,6)=="T22211" ///
| substr(diag,1,6)=="T22212" ///
| substr(diag,1,6)=="T22219" ///
| substr(diag,1,6)=="T22221" ///
| substr(diag,1,6)=="T22222" ///
| substr(diag,1,6)=="T22229" ///
| substr(diag,1,6)=="T22231" 


replace trauma=1 if substr(diag,1,6)=="T22232" ///
| substr(diag,1,6)=="T22239" ///
| substr(diag,1,6)=="T22241" ///
| substr(diag,1,6)=="T22242" ///
| substr(diag,1,6)=="T22249" ///
| substr(diag,1,6)=="T22251" ///
| substr(diag,1,6)=="T22252" ///
| substr(diag,1,6)=="T22259" ///
| substr(diag,1,6)=="T22261" ///
| substr(diag,1,6)=="T22269" ///
| substr(diag,1,6)=="T22291" ///
| substr(diag,1,6)=="T22292" ///
| substr(diag,1,6)=="T22299" ///
| substr(diag,1,5)=="T2230" ///
| substr(diag,1,6)=="T22311" ///
| substr(diag,1,6)=="T22312" ///
| substr(diag,1,6)=="T22321" ///
| substr(diag,1,6)=="T22322" ///
| substr(diag,1,6)=="T22331" ///
| substr(diag,1,6)=="T22332" ///
| substr(diag,1,6)=="T22339" ///
| substr(diag,1,6)=="T22341" ///
| substr(diag,1,6)=="T22342" ///
| substr(diag,1,6)=="T22351" ///
| substr(diag,1,6)=="T22352" ///
| substr(diag,1,6)=="T22361" ///
| substr(diag,1,6)=="T22391" ///
| substr(diag,1,6)=="T22392" ///
| substr(diag,1,6)=="T22399" ///
| substr(diag,1,5)=="T2240" ///
| substr(diag,1,6)=="T22422" ///
| substr(diag,1,6)=="T22559" ///
| substr(diag,1,6)=="T22611" ///
| substr(diag,1,6)=="T22612" ///
| substr(diag,1,6)=="T22631" ///
| substr(diag,1,6)=="T22632" ///
| substr(diag,1,6)=="T22652" ///
| substr(diag,1,6)=="T22659" ///
| substr(diag,1,6)=="T22691" ///
| substr(diag,1,6)=="T22692" ///
| substr(diag,1,6)=="T22711" ///
| substr(diag,1,6)=="T23001" ///
| substr(diag,1,6)=="T23002" ///
| substr(diag,1,6)=="T23009" ///
| substr(diag,1,6)=="T23012" ///
| substr(diag,1,6)=="T23021" ///
| substr(diag,1,6)=="T23022" ///
| substr(diag,1,6)=="T23031" ///
| substr(diag,1,6)=="T23032" ///
| substr(diag,1,6)=="T23039" ///
| substr(diag,1,6)=="T23041" ///
| substr(diag,1,6)=="T23042" ///
| substr(diag,1,6)=="T23051" ///
| substr(diag,1,6)=="T23052" ///
| substr(diag,1,6)=="T23059" ///
| substr(diag,1,6)=="T23071" ///
| substr(diag,1,6)=="T23072" ///
| substr(diag,1,6)=="T23091" ///
| substr(diag,1,6)=="T23092" ///
| substr(diag,1,6)=="T23099" ///
| substr(diag,1,6)=="T23101" ///
| substr(diag,1,6)=="T23102" ///
| substr(diag,1,6)=="T23109" ///
| substr(diag,1,6)=="T23111" ///
| substr(diag,1,6)=="T23119" ///
| substr(diag,1,6)=="T23121" ///
| substr(diag,1,6)=="T23131" ///
| substr(diag,1,6)=="T23132" ///
| substr(diag,1,6)=="T23141" ///
| substr(diag,1,6)=="T23142" ///
| substr(diag,1,6)=="T23151" ///
| substr(diag,1,6)=="T23152" ///
| substr(diag,1,6)=="T23161" ///
| substr(diag,1,6)=="T23162" ///
| substr(diag,1,6)=="T23171" ///
| substr(diag,1,6)=="T23172" ///
| substr(diag,1,6)=="T23179" ///
| substr(diag,1,6)=="T23191" ///
| substr(diag,1,6)=="T23199" ///
| substr(diag,1,6)=="T23201" ///
| substr(diag,1,6)=="T23202" ///
| substr(diag,1,6)=="T23209" ///
| substr(diag,1,6)=="T23211" ///
| substr(diag,1,6)=="T23212" ///
| substr(diag,1,6)=="T23219" ///
| substr(diag,1,6)=="T23221" ///
| substr(diag,1,6)=="T23222" ///
| substr(diag,1,6)=="T23229" ///
| substr(diag,1,6)=="T23231" ///
| substr(diag,1,6)=="T23232" ///
| substr(diag,1,6)=="T23239" ///
| substr(diag,1,6)=="T23241" ///
| substr(diag,1,6)=="T23242" ///
| substr(diag,1,6)=="T23251" ///
| substr(diag,1,6)=="T23252" ///
| substr(diag,1,6)=="T23259" ///
| substr(diag,1,6)=="T23261" ///
| substr(diag,1,6)=="T23262" ///
| substr(diag,1,6)=="T23269" ///
| substr(diag,1,6)=="T23271" ///
| substr(diag,1,6)=="T23272" ///
| substr(diag,1,6)=="T23279" ///
| substr(diag,1,6)=="T23291" ///
| substr(diag,1,6)=="T23292" ///
| substr(diag,1,6)=="T23299" ///
| substr(diag,1,6)=="T23301" ///
| substr(diag,1,6)=="T23302" ///
| substr(diag,1,6)=="T23309" ///
| substr(diag,1,6)=="T23311" ///
| substr(diag,1,6)=="T23312" ///
| substr(diag,1,6)=="T23321" ///
| substr(diag,1,6)=="T23322" ///
| substr(diag,1,6)=="T23329" ///
| substr(diag,1,6)=="T23331" ///
| substr(diag,1,6)=="T23332" ///
| substr(diag,1,6)=="T23341" ///
| substr(diag,1,6)=="T23342" ///
| substr(diag,1,6)=="T23351" ///
| substr(diag,1,6)=="T23352" 


replace trauma=1 if  substr(diag,1,6)=="T23359" ///
| substr(diag,1,6)=="T23361" ///
| substr(diag,1,6)=="T23362" ///
| substr(diag,1,6)=="T23371" ///
| substr(diag,1,6)=="T23372" ///
| substr(diag,1,6)=="T23391" ///
| substr(diag,1,6)=="T23392" ///
| substr(diag,1,6)=="T23492" ///
| substr(diag,1,6)=="T23579" ///
| substr(diag,1,6)=="T23591" ///
| substr(diag,1,6)=="T23602" ///
| substr(diag,1,6)=="T23632" ///
| substr(diag,1,6)=="T23641" ///
| substr(diag,1,6)=="T23652" ///
| substr(diag,1,6)=="T23691" ///
| substr(diag,1,6)=="T23692" ///
| substr(diag,1,6)=="T23731" ///
| substr(diag,1,6)=="T24001" ///
| substr(diag,1,6)=="T24002" ///
| substr(diag,1,6)=="T24009" ///
| substr(diag,1,6)=="T24011" ///
| substr(diag,1,6)=="T24012" ///
| substr(diag,1,6)=="T24019" ///
| substr(diag,1,6)=="T24021" ///
| substr(diag,1,6)=="T24022" ///
| substr(diag,1,6)=="T24031" ///
| substr(diag,1,6)=="T24032" ///
| substr(diag,1,6)=="T24039" ///
| substr(diag,1,6)=="T24091" ///
| substr(diag,1,6)=="T24092" ///
| substr(diag,1,6)=="T24099" ///
| substr(diag,1,6)=="T24101" ///
| substr(diag,1,6)=="T24102" ///
| substr(diag,1,6)=="T24111" ///
| substr(diag,1,6)=="T24112" ///
| substr(diag,1,6)=="T24119" ///
| substr(diag,1,6)=="T24121" ///
| substr(diag,1,6)=="T24122" ///
| substr(diag,1,6)=="T24132" ///
| substr(diag,1,6)=="T24139" ///
| substr(diag,1,6)=="T24191" ///
| substr(diag,1,6)=="T24192" ///
| substr(diag,1,6)=="T24201" ///
| substr(diag,1,6)=="T24202" ///
| substr(diag,1,6)=="T24209" ///
| substr(diag,1,6)=="T24212" ///
| substr(diag,1,6)=="T24219" ///
| substr(diag,1,6)=="T24221" ///
| substr(diag,1,6)=="T24222" ///
| substr(diag,1,6)=="T24229" ///
| substr(diag,1,6)=="T24231" ///
| substr(diag,1,6)=="T24232" ///
| substr(diag,1,6)=="T24239" ///
| substr(diag,1,6)=="T24291" ///
| substr(diag,1,6)=="T24292" ///
| substr(diag,1,6)=="T24299" ///
| substr(diag,1,6)=="T24301" ///
| substr(diag,1,6)=="T24302" ///
| substr(diag,1,6)=="T24309" ///
| substr(diag,1,6)=="T24311" ///
| substr(diag,1,6)=="T24312" ///
| substr(diag,1,6)=="T24319" ///
| substr(diag,1,6)=="T24321" ///
| substr(diag,1,6)=="T24322" ///
| substr(diag,1,6)=="T24331" ///
| substr(diag,1,6)=="T24332" ///
| substr(diag,1,6)=="T24339" ///
| substr(diag,1,6)=="T24391" ///
| substr(diag,1,6)=="T24392" ///
| substr(diag,1,6)=="T24412" ///
| substr(diag,1,6)=="T24432" ///
| substr(diag,1,6)=="T24511" ///
| substr(diag,1,6)=="T24602" ///
| substr(diag,1,6)=="T24611" ///
| substr(diag,1,6)=="T24612" ///
| substr(diag,1,6)=="T24622" ///
| substr(diag,1,6)=="T24631" ///
| substr(diag,1,6)=="T24632" ///
| substr(diag,1,6)=="T24692" ///
| substr(diag,1,6)=="T24699" ///
| substr(diag,1,6)=="T25011" ///
| substr(diag,1,6)=="T25021" ///
| substr(diag,1,6)=="T25022" ///
| substr(diag,1,6)=="T25029" ///
| substr(diag,1,6)=="T25031" ///
| substr(diag,1,6)=="T25032" ///
| substr(diag,1,6)=="T25099" ///
| substr(diag,1,6)=="T25121" ///
| substr(diag,1,6)=="T25122" ///
| substr(diag,1,6)=="T25191" ///
| substr(diag,1,6)=="T25192" ///
| substr(diag,1,6)=="T25211" ///
| substr(diag,1,6)=="T25212" ///
| substr(diag,1,6)=="T25219" ///
| substr(diag,1,6)=="T25221" ///
| substr(diag,1,6)=="T25222" ///
| substr(diag,1,6)=="T25229" ///
| substr(diag,1,6)=="T25231" ///
| substr(diag,1,6)=="T25232" ///
| substr(diag,1,6)=="T25291" ///
| substr(diag,1,6)=="T25292" ///
| substr(diag,1,6)=="T25311" ///
| substr(diag,1,6)=="T25312" ///
| substr(diag,1,6)=="T25321" ///
| substr(diag,1,6)=="T25322" ///
| substr(diag,1,6)=="T25329" ///
| substr(diag,1,6)=="T25331" ///
| substr(diag,1,6)=="T25332" ///
| substr(diag,1,6)=="T25391" ///
| substr(diag,1,6)=="T25392" ///
| substr(diag,1,6)=="T25399" ///
| substr(diag,1,6)=="T25622" ///
| substr(diag,1,6)=="T25722" ///
| substr(diag,1,5)=="T2600" ///
| substr(diag,1,5)=="T2601" ///
| substr(diag,1,5)=="T2602" ///
| substr(diag,1,5)=="T2610" ///
| substr(diag,1,5)=="T2611" ///
| substr(diag,1,5)=="T2612" ///
| substr(diag,1,5)=="T2640" ///
| substr(diag,1,5)=="T2641" ///
| substr(diag,1,5)=="T2642" ///
| substr(diag,1,4)=="T270" ///
| substr(diag,1,4)=="T271" ///
| substr(diag,1,4)=="T272" ///
| substr(diag,1,4)=="T273" ///
| substr(diag,1,4)=="T274" ///
| substr(diag,1,4)=="T275" ///
| substr(diag,1,4)=="T277" ///
| substr(diag,1,4)=="T280" ///
| substr(diag,1,4)=="T281" ///
| substr(diag,1,5)=="T2840" ///
| substr(diag,1,6)=="T28412" 


replace trauma=1 if  substr(diag,1,4)=="T285" ///
| substr(diag,1,4)=="T286" ///
| substr(diag,1,5)=="80000" ///
| substr(diag,1,5)=="80001" ///
| substr(diag,1,5)=="80002" ///
| substr(diag,1,5)=="80003" ///
| substr(diag,1,5)=="80004" ///
| substr(diag,1,5)=="80005" ///
| substr(diag,1,5)=="80006" ///
| substr(diag,1,5)=="80009" ///
| substr(diag,1,5)=="80010" ///
| substr(diag,1,5)=="80011" ///
| substr(diag,1,5)=="80012" ///
| substr(diag,1,5)=="80013" ///
| substr(diag,1,5)=="80014" ///
| substr(diag,1,5)=="80015" ///
| substr(diag,1,5)=="80016" ///
| substr(diag,1,5)=="80019" ///
| substr(diag,1,5)=="80020" ///
| substr(diag,1,5)=="80021" ///
| substr(diag,1,5)=="80022" ///
| substr(diag,1,5)=="80023" ///
| substr(diag,1,5)=="80024" ///
| substr(diag,1,5)=="80025" ///
| substr(diag,1,5)=="80026" ///
| substr(diag,1,5)=="80029" ///
| substr(diag,1,5)=="80030" ///
| substr(diag,1,5)=="80031" ///
| substr(diag,1,5)=="80032" ///
| substr(diag,1,5)=="80033" ///
| substr(diag,1,5)=="80034" ///
| substr(diag,1,5)=="80035" ///
| substr(diag,1,5)=="80036" ///
| substr(diag,1,5)=="80039" ///
| substr(diag,1,5)=="80040" ///
| substr(diag,1,5)=="80041" ///
| substr(diag,1,5)=="80042" ///
| substr(diag,1,5)=="80043" ///
| substr(diag,1,5)=="80044" ///
| substr(diag,1,5)=="80045" ///
| substr(diag,1,5)=="80046" ///
| substr(diag,1,5)=="80049" ///
| substr(diag,1,5)=="80050" ///
| substr(diag,1,5)=="80051" ///
| substr(diag,1,5)=="80052" ///
| substr(diag,1,5)=="80053" ///
| substr(diag,1,5)=="80054" ///
| substr(diag,1,5)=="80055" ///
| substr(diag,1,5)=="80056" ///
| substr(diag,1,5)=="80059" ///
| substr(diag,1,5)=="80060" ///
| substr(diag,1,5)=="80061" ///
| substr(diag,1,5)=="80062" ///
| substr(diag,1,5)=="80063" ///
| substr(diag,1,5)=="80064" ///
| substr(diag,1,5)=="80065" ///
| substr(diag,1,5)=="80066" ///
| substr(diag,1,5)=="80069" ///
| substr(diag,1,5)=="80070" ///
| substr(diag,1,5)=="80071" ///
| substr(diag,1,5)=="80072" ///
| substr(diag,1,5)=="80073" ///
| substr(diag,1,5)=="80074" ///
| substr(diag,1,5)=="80075" ///
| substr(diag,1,5)=="80076" ///
| substr(diag,1,5)=="80079" ///
| substr(diag,1,5)=="80080" ///
| substr(diag,1,5)=="80081" ///
| substr(diag,1,5)=="80082" ///
| substr(diag,1,5)=="80083" ///
| substr(diag,1,5)=="80084" ///
| substr(diag,1,5)=="80085" ///
| substr(diag,1,5)=="80086" ///
| substr(diag,1,5)=="80089" ///
| substr(diag,1,5)=="80090" ///
| substr(diag,1,5)=="80091" ///
| substr(diag,1,5)=="80092" ///
| substr(diag,1,5)=="80093" ///
| substr(diag,1,5)=="80094" ///
| substr(diag,1,5)=="80095" ///
| substr(diag,1,5)=="80096" ///
| substr(diag,1,5)=="80099" ///
| substr(diag,1,5)=="80100" ///
| substr(diag,1,5)=="80101" ///
| substr(diag,1,5)=="80102" ///
| substr(diag,1,5)=="80103" ///
| substr(diag,1,5)=="80104" ///
| substr(diag,1,5)=="80105" ///
| substr(diag,1,5)=="80106" ///
| substr(diag,1,5)=="80109" ///
| substr(diag,1,5)=="80110" ///
| substr(diag,1,5)=="80111" ///
| substr(diag,1,5)=="80112" ///
| substr(diag,1,5)=="80113" ///
| substr(diag,1,5)=="80114" ///
| substr(diag,1,5)=="80115" ///
| substr(diag,1,5)=="80116" ///
| substr(diag,1,5)=="80119" ///
| substr(diag,1,5)=="80120" ///
| substr(diag,1,5)=="80121" ///
| substr(diag,1,5)=="80122" ///
| substr(diag,1,5)=="80123" ///
| substr(diag,1,5)=="80124" ///
| substr(diag,1,5)=="80125" ///
| substr(diag,1,5)=="80126" ///
| substr(diag,1,5)=="80129" ///
| substr(diag,1,5)=="80130" ///
| substr(diag,1,5)=="80131" ///
| substr(diag,1,5)=="80132" ///
| substr(diag,1,5)=="80133" ///
| substr(diag,1,5)=="80134" ///
| substr(diag,1,5)=="80135" ///
| substr(diag,1,5)=="80136" ///
| substr(diag,1,5)=="80139" ///
| substr(diag,1,5)=="80140" ///
| substr(diag,1,5)=="80141" ///
| substr(diag,1,5)=="80142" ///
| substr(diag,1,5)=="80143" ///
| substr(diag,1,5)=="80144" ///
| substr(diag,1,5)=="80145" ///
| substr(diag,1,5)=="80146" ///
| substr(diag,1,5)=="80149" ///
| substr(diag,1,5)=="80150" ///
| substr(diag,1,5)=="80151" ///
| substr(diag,1,5)=="80152" ///
| substr(diag,1,5)=="80153" ///
| substr(diag,1,5)=="80154" 


replace trauma=1 if  substr(diag,1,5)=="80155" ///
| substr(diag,1,5)=="80156" ///
| substr(diag,1,5)=="80159" ///
| substr(diag,1,5)=="80160" ///
| substr(diag,1,5)=="80161" ///
| substr(diag,1,5)=="80162" ///
| substr(diag,1,5)=="80163" ///
| substr(diag,1,5)=="80164" ///
| substr(diag,1,5)=="80165" ///
| substr(diag,1,5)=="80166" ///
| substr(diag,1,5)=="80169" ///
| substr(diag,1,5)=="80170" ///
| substr(diag,1,5)=="80171" ///
| substr(diag,1,5)=="80172" ///
| substr(diag,1,5)=="80173" ///
| substr(diag,1,5)=="80174" ///
| substr(diag,1,5)=="80175" ///
| substr(diag,1,5)=="80176" ///
| substr(diag,1,5)=="80179" ///
| substr(diag,1,5)=="80180" ///
| substr(diag,1,5)=="80181" ///
| substr(diag,1,5)=="80182" ///
| substr(diag,1,5)=="80183" ///
| substr(diag,1,5)=="80184" ///
| substr(diag,1,5)=="80185" ///
| substr(diag,1,5)=="80186" ///
| substr(diag,1,5)=="80189" ///
| substr(diag,1,5)=="80190" ///
| substr(diag,1,5)=="80191" ///
| substr(diag,1,5)=="80192" ///
| substr(diag,1,5)=="80193" ///
| substr(diag,1,5)=="80194" ///
| substr(diag,1,5)=="80195" ///
| substr(diag,1,5)=="80196" ///
| substr(diag,1,5)=="80199" ///
| substr(diag,1,4)=="8020" ///
| substr(diag,1,4)=="8021" ///
| substr(diag,1,5)=="80220" ///
| substr(diag,1,5)=="80221" ///
| substr(diag,1,5)=="80222" ///
| substr(diag,1,5)=="80223" ///
| substr(diag,1,5)=="80224" ///
| substr(diag,1,5)=="80225" ///
| substr(diag,1,5)=="80226" ///
| substr(diag,1,5)=="80227" ///
| substr(diag,1,5)=="80228" ///
| substr(diag,1,5)=="80229" ///
| substr(diag,1,5)=="80230" ///
| substr(diag,1,5)=="80231" ///
| substr(diag,1,5)=="80232" ///
| substr(diag,1,5)=="80233" ///
| substr(diag,1,5)=="80234" ///
| substr(diag,1,5)=="80235" ///
| substr(diag,1,5)=="80236" ///
| substr(diag,1,5)=="80237" ///
| substr(diag,1,5)=="80238" ///
| substr(diag,1,5)=="80239" ///
| substr(diag,1,4)=="8024" ///
| substr(diag,1,4)=="8025" ///
| substr(diag,1,4)=="8026" ///
| substr(diag,1,4)=="8027" ///
| substr(diag,1,4)=="8028" ///
| substr(diag,1,4)=="8029" ///
| substr(diag,1,5)=="80300" ///
| substr(diag,1,5)=="80301" ///
| substr(diag,1,5)=="80302" ///
| substr(diag,1,5)=="80303" ///
| substr(diag,1,5)=="80304" ///
| substr(diag,1,5)=="80305" ///
| substr(diag,1,5)=="80306" ///
| substr(diag,1,5)=="80309" ///
| substr(diag,1,5)=="80310" ///
| substr(diag,1,5)=="80311" ///
| substr(diag,1,5)=="80312" ///
| substr(diag,1,5)=="80313" ///
| substr(diag,1,5)=="80314" ///
| substr(diag,1,5)=="80315" ///
| substr(diag,1,5)=="80316" ///
| substr(diag,1,5)=="80319" ///
| substr(diag,1,5)=="80320" ///
| substr(diag,1,5)=="80321" ///
| substr(diag,1,5)=="80322" ///
| substr(diag,1,5)=="80323" ///
| substr(diag,1,5)=="80324" ///
| substr(diag,1,5)=="80325" ///
| substr(diag,1,5)=="80326" ///
| substr(diag,1,5)=="80329" ///
| substr(diag,1,5)=="80330" ///
| substr(diag,1,5)=="80331" ///
| substr(diag,1,5)=="80332" ///
| substr(diag,1,5)=="80333" ///
| substr(diag,1,5)=="80334" ///
| substr(diag,1,5)=="80335" ///
| substr(diag,1,5)=="80336" ///
| substr(diag,1,5)=="80339" ///
| substr(diag,1,5)=="80340" ///
| substr(diag,1,5)=="80341" ///
| substr(diag,1,5)=="80342" ///
| substr(diag,1,5)=="80343" ///
| substr(diag,1,5)=="80344" ///
| substr(diag,1,5)=="80345" ///
| substr(diag,1,5)=="80346" ///
| substr(diag,1,5)=="80349" ///
| substr(diag,1,5)=="80350" ///
| substr(diag,1,5)=="80351" ///
| substr(diag,1,5)=="80352" ///
| substr(diag,1,5)=="80353" ///
| substr(diag,1,5)=="80354" ///
| substr(diag,1,5)=="80355" ///
| substr(diag,1,5)=="80356" ///
| substr(diag,1,5)=="80359" ///
| substr(diag,1,5)=="80360" ///
| substr(diag,1,5)=="80361" ///
| substr(diag,1,5)=="80362" ///
| substr(diag,1,5)=="80363" ///
| substr(diag,1,5)=="80364" ///
| substr(diag,1,5)=="80365" ///
| substr(diag,1,5)=="80366" ///
| substr(diag,1,5)=="80369" ///
| substr(diag,1,5)=="80370" ///
| substr(diag,1,5)=="80371" ///
| substr(diag,1,5)=="80372" ///
| substr(diag,1,5)=="80373" ///
| substr(diag,1,5)=="80374" ///
| substr(diag,1,5)=="80375" ///
| substr(diag,1,5)=="80376" ///
| substr(diag,1,5)=="80379" 


replace trauma=1 if  substr(diag,1,5)=="80380" ///
| substr(diag,1,5)=="80381" ///
| substr(diag,1,5)=="80382" ///
| substr(diag,1,5)=="80383" ///
| substr(diag,1,5)=="80384" ///
| substr(diag,1,5)=="80385" ///
| substr(diag,1,5)=="80386" ///
| substr(diag,1,5)=="80389" ///
| substr(diag,1,5)=="80390" ///
| substr(diag,1,5)=="80391" ///
| substr(diag,1,5)=="80392" ///
| substr(diag,1,5)=="80393" ///
| substr(diag,1,5)=="80394" ///
| substr(diag,1,5)=="80395" ///
| substr(diag,1,5)=="80396" ///
| substr(diag,1,5)=="80399" ///
| substr(diag,1,5)=="80400" ///
| substr(diag,1,5)=="80401" ///
| substr(diag,1,5)=="80402" ///
| substr(diag,1,5)=="80403" ///
| substr(diag,1,5)=="80404" ///
| substr(diag,1,5)=="80405" ///
| substr(diag,1,5)=="80406" ///
| substr(diag,1,5)=="80409" ///
| substr(diag,1,5)=="80410" ///
| substr(diag,1,5)=="80411" ///
| substr(diag,1,5)=="80412" ///
| substr(diag,1,5)=="80413" ///
| substr(diag,1,5)=="80414" ///
| substr(diag,1,5)=="80415" ///
| substr(diag,1,5)=="80416" ///
| substr(diag,1,5)=="80419" ///
| substr(diag,1,5)=="80420" ///
| substr(diag,1,5)=="80421" ///
| substr(diag,1,5)=="80422" ///
| substr(diag,1,5)=="80423" ///
| substr(diag,1,5)=="80424" ///
| substr(diag,1,5)=="80425" ///
| substr(diag,1,5)=="80426" ///
| substr(diag,1,5)=="80429" ///
| substr(diag,1,5)=="80430" ///
| substr(diag,1,5)=="80431" ///
| substr(diag,1,5)=="80432" ///
| substr(diag,1,5)=="80433" ///
| substr(diag,1,5)=="80434" ///
| substr(diag,1,5)=="80435" ///
| substr(diag,1,5)=="80436" ///
| substr(diag,1,5)=="80439" ///
| substr(diag,1,5)=="80440" ///
| substr(diag,1,5)=="80441" ///
| substr(diag,1,5)=="80442" ///
| substr(diag,1,5)=="80443" ///
| substr(diag,1,5)=="80444" ///
| substr(diag,1,5)=="80445" ///
| substr(diag,1,5)=="80446" ///
| substr(diag,1,5)=="80449" ///
| substr(diag,1,5)=="80450" ///
| substr(diag,1,5)=="80451" ///
| substr(diag,1,5)=="80452" ///
| substr(diag,1,5)=="80453" ///
| substr(diag,1,5)=="80454" ///
| substr(diag,1,5)=="80455" ///
| substr(diag,1,5)=="80456" ///
| substr(diag,1,5)=="80459" ///
| substr(diag,1,5)=="80460" ///
| substr(diag,1,5)=="80461" ///
| substr(diag,1,5)=="80462" ///
| substr(diag,1,5)=="80463" ///
| substr(diag,1,5)=="80464" ///
| substr(diag,1,5)=="80465" ///
| substr(diag,1,5)=="80466" ///
| substr(diag,1,5)=="80469" ///
| substr(diag,1,5)=="80470" ///
| substr(diag,1,5)=="80471" ///
| substr(diag,1,5)=="80472" ///
| substr(diag,1,5)=="80473" ///
| substr(diag,1,5)=="80474" ///
| substr(diag,1,5)=="80475" ///
| substr(diag,1,5)=="80476" ///
| substr(diag,1,5)=="80479" ///
| substr(diag,1,5)=="80480" ///
| substr(diag,1,5)=="80481" ///
| substr(diag,1,5)=="80482" ///
| substr(diag,1,5)=="80483" ///
| substr(diag,1,5)=="80484" ///
| substr(diag,1,5)=="80485" ///
| substr(diag,1,5)=="80486" ///
| substr(diag,1,5)=="80489" ///
| substr(diag,1,5)=="80490" ///
| substr(diag,1,5)=="80491" ///
| substr(diag,1,5)=="80492" ///
| substr(diag,1,5)=="80493" ///
| substr(diag,1,5)=="80494" ///
| substr(diag,1,5)=="80495" ///
| substr(diag,1,5)=="80496" ///
| substr(diag,1,5)=="80499" ///
| substr(diag,1,5)=="80500" ///
| substr(diag,1,5)=="80501" ///
| substr(diag,1,5)=="80502" ///
| substr(diag,1,5)=="80503" ///
| substr(diag,1,5)=="80504" ///
| substr(diag,1,5)=="80505" ///
| substr(diag,1,5)=="80506" ///
| substr(diag,1,5)=="80507" ///
| substr(diag,1,5)=="80508" ///
| substr(diag,1,5)=="80510" ///
| substr(diag,1,5)=="80511" ///
| substr(diag,1,5)=="80512" ///
| substr(diag,1,5)=="80513" ///
| substr(diag,1,5)=="80514" ///
| substr(diag,1,5)=="80515" ///
| substr(diag,1,5)=="80516" ///
| substr(diag,1,5)=="80517" ///
| substr(diag,1,5)=="80518" ///
| substr(diag,1,4)=="8052" ///
| substr(diag,1,4)=="8053" ///
| substr(diag,1,4)=="8054" ///
| substr(diag,1,4)=="8055" ///
| substr(diag,1,4)=="8056" ///
| substr(diag,1,4)=="8057" ///
| substr(diag,1,4)=="8058" ///
| substr(diag,1,4)=="8059" ///
| substr(diag,1,5)=="80600" ///
| substr(diag,1,5)=="80601" ///
| substr(diag,1,5)=="80602" ///
| substr(diag,1,5)=="80603" ///
| substr(diag,1,5)=="80604" 


replace trauma=1 if  substr(diag,1,5)=="80605" ///
| substr(diag,1,5)=="80606" ///
| substr(diag,1,5)=="80607" ///
| substr(diag,1,5)=="80608" ///
| substr(diag,1,5)=="80609" ///
| substr(diag,1,5)=="80610" ///
| substr(diag,1,5)=="80611" ///
| substr(diag,1,5)=="80612" ///
| substr(diag,1,5)=="80613" ///
| substr(diag,1,5)=="80614" ///
| substr(diag,1,5)=="80615" ///
| substr(diag,1,5)=="80616" ///
| substr(diag,1,5)=="80617" ///
| substr(diag,1,5)=="80618" ///
| substr(diag,1,5)=="80619" ///
| substr(diag,1,5)=="80620" ///
| substr(diag,1,5)=="80621" ///
| substr(diag,1,5)=="80622" ///
| substr(diag,1,5)=="80623" ///
| substr(diag,1,5)=="80624" ///
| substr(diag,1,5)=="80625" ///
| substr(diag,1,5)=="80626" ///
| substr(diag,1,5)=="80627" ///
| substr(diag,1,5)=="80628" ///
| substr(diag,1,5)=="80629" ///
| substr(diag,1,5)=="80630" ///
| substr(diag,1,5)=="80631" ///
| substr(diag,1,5)=="80632" ///
| substr(diag,1,5)=="80633" ///
| substr(diag,1,5)=="80634" ///
| substr(diag,1,5)=="80635" ///
| substr(diag,1,5)=="80636" ///
| substr(diag,1,5)=="80637" ///
| substr(diag,1,5)=="80638" ///
| substr(diag,1,5)=="80639" ///
| substr(diag,1,4)=="8064" ///
| substr(diag,1,4)=="8065" ///
| substr(diag,1,5)=="80660" ///
| substr(diag,1,5)=="80661" ///
| substr(diag,1,5)=="80662" ///
| substr(diag,1,5)=="80669" ///
| substr(diag,1,5)=="80670" ///
| substr(diag,1,5)=="80671" ///
| substr(diag,1,5)=="80672" ///
| substr(diag,1,5)=="80679" ///
| substr(diag,1,4)=="8068" ///
| substr(diag,1,4)=="8069" ///
| substr(diag,1,5)=="80700" ///
| substr(diag,1,5)=="80701" ///
| substr(diag,1,5)=="80702" ///
| substr(diag,1,5)=="80703" ///
| substr(diag,1,5)=="80704" ///
| substr(diag,1,5)=="80705" ///
| substr(diag,1,5)=="80706" ///
| substr(diag,1,5)=="80707" ///
| substr(diag,1,5)=="80708" ///
| substr(diag,1,5)=="80709" ///
| substr(diag,1,5)=="80710" ///
| substr(diag,1,5)=="80711" ///
| substr(diag,1,5)=="80712" ///
| substr(diag,1,5)=="80713" ///
| substr(diag,1,5)=="80714" ///
| substr(diag,1,5)=="80715" ///
| substr(diag,1,5)=="80716" ///
| substr(diag,1,5)=="80717" ///
| substr(diag,1,5)=="80718" ///
| substr(diag,1,5)=="80719" ///
| substr(diag,1,4)=="8072" ///
| substr(diag,1,4)=="8073" ///
| substr(diag,1,4)=="8074" ///
| substr(diag,1,4)=="8075" ///
| substr(diag,1,4)=="8076" ///
| substr(diag,1,4)=="8080" ///
| substr(diag,1,4)=="8081" ///
| substr(diag,1,4)=="8082" ///
| substr(diag,1,4)=="8083" ///
| substr(diag,1,5)=="80841" ///
| substr(diag,1,5)=="80842" ///
| substr(diag,1,5)=="80843" ///
| substr(diag,1,5)=="80849" ///
| substr(diag,1,5)=="80851" ///
| substr(diag,1,5)=="80852" ///
| substr(diag,1,5)=="80853" ///
| substr(diag,1,5)=="80859" ///
| substr(diag,1,4)=="8088" ///
| substr(diag,1,4)=="8089" ///
| substr(diag,1,4)=="8090" ///
| substr(diag,1,4)=="8091" ///
| substr(diag,1,5)=="81000" ///
| substr(diag,1,5)=="81001" ///
| substr(diag,1,5)=="81002" ///
| substr(diag,1,5)=="81003" ///
| substr(diag,1,5)=="81010" ///
| substr(diag,1,5)=="81011" ///
| substr(diag,1,5)=="81012" ///
| substr(diag,1,5)=="81013" ///
| substr(diag,1,5)=="81100" ///
| substr(diag,1,5)=="81101" ///
| substr(diag,1,5)=="81102" ///
| substr(diag,1,5)=="81103" ///
| substr(diag,1,5)=="81109" ///
| substr(diag,1,5)=="81110" ///
| substr(diag,1,5)=="81111" ///
| substr(diag,1,5)=="81112" ///
| substr(diag,1,5)=="81113" ///
| substr(diag,1,5)=="81119" ///
| substr(diag,1,5)=="81200" ///
| substr(diag,1,5)=="81201" ///
| substr(diag,1,5)=="81202" ///
| substr(diag,1,5)=="81203" ///
| substr(diag,1,5)=="81209" ///
| substr(diag,1,5)=="81210" ///
| substr(diag,1,5)=="81211" ///
| substr(diag,1,5)=="81212" 


replace trauma=1 if  substr(diag,1,5)=="81213" ///
| substr(diag,1,5)=="81219" ///
| substr(diag,1,5)=="81220" ///
| substr(diag,1,5)=="81221" ///
| substr(diag,1,5)=="81230" ///
| substr(diag,1,5)=="81231" ///
| substr(diag,1,5)=="81240" ///
| substr(diag,1,5)=="81241" ///
| substr(diag,1,5)=="81242" ///
| substr(diag,1,5)=="81243" ///
| substr(diag,1,5)=="81244" ///
| substr(diag,1,5)=="81249" ///
| substr(diag,1,5)=="81250" ///
| substr(diag,1,5)=="81251" ///
| substr(diag,1,5)=="81252" ///
| substr(diag,1,5)=="81253" ///
| substr(diag,1,5)=="81254" ///
| substr(diag,1,5)=="81259" ///
| substr(diag,1,5)=="81300" ///
| substr(diag,1,5)=="81301" ///
| substr(diag,1,5)=="81302" ///
| substr(diag,1,5)=="81303" ///
| substr(diag,1,5)=="81304" ///
| substr(diag,1,5)=="81305" ///
| substr(diag,1,5)=="81306" ///
| substr(diag,1,5)=="81307" ///
| substr(diag,1,5)=="81308" ///
| substr(diag,1,5)=="81310" ///
| substr(diag,1,5)=="81311" ///
| substr(diag,1,5)=="81312" ///
| substr(diag,1,5)=="81313" ///
| substr(diag,1,5)=="81314" ///
| substr(diag,1,5)=="81315" ///
| substr(diag,1,5)=="81316" ///
| substr(diag,1,5)=="81317" ///
| substr(diag,1,5)=="81318" ///
| substr(diag,1,5)=="81320" ///
| substr(diag,1,5)=="81321" ///
| substr(diag,1,5)=="81322" ///
| substr(diag,1,5)=="81323" ///
| substr(diag,1,5)=="81330" ///
| substr(diag,1,5)=="81331" ///
| substr(diag,1,5)=="81332" ///
| substr(diag,1,5)=="81333" ///
| substr(diag,1,5)=="81340" ///
| substr(diag,1,5)=="81341" ///
| substr(diag,1,5)=="81342" ///
| substr(diag,1,5)=="81343" ///
| substr(diag,1,5)=="81344" ///
| substr(diag,1,5)=="81345" ///
| substr(diag,1,5)=="81346" ///
| substr(diag,1,5)=="81347" ///
| substr(diag,1,5)=="81350" ///
| substr(diag,1,5)=="81351" ///
| substr(diag,1,5)=="81352" ///
| substr(diag,1,5)=="81353" ///
| substr(diag,1,5)=="81354" ///
| substr(diag,1,5)=="81380" ///
| substr(diag,1,5)=="81381" ///
| substr(diag,1,5)=="81382" ///
| substr(diag,1,5)=="81383" ///
| substr(diag,1,5)=="81390" ///
| substr(diag,1,5)=="81391" ///
| substr(diag,1,5)=="81392" ///
| substr(diag,1,5)=="81393" ///
| substr(diag,1,5)=="81400" ///
| substr(diag,1,5)=="81401" ///
| substr(diag,1,5)=="81402" ///
| substr(diag,1,5)=="81403" ///
| substr(diag,1,5)=="81404" ///
| substr(diag,1,5)=="81405" ///
| substr(diag,1,5)=="81406" ///
| substr(diag,1,5)=="81407" ///
| substr(diag,1,5)=="81408" ///
| substr(diag,1,5)=="81409" ///
| substr(diag,1,5)=="81410" ///
| substr(diag,1,5)=="81411" ///
| substr(diag,1,5)=="81412" ///
| substr(diag,1,5)=="81413" ///
| substr(diag,1,5)=="81414" ///
| substr(diag,1,5)=="81415" ///
| substr(diag,1,5)=="81416" ///
| substr(diag,1,5)=="81417" ///
| substr(diag,1,5)=="81418" ///
| substr(diag,1,5)=="81419" ///
| substr(diag,1,5)=="81500" ///
| substr(diag,1,5)=="81501" ///
| substr(diag,1,5)=="81502" ///
| substr(diag,1,5)=="81503" ///
| substr(diag,1,5)=="81504" ///
| substr(diag,1,5)=="81509" ///
| substr(diag,1,5)=="81510" ///
| substr(diag,1,5)=="81511" ///
| substr(diag,1,5)=="81512" ///
| substr(diag,1,5)=="81513" ///
| substr(diag,1,5)=="81514" ///
| substr(diag,1,5)=="81519" ///
| substr(diag,1,5)=="81600" ///
| substr(diag,1,5)=="81601" ///
| substr(diag,1,5)=="81602" ///
| substr(diag,1,5)=="81603" ///
| substr(diag,1,5)=="81610" ///
| substr(diag,1,5)=="81611" ///
| substr(diag,1,5)=="81612" ///
| substr(diag,1,5)=="81613" ///
| substr(diag,1,4)=="8170" ///
| substr(diag,1,4)=="8171" ///
| substr(diag,1,4)=="8180" ///
| substr(diag,1,4)=="8181" ///
| substr(diag,1,4)=="8190" ///
| substr(diag,1,4)=="8191" ///
| substr(diag,1,5)=="82000" ///
| substr(diag,1,5)=="82001" ///
| substr(diag,1,5)=="82002" ///
| substr(diag,1,5)=="82003" ///
| substr(diag,1,5)=="82009" ///
| substr(diag,1,5)=="82010" ///
| substr(diag,1,5)=="82011" ///
| substr(diag,1,5)=="82012" ///
| substr(diag,1,5)=="82013" ///
| substr(diag,1,5)=="82019" ///
| substr(diag,1,5)=="82020" ///
| substr(diag,1,5)=="82021" ///
| substr(diag,1,5)=="82022" ///
| substr(diag,1,5)=="82030" 


replace trauma=1 if  substr(diag,1,5)=="82031" ///
| substr(diag,1,5)=="82032" ///
| substr(diag,1,4)=="8208" ///
| substr(diag,1,4)=="8209" ///
| substr(diag,1,5)=="82100" ///
| substr(diag,1,5)=="82101" ///
| substr(diag,1,5)=="82110" ///
| substr(diag,1,5)=="82111" ///
| substr(diag,1,5)=="82120" ///
| substr(diag,1,5)=="82121" ///
| substr(diag,1,5)=="82122" ///
| substr(diag,1,5)=="82123" ///
| substr(diag,1,5)=="82129" ///
| substr(diag,1,5)=="82130" ///
| substr(diag,1,5)=="82131" ///
| substr(diag,1,5)=="82132" ///
| substr(diag,1,5)=="82133" ///
| substr(diag,1,5)=="82139" ///
| substr(diag,1,4)=="8220" ///
| substr(diag,1,4)=="8221" ///
| substr(diag,1,5)=="82300" ///
| substr(diag,1,5)=="82301" ///
| substr(diag,1,5)=="82302" ///
| substr(diag,1,5)=="82310" ///
| substr(diag,1,5)=="82311" ///
| substr(diag,1,5)=="82312" ///
| substr(diag,1,5)=="82320" ///
| substr(diag,1,5)=="82321" ///
| substr(diag,1,5)=="82322" ///
| substr(diag,1,5)=="82330" ///
| substr(diag,1,5)=="82331" ///
| substr(diag,1,5)=="82332" ///
| substr(diag,1,5)=="82340" ///
| substr(diag,1,5)=="82341" ///
| substr(diag,1,5)=="82342" ///
| substr(diag,1,5)=="82380" ///
| substr(diag,1,5)=="82381" ///
| substr(diag,1,5)=="82382" ///
| substr(diag,1,5)=="82390" ///
| substr(diag,1,5)=="82391" ///
| substr(diag,1,5)=="82392" ///
| substr(diag,1,4)=="8240" ///
| substr(diag,1,4)=="8241" ///
| substr(diag,1,4)=="8242" ///
| substr(diag,1,4)=="8243" ///
| substr(diag,1,4)=="8244" ///
| substr(diag,1,4)=="8245" ///
| substr(diag,1,4)=="8246" ///
| substr(diag,1,4)=="8247" ///
| substr(diag,1,4)=="8248" ///
| substr(diag,1,4)=="8249" ///
| substr(diag,1,4)=="8250" ///
| substr(diag,1,4)=="8251" ///
| substr(diag,1,5)=="82520" ///
| substr(diag,1,5)=="82521" ///
| substr(diag,1,5)=="82522" ///
| substr(diag,1,5)=="82523" ///
| substr(diag,1,5)=="82524" ///
| substr(diag,1,5)=="82525" ///
| substr(diag,1,5)=="82529" ///
| substr(diag,1,5)=="82530" ///
| substr(diag,1,5)=="82531" ///
| substr(diag,1,5)=="82532" ///
| substr(diag,1,5)=="82533" ///
| substr(diag,1,5)=="82534" ///
| substr(diag,1,5)=="82535" ///
| substr(diag,1,5)=="82539" ///
| substr(diag,1,4)=="8260" ///
| substr(diag,1,4)=="8261" ///
| substr(diag,1,4)=="8270" ///
| substr(diag,1,4)=="8271" ///
| substr(diag,1,4)=="8280" ///
| substr(diag,1,4)=="8281" ///
| substr(diag,1,4)=="8290" ///
| substr(diag,1,4)=="8291" ///
| substr(diag,1,4)=="8300" ///
| substr(diag,1,4)=="8301" ///
| substr(diag,1,5)=="83100" ///
| substr(diag,1,5)=="83101" ///
| substr(diag,1,5)=="83102" ///
| substr(diag,1,5)=="83103" ///
| substr(diag,1,5)=="83104" ///
| substr(diag,1,5)=="83109" ///
| substr(diag,1,5)=="83110" ///
| substr(diag,1,5)=="83111" ///
| substr(diag,1,5)=="83112" ///
| substr(diag,1,5)=="83113" ///
| substr(diag,1,5)=="83114" ///
| substr(diag,1,5)=="83119" ///
| substr(diag,1,5)=="83200" ///
| substr(diag,1,5)=="83201" ///
| substr(diag,1,5)=="83202" ///
| substr(diag,1,5)=="83203" ///
| substr(diag,1,5)=="83204" ///
| substr(diag,1,5)=="83209" ///
| substr(diag,1,5)=="83210" ///
| substr(diag,1,5)=="83211" ///
| substr(diag,1,5)=="83212" ///
| substr(diag,1,5)=="83213" ///
| substr(diag,1,5)=="83214" ///
| substr(diag,1,5)=="83219" ///
| substr(diag,1,4)=="8322" ///
| substr(diag,1,5)=="83300" ///
| substr(diag,1,5)=="83301" ///
| substr(diag,1,5)=="83302" ///
| substr(diag,1,5)=="83303" ///
| substr(diag,1,5)=="83304" ///
| substr(diag,1,5)=="83305" ///
| substr(diag,1,5)=="83309" ///
| substr(diag,1,5)=="83310" ///
| substr(diag,1,5)=="83311" ///
| substr(diag,1,5)=="83312" ///
| substr(diag,1,5)=="83313" ///
| substr(diag,1,5)=="83314" ///
| substr(diag,1,5)=="83315" ///
| substr(diag,1,5)=="83319" ///
| substr(diag,1,5)=="83400" ///
| substr(diag,1,5)=="83401" ///
| substr(diag,1,5)=="83402" ///
| substr(diag,1,5)=="83410" ///
| substr(diag,1,5)=="83411" ///
| substr(diag,1,5)=="83412" ///
| substr(diag,1,5)=="83500" ///
| substr(diag,1,5)=="83501" ///
| substr(diag,1,5)=="83502" ///
| substr(diag,1,5)=="83503" ///
| substr(diag,1,5)=="83510" ///
| substr(diag,1,5)=="83511" ///
| substr(diag,1,5)=="83512" ///
| substr(diag,1,5)=="83513" ///
| substr(diag,1,4)=="8360" ///
| substr(diag,1,4)=="8361" ///
| substr(diag,1,4)=="8362" ///
| substr(diag,1,4)=="8363" ///
| substr(diag,1,4)=="8364" ///
| substr(diag,1,5)=="83650" ///
| substr(diag,1,5)=="83651" ///
| substr(diag,1,5)=="83652" ///
| substr(diag,1,5)=="83653" ///
| substr(diag,1,5)=="83654" ///
| substr(diag,1,5)=="83659" ///
| substr(diag,1,5)=="83660" ///
| substr(diag,1,5)=="83661" ///
| substr(diag,1,5)=="83662" ///
| substr(diag,1,5)=="83663"

 
replace trauma=1 if substr(diag,1,5)=="83664" ///
| substr(diag,1,5)=="83669" ///
| substr(diag,1,4)=="8370" ///
| substr(diag,1,4)=="8371" ///
| substr(diag,1,5)=="83800" ///
| substr(diag,1,5)=="83801" ///
| substr(diag,1,5)=="83802" ///
| substr(diag,1,5)=="83803" ///
| substr(diag,1,5)=="83804" ///
| substr(diag,1,5)=="83805" ///
| substr(diag,1,5)=="83806" ///
| substr(diag,1,5)=="83809" ///
| substr(diag,1,5)=="83810" ///
| substr(diag,1,5)=="83811" ///
| substr(diag,1,5)=="83812" ///
| substr(diag,1,5)=="83813" ///
| substr(diag,1,5)=="83814" ///
| substr(diag,1,5)=="83815" ///
| substr(diag,1,5)=="83816" ///
| substr(diag,1,5)=="83819" ///
| substr(diag,1,5)=="83900" ///
| substr(diag,1,5)=="83901" ///
| substr(diag,1,5)=="83902" ///
| substr(diag,1,5)=="83903" ///
| substr(diag,1,5)=="83904" ///
| substr(diag,1,5)=="83905" ///
| substr(diag,1,5)=="83906" ///
| substr(diag,1,5)=="83907" ///
| substr(diag,1,5)=="83908" ///
| substr(diag,1,5)=="83910" ///
| substr(diag,1,5)=="83911" ///
| substr(diag,1,5)=="83912" ///
| substr(diag,1,5)=="83913" ///
| substr(diag,1,5)=="83914" ///
| substr(diag,1,5)=="83915" ///
| substr(diag,1,5)=="83916" ///
| substr(diag,1,5)=="83917" ///
| substr(diag,1,5)=="83918" ///
| substr(diag,1,5)=="83920" ///
| substr(diag,1,5)=="83921" ///
| substr(diag,1,5)=="83930" ///
| substr(diag,1,5)=="83931" ///
| substr(diag,1,5)=="83940" ///
| substr(diag,1,5)=="83941" ///
| substr(diag,1,5)=="83942" ///
| substr(diag,1,5)=="83949" ///
| substr(diag,1,5)=="83950" ///
| substr(diag,1,5)=="83951" ///
| substr(diag,1,5)=="83952" ///
| substr(diag,1,5)=="83959" ///
| substr(diag,1,5)=="83961" ///
| substr(diag,1,5)=="83969" ///
| substr(diag,1,5)=="83971" ///
| substr(diag,1,5)=="83979" ///
| substr(diag,1,4)=="8398" ///
| substr(diag,1,4)=="8399" ///
| substr(diag,1,4)=="8400" ///
| substr(diag,1,4)=="8401" ///
| substr(diag,1,4)=="8402" ///
| substr(diag,1,4)=="8403" ///
| substr(diag,1,4)=="8404" ///
| substr(diag,1,4)=="8405" ///
| substr(diag,1,4)=="8406" ///
| substr(diag,1,4)=="8407" ///
| substr(diag,1,4)=="8408" ///
| substr(diag,1,4)=="8409" ///
| substr(diag,1,4)=="8410" ///
| substr(diag,1,4)=="8411" ///
| substr(diag,1,4)=="8412" ///
| substr(diag,1,4)=="8413" ///
| substr(diag,1,4)=="8418" ///
| substr(diag,1,4)=="8419" ///
| substr(diag,1,5)=="84200" ///
| substr(diag,1,5)=="84201" ///
| substr(diag,1,5)=="84202" ///
| substr(diag,1,5)=="84209" ///
| substr(diag,1,5)=="84210" ///
| substr(diag,1,5)=="84211" ///
| substr(diag,1,5)=="84212" ///
| substr(diag,1,5)=="84213" ///
| substr(diag,1,5)=="84219" ///
| substr(diag,1,4)=="8430" ///
| substr(diag,1,4)=="8431" ///
| substr(diag,1,4)=="8438" ///
| substr(diag,1,4)=="8439" ///
| substr(diag,1,4)=="8440" ///
| substr(diag,1,4)=="8441" ///
| substr(diag,1,4)=="8442" ///
| substr(diag,1,4)=="8443" ///
| substr(diag,1,4)=="8448" ///
| substr(diag,1,4)=="8449" ///
| substr(diag,1,5)=="84500" ///
| substr(diag,1,5)=="84501" ///
| substr(diag,1,5)=="84502" ///
| substr(diag,1,5)=="84503" ///
| substr(diag,1,5)=="84509" ///
| substr(diag,1,5)=="84510" ///
| substr(diag,1,5)=="84511" ///
| substr(diag,1,5)=="84512" ///
| substr(diag,1,5)=="84513" ///
| substr(diag,1,5)=="84519" ///
| substr(diag,1,4)=="8460" ///
| substr(diag,1,4)=="8461" ///
| substr(diag,1,4)=="8462" ///
| substr(diag,1,4)=="8463" ///
| substr(diag,1,4)=="8468" ///
| substr(diag,1,4)=="8469" ///
| substr(diag,1,4)=="8470" ///
| substr(diag,1,4)=="8471" ///
| substr(diag,1,4)=="8472" ///
| substr(diag,1,4)=="8473" ///
| substr(diag,1,4)=="8474" ///
| substr(diag,1,4)=="8479" ///
| substr(diag,1,4)=="8480" ///
| substr(diag,1,4)=="8481" ///
| substr(diag,1,4)=="8482" ///
| substr(diag,1,4)=="8483" ///
| substr(diag,1,5)=="84840" ///
| substr(diag,1,5)=="84841" ///
| substr(diag,1,5)=="84842" ///
| substr(diag,1,5)=="84849" ///
| substr(diag,1,4)=="8485" 


replace trauma=1 if  substr(diag,1,4)=="8488" ///
| substr(diag,1,4)=="8489" ///
| substr(diag,1,4)=="8500" ///
| substr(diag,1,4)=="8501" ///
| substr(diag,1,5)=="85011" ///
| substr(diag,1,5)=="85012" ///
| substr(diag,1,4)=="8502" ///
| substr(diag,1,4)=="8503" ///
| substr(diag,1,4)=="8504" ///
| substr(diag,1,4)=="8505" ///
| substr(diag,1,4)=="8509" ///
| substr(diag,1,5)=="85100" ///
| substr(diag,1,5)=="85101" ///
| substr(diag,1,5)=="85102" ///
| substr(diag,1,5)=="85103" ///
| substr(diag,1,5)=="85104" ///
| substr(diag,1,5)=="85105" ///
| substr(diag,1,5)=="85106" ///
| substr(diag,1,5)=="85109" ///
| substr(diag,1,5)=="85110" ///
| substr(diag,1,5)=="85111" ///
| substr(diag,1,5)=="85112" ///
| substr(diag,1,5)=="85113" ///
| substr(diag,1,5)=="85114" ///
| substr(diag,1,5)=="85115" ///
| substr(diag,1,5)=="85116" ///
| substr(diag,1,5)=="85119" ///
| substr(diag,1,5)=="85120" ///
| substr(diag,1,5)=="85121" ///
| substr(diag,1,5)=="85122" ///
| substr(diag,1,5)=="85123" ///
| substr(diag,1,5)=="85124" ///
| substr(diag,1,5)=="85125" ///
| substr(diag,1,5)=="85126" ///
| substr(diag,1,5)=="85129" ///
| substr(diag,1,5)=="85130" ///
| substr(diag,1,5)=="85131" ///
| substr(diag,1,5)=="85132" ///
| substr(diag,1,5)=="85133" ///
| substr(diag,1,5)=="85134" ///
| substr(diag,1,5)=="85135" ///
| substr(diag,1,5)=="85136" ///
| substr(diag,1,5)=="85139" ///
| substr(diag,1,5)=="85140" ///
| substr(diag,1,5)=="85141" ///
| substr(diag,1,5)=="85142" ///
| substr(diag,1,5)=="85143" ///
| substr(diag,1,5)=="85144" ///
| substr(diag,1,5)=="85145" ///
| substr(diag,1,5)=="85146" ///
| substr(diag,1,5)=="85149" ///
| substr(diag,1,5)=="85150" ///
| substr(diag,1,5)=="85151" ///
| substr(diag,1,5)=="85152" ///
| substr(diag,1,5)=="85153" ///
| substr(diag,1,5)=="85154" ///
| substr(diag,1,5)=="85155" ///
| substr(diag,1,5)=="85156" ///
| substr(diag,1,5)=="85159" ///
| substr(diag,1,5)=="85160" ///
| substr(diag,1,5)=="85161" ///
| substr(diag,1,5)=="85162" ///
| substr(diag,1,5)=="85163" ///
| substr(diag,1,5)=="85164" ///
| substr(diag,1,5)=="85165" ///
| substr(diag,1,5)=="85166" ///
| substr(diag,1,5)=="85169" ///
| substr(diag,1,5)=="85170" ///
| substr(diag,1,5)=="85171" ///
| substr(diag,1,5)=="85172" ///
| substr(diag,1,5)=="85173" ///
| substr(diag,1,5)=="85174" ///
| substr(diag,1,5)=="85175" ///
| substr(diag,1,5)=="85176" ///
| substr(diag,1,5)=="85179" ///
| substr(diag,1,5)=="85180" ///
| substr(diag,1,5)=="85181" ///
| substr(diag,1,5)=="85182" ///
| substr(diag,1,5)=="85183" ///
| substr(diag,1,5)=="85184" ///
| substr(diag,1,5)=="85185" ///
| substr(diag,1,5)=="85186" ///
| substr(diag,1,5)=="85189" ///
| substr(diag,1,5)=="85190" ///
| substr(diag,1,5)=="85191" ///
| substr(diag,1,5)=="85192" ///
| substr(diag,1,5)=="85193" ///
| substr(diag,1,5)=="85194" ///
| substr(diag,1,5)=="85195" ///
| substr(diag,1,5)=="85196" ///
| substr(diag,1,5)=="85199" ///
| substr(diag,1,5)=="85200" ///
| substr(diag,1,5)=="85201" ///
| substr(diag,1,5)=="85202" ///
| substr(diag,1,5)=="85203" ///
| substr(diag,1,5)=="85204" ///
| substr(diag,1,5)=="85205" ///
| substr(diag,1,5)=="85206" ///
| substr(diag,1,5)=="85209" ///
| substr(diag,1,5)=="85210" ///
| substr(diag,1,5)=="85211" ///
| substr(diag,1,5)=="85212" ///
| substr(diag,1,5)=="85213" ///
| substr(diag,1,5)=="85214" ///
| substr(diag,1,5)=="85215" ///
| substr(diag,1,5)=="85216" ///
| substr(diag,1,5)=="85219" ///
| substr(diag,1,5)=="85220" ///
| substr(diag,1,5)=="85221" ///
| substr(diag,1,5)=="85222" ///
| substr(diag,1,5)=="85223" ///
| substr(diag,1,5)=="85224" ///
| substr(diag,1,5)=="85225" ///
| substr(diag,1,5)=="85226" ///
| substr(diag,1,5)=="85229" ///
| substr(diag,1,5)=="85230" ///
| substr(diag,1,5)=="85231" ///
| substr(diag,1,5)=="85232" ///
| substr(diag,1,5)=="85233" ///
| substr(diag,1,5)=="85234" ///
| substr(diag,1,5)=="85235" ///
| substr(diag,1,5)=="85236" ///
| substr(diag,1,5)=="85239" ///
| substr(diag,1,5)=="85240" ///
| substr(diag,1,5)=="85241" ///
| substr(diag,1,5)=="85242" ///
| substr(diag,1,5)=="85243" ///
| substr(diag,1,5)=="85244" ///
| substr(diag,1,5)=="85245" ///
| substr(diag,1,5)=="85246" ///
| substr(diag,1,5)=="85249" ///
| substr(diag,1,5)=="85250" ///
| substr(diag,1,5)=="85251" ///
| substr(diag,1,5)=="85252"


replace trauma=1 if  substr(diag,1,5)=="85253" ///
| substr(diag,1,5)=="85254" ///
| substr(diag,1,5)=="85255" ///
| substr(diag,1,5)=="85256" ///
| substr(diag,1,5)=="85259" ///
| substr(diag,1,5)=="85300" ///
| substr(diag,1,5)=="85301" ///
| substr(diag,1,5)=="85302" ///
| substr(diag,1,5)=="85303" ///
| substr(diag,1,5)=="85304" ///
| substr(diag,1,5)=="85305" ///
| substr(diag,1,5)=="85306" ///
| substr(diag,1,5)=="85309" ///
| substr(diag,1,5)=="85310" ///
| substr(diag,1,5)=="85311" ///
| substr(diag,1,5)=="85312" ///
| substr(diag,1,5)=="85313" ///
| substr(diag,1,5)=="85314" ///
| substr(diag,1,5)=="85315" ///
| substr(diag,1,5)=="85316" ///
| substr(diag,1,5)=="85319" ///
| substr(diag,1,5)=="85400" ///
| substr(diag,1,5)=="85401" ///
| substr(diag,1,5)=="85402" ///
| substr(diag,1,5)=="85403" ///
| substr(diag,1,5)=="85404" ///
| substr(diag,1,5)=="85405" ///
| substr(diag,1,5)=="85406" ///
| substr(diag,1,5)=="85409" ///
| substr(diag,1,5)=="85410" ///
| substr(diag,1,5)=="85411" ///
| substr(diag,1,5)=="85412" ///
| substr(diag,1,5)=="85413" ///
| substr(diag,1,5)=="85414" ///
| substr(diag,1,5)=="85415" ///
| substr(diag,1,5)=="85416" ///
| substr(diag,1,5)=="85419" ///
| substr(diag,1,4)=="8600" ///
| substr(diag,1,4)=="8601" ///
| substr(diag,1,4)=="8602" ///
| substr(diag,1,4)=="8603" ///
| substr(diag,1,4)=="8604" ///
| substr(diag,1,4)=="8605" ///
| substr(diag,1,5)=="86100" ///
| substr(diag,1,5)=="86101" ///
| substr(diag,1,5)=="86102" ///
| substr(diag,1,5)=="86103" ///
| substr(diag,1,5)=="86110" ///
| substr(diag,1,5)=="86111" ///
| substr(diag,1,5)=="86112" ///
| substr(diag,1,5)=="86113" ///
| substr(diag,1,5)=="86120" ///
| substr(diag,1,5)=="86121" ///
| substr(diag,1,5)=="86122" ///
| substr(diag,1,5)=="86130" ///
| substr(diag,1,5)=="86131" ///
| substr(diag,1,5)=="86132" ///
| substr(diag,1,4)=="8620" ///
| substr(diag,1,4)=="8621" ///
| substr(diag,1,5)=="86221" ///
| substr(diag,1,5)=="86222" ///
| substr(diag,1,5)=="86229" ///
| substr(diag,1,5)=="86231" ///
| substr(diag,1,5)=="86232" ///
| substr(diag,1,5)=="86239" ///
| substr(diag,1,4)=="8628" ///
| substr(diag,1,4)=="8629" ///
| substr(diag,1,4)=="8630" ///
| substr(diag,1,4)=="8631" ///
| substr(diag,1,5)=="86320" ///
| substr(diag,1,5)=="86321" ///
| substr(diag,1,5)=="86329" ///
| substr(diag,1,5)=="86330" ///
| substr(diag,1,5)=="86331" ///
| substr(diag,1,5)=="86339" ///
| substr(diag,1,5)=="86340" ///
| substr(diag,1,5)=="86341" ///
| substr(diag,1,5)=="86342" ///
| substr(diag,1,5)=="86343" ///
| substr(diag,1,5)=="86344" ///
| substr(diag,1,5)=="86345" ///
| substr(diag,1,5)=="86346" ///
| substr(diag,1,5)=="86349" ///
| substr(diag,1,5)=="86350" ///
| substr(diag,1,5)=="86351" ///
| substr(diag,1,5)=="86352" ///
| substr(diag,1,5)=="86353" ///
| substr(diag,1,5)=="86354" ///
| substr(diag,1,5)=="86355" ///
| substr(diag,1,5)=="86356" ///
| substr(diag,1,5)=="86359" ///
| substr(diag,1,5)=="86380" ///
| substr(diag,1,5)=="86381" ///
| substr(diag,1,5)=="86382" ///
| substr(diag,1,5)=="86383" ///
| substr(diag,1,5)=="86384" ///
| substr(diag,1,5)=="86385" ///
| substr(diag,1,5)=="86389" ///
| substr(diag,1,5)=="86390" ///
| substr(diag,1,5)=="86391" ///
| substr(diag,1,5)=="86392" ///
| substr(diag,1,5)=="86393" ///
| substr(diag,1,5)=="86394" ///
| substr(diag,1,5)=="86395" ///
| substr(diag,1,5)=="86399" ///
| substr(diag,1,5)=="86400" ///
| substr(diag,1,5)=="86401" ///
| substr(diag,1,5)=="86402" ///
| substr(diag,1,5)=="86403" ///
| substr(diag,1,5)=="86404" ///
| substr(diag,1,5)=="86405" ///
| substr(diag,1,5)=="86409" ///
| substr(diag,1,5)=="86410" ///
| substr(diag,1,5)=="86411" ///
| substr(diag,1,5)=="86412" ///
| substr(diag,1,5)=="86413" ///
| substr(diag,1,5)=="86414" ///
| substr(diag,1,5)=="86415" ///
| substr(diag,1,5)=="86419" ///
| substr(diag,1,5)=="86500" ///
| substr(diag,1,5)=="86501" 


replace trauma=1 if  substr(diag,1,5)=="86502" ///
| substr(diag,1,5)=="86503" ///
| substr(diag,1,5)=="86504" ///
| substr(diag,1,5)=="86509" ///
| substr(diag,1,5)=="86510" ///
| substr(diag,1,5)=="86511" ///
| substr(diag,1,5)=="86512" ///
| substr(diag,1,5)=="86513" ///
| substr(diag,1,5)=="86514" ///
| substr(diag,1,5)=="86519" ///
| substr(diag,1,5)=="86600" ///
| substr(diag,1,5)=="86601" ///
| substr(diag,1,5)=="86602" ///
| substr(diag,1,5)=="86603" ///
| substr(diag,1,5)=="86610" ///
| substr(diag,1,5)=="86611" ///
| substr(diag,1,5)=="86612" ///
| substr(diag,1,5)=="86613" ///
| substr(diag,1,4)=="8670" ///
| substr(diag,1,4)=="8671" ///
| substr(diag,1,4)=="8672" ///
| substr(diag,1,4)=="8673" ///
| substr(diag,1,4)=="8674" ///
| substr(diag,1,4)=="8675" ///
| substr(diag,1,4)=="8676" ///
| substr(diag,1,4)=="8677" ///
| substr(diag,1,4)=="8678" ///
| substr(diag,1,4)=="8679" ///
| substr(diag,1,5)=="86800" ///
| substr(diag,1,5)=="86801" ///
| substr(diag,1,5)=="86802" ///
| substr(diag,1,5)=="86803" ///
| substr(diag,1,5)=="86804" ///
| substr(diag,1,5)=="86809" ///
| substr(diag,1,5)=="86810" ///
| substr(diag,1,5)=="86811" ///
| substr(diag,1,5)=="86812" ///
| substr(diag,1,5)=="86813" ///
| substr(diag,1,5)=="86814" ///
| substr(diag,1,5)=="86819" ///
| substr(diag,1,4)=="8690" ///
| substr(diag,1,4)=="8691" ///
| substr(diag,1,4)=="8700" ///
| substr(diag,1,4)=="8701" ///
| substr(diag,1,4)=="8702" ///
| substr(diag,1,4)=="8703" ///
| substr(diag,1,4)=="8704" ///
| substr(diag,1,4)=="8708" ///
| substr(diag,1,4)=="8709" ///
| substr(diag,1,4)=="8710" ///
| substr(diag,1,4)=="8711" ///
| substr(diag,1,4)=="8712" ///
| substr(diag,1,4)=="8713" ///
| substr(diag,1,4)=="8714" ///
| substr(diag,1,4)=="8715" ///
| substr(diag,1,4)=="8716" ///
| substr(diag,1,4)=="8717" ///
| substr(diag,1,4)=="8719" ///
| substr(diag,1,5)=="87200" ///
| substr(diag,1,5)=="87201" ///
| substr(diag,1,5)=="87202" ///
| substr(diag,1,5)=="87210" ///
| substr(diag,1,5)=="87211" ///
| substr(diag,1,5)=="87212" ///
| substr(diag,1,5)=="87261" ///
| substr(diag,1,5)=="87262" ///
| substr(diag,1,5)=="87263" ///
| substr(diag,1,5)=="87264" ///
| substr(diag,1,5)=="87269" ///
| substr(diag,1,5)=="87271" ///
| substr(diag,1,5)=="87272" ///
| substr(diag,1,5)=="87273" ///
| substr(diag,1,5)=="87274" ///
| substr(diag,1,5)=="87279" ///
| substr(diag,1,4)=="8728" ///
| substr(diag,1,4)=="8729" ///
| substr(diag,1,4)=="8730" ///
| substr(diag,1,4)=="8731" ///
| substr(diag,1,5)=="87320" ///
| substr(diag,1,5)=="87321" ///
| substr(diag,1,5)=="87322" ///
| substr(diag,1,5)=="87323" ///
| substr(diag,1,5)=="87329" ///
| substr(diag,1,5)=="87330" ///
| substr(diag,1,5)=="87331" ///
| substr(diag,1,5)=="87332" ///
| substr(diag,1,5)=="87333" ///
| substr(diag,1,5)=="87339" ///
| substr(diag,1,5)=="87340" ///
| substr(diag,1,5)=="87341" ///
| substr(diag,1,5)=="87342" ///
| substr(diag,1,5)=="87343" ///
| substr(diag,1,5)=="87344" ///
| substr(diag,1,5)=="87349" ///
| substr(diag,1,5)=="87350" ///
| substr(diag,1,5)=="87351" ///
| substr(diag,1,5)=="87352" ///
| substr(diag,1,5)=="87353" ///
| substr(diag,1,5)=="87354" ///
| substr(diag,1,5)=="87359" ///
| substr(diag,1,5)=="87360" ///
| substr(diag,1,5)=="87361" ///
| substr(diag,1,5)=="87362" ///
| substr(diag,1,5)=="87363" ///
| substr(diag,1,5)=="87364" ///
| substr(diag,1,5)=="87365" ///
| substr(diag,1,5)=="87369" ///
| substr(diag,1,5)=="87370" ///
| substr(diag,1,5)=="87371" ///
| substr(diag,1,5)=="87372" ///
| substr(diag,1,5)=="87373" ///
| substr(diag,1,5)=="87374" ///
| substr(diag,1,5)=="87375" ///
| substr(diag,1,5)=="87379" ///
| substr(diag,1,4)=="8738" ///
| substr(diag,1,4)=="8739" ///
| substr(diag,1,5)=="87400" ///
| substr(diag,1,5)=="87401" ///
| substr(diag,1,5)=="87402" ///
| substr(diag,1,5)=="87410" ///
| substr(diag,1,5)=="87411" 


replace trauma=1 if  substr(diag,1,5)=="87412" ///
| substr(diag,1,4)=="8742" ///
| substr(diag,1,4)=="8743" ///
| substr(diag,1,4)=="8744" ///
| substr(diag,1,4)=="8745" ///
| substr(diag,1,4)=="8748" ///
| substr(diag,1,4)=="8749" ///
| substr(diag,1,4)=="8750" ///
| substr(diag,1,4)=="8751" ///
| substr(diag,1,4)=="8760" ///
| substr(diag,1,4)=="8761" ///
| substr(diag,1,4)=="8770" ///
| substr(diag,1,4)=="8771" ///
| substr(diag,1,4)=="8780" ///
| substr(diag,1,4)=="8781" ///
| substr(diag,1,4)=="8782" ///
| substr(diag,1,4)=="8783" ///
| substr(diag,1,4)=="8784" ///
| substr(diag,1,4)=="8785" ///
| substr(diag,1,4)=="8786" ///
| substr(diag,1,4)=="8787" ///
| substr(diag,1,4)=="8788" ///
| substr(diag,1,4)=="8789" ///
| substr(diag,1,4)=="8790" ///
| substr(diag,1,4)=="8791" ///
| substr(diag,1,4)=="8792" ///
| substr(diag,1,4)=="8793" ///
| substr(diag,1,4)=="8794" ///
| substr(diag,1,4)=="8795" ///
| substr(diag,1,4)=="8796" ///
| substr(diag,1,4)=="8797" ///
| substr(diag,1,4)=="8798" ///
| substr(diag,1,4)=="8799" ///
| substr(diag,1,5)=="88000" ///
| substr(diag,1,5)=="88001" ///
| substr(diag,1,5)=="88002" ///
| substr(diag,1,5)=="88003" ///
| substr(diag,1,5)=="88009" ///
| substr(diag,1,5)=="88010" ///
| substr(diag,1,5)=="88011" ///
| substr(diag,1,5)=="88012" ///
| substr(diag,1,5)=="88013" ///
| substr(diag,1,5)=="88019" ///
| substr(diag,1,5)=="88020" ///
| substr(diag,1,5)=="88021" ///
| substr(diag,1,5)=="88022" ///
| substr(diag,1,5)=="88023" ///
| substr(diag,1,5)=="88029" ///
| substr(diag,1,5)=="88100" ///
| substr(diag,1,5)=="88101" ///
| substr(diag,1,5)=="88102" ///
| substr(diag,1,5)=="88110" ///
| substr(diag,1,5)=="88111" ///
| substr(diag,1,5)=="88112" ///
| substr(diag,1,5)=="88120" ///
| substr(diag,1,5)=="88121" ///
| substr(diag,1,5)=="88122" ///
| substr(diag,1,4)=="8820" ///
| substr(diag,1,4)=="8821" ///
| substr(diag,1,4)=="8822" ///
| substr(diag,1,4)=="8830" ///
| substr(diag,1,4)=="8831" ///
| substr(diag,1,4)=="8832" ///
| substr(diag,1,4)=="8840" ///
| substr(diag,1,4)=="8841" ///
| substr(diag,1,4)=="8842" ///
| substr(diag,1,4)=="8850" ///
| substr(diag,1,4)=="8851" ///
| substr(diag,1,4)=="8860" ///
| substr(diag,1,4)=="8861" ///
| substr(diag,1,4)=="8870" ///
| substr(diag,1,4)=="8871" ///
| substr(diag,1,4)=="8872" ///
| substr(diag,1,4)=="8873" ///
| substr(diag,1,4)=="8874" ///
| substr(diag,1,4)=="8875" ///
| substr(diag,1,4)=="8876" ///
| substr(diag,1,4)=="8877" ///
| substr(diag,1,4)=="8900" ///
| substr(diag,1,4)=="8901" ///
| substr(diag,1,4)=="8902" ///
| substr(diag,1,4)=="8910" ///
| substr(diag,1,4)=="8911" ///
| substr(diag,1,4)=="8912" ///
| substr(diag,1,4)=="8920" ///
| substr(diag,1,4)=="8921" ///
| substr(diag,1,4)=="8922" ///
| substr(diag,1,4)=="8930" ///
| substr(diag,1,4)=="8931" ///
| substr(diag,1,4)=="8932" ///
| substr(diag,1,4)=="8940" ///
| substr(diag,1,4)=="8941" ///
| substr(diag,1,4)=="8942" ///
| substr(diag,1,4)=="8950" ///
| substr(diag,1,4)=="8951" ///
| substr(diag,1,4)=="8960" ///
| substr(diag,1,4)=="8961" ///
| substr(diag,1,4)=="8962" ///
| substr(diag,1,4)=="8963" ///
| substr(diag,1,4)=="8970" ///
| substr(diag,1,4)=="8971" ///
| substr(diag,1,4)=="8972" ///
| substr(diag,1,4)=="8973" ///
| substr(diag,1,4)=="8974" ///
| substr(diag,1,4)=="8975" ///
| substr(diag,1,4)=="8976" 


replace trauma=1 if  substr(diag,1,4)=="8977" ///
| substr(diag,1,5)=="90000" ///
| substr(diag,1,5)=="90001" ///
| substr(diag,1,5)=="90002" ///
| substr(diag,1,5)=="90003" ///
| substr(diag,1,4)=="9001" ///
| substr(diag,1,5)=="90081" ///
| substr(diag,1,5)=="90082" ///
| substr(diag,1,5)=="90089" ///
| substr(diag,1,4)=="9009" ///
| substr(diag,1,4)=="9010" ///
| substr(diag,1,4)=="9011" ///
| substr(diag,1,4)=="9012" ///
| substr(diag,1,4)=="9013" ///
| substr(diag,1,5)=="90140" ///
| substr(diag,1,5)=="90141" ///
| substr(diag,1,5)=="90142" ///
| substr(diag,1,5)=="90181" ///
| substr(diag,1,5)=="90182" ///
| substr(diag,1,5)=="90183" ///
| substr(diag,1,5)=="90189" ///
| substr(diag,1,4)=="9019" ///
| substr(diag,1,4)=="9020" ///
| substr(diag,1,5)=="90210" ///
| substr(diag,1,5)=="90211" ///
| substr(diag,1,5)=="90219" ///
| substr(diag,1,5)=="90220" ///
| substr(diag,1,5)=="90221" ///
| substr(diag,1,5)=="90222" ///
| substr(diag,1,5)=="90223" ///
| substr(diag,1,5)=="90224" ///
| substr(diag,1,5)=="90225" ///
| substr(diag,1,5)=="90226" ///
| substr(diag,1,5)=="90227" ///
| substr(diag,1,5)=="90229" ///
| substr(diag,1,5)=="90231" ///
| substr(diag,1,5)=="90232" ///
| substr(diag,1,5)=="90233" ///
| substr(diag,1,5)=="90234" ///
| substr(diag,1,5)=="90239" ///
| substr(diag,1,5)=="90240" ///
| substr(diag,1,5)=="90241" ///
| substr(diag,1,5)=="90242" ///
| substr(diag,1,5)=="90249" ///
| substr(diag,1,5)=="90250" ///
| substr(diag,1,5)=="90251" ///
| substr(diag,1,5)=="90252" ///
| substr(diag,1,5)=="90253" ///
| substr(diag,1,5)=="90254" ///
| substr(diag,1,5)=="90255" ///
| substr(diag,1,5)=="90256" ///
| substr(diag,1,5)=="90259" ///
| substr(diag,1,5)=="90281" ///
| substr(diag,1,5)=="90282" ///
| substr(diag,1,5)=="90287" ///
| substr(diag,1,5)=="90289" ///
| substr(diag,1,4)=="9029" ///
| substr(diag,1,5)=="90300" ///
| substr(diag,1,5)=="90301" ///
| substr(diag,1,5)=="90302" ///
| substr(diag,1,4)=="9031" ///
| substr(diag,1,4)=="9032" ///
| substr(diag,1,4)=="9033" ///
| substr(diag,1,4)=="9034" ///
| substr(diag,1,4)=="9035" ///
| substr(diag,1,4)=="9038" ///
| substr(diag,1,4)=="9039" ///
| substr(diag,1,4)=="9040" ///
| substr(diag,1,4)=="9041" ///
| substr(diag,1,4)=="9042" ///
| substr(diag,1,4)=="9043" ///
| substr(diag,1,5)=="90440" ///
| substr(diag,1,5)=="90441" ///
| substr(diag,1,5)=="90442" ///
| substr(diag,1,5)=="90450" ///
| substr(diag,1,5)=="90451" ///
| substr(diag,1,5)=="90452" ///
| substr(diag,1,5)=="90453" ///
| substr(diag,1,5)=="90454" ///
| substr(diag,1,4)=="9046" ///
| substr(diag,1,4)=="9047" ///
| substr(diag,1,4)=="9048" ///
| substr(diag,1,4)=="9049" ///
| substr(diag,1,4)=="9100" ///
| substr(diag,1,4)=="9101" ///
| substr(diag,1,4)=="9102" ///
| substr(diag,1,4)=="9103" ///
| substr(diag,1,4)=="9104" ///
| substr(diag,1,4)=="9105" ///
| substr(diag,1,4)=="9106" ///
| substr(diag,1,4)=="9107" ///
| substr(diag,1,4)=="9108" ///
| substr(diag,1,4)=="9109" ///
| substr(diag,1,4)=="9110" ///
| substr(diag,1,4)=="9111" ///
| substr(diag,1,4)=="9112" ///
| substr(diag,1,4)=="9113" ///
| substr(diag,1,4)=="9114" ///
| substr(diag,1,4)=="9115" ///
| substr(diag,1,4)=="9116" ///
| substr(diag,1,4)=="9117" ///
| substr(diag,1,4)=="9118" ///
| substr(diag,1,4)=="9119" ///
| substr(diag,1,4)=="9120" ///
| substr(diag,1,4)=="9121" 


replace trauma=1 if  substr(diag,1,4)=="9122" ///
| substr(diag,1,4)=="9123" ///
| substr(diag,1,4)=="9124" ///
| substr(diag,1,4)=="9125" ///
| substr(diag,1,4)=="9126" ///
| substr(diag,1,4)=="9127" ///
| substr(diag,1,4)=="9128" ///
| substr(diag,1,4)=="9129" ///
| substr(diag,1,4)=="9130" ///
| substr(diag,1,4)=="9131" ///
| substr(diag,1,4)=="9132" ///
| substr(diag,1,4)=="9133" ///
| substr(diag,1,4)=="9134" ///
| substr(diag,1,4)=="9135" ///
| substr(diag,1,4)=="9136" ///
| substr(diag,1,4)=="9137" ///
| substr(diag,1,4)=="9138" ///
| substr(diag,1,4)=="9139" ///
| substr(diag,1,4)=="9140" ///
| substr(diag,1,4)=="9141" ///
| substr(diag,1,4)=="9142" ///
| substr(diag,1,4)=="9143" ///
| substr(diag,1,4)=="9144" ///
| substr(diag,1,4)=="9145" ///
| substr(diag,1,4)=="9146" ///
| substr(diag,1,4)=="9147" ///
| substr(diag,1,4)=="9148" ///
| substr(diag,1,4)=="9149" ///
| substr(diag,1,4)=="9150" ///
| substr(diag,1,4)=="9151" ///
| substr(diag,1,4)=="9152" ///
| substr(diag,1,4)=="9153" ///
| substr(diag,1,4)=="9154" ///
| substr(diag,1,4)=="9155" ///
| substr(diag,1,4)=="9156" ///
| substr(diag,1,4)=="9157" ///
| substr(diag,1,4)=="9158" ///
| substr(diag,1,4)=="9159" ///
| substr(diag,1,4)=="9160" ///
| substr(diag,1,4)=="9161" ///
| substr(diag,1,4)=="9162" ///
| substr(diag,1,4)=="9163" ///
| substr(diag,1,4)=="9164" ///
| substr(diag,1,4)=="9165" ///
| substr(diag,1,4)=="9166" ///
| substr(diag,1,4)=="9167" ///
| substr(diag,1,4)=="9168" ///
| substr(diag,1,4)=="9169" ///
| substr(diag,1,4)=="9170" ///
| substr(diag,1,4)=="9171" ///
| substr(diag,1,4)=="9172" ///
| substr(diag,1,4)=="9173" ///
| substr(diag,1,4)=="9174" ///
| substr(diag,1,4)=="9175" ///
| substr(diag,1,4)=="9176" ///
| substr(diag,1,4)=="9177" ///
| substr(diag,1,4)=="9178" ///
| substr(diag,1,4)=="9179" ///
| substr(diag,1,4)=="9180" ///
| substr(diag,1,4)=="9181" ///
| substr(diag,1,4)=="9182" ///
| substr(diag,1,4)=="9189" ///
| substr(diag,1,4)=="9190" ///
| substr(diag,1,4)=="9191" ///
| substr(diag,1,4)=="9192" ///
| substr(diag,1,4)=="9193" ///
| substr(diag,1,4)=="9194" ///
| substr(diag,1,4)=="9195" ///
| substr(diag,1,4)=="9196" ///
| substr(diag,1,4)=="9197" ///
| substr(diag,1,4)=="9198" ///
| substr(diag,1,4)=="9199" ///
| substr(diag,1,3)=="920" ///
| substr(diag,1,4)=="9210" ///
| substr(diag,1,4)=="9211" ///
| substr(diag,1,4)=="9212" ///
| substr(diag,1,4)=="9213" ///
| substr(diag,1,4)=="9219" ///
| substr(diag,1,4)=="9220" ///
| substr(diag,1,4)=="9221" ///
| substr(diag,1,4)=="9222" ///
| substr(diag,1,5)=="92231" ///
| substr(diag,1,5)=="92232" ///
| substr(diag,1,5)=="92233" ///
| substr(diag,1,4)=="9224" ///
| substr(diag,1,4)=="9228" ///
| substr(diag,1,4)=="9229" ///
| substr(diag,1,5)=="92300" ///
| substr(diag,1,5)=="92301" ///
| substr(diag,1,5)=="92302" ///
| substr(diag,1,5)=="92303" ///
| substr(diag,1,5)=="92309" ///
| substr(diag,1,5)=="92310" ///
| substr(diag,1,5)=="92311" ///
| substr(diag,1,5)=="92320" ///
| substr(diag,1,5)=="92321" ///
| substr(diag,1,4)=="9233" ///
| substr(diag,1,4)=="9238" ///
| substr(diag,1,4)=="9239" ///
| substr(diag,1,5)=="92400" ///
| substr(diag,1,5)=="92401" ///
| substr(diag,1,5)=="92410" ///
| substr(diag,1,5)=="92411" ///
| substr(diag,1,5)=="92420" ///
| substr(diag,1,5)=="92421" ///
| substr(diag,1,4)=="9243" ///
| substr(diag,1,4)=="9244" 


replace trauma=1 if substr(diag,1,4)=="9245" ///
| substr(diag,1,4)=="9248" ///
| substr(diag,1,4)=="9249" ///
| substr(diag,1,4)=="9251" ///
| substr(diag,1,4)=="9252" ///
| substr(diag,1,4)=="9260" ///
| substr(diag,1,5)=="92611" ///
| substr(diag,1,5)=="92612" ///
| substr(diag,1,5)=="92619" ///
| substr(diag,1,4)=="9268" ///
| substr(diag,1,4)=="9269" ///
| substr(diag,1,5)=="92700" ///
| substr(diag,1,5)=="92701" ///
| substr(diag,1,5)=="92702" ///
| substr(diag,1,5)=="92703" ///
| substr(diag,1,5)=="92709" ///
| substr(diag,1,5)=="92710" ///
| substr(diag,1,5)=="92711" ///
| substr(diag,1,5)=="92720" ///
| substr(diag,1,5)=="92721" ///
| substr(diag,1,4)=="9273" ///
| substr(diag,1,4)=="9278" ///
| substr(diag,1,4)=="9279" ///
| substr(diag,1,5)=="92800" ///
| substr(diag,1,5)=="92801" ///
| substr(diag,1,5)=="92810" ///
| substr(diag,1,5)=="92811" ///
| substr(diag,1,5)=="92820" ///
| substr(diag,1,5)=="92821" ///
| substr(diag,1,4)=="9283" ///
| substr(diag,1,4)=="9288" ///
| substr(diag,1,4)=="9289" ///
| substr(diag,1,4)=="9290" ///
| substr(diag,1,4)=="9299" ///
| substr(diag,1,4)=="9400" ///
| substr(diag,1,4)=="9401" ///
| substr(diag,1,4)=="9402" ///
| substr(diag,1,4)=="9403" ///
| substr(diag,1,4)=="9404" ///
| substr(diag,1,4)=="9405" ///
| substr(diag,1,4)=="9409" ///
| substr(diag,1,5)=="94100" ///
| substr(diag,1,5)=="94101" ///
| substr(diag,1,5)=="94102" ///
| substr(diag,1,5)=="94103" ///
| substr(diag,1,5)=="94104" ///
| substr(diag,1,5)=="94105" ///
| substr(diag,1,5)=="94106" ///
| substr(diag,1,5)=="94107" ///
| substr(diag,1,5)=="94108" ///
| substr(diag,1,5)=="94109" ///
| substr(diag,1,5)=="94110" ///
| substr(diag,1,5)=="94111" ///
| substr(diag,1,5)=="94112" ///
| substr(diag,1,5)=="94113" ///
| substr(diag,1,5)=="94114" ///
| substr(diag,1,5)=="94115" ///
| substr(diag,1,5)=="94116" ///
| substr(diag,1,5)=="94117" ///
| substr(diag,1,5)=="94118" ///
| substr(diag,1,5)=="94119" ///
| substr(diag,1,5)=="94120" ///
| substr(diag,1,5)=="94121" ///
| substr(diag,1,5)=="94122" ///
| substr(diag,1,5)=="94123" ///
| substr(diag,1,5)=="94124" ///
| substr(diag,1,5)=="94125" ///
| substr(diag,1,5)=="94126" ///
| substr(diag,1,5)=="94127" ///
| substr(diag,1,5)=="94128" ///
| substr(diag,1,5)=="94129" ///
| substr(diag,1,5)=="94130" ///
| substr(diag,1,5)=="94131" ///
| substr(diag,1,5)=="94132" ///
| substr(diag,1,5)=="94133" ///
| substr(diag,1,5)=="94134" ///
| substr(diag,1,5)=="94135" ///
| substr(diag,1,5)=="94136" ///
| substr(diag,1,5)=="94137" ///
| substr(diag,1,5)=="94138" ///
| substr(diag,1,5)=="94139" ///
| substr(diag,1,5)=="94140" ///
| substr(diag,1,5)=="94141" 


replace trauma=1 if  substr(diag,1,5)=="94142" ///
| substr(diag,1,5)=="94143" ///
| substr(diag,1,5)=="94144" ///
| substr(diag,1,5)=="94145" ///
| substr(diag,1,5)=="94146" ///
| substr(diag,1,5)=="94147" ///
| substr(diag,1,5)=="94148" ///
| substr(diag,1,5)=="94149" ///
| substr(diag,1,5)=="94150" ///
| substr(diag,1,5)=="94151" ///
| substr(diag,1,5)=="94152" ///
| substr(diag,1,5)=="94153" ///
| substr(diag,1,5)=="94154" ///
| substr(diag,1,5)=="94155" ///
| substr(diag,1,5)=="94156" ///
| substr(diag,1,5)=="94157" ///
| substr(diag,1,5)=="94158" ///
| substr(diag,1,5)=="94159" ///
| substr(diag,1,5)=="94200" ///
| substr(diag,1,5)=="94201" ///
| substr(diag,1,5)=="94202" ///
| substr(diag,1,5)=="94203" ///
| substr(diag,1,5)=="94204" ///
| substr(diag,1,5)=="94205" ///
| substr(diag,1,5)=="94209" ///
| substr(diag,1,5)=="94210" ///
| substr(diag,1,5)=="94211" ///
| substr(diag,1,5)=="94212" ///
| substr(diag,1,5)=="94213" ///
| substr(diag,1,5)=="94214" ///
| substr(diag,1,5)=="94215" ///
| substr(diag,1,5)=="94219" ///
| substr(diag,1,5)=="94220" ///
| substr(diag,1,5)=="94221" ///
| substr(diag,1,5)=="94222" ///
| substr(diag,1,5)=="94223" ///
| substr(diag,1,5)=="94224" ///
| substr(diag,1,5)=="94225" ///
| substr(diag,1,5)=="94229" ///
| substr(diag,1,5)=="94230" ///
| substr(diag,1,5)=="94231" ///
| substr(diag,1,5)=="94232" ///
| substr(diag,1,5)=="94233" ///
| substr(diag,1,5)=="94234" ///
| substr(diag,1,5)=="94235" ///
| substr(diag,1,5)=="94239" ///
| substr(diag,1,5)=="94240" ///
| substr(diag,1,5)=="94241" ///
| substr(diag,1,5)=="94242" ///
| substr(diag,1,5)=="94243" ///
| substr(diag,1,5)=="94244" ///
| substr(diag,1,5)=="94245" ///
| substr(diag,1,5)=="94249" ///
| substr(diag,1,5)=="94250" ///
| substr(diag,1,5)=="94251" ///
| substr(diag,1,5)=="94252" ///
| substr(diag,1,5)=="94253" ///
| substr(diag,1,5)=="94254" ///
| substr(diag,1,5)=="94255" ///
| substr(diag,1,5)=="94259" ///
| substr(diag,1,5)=="94300" ///
| substr(diag,1,5)=="94301" ///
| substr(diag,1,5)=="94302" ///
| substr(diag,1,5)=="94303" ///
| substr(diag,1,5)=="94304" ///
| substr(diag,1,5)=="94305" ///
| substr(diag,1,5)=="94306" ///
| substr(diag,1,5)=="94309" ///
| substr(diag,1,5)=="94310" ///
| substr(diag,1,5)=="94311" ///
| substr(diag,1,5)=="94312" ///
| substr(diag,1,5)=="94313" ///
| substr(diag,1,5)=="94314" ///
| substr(diag,1,5)=="94315" ///
| substr(diag,1,5)=="94316" ///
| substr(diag,1,5)=="94319" ///
| substr(diag,1,5)=="94320" ///
| substr(diag,1,5)=="94321" ///
| substr(diag,1,5)=="94322" ///
| substr(diag,1,5)=="94323" ///
| substr(diag,1,5)=="94324" ///
| substr(diag,1,5)=="94325" ///
| substr(diag,1,5)=="94326" ///
| substr(diag,1,5)=="94329" ///
| substr(diag,1,5)=="94330" ///
| substr(diag,1,5)=="94331" ///
| substr(diag,1,5)=="94332" ///
| substr(diag,1,5)=="94333" ///
| substr(diag,1,5)=="94334" ///
| substr(diag,1,5)=="94335" ///
| substr(diag,1,5)=="94336" ///
| substr(diag,1,5)=="94339" ///
| substr(diag,1,5)=="94340" ///
| substr(diag,1,5)=="94341" ///
| substr(diag,1,5)=="94342" ///
| substr(diag,1,5)=="94343" ///
| substr(diag,1,5)=="94344" ///
| substr(diag,1,5)=="94345" ///
| substr(diag,1,5)=="94346" ///
| substr(diag,1,5)=="94349" ///
| substr(diag,1,5)=="94350" ///
| substr(diag,1,5)=="94351" ///
| substr(diag,1,5)=="94352" ///
| substr(diag,1,5)=="94353" ///
| substr(diag,1,5)=="94354" ///
| substr(diag,1,5)=="94355" ///
| substr(diag,1,5)=="94356" ///
| substr(diag,1,5)=="94359" ///
| substr(diag,1,5)=="94400" ///
| substr(diag,1,5)=="94401" ///
| substr(diag,1,5)=="94402" ///
| substr(diag,1,5)=="94403" ///
| substr(diag,1,5)=="94404" ///
| substr(diag,1,5)=="94405" ///
| substr(diag,1,5)=="94406" ///
| substr(diag,1,5)=="94407" ///
| substr(diag,1,5)=="94408" ///
| substr(diag,1,5)=="94410" ///
| substr(diag,1,5)=="94411" ///
| substr(diag,1,5)=="94412" ///
| substr(diag,1,5)=="94413" ///
| substr(diag,1,5)=="94414" ///
| substr(diag,1,5)=="94415" ///
| substr(diag,1,5)=="94416" ///
| substr(diag,1,5)=="94417" ///
| substr(diag,1,5)=="94418" ///
| substr(diag,1,5)=="94420" ///
| substr(diag,1,5)=="94421" ///
| substr(diag,1,5)=="94422" 


replace trauma=1 if  substr(diag,1,5)=="94423" ///
| substr(diag,1,5)=="94424" ///
| substr(diag,1,5)=="94425" ///
| substr(diag,1,5)=="94426" ///
| substr(diag,1,5)=="94427" ///
| substr(diag,1,5)=="94428" ///
| substr(diag,1,5)=="94430" ///
| substr(diag,1,5)=="94431" ///
| substr(diag,1,5)=="94432" ///
| substr(diag,1,5)=="94433" ///
| substr(diag,1,5)=="94434" ///
| substr(diag,1,5)=="94435" ///
| substr(diag,1,5)=="94436" ///
| substr(diag,1,5)=="94437" ///
| substr(diag,1,5)=="94438" ///
| substr(diag,1,5)=="94440" ///
| substr(diag,1,5)=="94441" ///
| substr(diag,1,5)=="94442" ///
| substr(diag,1,5)=="94443" ///
| substr(diag,1,5)=="94444" ///
| substr(diag,1,5)=="94445" ///
| substr(diag,1,5)=="94446" ///
| substr(diag,1,5)=="94447" ///
| substr(diag,1,5)=="94448" ///
| substr(diag,1,5)=="94450" ///
| substr(diag,1,5)=="94451" ///
| substr(diag,1,5)=="94452" ///
| substr(diag,1,5)=="94453" ///
| substr(diag,1,5)=="94454" ///
| substr(diag,1,5)=="94455" ///
| substr(diag,1,5)=="94456" ///
| substr(diag,1,5)=="94457" ///
| substr(diag,1,5)=="94458" ///
| substr(diag,1,5)=="94500" ///
| substr(diag,1,5)=="94501" ///
| substr(diag,1,5)=="94502" ///
| substr(diag,1,5)=="94503" ///
| substr(diag,1,5)=="94504" ///
| substr(diag,1,5)=="94505" ///
| substr(diag,1,5)=="94506" ///
| substr(diag,1,5)=="94509" ///
| substr(diag,1,5)=="94510" ///
| substr(diag,1,5)=="94511" ///
| substr(diag,1,5)=="94512" ///
| substr(diag,1,5)=="94513" ///
| substr(diag,1,5)=="94514" ///
| substr(diag,1,5)=="94515" ///
| substr(diag,1,5)=="94516" ///
| substr(diag,1,5)=="94519" ///
| substr(diag,1,5)=="94520" ///
| substr(diag,1,5)=="94521" ///
| substr(diag,1,5)=="94522" ///
| substr(diag,1,5)=="94523" ///
| substr(diag,1,5)=="94524" ///
| substr(diag,1,5)=="94525" ///
| substr(diag,1,5)=="94526" ///
| substr(diag,1,5)=="94529" ///
| substr(diag,1,5)=="94530" ///
| substr(diag,1,5)=="94531" ///
| substr(diag,1,5)=="94532" ///
| substr(diag,1,5)=="94533" ///
| substr(diag,1,5)=="94534" ///
| substr(diag,1,5)=="94535" ///
| substr(diag,1,5)=="94536" ///
| substr(diag,1,5)=="94539" ///
| substr(diag,1,5)=="94540" ///
| substr(diag,1,5)=="94541" ///
| substr(diag,1,5)=="94542" ///
| substr(diag,1,5)=="94543" ///
| substr(diag,1,5)=="94544" ///
| substr(diag,1,5)=="94545" ///
| substr(diag,1,5)=="94546" ///
| substr(diag,1,5)=="94549" ///
| substr(diag,1,5)=="94550" ///
| substr(diag,1,5)=="94551" ///
| substr(diag,1,5)=="94552" ///
| substr(diag,1,5)=="94553" ///
| substr(diag,1,5)=="94554" ///
| substr(diag,1,5)=="94555" ///
| substr(diag,1,5)=="94556" ///
| substr(diag,1,5)=="94559" ///
| substr(diag,1,4)=="9460" ///
| substr(diag,1,4)=="9461" ///
| substr(diag,1,4)=="9462" ///
| substr(diag,1,4)=="9463" ///
| substr(diag,1,4)=="9464" ///
| substr(diag,1,4)=="9465" ///
| substr(diag,1,4)=="9470" ///
| substr(diag,1,4)=="9471" ///
| substr(diag,1,4)=="9472" ///
| substr(diag,1,4)=="9473" ///
| substr(diag,1,4)=="9474" ///
| substr(diag,1,4)=="9478" ///
| substr(diag,1,4)=="9479" ///
| substr(diag,1,5)=="94800" ///
| substr(diag,1,5)=="94810" ///
| substr(diag,1,5)=="94811" ///
| substr(diag,1,5)=="94820" ///
| substr(diag,1,5)=="94821" ///
| substr(diag,1,5)=="94822" ///
| substr(diag,1,5)=="94830" ///
| substr(diag,1,5)=="94831" ///
| substr(diag,1,5)=="94832" ///
| substr(diag,1,5)=="94833" ///
| substr(diag,1,5)=="94840" ///
| substr(diag,1,5)=="94841" ///
| substr(diag,1,5)=="94842" ///
| substr(diag,1,5)=="94843" ///
| substr(diag,1,5)=="94844" ///
| substr(diag,1,5)=="94850" ///
| substr(diag,1,5)=="94851" ///
| substr(diag,1,5)=="94852" 


replace trauma=1 if  substr(diag,1,5)=="94853" ///
| substr(diag,1,5)=="94854" ///
| substr(diag,1,5)=="94855" ///
| substr(diag,1,5)=="94860" ///
| substr(diag,1,5)=="94861" ///
| substr(diag,1,5)=="94862" ///
| substr(diag,1,5)=="94863" ///
| substr(diag,1,5)=="94864" ///
| substr(diag,1,5)=="94865" ///
| substr(diag,1,5)=="94866" ///
| substr(diag,1,5)=="94870" ///
| substr(diag,1,5)=="94871" ///
| substr(diag,1,5)=="94872" ///
| substr(diag,1,5)=="94873" ///
| substr(diag,1,5)=="94874" ///
| substr(diag,1,5)=="94875" ///
| substr(diag,1,5)=="94876" ///
| substr(diag,1,5)=="94877" ///
| substr(diag,1,5)=="94880" ///
| substr(diag,1,5)=="94881" ///
| substr(diag,1,5)=="94882" ///
| substr(diag,1,5)=="94883" ///
| substr(diag,1,5)=="94884" ///
| substr(diag,1,5)=="94885" ///
| substr(diag,1,5)=="94886" ///
| substr(diag,1,5)=="94887" ///
| substr(diag,1,5)=="94888" ///
| substr(diag,1,5)=="94890" ///
| substr(diag,1,5)=="94891" ///
| substr(diag,1,5)=="94892" ///
| substr(diag,1,5)=="94893" ///
| substr(diag,1,5)=="94894" ///
| substr(diag,1,5)=="94895" ///
| substr(diag,1,5)=="94896" ///
| substr(diag,1,5)=="94897" ///
| substr(diag,1,5)=="94898" ///
| substr(diag,1,5)=="94899" ///
| substr(diag,1,4)=="9490" ///
| substr(diag,1,4)=="9491" ///
| substr(diag,1,4)=="9492" ///
| substr(diag,1,4)=="9493" ///
| substr(diag,1,4)=="9494" ///
| substr(diag,1,4)=="9495" ///
| substr(diag,1,4)=="9500" ///
| substr(diag,1,4)=="9501" ///
| substr(diag,1,4)=="9502" ///
| substr(diag,1,4)=="9503" ///
| substr(diag,1,4)=="9509" ///
| substr(diag,1,4)=="9510" ///
| substr(diag,1,4)=="9511" ///
| substr(diag,1,4)=="9512" ///
| substr(diag,1,4)=="9513" ///
| substr(diag,1,4)=="9514" ///
| substr(diag,1,4)=="9515" ///
| substr(diag,1,4)=="9516" ///
| substr(diag,1,4)=="9517" ///
| substr(diag,1,4)=="9518" ///
| substr(diag,1,4)=="9519" ///
| substr(diag,1,5)=="95200" ///
| substr(diag,1,5)=="95201" ///
| substr(diag,1,5)=="95202" ///
| substr(diag,1,5)=="95203" ///
| substr(diag,1,5)=="95204" ///
| substr(diag,1,5)=="95205" ///
| substr(diag,1,5)=="95206" ///
| substr(diag,1,5)=="95207" ///
| substr(diag,1,5)=="95208" ///
| substr(diag,1,5)=="95209" ///
| substr(diag,1,5)=="95210" ///
| substr(diag,1,5)=="95211" ///
| substr(diag,1,5)=="95212" ///
| substr(diag,1,5)=="95213" ///
| substr(diag,1,5)=="95214" ///
| substr(diag,1,5)=="95215" ///
| substr(diag,1,5)=="95216" ///
| substr(diag,1,5)=="95217" ///
| substr(diag,1,5)=="95218" ///
| substr(diag,1,5)=="95219" ///
| substr(diag,1,4)=="9522" ///
| substr(diag,1,4)=="9523" ///
| substr(diag,1,4)=="9524" ///
| substr(diag,1,4)=="9528" ///
| substr(diag,1,4)=="9529" ///
| substr(diag,1,4)=="9530" ///
| substr(diag,1,4)=="9531" ///
| substr(diag,1,4)=="9532" ///
| substr(diag,1,4)=="9533" ///
| substr(diag,1,4)=="9534" ///
| substr(diag,1,4)=="9535" ///
| substr(diag,1,4)=="9538" ///
| substr(diag,1,4)=="9539" ///
| substr(diag,1,4)=="9540" ///
| substr(diag,1,4)=="9541" ///
| substr(diag,1,4)=="9548" ///
| substr(diag,1,4)=="9549" ///
| substr(diag,1,4)=="9550" ///
| substr(diag,1,4)=="9551" ///
| substr(diag,1,4)=="9552" ///
| substr(diag,1,4)=="9553" ///
| substr(diag,1,4)=="9554" ///
| substr(diag,1,4)=="9555" ///
| substr(diag,1,4)=="9556" ///
| substr(diag,1,4)=="9557" ///
| substr(diag,1,4)=="9558" ///
| substr(diag,1,4)=="9559" ///
| substr(diag,1,4)=="9560" ///
| substr(diag,1,4)=="9561" ///
| substr(diag,1,4)=="9562" ///
| substr(diag,1,4)=="9563" ///
| substr(diag,1,4)=="9564" ///
| substr(diag,1,4)=="9565" ///
| substr(diag,1,4)=="9568" ///
| substr(diag,1,4)=="9569" ///
| substr(diag,1,4)=="9570" ///
| substr(diag,1,4)=="9571" ///
| substr(diag,1,4)=="9578" ///
| substr(diag,1,4)=="9579" ///
| substr(diag,1,5)=="95901" ///
| substr(diag,1,5)=="95909" ///
| substr(diag,1,4)=="9591" ///
| substr(diag,1,5)=="95911" ///
| substr(diag,1,5)=="95912" ///
| substr(diag,1,5)=="95913" ///
| substr(diag,1,5)=="95914" ///
| substr(diag,1,5)=="95919" ///
| substr(diag,1,4)=="9592" ///
| substr(diag,1,4)=="9593" ///
| substr(diag,1,4)=="9594" ///
| substr(diag,1,4)=="9595" ///
| substr(diag,1,4)=="9596" ///
| substr(diag,1,4)=="9597" ///
| substr(diag,1,4)=="9598" ///
| substr(diag,1,4)=="9599"


//tbi
gen tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"0") & ///
inlist(substr(diag,3,1),"0","1","3","4")

replace tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"0","1","2","3","4")

replace tbi=trauma==1 & diag=="95901"

replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"0","1","8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"9") ///
 & inlist(substr(diag,5,1),"1")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S06") & ///
inlist(substr(diag,4,1),"0","1","2","3","4","5","6","8","9")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"9") & ///
inlist(substr(diag,5,1),"0")


//motor vehicle crash--V87?
gen vehicle_crash=/*inlist(substr(ecode,1,4),"V890","V892","V894") ///
| inlist(substr(ecode,1,3),"X82","V38","V34","V30","V39","E81","V00","V02","V03") ///
| inlist(substr(ecode,1,3),"V04","V05","V09") ///
| inlist(substr(ecode,1,2),"V6")*/ inlist(substr(ecode,1,3),"V12","V13","V14") | inlist(substr(ecode,1,2),"V2","V3","V4","V5","V6","V7") | (inlist(substr(ecode,1,2),"E8") & inlist(substr(ecode,3,1),"1","2"))

//falls
gen fall=inlist(substr(ecode,1,3),"E88") | inlist(substr(ecode,1,1),"W") & ///
 inlist(substr(ecode,2,1),"0","1")

//get complications 
//note--only have ICD-9, need to get 10 from Zara at some point
gen ind_comp_intraop=inlist(substr(diag,1,3),"900","901","902","903","904") & num>1
replace ind_comp_intraop=inlist(substr(diag,1,4),"4582","5121","9982","9991") & num>1
replace ind_comp_intraop=inlist(substr(diag,1,5),"41511") & num>1

gen ind_comp_cardiac=inlist(substr(diag,1,3),"410","411") & num>1
replace ind_comp_cardiac=inlist(substr(diag,1,4),"4275","9971","4294") & num>1

gen ind_comp_resp=inlist(substr(diag,1,3),"480","481","482","483","485","486","514") & num>1
replace ind_comp_resp=inlist(substr(diag,1,4),"5070","5184","5185","7991","9973") & num>1
replace ind_comp_resp=inlist(substr(diag,1,5),"51881") & num>1

gen ind_comp_vasc=inlist(substr(diag,1,3),"430","431","433","434","435","436","451","453") & num>1
replace ind_comp_vasc=inlist(substr(diag,1,4),"4151","442","4448","4599","9972","9997","9992") & num>1

gen ind_comp_wound=inlist(substr(diag,1,3),"567") & num>1
replace ind_comp_wound=inlist(substr(diag,1,4),"5688","5697","6088","9981","9983","9986") & num>1
replace ind_comp_wound=inlist(substr(diag,1,5),"99814","99851") & num>1

gen ind_comp_genitourinary=inlist(substr(diag,1,3),"590","591","596","597","604") & num>1
replace ind_comp_genitourinary=inlist(substr(diag,1,4),"5933","5934","5935","5991","7882","9963","9975") & num>1

gen ind_comp_gastro=inlist(substr(diag,1,3),"558","560") & num>1
replace ind_comp_gastro=inlist(substr(diag,1,4),"5311","5312","5321","5322","5323","5401","7876") & num>1
replace ind_comp_gastro=inlist(substr(diag,1,4),"9974","5692","5693","5695","5696","5793") & num>1
replace ind_comp_gastro=inlist(substr(diag,1,5),"00845") & num>1

gen ind_comp_neuro=inlist(substr(diag,1,3),"436","951","952","953","954","955","956","354","355") & num>1
replace ind_comp_neuro=inlist(substr(diag,1,4),"9970","7234") & num>1

gen ind_comp_infect=inlist(substr(diag,1,3),"038") & num>1
replace ind_comp_infect=inlist(substr(diag,1,4),"9985","9993","0545","7907") & num>1
replace ind_comp_infect=inlist(substr(diag,1,5),"53641","51901","99591","99592") & num>1

gen ind_comp_misc=inlist(substr(diag,1,3),"584") & num>1
replace ind_comp_misc=inlist(substr(diag,1,4),"0418","2768","4589","7823","7824","7855","9950","9954","9994") & num>1
replace ind_comp_misc=inlist(substr(diag,1,4),"9996","9997","9984","9987","9988","9989","5364","5793") & num>1
replace ind_comp_misc=inlist(substr(diag,1,5),"99586") & num>1

egen ind_comp_any=rowmax(ind_comp*)
label var ind_comp_any "Any complication during index stay"

//use egen to add complications to the trauma dx rows
foreach x of varlist ind_comp* {
	by bene_id clm_num type, sort: egen this=max(`x')
	replace `x'=this
	drop this
}

gen icd9=inlist(substr(diag,1,1),"8","9")


keep if trauma
duplicates drop

gen length=length(diag)
gen dtrunc=diag

merge m:1 dtrunc using `t1', keep(match master) gen(m1)
gen anym=m1==3

forvalues m=2/5 {

	replace dtrunc=substr(dtrunc,1,length-1)
	replace length=length-1

	merge m:1 dtrunc using `t1', update keep(match master match_update) gen(m`m')
	replace anym=1 if m`m'==3
	
}

rename discharge_disp z

drop m* d* ecode n num
rename z discharge_disp
duplicates drop

tempfile trauma
save `trauma'

//only use NSOC waves
foreach i in 1 5 7 {
	use `nhats' if wave==`i', clear
	merge 1:m bene_id using `trauma', keep(match) nogen
	drop if admit_date>=ivw_date | (admit_date<ivw_date_n1 & !missing(ivw_date_n1)) | ///
	(ivw_date-admit_date>365)
	tempfile traum`i'
	save `traum`i''
}

clear
foreach i in 1 5 7 {
	append using `traum`i''
}

//# of trauma hospitalizations
by spid wave, sort: gen n_trauma=_N
by spid: gen ind_prev_trauma=_n>1
label var n_trauma "Number of hospitalizations for trauma observed prior to wave (or since prev wave)"
label var ind_prev_trauma "Indicator index trauma is first traumatic hospitalization observed"


/*generate iss code using severity and body type

iss is the sum of the squared value of the three most-severely-injured body regions
iss is max (75) if the severity in any region is 6 (6=currently unsurvivable)
*/

/*it looks like the severity=9 are burn codes that (at least for ICD-9) don't 
have ISSs associated with them*/
replace severity=. if severity==9

levelsof issbr, local(levels)
foreach l of local levels {
	gen issbr_`l'=issbr==`l'
	local lab : label issbr `l'
	by bene_id clm_num type ivw_date, sort: egen ind_issbr_`l'=max(issbr_`l')
	label var ind_issbr_`l' "`lab'"
}
egen n_issbr=rowtotal(ind_issbr_*)
label var n_issbr "# of different body regions"

by bene_id clm_num type issbr, sort: egen maxsev=max(severity)
keep if severity==maxsev
drop maxsev

sort bene_id clm_num type severity
by bene_id clm_num type: keep if _n<=3
gen sev2=severity^2

by bene_id clm_num type: egen iss=total(sev2)
label var iss "ISS"
by bene_id clm_num type, sort: egen maxsev=max(severity)
replace iss=75 if maxsev==6
replace iss=. if iss==0
drop clm_num trauma length severity issbr* anym sev2 maxsev 
rename admit_date index_date
destring traumhos, replace
by spid wave index_date, sort: egen ind_trauma_hosp=max(traumhos)
label var ind_trauma_hosp "Trauma hospital"
drop traumhos
preserve

//only keep highest iss per ivw
sort spid wave iss
by spid wave: keep if _n==_N
//only first per person
by spid: keep if _n==1

save "${intpath}\index_stay_nsoc", replace

keep spid bene_id index_date ivw_date
gen ivw_year=year(ivw_date)
saveold "${intpath}\index_nsoc", replace version(12)

H="xCharlson"
use bene_id ivw_date using "${intpath}\index_stay_nsoc", clear

local start 06
foreach x in ip pb op snf hh hs dm {
	preserve
	merge 1:m bene_id using "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA/`x'_`start'_17.dta", ///
	keep(match) nogen
	keep if inrange(admit_date,ivw_date-365,ivw_date)
	keep bene_id icd_dgns_cd*
	gen num=_n
	reshape long icd_dgns_cd, i(num) j(obsn)
	drop num obsn
	duplicates drop
	tempfile `x'
	save ``x''
	restore
	local start 09
}

clear all
foreach x in ip pb op snf hh hs dm {
	append using ``x''
}

duplicates drop
rename icd dx

*Myocardial Infarction
gen charlson_1=(substr(dx,1,3)=="410" | ///
               substr(dx,1,3)=="412" | ///
			   substr(dx,1,3)=="I21" | ///
               substr(dx,1,3)=="I22" | ///
               substr(dx,1,4)=="I252")

*Congestive Heart Failure
gen charlson_2=(substr(dx,1,3)=="428" | ///
   			   substr(dx,1,4)=="I099" | ///
               substr(dx,1,4)=="I110" | ///
               substr(dx,1,4)=="I130" | ///
               substr(dx,1,4)=="I132" | ///
               substr(dx,1,4)=="I255" | ///
               substr(dx,1,4)=="I420" | ///
               substr(dx,1,4)=="I425" | ///
               substr(dx,1,4)=="I426" | ///
               substr(dx,1,4)=="I427" | ///
               substr(dx,1,4)=="I428" | ///
               substr(dx,1,4)=="I429" | ///
               substr(dx,1,3)=="I43"  | ///
               substr(dx,1,3)=="I50"  | ///
               substr(dx,1,4)=="P290")


*Periphral Vascular Disease
gen charlson_3=(substr(dx,1,4)=="0930" | ///
               substr(dx,1,4)=="4373" | ///
               substr(dx,1,3)=="440" | ///
               substr(dx,1,3)=="441" | ///
               substr(dx,1,4)=="4431" | ///
               substr(dx,1,4)=="4432" | ///
               substr(dx,1,4)=="4438" | ///
               substr(dx,1,4)=="4439" | ///
               substr(dx,1,4)=="4471" | ///
               substr(dx,1,4)=="5571" | ///
               substr(dx,1,4)=="5579" | ///
               substr(dx,1,4)=="V434" | ///
    		   substr(dx,1,3)=="I70" | ///
               substr(dx,1,3)=="I71" | ///
               substr(dx,1,4)=="I731" | ///
               substr(dx,1,4)=="I738" | ///
               substr(dx,1,4)=="I739" | ///
               substr(dx,1,4)=="I771" | ///
               substr(dx,1,4)=="I790" | ///
               substr(dx,1,4)=="I792" | ///
               substr(dx,1,4)=="K551" | ///
               substr(dx,1,4)=="K558" | ///
               substr(dx,1,4)=="K559" | ///
			   substr(dx,1,4)=="Z958" | ///
               substr(dx,1,4)=="Z959")

 *Cerebrovascular Disease 
gen charlson_4=(substr(dx,1,5)=="36234" | ///
               substr(dx,1,3)=="430" | ///
               substr(dx,1,3)=="431" | ///
               substr(dx,1,3)=="432" | ///
               substr(dx,1,3)=="433" | ///
               substr(dx,1,3)=="434" | ///
               substr(dx,1,3)=="435" | ///
               substr(dx,1,3)=="436" | ///
               substr(dx,1,3)=="437" | ///
               substr(dx,1,3)=="438" | ///
			   substr(dx,1,3)=="G45" | ///
               substr(dx,1,3)=="G46" | ///
               substr(dx,1,4)=="H340" | ///
               substr(dx,1,3)=="I60" | ///
               substr(dx,1,3)=="I61" | ///
               substr(dx,1,3)=="I62" | ///
               substr(dx,1,3)=="I63" | ///
               substr(dx,1,3)=="I64" | ///
               substr(dx,1,3)=="I65" | ///
			   substr(dx,1,3)=="I66" | ///
               substr(dx,1,3)=="I67" | ///
               substr(dx,1,3)=="I68" | ///
               substr(dx,1,3)=="I69")

*Dementia 
gen charlson_5=(substr(dx,1,3)=="290" | ///
               substr(dx,1,4)=="2941" | ///
               substr(dx,1,4)=="3312" | ///
			   substr(dx,1,3)=="F00" | ///
               substr(dx,1,3)=="F01" | ///
               substr(dx,1,3)=="F02" | ///
               substr(dx,1,3)=="F03" | ///
               substr(dx,1,4)=="F051" | ///
               substr(dx,1,3)=="G30" | ///
               substr(dx,1,4)=="G311")

	*Chronic Pulmonary Disease 
gen charlson_6=(substr(dx,1,4)=="4168" | ///
               substr(dx,1,4)=="4169" | ///
               substr(dx,1,3)=="490" | ///
               substr(dx,1,3)=="491" | ///
               substr(dx,1,3)=="492" | ///
               substr(dx,1,3)=="493" | ///
               substr(dx,1,3)=="494" | ///
               substr(dx,1,3)=="495" | ///
               substr(dx,1,3)=="496" | ///
               substr(dx,1,3)=="500" | ///
               substr(dx,1,3)=="501" | ///
               substr(dx,1,3)=="502" | ///
               substr(dx,1,3)=="503" | ///
               substr(dx,1,3)=="504" | ///
               substr(dx,1,3)=="505" | ///
               substr(dx,1,4)=="5064" | ///
               substr(dx,1,4)=="5081" | ///
               substr(dx,1,4)=="5088" | ///
			   substr(dx,1,4)=="I278" | ///
               substr(dx,1,4)=="I279" | ///
               substr(dx,1,3)=="J40" | ///
               substr(dx,1,3)=="J41" | ///
               substr(dx,1,3)=="J42" | ///
               substr(dx,1,3)=="J43" | ///
               substr(dx,1,3)=="J44" | ///
               substr(dx,1,3)=="J45" | ///
               substr(dx,1,3)=="J46" | ///
               substr(dx,1,3)=="J47" | ///
               substr(dx,1,3)=="J60" | ///
               substr(dx,1,3)=="J61" | ///
               substr(dx,1,3)=="J62" | ///
               substr(dx,1,3)=="J63" | ///
               substr(dx,1,3)=="J64" | ///
               substr(dx,1,3)=="J65" | ///
               substr(dx,1,3)=="J66" | ///
			   substr(dx,1,3)=="J67" | ///
               substr(dx,1,4)=="J684" | ///
               substr(dx,1,4)=="J701" | ///
               substr(dx,1,4)=="J703")

*Connective Tissue Disease-Rheumatic Disease
gen charlson_7=(substr(dx,1,4)=="4465" | ///
               substr(dx,1,4)=="7100" | ///
               substr(dx,1,4)=="7101" | ///
               substr(dx,1,4)=="7102" | ///
               substr(dx,1,4)=="7103" | ///
               substr(dx,1,4)=="7104" | ///
               substr(dx,1,4)=="7140" | ///
               substr(dx,1,4)=="7141" | ///
               substr(dx,1,4)=="7142" | ///
               substr(dx,1,4)=="7148" | ///
               substr(dx,1,3)=="725" | ///
			   substr(dx,1,3)=="M05" | ///
               substr(dx,1,3)=="M06" | ///
               substr(dx,1,4)=="M315" | ///
               substr(dx,1,3)=="M32" | ///
               substr(dx,1,3)=="M33" | ///
               substr(dx,1,3)=="M34" | ///
               substr(dx,1,4)=="M351" | ///
               substr(dx,1,4)=="M353" | ///
               substr(dx,1,4)=="M360")

*Peptic Ulcer Disease
gen charlson_8=(substr(dx,1,3)=="531" | ///
               substr(dx,1,3)=="532" | ///
               substr(dx,1,3)=="533" | ///
               substr(dx,1,3)=="534" | ///
			   substr(dx,1,3)=="K25" | ///
               substr(dx,1,3)=="K26" | ///
               substr(dx,1,3)=="K27" | ///
               substr(dx,1,3)=="K28")

*Mild Liver Disease 
gen charlson_9=(substr(dx,1,5)=="07022" | ///
               substr(dx,1,5)=="07023" | ///
               substr(dx,1,5)=="07032" | ///
               substr(dx,1,5)=="07033" | ///
               substr(dx,1,5)=="07044" | ///
               substr(dx,1,5)=="07054" | ///
               substr(dx,1,4)=="0706" | ///
               substr(dx,1,4)=="0709" | ///
               substr(dx,1,3)=="570" | ///
               substr(dx,1,3)=="571" | ///
               substr(dx,1,4)=="5733" | ///
               substr(dx,1,4)=="5734" | ///
               substr(dx,1,4)=="5738" | ///
               substr(dx,1,4)=="5739" | ///
               substr(dx,1,4)=="V427" | ///
			   substr(dx,1,3)=="B18" | ///
               substr(dx,1,4)=="K700" | ///
               substr(dx,1,4)=="K701" | ///
               substr(dx,1,4)=="K702" | ///
               substr(dx,1,4)=="K703" | ///
               substr(dx,1,4)=="K709" | ///
               substr(dx,1,4)=="K713" | ///
               substr(dx,1,4)=="K714" | ///
               substr(dx,1,4)=="K715" | ///
               substr(dx,1,4)=="K717" | ///
               substr(dx,1,3)=="K73" | ///
               substr(dx,1,3)=="K74" | ///
               substr(dx,1,4)=="K76" | ///
               substr(dx,1,4)=="K762" | ///
			   substr(dx,1,4)=="K763" | ///
               substr(dx,1,4)=="K764" | ///
               substr(dx,1,4)=="K768" | ///
			   substr(dx,1,4)=="K769" | ///
               substr(dx,1,4)=="Z944")

*Diabetes without complications 
gen charlson_10=(substr(dx,1,4)=="2500" | ///
               substr(dx,1,4)=="2501" | ///
               substr(dx,1,4)=="2502" | ///
               substr(dx,1,4)=="2503" | ///
               substr(dx,1,4)=="2508" | ///
               substr(dx,1,4)=="2509" | ///
			substr(dx,1,4)=="E100" | ///
		substr(dx,1,4)=="E101" | ///
		substr(dx,1,4)=="E106" | ///
		substr(dx,1,4)=="E108" | ///
		substr(dx,1,4)=="E109" | ///
		substr(dx,1,4)=="E110" | ///
        substr(dx,1,4)=="E111" | ///
		substr(dx,1,4)=="E116" | ///
		substr(dx,1,4)=="E118" | ///
		substr(dx,1,4)=="E119" | ///
		substr(dx,1,4)=="E120" | ///
		substr(dx,1,4)=="E121" | ///
		substr(dx,1,4)=="E126" | ///
		substr(dx,1,4)=="E128" | ///
		substr(dx,1,4)=="E129" | ///
		substr(dx,1,4)=="E130" | ///
		substr(dx,1,4)=="E131" | ///
		substr(dx,1,4)=="E136" | ///
		substr(dx,1,4)=="E138" | ///
        substr(dx,1,4)=="E139" | ///
		substr(dx,1,4)=="E140" | ///
		substr(dx,1,4)=="E141" | ///
		substr(dx,1,4)=="E146" | ///
		substr(dx,1,4)=="E148" | ///
		substr(dx,1,4)=="E149")

*Diabetes, complicated
gen charlson_11=(substr(dx,1,4)=="2504" | ///
		substr(dx,1,4)=="2505" | ///
		substr(dx,1,4)=="2506" | ///
		substr(dx,1,4)=="2507" | ///
        substr(dx,1,4)=="E102" | ///
		substr(dx,1,4)=="E103" | ///
		substr(dx,1,4)=="E104" | ///
		substr(dx,1,4)=="E105" | ///
		substr(dx,1,4)=="E107" | ///
		substr(dx,1,4)=="E112" | ///
		substr(dx,1,4)=="E113" | ///
		substr(dx,1,4)=="E114" | ///
        substr(dx,1,4)=="E115" | ///
		substr(dx,1,4)=="E117" | ///
        substr(dx,1,4)=="E122" | ///
		substr(dx,1,4)=="E123" | ///
		substr(dx,1,4)=="E124" | ///
		substr(dx,1,4)=="E125" | ///
		substr(dx,1,4)=="E127" | ///
		substr(dx,1,4)=="E132" | ///
		substr(dx,1,4)=="E133" | ///
		substr(dx,1,4)=="E134" | ///
        substr(dx,1,4)=="E135" | ///
		substr(dx,1,4)=="E137" | ///
		substr(dx,1,4)=="E142" | ///
		substr(dx,1,4)=="E143" | ///
		substr(dx,1,4)=="E144" | ///
        substr(dx,1,4)=="E145" | ///
		substr(dx,1,4)=="E147")

*Paraplegia and Hemiplegia 
gen charlson_12=(substr(dx,1,4)=="3341" | ///
		substr(dx,1,3)=="342" | ///
		substr(dx,1,3)=="343" | ///
		substr(dx,1,4)=="3440" | ///
		substr(dx,1,4)=="3441" | ///
		substr(dx,1,4)=="3442" | ///
		substr(dx,1,4)=="3443" | ///
                substr(dx,1,4)=="3444" | ///
		substr(dx,1,4)=="3445" | ///
		substr(dx,1,4)=="3446" | ///
		substr(dx,1,4)=="3449" | ///
		substr(dx,1,4)=="G041" | ///
		substr(dx,1,4)=="G114" | ///
		substr(dx,1,4)=="G801" | ///
		substr(dx,1,4)=="G802" | ///
		substr(dx,1,3)=="G81" | ///
		substr(dx,1,3)=="G82" | ///
		substr(dx,1,4)=="G830" | ///
        substr(dx,1,4)=="G834" | ///
		substr(dx,1,4)=="G839")

* Renal Disease 
gen charlson_13=(substr(dx,1,5)=="40301" | ///
		substr(dx,1,5)=="40311" | ///
		substr(dx,1,5)=="40391" | ///
		substr(dx,1,5)=="40402" | ///
		substr(dx,1,5)=="40403" | ///
		substr(dx,1,5)=="40412" | ///
		substr(dx,1,5)=="40413" | ///
                substr(dx,1,5)=="40492" | ///
		substr(dx,1,5)=="40493" | ///
		substr(dx,1,3)=="582" | ///
		substr(dx,1,4)=="5830" | ///
                substr(dx,1,4)=="5831" | ///
                substr(dx,1,4)=="5832" | ///
                substr(dx,1,4)=="5834" | ///
                substr(dx,1,4)=="5836" | ///
                substr(dx,1,4)=="5837" | ///
                substr(dx,1,3)=="585" | ///
                substr(dx,1,3)=="586" | ///
                substr(dx,1,4)=="5880" | ///
                substr(dx,1,4)=="V420" | ///
                substr(dx,1,4)=="V451" | ///
                substr(dx,1,3)=="V56" | ///
			substr(dx,1,4)=="I120" | ///
		substr(dx,1,4)=="I131" | ///
		substr(dx,1,4)=="N032" | ///
		substr(dx,1,4)=="N033" | ///
		substr(dx,1,4)=="N034" | ///
		substr(dx,1,4)=="N035" | ///
		substr(dx,1,4)=="N036" | ///
        substr(dx,1,4)=="N037" | ///
		substr(dx,1,4)=="N052" | ///
		substr(dx,1,4)=="N053" | ///
		substr(dx,1,4)=="N054" | ///
                substr(dx,1,4)=="N055" | ///
                substr(dx,1,4)=="N056" | ///
                substr(dx,1,4)=="N057" | ///
                substr(dx,1,3)=="N18" | ///
                substr(dx,1,3)=="N19" | ///
                substr(dx,1,4)=="N250" | ///
                substr(dx,1,4)=="Z490" | ///
                substr(dx,1,4)=="Z491" | ///
                substr(dx,1,4)=="Z492" | ///
                substr(dx,1,4)=="Z940" | ///
                substr(dx,1,4)=="Z992" )

*Cancer 
gen charlson_14=(substr(dx,1,2)=="14" | ///
		substr(dx,1,2)=="15" | ///
		substr(dx,1,2)=="16" | ///
		substr(dx,1,3)=="170" | ///
		substr(dx,1,3)=="171" | ///
		substr(dx,1,3)=="172" | ///
		substr(dx,1,3)=="174" | ///
		substr(dx,1,3)=="175" | ///
		substr(dx,1,3)=="176" | ///
		substr(dx,1,3)=="179" | ///
		substr(dx,1,2)=="18" | ///
		substr(dx,1,3)=="190" | ///
		substr(dx,1,3)=="191" | ///
		substr(dx,1,3)=="192" | ///
		substr(dx,1,3)=="193" | ///
		substr(dx,1,3)=="194" | ///
		substr(dx,1,3)=="195" | ///
                substr(dx,1,3)=="200" | ///
                substr(dx,1,3)=="201" | ///
                substr(dx,1,3)=="202" | ///
                substr(dx,1,3)=="203" | ///
                substr(dx,1,3)=="204" | ///
                substr(dx,1,3)=="205" | ///
                substr(dx,1,3)=="206" | ///
                substr(dx,1,3)=="207" | ///
                substr(dx,1,3)=="208" | ///
                substr(dx,1,4)=="2386" | ///
			substr(dx,1,3)=="C00" | ///
		substr(dx,1,3)=="C01" | ///
		substr(dx,1,3)=="C02" | ///
		substr(dx,1,3)=="C03" | ///
		substr(dx,1,3)=="C04" | ///
		substr(dx,1,3)=="C05" | ///
		substr(dx,1,3)=="C06" | ///
		substr(dx,1,3)=="C07" | ///
		substr(dx,1,3)=="C08" | ///
		substr(dx,1,3)=="C09" | ///
		substr(dx,1,3)=="C10" | ///
		substr(dx,1,3)=="C11" | ///
		substr(dx,1,3)=="C12" | ///
		substr(dx,1,3)=="C13" | ///
		substr(dx,1,3)=="C14" | ///
		substr(dx,1,3)=="C15" | ///
		substr(dx,1,3)=="C16" | ///
		substr(dx,1,3)=="C17" | ///
		substr(dx,1,3)=="C18" | ///
		substr(dx,1,3)=="C19" | ///
		substr(dx,1,3)=="C20" | ///
		substr(dx,1,3)=="C21" | ///
		substr(dx,1,3)=="C22" | ///
		substr(dx,1,3)=="C23" | ///
		substr(dx,1,3)=="C24" | ///
		substr(dx,1,3)=="C25" | ///
		substr(dx,1,3)=="C26" | ///
		substr(dx,1,3)=="C30" | ///
		substr(dx,1,3)=="C31" | ///
		substr(dx,1,3)=="C32" | ///
		substr(dx,1,3)=="C33" | ///
		substr(dx,1,3)=="C34" | ///
		substr(dx,1,3)=="C37" | ///
		substr(dx,1,3)=="C38" | ///
		substr(dx,1,3)=="C39" | ///
		substr(dx,1,3)=="C40" | ///
		substr(dx,1,3)=="C41" | ///
		substr(dx,1,3)=="C43" | ///
		substr(dx,1,3)=="C45" | ///
		substr(dx,1,3)=="C46" | ///
		substr(dx,1,3)=="C47" | ///
		substr(dx,1,3)=="C48" | ///
		substr(dx,1,3)=="C49" | ///
		substr(dx,1,3)=="C50" | ///
		substr(dx,1,3)=="C51" | ///
		substr(dx,1,3)=="C52" | ///
		substr(dx,1,3)=="C53" | ///
		substr(dx,1,3)=="C54" | ///
		substr(dx,1,3)=="C55" | ///
		substr(dx,1,3)=="C56" | ///
		substr(dx,1,3)=="C57" | ///
		substr(dx,1,3)=="C58" | ///
		substr(dx,1,3)=="C60" | ///
		substr(dx,1,3)=="C61" | ///
		substr(dx,1,3)=="C62" | ///
		substr(dx,1,3)=="C63" | ///
		substr(dx,1,3)=="C64" | ///
		substr(dx,1,3)=="C65" | ///
		substr(dx,1,3)=="C66" | ///
		substr(dx,1,3)=="C67" | ///
		substr(dx,1,3)=="C68" | ///
		substr(dx,1,3)=="C69" | ///
		substr(dx,1,3)=="C70" | ///
		substr(dx,1,3)=="C71" | ///
		substr(dx,1,3)=="C72" | ///
		substr(dx,1,3)=="C73" | ///
		substr(dx,1,3)=="C74" | ///
		substr(dx,1,3)=="C75" | ///
		substr(dx,1,3)=="C76" | ///
                substr(dx,1,3)=="C81" | ///
                substr(dx,1,3)=="C82" | ///
                substr(dx,1,3)=="C83" | ///
                substr(dx,1,3)=="C84" | ///
                substr(dx,1,3)=="C85" | ///
                substr(dx,1,3)=="C88" | ///
                substr(dx,1,3)=="C90" | ///
                substr(dx,1,3)=="C91" | ///
                substr(dx,1,3)=="C92" | ///
                substr(dx,1,3)=="C93" | ///
                substr(dx,1,3)=="C94" | ///
                substr(dx,1,3)=="C95" | ///
                substr(dx,1,3)=="C96" | /// 
                substr(dx,1,3)=="C97")

* Moderate or Severe Liver Disease 
gen charlson_15=(substr(dx,1,4)=="4560" | ///
		substr(dx,1,4)=="4561" | ///
		substr(dx,1,4)=="4562" | ///
		substr(dx,1,4)=="5722" | ///
		substr(dx,1,4)=="5723" | ///
		substr(dx,1,4)=="5724" | ///
      	substr(dx,1,4)=="5728" | ///
		substr(dx,1,4)=="I850" | ///
		substr(dx,1,4)=="I859" | ///
		substr(dx,1,4)=="I864" | ///
		substr(dx,1,4)=="I982" | ///
		substr(dx,1,4)=="K704" | ///
		substr(dx,1,4)=="K711" | ///
		substr(dx,1,4)=="K721" | ///
        substr(dx,1,4)=="K729" | ///
        substr(dx,1,4)=="K765" | ///
        substr(dx,1,4)=="K766" | ///
        substr(dx,1,4)=="K767")

  * Metastatic Carcinoma 
gen charlson_16=(substr(dx,1,3)=="196" | ///
		substr(dx,1,3)=="197" | ///
		substr(dx,1,3)=="198" | ///
		substr(dx,1,3)=="199" | ///
	substr(dx,1,3)=="C77" | ///
		substr(dx,1,3)=="C78" | ///
		substr(dx,1,3)=="C79" | ///
		substr(dx,1,3)=="C80" )

  * AIDS/HIV 
gen charlson_17=(substr(dx,1,3)=="042" | ///
		substr(dx,1,3)=="043" | ///
		substr(dx,1,3)=="044" | ///
		substr(dx,1,3)=="B20" | ///
		substr(dx,1,3)=="B21" | ///
        substr(dx,1,3)=="B22" | ///
		substr(dx,1,3)=="B24")
		
forvalues i=1/17 {
	by bene_id, sort: egen charls_`i'=max(charlson_`i')
	drop charlson_`i'
}
drop dx
duplicates drop

egen charls_index=rowtotal(charls*)
gen charls_index_wt=charls_index+charls_11+charls_12+charls_13+charls_14 ///
 +charls_15*2+charls_16*5+charls_16*5+charls_17*5
 
label var charls_1 "Myocardial infarction, Charlson"
label var charls_2 "Congestive Heart Failure, Charlson"
label var charls_3 "Peripheral Vascular Disease, Charlson"
label var charls_4 "Cerebrovascular disease, Charlson"
label var charls_5 "Dementia, Charlson"
label var charls_6 "Chronic Pulmonary Disease, Charlson"
label var charls_7 "Rheumatic disease, Charlson"
label var charls_8 "Peptic ulcer disease, Charlson"
label var charls_9 "Mild liver disease, Charlson"
label var charls_10 "Diabetes, uncomplicated, Charlson"
label var charls_11 "Diabetes, complicated, Charlson"
label var charls_12 "Hemiplegia or paraplegia, Charlson"
label var charls_13 "Renal disease, Charlson"
label var charls_14 "Any malignancy except neoplasm of skin, Charlson"
label var charls_15 "Mod or severe liver disease, Charlson"
label var charls_16 "Metastatic solid tumor, Charlson"
label var charls_17 "AIDS/HIV, Charlson"
label var charls_index "Charlson score index, not weighted"
label var charls_index_wt "Charlson score index, weighted"		
		
save "${int_data}\charlson_nsoc", replace

H="xmerge nsoc and save final dataset"
//use NHATS only dataset, merge in NSOC, select variables for final dataset


//note--as of 6/28/19, NSOCs still in separate files, but will be unified later, so code will change

//create single NSOC dataset with select variables

use "${nhats}\nsoc_round_1", clear
gen wave=1
append using "${nhats}\nsoc_round_5"
replace wave=5 if missing(wave)
append using "${nhats}\nsoc_round_7"
replace wave=7 if missing(wave)

keep spid opid wave op_age cgfinwgt cgvarunit cgvarstrat ///
cg_female cg_spouse cg_relat* cg_educ cg_gt_hs ///
cg_lives_with_sp cg_medicaid cg_medicare ///
cg_living_children  work_4_pay cg_srh* total_hours_week op*adl* opid

tempfile nsoc
save `nsoc'


use "${intpath}\index_stay_nsoc", clear
merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_7.dta", ///
keep(match master) nogen

replace livearr=livearr-1 if livearr>2
replace livearr=4 if rcfres==1
replace livearr=5 if nhres==1
label define livearrang 1 "Lives alone" 3 "With others (and not spouse)" 4 "Residential Care Facility" ///
5 "Nursing Home", modify

gen inj_cat=1 if tbi==1
replace inj_cat=2 if !tbi & ind_issbr_6==1
replace inj_cat=3 if !tbi & ind_issbr_5==1
replace inj_cat=4 if !tbi & ind_issbr_1==1
replace inj_cat=5 if ind_issbr_2==1
replace inj_cat=6 if ind_issbr_3==1
replace inj_cat=7 if ind_issbr_4==1
replace inj_cat=8 if n_issbr>1
label define inj_cat 1 "TBI" 2 "Other Head/Neck" 3 "Face" 4 "Abdomen" 5 "Chest" ///
6 "External" 7 "Extremities" 8 "Multiple"
label values inj_cat inj_cat

keep spid wave ivw_date index_date icu_days ind_procedure los ind_comp* icd9 *iss* ///
age female race educ* aveincome income_quart maritalstat married medicaid medigap ///
tricare livealone livearr rcfres nhres sr_numc prob_dem dem_3_cat adl_impair adl_index sr_phq2_depr ///
sr_gad2_a reg_doc_* sr_hosp* n_helpers n_paid ind_paid ind_no_helpers n_trauma ind_prev_trauma bene_id ///
spouse_help_ind tbi vehicle_crash fall inj discharge_disp ind_trauma_hosp

//merge charls & utilization
merge 1:1 bene_id using "${intpath}\charlson", keepusing(charls_*wt) nogen keep(match master)
gen ch3plus=charls_index_wt>2 if !missing(charls)
label var ch3plus "Charlson score >2"

merge 1:1 bene_id using "${intpath}\utilization", nogen keep(match master)
foreach x in readmit snf_days hh_days ed_vis {
	gen ind_`x'=n_`x'>0 if !missing(n_`x')
}

gen adl_cat=adl_index==0 if !missing(adl_index)
replace adl_cat=2 if inrange(adl_index,1,2)
replace adl_cat=3 if inrange(adl_index,3,6)
label var adl_cat "ADLs, categorical"
label define adl_cat 1 "Independent in ADLs" 2 "Dependent in 1-2" 3 "Dependent in 3+"
label values adl_cat adl_cat

gen help_cat=ind_no_helpers
replace help_cat=2 if !ind_paid
replace help_cat=3 if n_helpers>n_paid
replace help_cat=4 if n_helpers==n_paid
label var help_cat "Caregiving, categorical"
label define help_cat 1 "No helpers" 2 "Informal help only" 3 "Informal & paid" ///
4 "Paid help only"
label values help_cat help_cat

label define race 1 "White/Other Non-Hispanic", modify
replace race=1 if race==3
rename race_cat race
label copy edulbl education
label values education education

//time trauma to ivw_date
gen traum2ivw=ivw_date-index_date
label var traum2 "Days from trauma to interview"

// Income adjusted for cpi inflation; now in terms of 2017 dollars.
gen income_adj=0
replace income_adj= (245.120/224.939)*aveincome if wave==1
replace income_adj= (245.120/229.594)*aveincome if wave==2
replace income_adj= (245.120/232.957)*aveincome if wave==3
replace income_adj= (245.120/236.736)*aveincome if wave==4
replace income_adj= (245.120/237.017)*aveincome if wave==5
replace income_adj= (245.120/240.007)*aveincome if wave==6
replace income_adj=aveincome if wave==7
label var income_adj "Income, adjusted to 2017$"

//ISS categorical
gen iss_cat=1 if iss==1
replace iss_cat=2 if inrange(iss,2,3)
replace iss_cat=3 if iss==4
replace iss_cat=4 if inrange(iss,5,8)
replace iss_cat=5 if iss==9
replace iss_cat=6 if iss>9

label define iss_cat 1 "ISS, categorical: 1" 2 "  2-3" 3 "  4" 4 "  5-8" 5 "  9" 6 "  10+"
label values iss_cat iss_cat


merge 1:m spid wave using `nsoc', keep(match) nogen
save "${intpath}\trauma_dyad_nsoc", replace

H="*******************"


H="xnew approach to longitudinal dataset"
use "${intpath}\trauma_dyad_nhatspre", clear
preserve
merge 1:1 spid using "${intpath}\index.dta", keepusing(bene_id) nogen keep(match)
merge 1:m bene_id using "D:\NHATS\Shared\base_data\CMS_claims\Stata\snf_09_17.dta", keep(match) nogen keepusing(admit_date disch_date)
keep if inrange(ivw_date,admit_date,disch_date)
gen ind_snf=1
label var ind_snf "In a SNF at the time of the interview"
keep spid ind_snf
duplicates drop
tempfile t11
save `t11'

restore
preserve
replace iss=niss
drop if inlist(iss,0,99)

keep spid index_date traum2ivw inj_cat /*charls_index_wt ch3plus*/ n_readmit n_ip_ed n_op_ed n_snf_days n_hh_days n_ed_vis ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84  traum2ivw traum2ivw ind_trauma_hosp apc  fall iss  iss_cat los icu_days ind_procedure ind_comp_any n_readmit n_snf_days n_hh_days n_ed_vis ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84 
tempfile t1
save `t1'


restore
drop help_cat



gen help_cat=ind_no_helpers
replace help_cat=2 if !ind_paid & !ind_no_helpers
replace help_cat=3 if ind_paid 
*replace help_cat=4 if n_helpers==n_paid & ind_paid
label var help_cat "Caregiving, categorical"
label values help_cat help_cat
label define help_cat 3 "Has paid help", modify
replace race=1 if race==3

foreach x in age female race education educ_hs_ind aveincome maritalstat medicaid medigap tricare wave livearrang livealone sr_phq2_depressed sr_gad2_anxiety dem_3_cat sr_numconditions1 reg_doc_have reg_doc_seen reg_doc_homevisit sr_hosp_ind sr_hosp_stays n_helpers n_paid_helpers ind_paid_helper ind_no_helpers income_quart married nhres rcfres prob_dem adl_index adl_impair adverse adverse_laun adverse_shop adverse_meal adverse_bank adverse_eat adverse_bath adverse_toil adverse_dres adverse_out adverse_insd adverse_bed adverse_sc adverse_hh adverse_mo adverse_any spouse_help_ind frail soc_iso  help_cat  adl_cat income_adj charls_index_wt ch3plus {
rename `x' `x'_p1
}

gen wave=wave-1
drop ivw_date

merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", keep(match) gen(othm)
rename race_cat race

gen help_cat=ind_no_helpers
replace help_cat=2 if !ind_paid_helper & !ind_no_helpers
replace help_cat=3 if ind_paid_helper
label var help_cat "Caregiving, categorical"
label values help_cat help_cat

egen adverse_mo=rowmax(adverse_insd adverse_out adverse_bed)
label var adverse_mo "Adv. cons. of unmet need: mobility"
egen adverse_sc=rowmax(adverse_dres adverse_toil adverse_bath adverse_eat)
label var adverse_sc "Adv. cons. of unmet need: self-care"
egen adverse_hh=rowmax(adverse_laun adverse_shop adverse_meal adverse_bank)
label var adverse_hh "Adv. cons. of unmet need: household"
egen adverse_any=rowmax(adverse*)
label var adverse_any "Adv. cons. of unmet need: any"

replace livearrang=livearrang-1 if livearrang>2
replace livearrang=4 if rcfres==1
replace livearrang=5 if nhres==1
label define livearrang 1 "Lives alone" 3 "With others (and not spouse)" 4 "Residential Care Facility" ///
5 "Nursing Home", modify

replace married=0 if livearrang==1 & missing(married)
replace race=1 if race==3

gen adl_cat=adl_index==0 if !missing(adl_index)
replace adl_cat=2 if inrange(adl_index,1,2)
replace adl_cat=3 if inrange(adl_index,3,6)
label var adl_cat "ADLs, categorical"
label values adl_cat adl_cat

gen ivw2traum=index_date-ivw_date
label var ivw2 "Days from interview to trauma"
foreach x in age female race education educ_hs_ind aveincome maritalstat medicaid medigap tricare wave livearrang livealone sr_phq2_depressed sr_gad2_anxiety dem_3_cat sr_numconditions1 reg_doc_have reg_doc_seen reg_doc_homevisit sr_hosp_ind sr_hosp_stays n_helpers n_paid_helpers ind_paid_helper ind_no_helpers income_quart married nhres rcfres prob_dem adl_index adl_impair adverse adverse_laun adverse_shop adverse_meal adverse_bank adverse_eat adverse_bath adverse_toil adverse_dres adverse_out adverse_insd adverse_bed adverse_sc adverse_hh adverse_mo adverse_any spouse_help_ind frail soc_iso help_cat adl_cat income_adj charls_index_wt ch3plus {
rename `x' `x'_n1
}

keep spid *p1 *n1 ivw2traum
merge 1:1 spid using `t1', nogen keep(match)
merge 1:1 spid using `t11', nogen keep(match master)
replace ind_snf=0 if missing(ind_snf)
label var apc "Anatomic Profile"
label var fall "Injury mechanism: fall"
label var icu_days "Days in the ICU during index stay"
label var ind_ed_vis "ED visit w/in 12 weeks of discharge"
label var ind_hh_days "HH use w/in 12 weeks of discharge"
label var ind_procedure "Any procedure performed during index stay"
label var ind_rea "Any readmission w/in 12 weeks of discharge"
label var ind_snf "In SNF <30 days prior to P1 interview"
label var ind_snf_d "SNF use w/in 12 weeks of discharge"
label var los "LOS for index stay"
label var apc "Anatomic Profile Category for injury"
drop index_date inj_cat
save "${datapath}\sample_final_unr.dta", replace


H="new longitudinal dataset, starting from n1"
use "${intpath}\trauma_dyad_nhatspost", clear
preserve
merge 1:1 spid using "${intpath}\index.dta", keepusing(bene_id) nogen keep(match)
merge 1:m bene_id using "D:\NHATS\Shared\base_data\CMS_claims\Stata\snf_09_17.dta", keep(match) nogen keepusing(admit_date disch_date)
keep if inrange(ivw_date,admit_date,disch_date)
gen ind_snf=1
label var ind_snf "In a SNF at the time of the interview"
keep spid ind_snf
duplicates drop
tempfile t11
save `t11'

restore
preserve
replace iss=niss if inlist(iss,0,99,.)
replace iss=niss
drop if inlist(iss,0,99)

keep spid index_date traum2ivw inj_cat /*charls_index_wt ch3plus*/ n_readmit n_ip_ed n_op_ed n_snf_days n_hh_days n_ed_vis ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84  traum2ivw traum2ivw ind_trauma_hosp apc  fall iss  iss_cat los icu_days ind_procedure ind_comp_any n_readmit n_snf_days n_hh_days n_ed_vis ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84 
tempfile t1
save `t1'


restore
drop help_cat



gen help_cat=ind_no_helpers
replace help_cat=2 if !ind_paid & !ind_no_helpers
replace help_cat=3 if ind_paid 
*replace help_cat=4 if n_helpers==n_paid & ind_paid
label var help_cat "Caregiving, categorical"
label values help_cat help_cat
label define help_cat 3 "Has paid help", modify
replace race=1 if race==3

foreach x in age female race education educ_hs_ind aveincome maritalstat medicaid medigap tricare wave livearrang livealone sr_phq2_depressed sr_gad2_anxiety dem_3_cat sr_numconditions1 reg_doc_have reg_doc_seen reg_doc_homevisit sr_hosp_ind sr_hosp_stays n_helpers n_paid_helpers ind_paid_helper ind_no_helpers income_quart married nhres rcfres prob_dem adl_index adl_impair adverse adverse_laun adverse_shop adverse_meal adverse_bank adverse_eat adverse_bath adverse_toil adverse_dres adverse_out adverse_insd adverse_bed adverse_sc adverse_hh adverse_mo adverse_any spouse_help_ind frail soc_iso  help_cat  adl_cat income_adj charls_index_wt ch3plus imputed_inc1 imputed_inc2 imputed_inc3 imputed_inc4 imputed_inc5{
rename `x' `x'_n1
}

gen wave=wave+1
drop ivw_date

merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", keep(match) gen(othm)
rename race_cat race
drop if lml==1 
keep if sp_ivw==1

gen help_cat=ind_no_helpers
replace help_cat=2 if !ind_paid_helper & !ind_no_helpers
replace help_cat=3 if ind_paid_helper
label var help_cat "Caregiving, categorical"
label values help_cat help_cat

egen adverse_mo=rowmax(adverse_insd adverse_out adverse_bed)
label var adverse_mo "Adv. cons. of unmet need: mobility"
egen adverse_sc=rowmax(adverse_dres adverse_toil adverse_bath adverse_eat)
label var adverse_sc "Adv. cons. of unmet need: self-care"
egen adverse_hh=rowmax(adverse_laun adverse_shop adverse_meal adverse_bank)
label var adverse_hh "Adv. cons. of unmet need: household"
egen adverse_any=rowmax(adverse_mo adverse_sc adverse_hh)
label var adverse_any "Adv. cons. of unmet need: any"

replace livearrang=livearrang-1 if livearrang>2
replace livearrang=4 if rcfres==1
replace livearrang=5 if nhres==1
label define livearrang 1 "Lives alone" 3 "With others (and not spouse)" 4 "Residential Care Facility" ///
5 "Nursing Home", modify

replace married=0 if livearrang==1 & missing(married)
replace race=1 if race==3

gen adl_cat=adl_index==0 if !missing(adl_index)
replace adl_cat=2 if inrange(adl_index,1,2)
replace adl_cat=3 if inrange(adl_index,3,6)
label var adl_cat "ADLs, categorical"
label values adl_cat adl_cat


rename traum2ivw ivw2traum
label var ivw2 "Days from interview to trauma"
gen traum2ivw=ivw_date-index_date
label var traum2ivw "Days from trauma to interview"
foreach x in age female race education educ_hs_ind aveincome maritalstat medicaid medigap tricare wave livearrang livealone sr_phq2_depressed sr_gad2_anxiety dem_3_cat sr_numconditions1 reg_doc_have reg_doc_seen reg_doc_homevisit sr_hosp_ind sr_hosp_stays n_helpers n_paid_helpers ind_paid_helper ind_no_helpers income_quart married nhres rcfres prob_dem adl_index adl_impair adverse adverse_laun adverse_shop adverse_meal adverse_bank adverse_eat adverse_bath adverse_toil adverse_dres adverse_out adverse_insd adverse_bed adverse_sc adverse_hh adverse_mo adverse_any spouse_help_ind frail soc_iso help_cat adl_cat income_adj charls_index_wt ch3plus imputed_inc1 imputed_inc2 imputed_inc3 imputed_inc4 imputed_inc5{
rename `x' `x'_p1
}

keep spid *p1 *n1 ivw2traum traum2ivw
merge 1:1 spid using `t1', nogen keep(match)
merge 1:1 spid using `t11', nogen keep(match master)
replace ind_snf=0 if missing(ind_snf)
label var apc "Anatomic Profile"
label var fall "Injury mechanism: fall"
label var icu_days "Days in the ICU during index stay"
label var ind_ed_vis "ED visit w/in 12 weeks of discharge"
label var ind_hh_days "HH use w/in 12 weeks of discharge"
label var ind_procedure "Any procedure performed during index stay"
label var ind_rea "Any readmission w/in 12 weeks of discharge"
label var ind_snf "In SNF <30 days prior to P1 interview"
label var ind_snf_d "SNF use w/in 12 weeks of discharge"
label var los "LOS for index stay"
label var apc "Anatomic Profile Category for injury"
drop index_date inj_cat
save "${datapath}\sample_final_unr.dta", replace


H="table 1 on unresticted"
use "${intpath}\trauma_dyad_nhatspre", clear
preserve
merge 1:1 spid using "${intpath}\index.dta", keepusing(bene_id) nogen keep(match)
merge 1:m bene_id using "D:\NHATS\Shared\base_data\CMS_claims\Stata\snf_09_17.dta", keep(match) nogen keepusing(admit_date disch_date)
keep if inrange(ivw_date,admit_date,disch_date)
gen ind_snf=1
label var ind_snf "In a SNF at the time of the interview"
keep spid ind_snf
duplicates drop
tempfile t11
save `t11'

restore
preserve
replace iss=niss
drop if inlist(iss,0,99)

keep spid index_date traum2ivw inj_cat /*charls_index_wt ch3plus*/ n_readmit n_ip_ed n_op_ed n_snf_days n_hh_days n_ed_vis ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84  traum2ivw traum2ivw ind_trauma_hosp apc  fall iss  iss_cat los icu_days ind_procedure ind_comp_any n_readmit n_snf_days n_hh_days n_ed_vis ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84 
tempfile t1
save `t1'


restore
drop help_cat



gen help_cat=ind_no_helpers
replace help_cat=2 if !ind_paid & !ind_no_helpers
replace help_cat=3 if ind_paid 
*replace help_cat=4 if n_helpers==n_paid & ind_paid
label var help_cat "Caregiving, categorical"
label values help_cat help_cat
label define help_cat 3 "Has paid help", modify
replace race=1 if race==3

foreach x in age female race education educ_hs_ind aveincome maritalstat medicaid medigap tricare wave livearrang livealone sr_phq2_depressed sr_gad2_anxiety dem_3_cat sr_numconditions1 reg_doc_have reg_doc_seen reg_doc_homevisit sr_hosp_ind sr_hosp_stays n_helpers n_paid_helpers ind_paid_helper ind_no_helpers income_quart married nhres rcfres prob_dem adl_index adl_impair adverse adverse_laun adverse_shop adverse_meal adverse_bank adverse_eat adverse_bath adverse_toil adverse_dres adverse_out adverse_insd adverse_bed adverse_sc adverse_hh adverse_mo adverse_any spouse_help_ind frail soc_iso  help_cat  adl_cat income_adj charls_index_wt ch3plus {
rename `x' `x'_p1
}

gen wave=wave-1
drop ivw_date

merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", keep(match) gen(othm)
rename race_cat race

gen help_cat=ind_no_helpers
replace help_cat=2 if !ind_paid_helper & !ind_no_helpers
replace help_cat=3 if ind_paid_helper
label var help_cat "Caregiving, categorical"
label values help_cat help_cat

egen adverse_mo=rowmax(adverse_insd adverse_out adverse_bed)
label var adverse_mo "Adv. cons. of unmet need: mobility"
egen adverse_sc=rowmax(adverse_dres adverse_toil adverse_bath adverse_eat)
label var adverse_sc "Adv. cons. of unmet need: self-care"
egen adverse_hh=rowmax(adverse_laun adverse_shop adverse_meal adverse_bank)
label var adverse_hh "Adv. cons. of unmet need: household"
egen adverse_any=rowmax(adverse*)
label var adverse_any "Adv. cons. of unmet need: any"

replace livearrang=livearrang-1 if livearrang>2
replace livearrang=4 if rcfres==1
replace livearrang=5 if nhres==1
label define livearrang 1 "Lives alone" 3 "With others (and not spouse)" 4 "Residential Care Facility" ///
5 "Nursing Home", modify

replace married=0 if livearrang==1 & missing(married)
replace race=1 if race==3

gen adl_cat=adl_index==0 if !missing(adl_index)
replace adl_cat=2 if inrange(adl_index,1,2)
replace adl_cat=3 if inrange(adl_index,3,6)
label var adl_cat "ADLs, categorical"
label values adl_cat adl_cat
 
gen ivw2traum=index_date-ivw_date
label var ivw2 "Days from interview to trauma"
foreach x in age female race education educ_hs_ind aveincome maritalstat medicaid medigap tricare wave livearrang livealone sr_phq2_depressed sr_gad2_anxiety dem_3_cat sr_numconditions1 reg_doc_have reg_doc_seen reg_doc_homevisit sr_hosp_ind sr_hosp_stays n_helpers n_paid_helpers ind_paid_helper ind_no_helpers income_quart married nhres rcfres prob_dem adl_index adl_impair adverse adverse_laun adverse_shop adverse_meal adverse_bank adverse_eat adverse_bath adverse_toil adverse_dres adverse_out adverse_insd adverse_bed adverse_sc adverse_hh adverse_mo adverse_any spouse_help_ind frail soc_iso help_cat adl_cat income_adj charls_index_wt ch3plus imputed_inc1 imputed_inc2 imputed_inc3 imputed_inc4 imputed_inc5{
rename `x' `x'_n1
}

keep spid *p1 *n1 ivw2traum
merge 1:1 spid using `t1', nogen keep(match)
merge 1:1 spid using `t11', nogen keep(match master)
replace ind_snf=0 if missing(ind_snf)
label var apc "Anatomic Profile"
label var fall "Injury mechanism: fall"
label var icu_days "Days in the ICU during index stay"
label var ind_ed_vis "ED visit w/in 12 weeks of discharge"
label var ind_hh_days "HH use w/in 12 weeks of discharge"
label var ind_procedure "Any procedure performed during index stay"
label var ind_rea "Any readmission w/in 12 weeks of discharge"
label var ind_snf "In SNF <30 days prior to P1 interview"
label var ind_snf_d "SNF use w/in 12 weeks of discharge"
label var los "LOS for index stay"
label var apc "Anatomic Profile Category for injury"
drop index_date inj_cat
save "${datapath}\sample_final_unr.dta", replace


H="stay and utilization chars on prepost"

/*gen _row1=.
label var _row1 "Trauma characteristics"
gen _row2=.
label var _row2 "Stay characteristics"
gen _row3=. 
label var _row3 "12 week utilization and outcomes"
*/
clear all
use  "${datapath}\sample_final_unr", clear
gen wave=wave_n1
merge 1:1 spid using "${intpath}\trauma_dyad_nhatspost", keep(match)
local cvars1 ivw2traum traum2ivw
local ivars1  ind_trauma_hosp
local catvars1 apc //inj_cat
local cvars2
local ivars2 fall vehicle_crash 
local catvars2
local cvars3 iss
local ivars3 
local catvars3 iss_cat //apc
local cvars4 los icu_days
local ivars4 ind_procedure //ind_comp_any 
local catvars4 
local cvars5 n_readmit n_snf_days n_hh_days n_ed_vis
local ivars5 ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84
local catvars5 

di "`period'"
forvalues i=1/5 {
	di "`i'"
	foreach x of local catvars`i' {
		local cativars`i'
		di "`x'"
		local `x'
		di "``x''"	
		levelsof `x', local(levels)
		foreach l of local levels {
			gen `x'`l'=`x'==`l' if !missing(`x')
			local lab : label `x' `l'
			label var `x'`l' "`lab'"
			local `x' ``x'' `x'`l'
}
		di "``x''"
		local cativars`i' `cativars`i'' ``x''
}
}

di "`catvars1'"
di "`cativars1'"

local rows
forvalues i=1/5 {
local rows `rows' `cvars`i'' `cvars`i'' `cvars`i'' `ivars`i'' `cativars`i''
}

local rn : word count `rows' 1
local r=1
local c=1

mat tab=J(`rn',2,.)
mat stars=J(`rn',2,0)

local n=_N
forvalues i=1/5 {
	foreach x of local cvars`i' {
		qui sum `x' /*if inlist(dem_cohort,`y')*/, d
		mat tab[`r',`c']=r(mean)
		mat tab [`r'+1,`c']=r(sd)
		mat tab[`r'+2,`c']=r(p50)
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		local r=`r'+3
		
}
	foreach x of local ivars`i' {
		qui sum `x' 
		if (r(N)*r(mean)>=11 & r(N)-r(N)*r(mean)>=11) | r(N)==0 | r(N)-r(N)*r(mean)==0 mat tab[`r',`c']=r(mean)*100
		else mat stars[`r',`c']=3
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		local r=`r'+1
}
	foreach x of local catvars`i' {
		qui sum `x'
		if `n'-r(N)>=11 | `n'==r(N) mat tab[`r',`c'+1]=`n'-r(N)
		else mat stars[`r',`c'+1]=3
		foreach z of local `x' {
			qui sum `z' 
			if r(N)*r(mean)>=11 | r(N)==0 | r(N)-r(N)*r(mean)==0 mat tab[`r',`c']=r(mean)*100
			else mat stars[`r',`c']=3
			local r=`r'+1
}
}
}
mat tab[`r',`c']=`n'
	
/*
local cvars1 traum2ivw
local ivars1  
local catvars1 inj_cat
local cvars2
local ivars2 fall vehicle_crash 
local catvars2
local cvars3 iss
local ivars3 
local catvars3 iss_cat
local cvars4 los icu_days
local ivars4 ind_procedure ind_comp_any 
local catvars4 
local cvars5 n_readmit n_snf_days n_hh_days n_ed_vis
local ivars5 ind_readmit ind_snf_days ind_hh_days ind_ed_vis ind_died_84
local catvars5 
*/
mat rownames tab=ivw2traum SD Median traum2ivw SD Median `ivars1' `cativars1' `ivars2' `cativars2' ///
`cvars3' SD Median `ivars3' `cativars3' los SD Median icu_days SD Median `ivars4' `cativars4' ///
n_readmit SD Median n_snf_days SD Median n_hh_days SD Median n_ed_vis SD Median `ivars5' `cativars5' N

if "`period'"=="pre" local title Trauma with NHATS interview following
else local title Trauma with prior NHATS interview
frmttable using "${outpath}\stay_and_util_tables_`period'`c(current_date)'.rtf", ///
statmat(tab) title("Characteristics of trauma and utilization:" "`title'") ///
ctitles("" "Mean/%" "N Missing") varlabels ///
sdec(2,0) annotate(stars) asymbol(*,**,NR) replace

local rn : word count ind_comp_intraop ind_comp_cardiac ind_comp_resp ind_comp_vasc ind_comp_wound ind_comp_genitourinary ind_comp_gastro ind_comp_neuro ind_comp_infect ind_comp_misc ind_comp_any

//ebl--9/6/19--drop this for now because there's so little that's shareable. worth looking at again after update for icd10.
/*
mat tab=J(`rn',2,.)
mat stars=J(`rn',2,0)
local r=1

foreach x of varlist ind_comp* {
	qui sum `x' 
	if (r(N)*r(mean)>=11 & r(N)-r(N)*r(mean)>=11) | r(N)==0 | r(N)-r(N)*r(mean)==0 mat tab[`r',1]=r(mean)*r(N)
	else mat stars[`r',1]=3
	if (r(N)*r(mean)>=11 & r(N)-r(N)*r(mean)>=11) | r(N)==0 | r(N)-r(N)*r(mean)==0 mat tab[`r',2]=r(mean)*100
	else mat stars[`r',2]=3
	local r=`r'+1
}

mat rownames tab=ind_comp_intraop ind_comp_cardiac ind_comp_resp ind_comp_vasc ind_comp_wound ind_comp_genitourinary ind_comp_gastro ind_comp_neuro ind_comp_infect ind_comp_misc ind_comp_any

frmttable using "${outpath}\stay_and_util_tables_`period'`c(current_date)'.rtf", ///
addtable statmat(tab) title("Complications, detailed") ///
ctitles("" "N" "%") sdec(0,2) annotate(stars) asymbol(*,**,NR)
*/



H="sens analyses"
//note, you need to run the unrestricted sample code and comment out dropping the index date in order for this to run

use"${datapath}\sample_final_unr", clear
merge 1:m spid using "${nhats}\sp_round_1_8.dta", keep(match) nogen keepusing(death_date)
replace iss=. if inlist(iss,0,99)
duplicates drop
replace los=1 if !los
gen lnlos=ln(los)
gen died_12=death_date-index_date<=365
gen died_6=death_date-index_date<=183
reg died_12 iss
reg died_12 iss if traum2ivw<=91
local xvars iss c.age_n1 female_n1 i.race_n1  married_n1 educ_hs_ind_n1 ind_trauma_hosp prob_dem_n1
local xvarslim c.age_n1 female_n1 married_n1
gen iss9=iss>9 if !missing(iss)

label var died_6 "Died within 6 months"

logit died_6 iss `xvarslim' if traum2ivw<=91 
outreg, varlabels stats(e_b e_ci p) ctitles("" "1")
logit died_6 iss `xvarslim' if traum2ivw<=183
outreg, varlabels stats(e_b e_ci p)  merge ctitles("" "2")

logit died_6 iss9 `xvarslim' if traum2ivw<=91
outreg, varlabels stats(e_b e_ci p) merge ctitles("" "3")
logit died_6 iss9 `xvarslim' if traum2ivw<=183
outreg using "${outpath}\sensitivity_regs", varlabels stats(e_b e_ci p) merge ctitles("" "4") replace note("Regressions 1-4 are death within 6 months"\ "Regressions 1 and 3 among those with interviews within 3 months after trauma"\ "2 and 4 among all ivws within 6 mos after trauma" \"Full covariates not included because of small sample size and perfect collinearity")

reg los iss `xvars'
outreg, varlabels stats(b ci p)  ctitles("" "ln(LOS)")
reg los iss9 `xvars'
outreg  using "${outpath}\sensitivity_regs", addtable varlabels stats(b ci p) merge ctitles("" "ln(LOS)") note( "Regressions are on the natural log of the LOS of the index stay, among full sample")

H="sample derivation"
//all sps, with inpatient claim following interview, trauma, with p1 ivw

use "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_7.dta", clear
keep if sp_ivw==1 & lml==0
keep spid ivw_date wave died_12
gen n=1
merge m:1 spid using "D:\NHATS\Shared\base_data\CMS_claims\Stata\xwalk_2016.dta", nogen

tempfile t1
save `t1'

forvalues i=1/7 {
	use spid ivw_date wave bene_id using `t1' if wave==`i'
	merge 1:m bene_id using "D:\NHATS\Shared\base_data\CMS_claims\Stata\ip_06_17.dta", keep(match master) keepusing(admit_date) nogen
	gen inr=inrange(admit_date,ivw_date,ivw_date+365)
	drop admit
	keep if inr
	duplicates drop
	tempfile ip`i'
	save `ip`i''
}

clear
forvalues i=1/7 {
	append using `ip`i''
}


merge 1:1 spid wave using "${intpath}\index_staypost", gen(indm) keepusing(index_date wave iss niss)
duplicates drop

replace iss=niss

merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", gen(thism) keepusing(died_12 r*status)
gen n=1

replace wave=wave+1
merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", gen(p1m) keep(match master)


replace inr=0 if missing(inr)
gsort spid -inr -indm wave
by spid: keep if _n==1

gen hasp1=p1m==3 & !lml & sp_ivw==1 & indm==3 & !inlist(iss,0,99)
gen hastraum=indm==3 & !inlist(iss,0,99)

gen died=died_12 & !hasp1 
replace died=1 if lml==1
forvalues i=2/8 {
	replace died=1 if r`i'status==86 & wave==`i'
}

replace died=0 if hasp1 | !hastraum

local sampvars n inr hastraum hasp1 died

local rn : word count `sampvars'

mat tab=J(`rn',2,.)

local r=1

foreach x of local sampvars {
	sum n if `x'==1
	mat tab[`r',1]=r(N)
	local r=`r'+1
}

label var n "All NHATS sample persons"
label var inr "With an inpatient stay <=1 year post-interview"
label var hastraum "With a trauma stay"
label var hasp1 "With a follow-up interview"
label var died "No follow up interview because deceased"

mat rownames tab=`sampvars'

frmttable using "${outpath}\sample_derivation`c(current_date)'.rtf", statmat(tab) varlabels sdec(0) title("Sample Derivation") replace

gen status=.
forvalues i=1/8 {
replace status = r`i'status if wave==`i'
}
label values status r4status
tab status if indm==3 & !died & !hasp1




forvalues i=1/7 {
	use spid ivw_date wave bene_id using `t1' if wave==`i', clear
	merge 1:m bene_id using "D:\NHATS\Shared\base_data\CMS_claims\Stata\ip_06_17.dta", keep(match master) keepusing(admit_date) nogen
	gen inr=inrange(admit_date,ivw_date-365,ivw_date)
	drop admit
	keep if inr
	duplicates drop
	tempfile ip`i'
	save `ip`i''
}

clear
forvalues i=1/7 {
	append using `ip`i''
}


merge 1:1 spid wave using "${intpath}\index_staypre", gen(indm) keepusing(index_date wave iss niss)
duplicates drop

replace iss=niss

merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", gen(thism) keepusing(died_12 r*status)
replace wave=. if missing(index_date)
duplicates drop spid wave, force
gen n=1

gsort spid -inr -indm wave
by spid: keep if _n==1
replace wave=wave-1
merge 1:1 spid using "${datapath}\sample_final_unr.dta", gen(p1m) keep(match master)

replace inr=0 if missing(inr)



gen hasn1=p1m==3 
gen hastraum=inlist(indm,2,3) & !inlist(iss,0,99)

local sampvars n inr hastraum hasn1

local rn : word count `sampvars'

mat tab2=J(`rn',1,.)
local r=1

foreach x of local sampvars {
	sum n if `x'==1
	mat tab2[`r',1]=r(N)
	local r=`r'+1
}

label var n "All NHATS sample persons"
label var inr "With an inpatient stay <=1 year pre-interview"
label var hastraum "With a trauma stay"
label var hasn1 "With a prior interview"
gen hasp1=.
gen died=.
label var hasp1 "With a follow-up interview" 
label var died "No follow up because deceased"

mat rownames tab2=`sampvars'

frmttable, statmat(tab) varlabels sdec(0) title("Sample Derivation, from interview prior to trauma") 

frmttable using "${outpath}\sample_derivation`c(current_date)'.rtf", statmat(tab2) varlabels sdec(0) title("Sample Derivation, from interview following trauma") addtable

H="Changelog"


********************Change Log******************** 



Updates:

10/7/19--MH--converted codes to icd9 in the "get index" tab. 

10/3/19--EBL--added a table 1 just looking at the pre/post group.

9/19/19--EBL--matched traumas with both the N1 and P1 interviews and combined, amended table 1 to pull from the new sample, added the pre/post characteristics table.

7/25/19--EBL--split NHATS and NSOC datasets.

7/18/19--EBL--Coded NHATS table 1.

6/27/19--EBL--Finished coding up the trauma and ISS.

6/25/19--EBL--Finished setting up SAS code to identify in SAS, then decided just to do the whole thing in Stata. Started "get index in Stata" header.

6/24/19--EBL--Set up the outline and libraries, imported codes from excel using Stata.

1/9/19--EBL--Pulled sample estimates for folks with NSOC during same wave as trauma.

1/3/19--EBL--Added in headers to text file.
MH--Revisions to diagnosis codes made. New tables made using TBI, Hip, and other. Added in NSOC III data.  
*/

	

H="*******from the initial look in January 2019********"


H="xInitial Sample Estimate"
use "E:\nhats\data\NHATS cleaned\sp_round_1_7_beta.dta" if sp_ivw==1 & lml==0, clear
merge m:1 spid using "E:\nhats\data\20180625 NHATS CMS Data\merged stata\xwalk_2016.dta", ///
 keep(match master) nogen

//12/19/18--add smi for hip for quick look 
merge 1:1 spid wave using "E:\nhats\data\Projects\serious_ill\final_data\serious_ill_nhats_sample.dta", ///
 keep(match master) nogen keepusing(smi_hip_ind)
keep spid wave ivw_date bene_id smi_hip_ind

tempfile index
save `index'




use "E:\nhats\data\20180625 NHATS CMS Data\merged stata\ip_06_16.dta", clear

keep bene_id icd_dgns_cd* admit_date

gen num=_n

rename icd_dgns_cd* diag*

reshape long diag, i(num) j(n2)

//ICD-9

gen trauma=inlist(substr(diag,1,1),"8","9") & !inlist(substr(diag,1,3),"905", ///
"906","907","908") & !inlist(substr(diag,1,3),"909","920","921","922","923","924") & ///
!inlist(substr(diag,1,2),"91","93","96","97","98","99") 
gen fractures=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"0","1","2")
gen dislocation=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"3")
gen sprains=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"4")
gen intracranial=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"5")
gen internal=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"6")
gen open_wounds=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"7","8","9")
gen blood=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"0") & ///
inlist(substr(diag,3,1),"0","1","2","3","4")
gen crushing=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"2")
gen burns=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"4")
gen nerve=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"0","1","2","3","4","5","6","7")
gen complications_or_unspecified=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"8","9")
gen icd=9 if trauma==1
gen icd9=trauma==1

gen tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"0") & ///
inlist(substr(diag,3,1),"0","1","3","4")

replace tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"0","1","2","3","4")

replace tbi=trauma==1 & diag=="95901"

//ICD-10

replace trauma=1 if inlist(substr(diag,1,1),"S") & inlist(substr(diag,7,1),"A","B","C")
gen specific_body_region=inlist(substr(diag,1,1),"S") & inlist(substr(diag,7,1),"A","B","C")
replace trauma=1 if inlist(substr(diag,1,3),"T07","T14","T30","T31","T32") 
gen multiple_regions=inlist(substr(diag,1,3),"T07") 
gen unspecified_region=inlist(substr(diag,1,3),"T14") 

replace trauma=1 if inlist(substr(diag,1,2),"T2") & inlist(substr(diag,7,1),"A") ///
 & !inlist(substr(diag,3,1),"9") 
replace burns=inlist(substr(diag,1,2),"T2") & inlist(substr(diag,7,1),"A") ///
 & !inlist(substr(diag,3,1),"9") 
gen burns_unspecified_region=inlist(substr(diag,1,3),"T30","T31","T32") 
replace trauma=1 if inlist(substr(diag,1,4),"T79A") & inlist(substr(diag,7,1),"A")
gen early_complications=inlist(substr(diag,1,4),"T79A") & inlist(substr(diag,7,1),"A")
replace trauma=0 if inlist(substr(diag,1,1),"S") & inlist(substr(diag,3,1),"0")

replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"0","1","8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"9") ///
 & inlist(substr(diag,5,1),"1")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S06") & ///
inlist(substr(diag,4,1),"0","1","2","3","4","5","6","8","9")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"9") & ///
inlist(substr(diag,5,1),"0")


keep if trauma==1

replace icd=10 if icd==.
gen icd10=icd==10

joinby bene_id using `index', _merge(m) unm(none)
tab m

keep if inrange(admit_date,ivw_date-365,ivw_date) | smi_hip_ind==1
replace trauma=1 if smi_hip_ind==1

by spid wave, sort: egen t=max(trauma)

foreach x in trauma fractures dislocation sprains intracranial internal open_wounds ///
blood crushing nerve complications_or_unspecified specific_body_region multiple_regions ///
unspecified_region burns burns_unspecified_region early_complications icd9 icd10 tbi{
	by spid wave: egen ind_`x'=max(`x')
}


keep if t==1

keep spid wave icd *ind*

sort spid wave icd

by spid wave: keep if _n==1

tab wave


codebook spid

log using "E:\nhats\data\Projects\serious_ill\logs\trauma_frequencies.txt", text replace

tab1 *ind*

log close
tempfile a
save "`a'"

use "E:\nhats\data\NHATS cleaned\nsoc_round_1.dta", replace
duplicates drop spid, force
gen wave=1
 
tempfile b
save "`b'"



use "E:\nhats\data\NHATS cleaned\nsoc_round_5.dta", replace
duplicates drop spid, force

 
tempfile c
save "`c'"

use "`a'", replace
merge m:1 spid using "`b'", gen(nsoc1) keepusing(opid) keep(1 3)


merge m:1 spid using "`c'", gen(nsoc5) keepusing(opid) keep(1 3)

gen completed_nsoc_1=nsoc1==3
gen completed_nsoc_5=nsoc5==3

label var completed_nsoc_5 "NSOC II (wave 5) completed"
label var completed_nsoc_1 "NSOC I (wave 1) completed"

gen nsoc=1 if nsoc1==3 | nsoc5==3

tab nsoc

gen other=0
replace other=1 if ind_tbi==0 & smi_hip==0

gen two=0
replace two=1 if smi_hip==1 & ind_tbi==1 



gen cat=0
replace cat=1 if ind_tbi==1 & smi_hip==0
replace cat=2 if ind_tbi==0 & smi_hip==1
replace cat=3 if other==1

label define cat 0 "None" 1 "TBI" 2 "Hip" 3 "Other" 4 "TBI & Hip"
label values cat cat

log using "E:\nhats\data\Projects\serious_ill\logs\frequencies_1_3_2019.txt", text replace

tab ind_tbi smi_hip

replace smi_hip=0 if ind_tbi==1
replace cat=1 if ind_tbi==1 & smi_hip==0


tab cat completed*1
tab cat completed*5
 

log close


/*
gen n=1

mat tab=J(5,2,.)

local c=1
local r=1 

gen two=0
replace two=1 if smi_hip==1 & ind_tbi==1 
sum two
mat tab[`r',`c']=r(N)*r(mean)
mat tab[`r',`c'+1]=r(mean)*100

replace smi_hip=0 if ind_tbi==1
local r=2

foreach x in ind_tbi smi_hip other n{
sum `x' 
mat tab[`r',`c']=r(N)*r(mean)
mat tab[`r',`c'+1]=r(mean)*100
local r=`r'+1
}

mat rownames tab= "Indicator for TBI and Hip" "TBI" "Hip" "Other" "N"
mat colnames tab= "N" "%"
mat list tab

frmttable using " ", statmat(tab) varlabels note("Sample size by 


H="Adding in NSOC 7"
use "E:\nhats\data\NHATS cleaned\sp_round_1_7_beta.dta" if sp_ivw==1 & lml==0, clear
merge m:1 spid using "E:\nhats\data\20180625 NHATS CMS Data\merged stata\xwalk_2016.dta", ///
 keep(match master) nogen

//12/19/18--add smi for hip for quick look 
merge 1:1 spid wave using "E:\nhats\data\Projects\serious_ill\final_data\serious_ill_nhats_sample.dta", ///
 keep(match master) nogen keepusing(smi_hip_ind)
keep spid wave ivw_date bene_id smi_hip_ind

tempfile index
save `index'




use "E:\nhats\data\20180625 NHATS CMS Data\merged stata\ip_06_16.dta", clear

keep bene_id icd_dgns_cd* admit_date

gen num=_n

rename icd_dgns_cd* diag*

reshape long diag, i(num) j(n2)

//ICD-9

gen trauma=inlist(substr(diag,1,1),"8","9") & !inlist(substr(diag,1,3),"905", ///
"906","907","908") & !inlist(substr(diag,1,3),"909","920","921","922","923","924") & ///
!inlist(substr(diag,1,2),"91","93","96","97","98","99") 
gen fractures=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"0","1","2")
gen dislocation=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"3")
gen sprains=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"4")
gen intracranial=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"5")
gen internal=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"6")
gen open_wounds=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"7","8","9")
gen blood=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"0") & ///
inlist(substr(diag,3,1),"0","1","2","3","4")
gen crushing=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"2")
gen burns=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"4")
gen nerve=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"0","1","2","3","4","5","6","7")
gen complications_or_unspecified=trauma==1 & inlist(substr(diag,1,1),"9") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"8","9")
gen icd=9 if trauma==1
gen icd9=trauma==1

gen tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"0") & ///
inlist(substr(diag,3,1),"0","1","3","4")

replace tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"0","1","2","3","4")

replace tbi=trauma==1 & diag=="95901"

//ICD-10

replace trauma=1 if inlist(substr(diag,1,1),"S") & inlist(substr(diag,7,1),"A","B","C")
gen specific_body_region=inlist(substr(diag,1,1),"S") & inlist(substr(diag,7,1),"A","B","C")
replace trauma=1 if inlist(substr(diag,1,3),"T07","T14","T30","T31","T32") 
gen multiple_regions=inlist(substr(diag,1,3),"T07") 
gen unspecified_region=inlist(substr(diag,1,3),"T14") 

replace trauma=1 if inlist(substr(diag,1,2),"T2") & inlist(substr(diag,7,1),"A") ///
 & !inlist(substr(diag,3,1),"9") 
replace burns=inlist(substr(diag,1,2),"T2") & inlist(substr(diag,7,1),"A") ///
 & !inlist(substr(diag,3,1),"9") 
gen burns_unspecified_region=inlist(substr(diag,1,3),"T30","T31","T32") 
replace trauma=1 if inlist(substr(diag,1,4),"T79A") & inlist(substr(diag,7,1),"A")
gen early_complications=inlist(substr(diag,1,4),"T79A") & inlist(substr(diag,7,1),"A")
replace trauma=0 if inlist(substr(diag,1,1),"S") & inlist(substr(diag,3,1),"0")

replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"0","1","8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"9") ///
 & inlist(substr(diag,5,1),"1")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S06") & ///
inlist(substr(diag,4,1),"0","1","2","3","4","5","6","8","9")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"9") & ///
inlist(substr(diag,5,1),"0")

gen non_tbi=tbi==0
keep if trauma==1

replace icd=10 if icd==.
gen icd10=icd==10

joinby bene_id using `index', _merge(m) unm(none)
tab m

keep if inrange(admit_date,ivw_date-365,ivw_date) | smi_hip_ind==1
replace trauma=1 if smi_hip_ind==1

by spid wave, sort: egen t=max(trauma)

foreach x in trauma fractures dislocation sprains intracranial internal open_wounds ///
blood crushing nerve complications_or_unspecified specific_body_region multiple_regions ///
unspecified_region burns burns_unspecified_region early_complications icd9 icd10 tbi non_tbi {
	by spid wave: egen ind_`x'=max(`x')
}


keep if t==1

keep spid wave icd *ind*

sort spid wave icd

by spid wave: keep if _n==1

tab wave

//finish defining important variables up here

gen trauma_cat=1 if ind_tbi==1
replace trauma_cat=2 if smi_hip_ind==1 & ind_tbi!=1 & missing(trauma_cat)
replace trauma_cat=3 if ind_trauma==1 & smi_hip_ind!=1 & !ind_tbi & missing(trauma_cat)

label define trauma_cat 1 "TBI" 2 "Hip, no TBI" 3 "Other trauma only"
label values trauma_cat trauma_cat

log using "E:\nhats\data\Projects\serious_ill\logs\trauma_frequencies`c(current_date)'.txt", text replace

tab trauma_cat 

tab wave trauma_cat, row


codebook spid


tab1 *ind*

log close
tempfile a
save "`a'"

use "E:\nhats\data\NHATS cleaned\nsoc_round_1.dta", clear
duplicates drop spid, force
gen wave=1
 
tempfile b
save "`b'"



use "E:\nhats\data\NHATS cleaned\nsoc_round_5.dta", clear
duplicates drop spid, force

 
tempfile c
save "`c'"


use "E:\nhats\data\NHATS Sensitive\r7_sensitive\NSOC_R7B_Crss_File.dta", clear
duplicates drop spid, force

 
tempfile d
save "`d'"

use "`a'", replace
merge m:1 spid using "`b'", gen(nsoc1) keepusing(opid) keep(1 3)


merge m:1 spid using "`c'", gen(nsoc5) keepusing(opid) keep(1 3)


merge m:1 spid using "`d'", gen(nsoc7) keepusing(opid) keep(1 3)

gen completed_nsoc_1=nsoc1==3
gen completed_nsoc_5=nsoc5==3
gen completed_nsoc_7=nsoc7==3

label var completed_nsoc_7 "NSOC III (wave 7) completed"
label var completed_nsoc_5 "NSOC II (wave 5) completed"
label var completed_nsoc_1 "NSOC I (wave 1) completed"

gen nsoc=nsoc1==3 | nsoc5==3 | nsoc7==3

gen nsoc_cat=0


//how exactly do we do this?  wave 6 could go with NSOC II or III
tokenize 1 5 7

forvalues n=1/3 {
	replace nsoc_cat=`n' if inrange(wave,``n''-1,``n''+1) & nsoc``n''==3
}

label define nsoc_cat 0 "No NSOC completed within one wave" 1 "NSOC I (wave 1) completed" 2 "NSOC II (wave 5) completed" ///
3 "NSOC III (wave 7) completed"
label values nsoc_cat nsoc_cat
tab nsoc_cat

log using "E:\nhats\data\Projects\serious_ill\logs\trauma_nsoc_frequencies`c(current_date)'.txt", text replace

tab ind_tbi
tab ind_non_tbi
tab smi_hip_ind
tab trauma_cat
tab wave trauma_cat


tab nsoc
tab wave nsoc, row
foreach x in 1 5 7 {
	tab wave completed_nsoc_`x', row
}

gen nsoc_samewave=0
foreach x in 1 5 7 {	
	replace nsoc_samewave=1 if completed_nsoc_`x'==1 & wave==`x'
}
label var nsoc_samewave "Had at least one caregiver complete NSOC in the wave following trauma"

log close



H="get index in stata"
//grab aha data from 2017 to get trauma center info
use "D:\Outside_data\AHA data\aha2017.dta", clear
rename mcrnum prvdr_num
drop if missing(prvdr_num)
tempfile aha
save `aha'

//just pull ivw dates to match to the dx, only for rounds 1,5,7 to match to NSOC later
use "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_7.dta", clear
keep if sp_ivw==1 & lml==0
keep spid ivw_date wave
merge m:1 spid using "D:\NHATS\Shared\raw\CMS\NHATS CMS DUA 28016\Crosswalks\xwalk_2016.dta", ///
keep(match master) nogen keepusing(bene)
sort spid wave
by spid: gen ivw_date_n1=ivw_date[_n-1]
tempfile nhats
save `nhats'

//get trauma dx and iss info
import excel using "D:\NHATS\Projects\trauma\zc_trauma_dyad\ref_docs\icdtrauma_from_stata.xls", firstrow clear
rename dx dtrunc
keep dtrunc sev issb
replace issbr="Abdomen" if issbr=="4"
replace issbr="Chest" if issbr=="3"
replace issbr="Extremities" if issbr=="5"
replace issbr="Face" if issbr=="2"
replace issbr="External" if inlist(issbr,"6","9","General")
replace issbr="Head/Neck" if issbr=="1"

encode issbr, gen(region) label(issbr)

drop issbr
rename region issbr
tempfile t1
save `t1'

local type=1

/*pull claims, only inpatient*/
foreach x in ip_06 {

	use "D:/NHATS/Shared/raw/CMS/NHATS CMS DUA 28016/Merged/STATA/`x'_17.dta", clear
	if "`x'"=="ip_06" {
		merge m:1 prvdr_num using `aha', ///
		keep(match master) gen(aham) keepusing(traumhos)
		egen icu_days=rowtotal(icarecnt crnryday)
		gen ind_procedure=!missing(icd_prcdr_cd1)

		label define discharge_disp 1 "Home, no services" 2 "Home with services" ///
		3 "SNF" 4 "Rehab Facility" 5 "Hospice (including home)" 6 "Other"
		gen discharge_disp=ptnt_dschrg_stus_cd=="01"
		replace discharge_disp=2 if inlist(ptnt_dschrg_stus_cd,"06","08")
		replace discharge_disp=3 if inlist(ptnt_dschrg_stus_cd,"03","61")
		replace discharge_disp=4 if inlist(ptnt_dschrg_stus_cd,"62")
		replace discharge_disp=5 if inlist(ptnt_dschrg_stus_cd,"50","51")
		replace discharge_disp=6 if !discharge_disp
		label values discharge_disp discharge_disp
		gen los=disch_date-admit_date+1
		keep bene_id icd_dgns_cd* icd_dgns_e_cd* admit_date icu_days ind_procedure discharge_disp ///
		los traumhos
}
	
	else keep bene_id icd_dgns_cd* admit_date disch_date 
	gen clm_num=_n
	reshape long icd_dgns_cd icd_dgns_e_cd, i(clm_num) j(num)
	rename icd_dgns_cd diag
	rename icd_dgns_e_cd ecode
	*keep if inlist(substr(diag,1,1),"8","9","S","T") 
	drop if missing(diag)
	gen type=`type'
	local type=`type'+1

	if "`x'"!="pb_09" {
		tempfile `x'
		save ``x''
}
}

/*
append using `ip_06'
append using `op_09'*/
label define type 1 "IP" 2 "OP" 3 "PB"
label values type type

sort bene_id admit_date diag
duplicates drop

gen trauma=0

replace trauma=1 if substr(diag,1,5)=="S0000" ///
| substr(diag,1,5)=="S0001" ///
| substr(diag,1,5)=="S0002" ///
| substr(diag,1,5)=="S0003" ///
| substr(diag,1,5)=="S0005" ///
| substr(diag,1,5)=="S0007" ///
| substr(diag,1,5)=="S0010" ///
| substr(diag,1,5)=="S0011" ///
| substr(diag,1,5)=="S0012" ///
| substr(diag,1,6)=="S00201" ///
| substr(diag,1,6)=="S00202" ///
| substr(diag,1,6)=="S00209" ///
| substr(diag,1,6)=="S00211" ///
| substr(diag,1,6)=="S00212" ///
| substr(diag,1,6)=="S00219" ///
| substr(diag,1,6)=="S00251" ///
| substr(diag,1,6)=="S00271" ///
| substr(diag,1,6)=="S00272" ///
| substr(diag,1,5)=="S0030" ///
| substr(diag,1,5)=="S0031" ///
| substr(diag,1,5)=="S0033" ///
| substr(diag,1,5)=="S0037" ///
| substr(diag,1,6)=="S00401" ///
| substr(diag,1,6)=="S00402" ///
| substr(diag,1,6)=="S00409" ///
| substr(diag,1,6)=="S00411" ///
| substr(diag,1,6)=="S00412" ///
| substr(diag,1,6)=="S00419" ///
| substr(diag,1,6)=="S00431" ///
| substr(diag,1,6)=="S00432" ///
| substr(diag,1,6)=="S00439" ///
| substr(diag,1,6)=="S00501" ///
| substr(diag,1,6)=="S00502" ///
| substr(diag,1,6)=="S00511" ///
| substr(diag,1,6)=="S00512" ///
| substr(diag,1,6)=="S00521" ///
| substr(diag,1,6)=="S00531" ///
| substr(diag,1,6)=="S00532" ///
| substr(diag,1,6)=="S00571" ///
| substr(diag,1,6)=="S00572" ///
| substr(diag,1,5)=="S0080" ///
| substr(diag,1,5)=="S0081" ///
| substr(diag,1,5)=="S0082" ///
| substr(diag,1,5)=="S0083" 

replace trauma=1 if  substr(diag,1,5)=="S0085" ///
| substr(diag,1,5)=="S0087" ///
| substr(diag,1,5)=="S0090" ///
| substr(diag,1,5)=="S0091" ///
| substr(diag,1,5)=="S0093" ///
| substr(diag,1,5)=="S0100" ///
| substr(diag,1,5)=="S0101" ///
| substr(diag,1,5)=="S0102" ///
| substr(diag,1,5)=="S0103" ///
| substr(diag,1,5)=="S0104" ///
| substr(diag,1,5)=="S0105" ///
| substr(diag,1,6)=="S01101" ///
| substr(diag,1,6)=="S01102" ///
| substr(diag,1,6)=="S01109" ///
| substr(diag,1,6)=="S01111" ///
| substr(diag,1,6)=="S01112" ///
| substr(diag,1,6)=="S01119" ///
| substr(diag,1,6)=="S01121" ///
| substr(diag,1,6)=="S01122" ///
| substr(diag,1,6)=="S01129" ///
| substr(diag,1,6)=="S01131" ///
| substr(diag,1,6)=="S01132" ///
| substr(diag,1,6)=="S01139" ///
| substr(diag,1,6)=="S01141" ///
| substr(diag,1,6)=="S01142" ///
| substr(diag,1,6)=="S01151" ///
| substr(diag,1,6)=="S01152" ///
| substr(diag,1,6)=="S01159" ///
| substr(diag,1,5)=="S0120" ///
| substr(diag,1,5)=="S0121" ///
| substr(diag,1,5)=="S0122" ///
| substr(diag,1,5)=="S0123" ///
| substr(diag,1,5)=="S0124" ///
| substr(diag,1,5)=="S0125" ///
| substr(diag,1,6)=="S01301" ///
| substr(diag,1,6)=="S01302" ///
| substr(diag,1,6)=="S01309" ///
| substr(diag,1,6)=="S01311" ///
| substr(diag,1,6)=="S01312" ///
| substr(diag,1,6)=="S01319" ///
| substr(diag,1,6)=="S01321" ///
| substr(diag,1,6)=="S01322" ///
| substr(diag,1,6)=="S01329" ///
| substr(diag,1,6)=="S01331" ///
| substr(diag,1,6)=="S01332" ///
| substr(diag,1,6)=="S01351" ///
| substr(diag,1,6)=="S01352" ///
| substr(diag,1,6)=="S01401" ///
| substr(diag,1,6)=="S01402" ///
| substr(diag,1,6)=="S01409" ///
| substr(diag,1,6)=="S01411" ///
| substr(diag,1,6)=="S01412" ///
| substr(diag,1,6)=="S01419" ///
| substr(diag,1,6)=="S01421" ///
| substr(diag,1,6)=="S01422" ///
| substr(diag,1,6)=="S01429" ///
| substr(diag,1,6)=="S01431" ///
| substr(diag,1,6)=="S01432" ///
| substr(diag,1,6)=="S01439" ///
| substr(diag,1,6)=="S01441" ///
| substr(diag,1,6)=="S01442" ///
| substr(diag,1,6)=="S01451" ///
| substr(diag,1,6)=="S01452" ///
| substr(diag,1,6)=="S01459" ///
| substr(diag,1,6)=="S01501" ///
| substr(diag,1,6)=="S01502" ///
| substr(diag,1,6)=="S01511" ///
| substr(diag,1,6)=="S01512" ///
| substr(diag,1,6)=="S01521" ///
| substr(diag,1,6)=="S01522" ///
| substr(diag,1,6)=="S01531" ///
| substr(diag,1,6)=="S01532" ///
| substr(diag,1,6)=="S01541" ///
| substr(diag,1,6)=="S01542" ///
| substr(diag,1,6)=="S01551" ///
| substr(diag,1,6)=="S01552" ///
| substr(diag,1,5)=="S0180" ///
| substr(diag,1,5)=="S0181" ///
| substr(diag,1,5)=="S0182" ///
| substr(diag,1,5)=="S0183" ///
| substr(diag,1,5)=="S0184" ///
| substr(diag,1,5)=="S0185" ///
| substr(diag,1,5)=="S0190" ///
| substr(diag,1,5)=="S0191" ///
| substr(diag,1,5)=="S0192" ///
| substr(diag,1,5)=="S0193" ///
| substr(diag,1,5)=="S0194" ///
| substr(diag,1,5)=="S0195" ///
| substr(diag,1,4)=="S020" ///
| substr(diag,1,5)=="S0210" ///
| substr(diag,1,6)=="S02110" ///
| substr(diag,1,6)=="S02111" ///
| substr(diag,1,6)=="S02112" ///
| substr(diag,1,6)=="S02113" ///
| substr(diag,1,6)=="S02118" ///
| substr(diag,1,6)=="S02119" ///
| substr(diag,1,5)=="S0219" ///
| substr(diag,1,4)=="S022" ///
| substr(diag,1,4)=="S023" ///
| substr(diag,1,6)=="S02400" ///
| substr(diag,1,6)=="S02401" ///
| substr(diag,1,6)=="S02402" ///
| substr(diag,1,6)=="S02411" ///
| substr(diag,1,6)=="S02412" ///
| substr(diag,1,6)=="S02413" ///
| substr(diag,1,5)=="S0242" ///
| substr(diag,1,4)=="S025" ///
| substr(diag,1,6)=="S02600" 


replace trauma=1 if  substr(diag,1,6)=="S02609" ///
| substr(diag,1,5)=="S0261" ///
| substr(diag,1,5)=="S0262" ///
| substr(diag,1,5)=="S0263" ///
| substr(diag,1,5)=="S0264" ///
| substr(diag,1,5)=="S0265" ///
| substr(diag,1,5)=="S0266" ///
| substr(diag,1,5)=="S0267" ///
| substr(diag,1,5)=="S0269" ///
| substr(diag,1,4)=="S028" ///
| substr(diag,1,5)=="S0291" ///
| substr(diag,1,5)=="S0292" ///
| substr(diag,1,4)=="S030" ///
| substr(diag,1,4)=="S031" ///
| substr(diag,1,4)=="S032" ///
| substr(diag,1,4)=="S034" ///
| substr(diag,1,4)=="S038" ///
| substr(diag,1,6)=="S04011" ///
| substr(diag,1,6)=="S04012" ///
| substr(diag,1,6)=="S04019" ///
| substr(diag,1,6)=="S04032" ///
| substr(diag,1,5)=="S0410" ///
| substr(diag,1,5)=="S0411" ///
| substr(diag,1,5)=="S0412" ///
| substr(diag,1,5)=="S0421" ///
| substr(diag,1,5)=="S0431" ///
| substr(diag,1,5)=="S0432" ///
| substr(diag,1,5)=="S0440" ///
| substr(diag,1,5)=="S0441" ///
| substr(diag,1,5)=="S0442" ///
| substr(diag,1,5)=="S0450" ///
| substr(diag,1,5)=="S0451" ///
| substr(diag,1,5)=="S0452" ///
| substr(diag,1,5)=="S0460" ///
| substr(diag,1,5)=="S0462" ///
| substr(diag,1,6)=="S04819" ///
| substr(diag,1,6)=="S04891" ///
| substr(diag,1,6)=="S04892" ///
| substr(diag,1,6)=="S04899" ///
| substr(diag,1,4)=="S049" ///
| substr(diag,1,5)=="S0500" ///
| substr(diag,1,5)=="S0501" ///
| substr(diag,1,5)=="S0502" ///
| substr(diag,1,5)=="S0510" ///
| substr(diag,1,5)=="S0511" ///
| substr(diag,1,5)=="S0512" ///
| substr(diag,1,5)=="S0520" ///
| substr(diag,1,5)=="S0521" ///
| substr(diag,1,5)=="S0522" ///
| substr(diag,1,5)=="S0530" ///
| substr(diag,1,5)=="S0531" ///
| substr(diag,1,5)=="S0532" ///
| substr(diag,1,5)=="S0540" ///
| substr(diag,1,5)=="S0541" ///
| substr(diag,1,5)=="S0542" ///
| substr(diag,1,5)=="S0550" ///
| substr(diag,1,5)=="S0551" ///
| substr(diag,1,5)=="S0552" ///
| substr(diag,1,5)=="S0560" ///
| substr(diag,1,5)=="S0561" ///
| substr(diag,1,5)=="S0562" ///
| substr(diag,1,5)=="S0570" ///
| substr(diag,1,5)=="S0571" ///
| substr(diag,1,5)=="S0572" ///
| substr(diag,1,4)=="S058" ///
| substr(diag,1,5)=="S0590" ///
| substr(diag,1,5)=="S0591" ///
| substr(diag,1,5)=="S0592" ///
| substr(diag,1,4)=="S060" ///
| substr(diag,1,4)=="S061" ///
| substr(diag,1,4)=="S062" ///
| substr(diag,1,6)=="S06300" ///
| substr(diag,1,6)=="S06301" ///
| substr(diag,1,6)=="S06303" ///
| substr(diag,1,6)=="S06304" ///
| substr(diag,1,6)=="S06305" ///
| substr(diag,1,6)=="S06306" ///
| substr(diag,1,6)=="S06307" ///
| substr(diag,1,6)=="S06308" ///
| substr(diag,1,6)=="S06309" ///
| substr(diag,1,6)=="S06310" ///
| substr(diag,1,6)=="S06311" ///
| substr(diag,1,6)=="S06312" ///
| substr(diag,1,6)=="S06313" ///
| substr(diag,1,6)=="S06314" ///
| substr(diag,1,6)=="S06315" ///
| substr(diag,1,6)=="S06316" ///
| substr(diag,1,6)=="S06317" ///
| substr(diag,1,6)=="S06318" ///
| substr(diag,1,6)=="S06319" ///
| substr(diag,1,6)=="S06320" ///
| substr(diag,1,6)=="S06321" ///
| substr(diag,1,6)=="S06322" ///
| substr(diag,1,6)=="S06323" ///
| substr(diag,1,6)=="S06324" ///
| substr(diag,1,6)=="S06325" ///
| substr(diag,1,6)=="S06326" ///
| substr(diag,1,6)=="S06327" ///
| substr(diag,1,6)=="S06328" ///
| substr(diag,1,6)=="S06329" ///
| substr(diag,1,6)=="S06330" ///
| substr(diag,1,6)=="S06331" ///
| substr(diag,1,6)=="S06332" ///
| substr(diag,1,6)=="S06333" ///
| substr(diag,1,6)=="S06334" ///
| substr(diag,1,6)=="S06335" ///
| substr(diag,1,6)=="S06336" ///
| substr(diag,1,6)=="S06337" ///
| substr(diag,1,6)=="S06338" ///
| substr(diag,1,6)=="S06339" ///
| substr(diag,1,6)=="S06340" ///
| substr(diag,1,6)=="S06341" ///
| substr(diag,1,6)=="S06342" ///
| substr(diag,1,6)=="S06343" ///
| substr(diag,1,6)=="S06344" ///
| substr(diag,1,6)=="S06345" ///
| substr(diag,1,6)=="S06346" ///
| substr(diag,1,6)=="S06347" ///
| substr(diag,1,6)=="S06348" ///
| substr(diag,1,6)=="S06349" ///
| substr(diag,1,6)=="S06350" ///
| substr(diag,1,6)=="S06351" ///
| substr(diag,1,6)=="S06352" ///
| substr(diag,1,6)=="S06353" ///
| substr(diag,1,6)=="S06354" ///
| substr(diag,1,6)=="S06355" ///
| substr(diag,1,6)=="S06356" ///
| substr(diag,1,6)=="S06357" ///
| substr(diag,1,6)=="S06358" ///
| substr(diag,1,6)=="S06359" ///
| substr(diag,1,6)=="S06360" ///
| substr(diag,1,6)=="S06361" ///
| substr(diag,1,6)=="S06362" ///
| substr(diag,1,6)=="S06363" ///
| substr(diag,1,6)=="S06364" ///
| substr(diag,1,6)=="S06365" ///
| substr(diag,1,6)=="S06366" ///
| substr(diag,1,6)=="S06367" ///
| substr(diag,1,6)=="S06368" ///
| substr(diag,1,6)=="S06369" ///
| substr(diag,1,6)=="S06370" ///
| substr(diag,1,6)=="S06371" ///
| substr(diag,1,6)=="S06373" ///
| substr(diag,1,6)=="S06374" ///
| substr(diag,1,6)=="S06375" ///
| substr(diag,1,6)=="S06376" ///
| substr(diag,1,6)=="S06377" ///
| substr(diag,1,6)=="S06378" ///
| substr(diag,1,6)=="S06379" ///
| substr(diag,1,6)=="S06380" ///
| substr(diag,1,6)=="S06381" ///
| substr(diag,1,6)=="S06382" ///
| substr(diag,1,6)=="S06383" ///
| substr(diag,1,6)=="S06384" ///
| substr(diag,1,6)=="S06385" ///
| substr(diag,1,6)=="S06386" ///
| substr(diag,1,6)=="S06387" ///
| substr(diag,1,6)=="S06388" ///
| substr(diag,1,6)=="S06389" ///
| substr(diag,1,4)=="S064" ///
| substr(diag,1,4)=="S065" ///
| substr(diag,1,4)=="S066" ///
| substr(diag,1,6)=="S06810" ///
| substr(diag,1,6)=="S06811" ///
| substr(diag,1,6)=="S06816" ///
| substr(diag,1,6)=="S06817" ///
| substr(diag,1,6)=="S06818" ///
| substr(diag,1,6)=="S06819" ///
| substr(diag,1,6)=="S06820" ///
| substr(diag,1,6)=="S06821" ///
| substr(diag,1,6)=="S06824" ///
| substr(diag,1,6)=="S06826" ///
| substr(diag,1,6)=="S06829" ///
| substr(diag,1,6)=="S06890" ///
| substr(diag,1,6)=="S06891" ///
| substr(diag,1,6)=="S06892" ///
| substr(diag,1,6)=="S06893" ///
| substr(diag,1,6)=="S06894" ///
| substr(diag,1,6)=="S06895" ///
| substr(diag,1,6)=="S06896" ///
| substr(diag,1,6)=="S06897" ///
| substr(diag,1,6)=="S06898" ///
| substr(diag,1,6)=="S06899" ///
| substr(diag,1,4)=="S069" ///
| substr(diag,1,4)=="S070" ///
| substr(diag,1,4)=="S071" ///
| substr(diag,1,4)=="S078" ///
| substr(diag,1,4)=="S079" ///
| substr(diag,1,4)=="S080" ///
| substr(diag,1,6)=="S08111" ///
| substr(diag,1,6)=="S08112" ///
| substr(diag,1,6)=="S08119" ///
| substr(diag,1,6)=="S08121" ///
| substr(diag,1,6)=="S08122" ///
| substr(diag,1,6)=="S08129" ///
| substr(diag,1,6)=="S08811" ///
| substr(diag,1,6)=="S08812" 
 
replace trauma=1 if  substr(diag,1,4)=="S090" ///
| substr(diag,1,5)=="S0910" ///
| substr(diag,1,5)=="S0911" ///
| substr(diag,1,5)=="S0912" ///
| substr(diag,1,5)=="S0919" ///
| substr(diag,1,5)=="S0920" ///
| substr(diag,1,5)=="S0921" ///
| substr(diag,1,5)=="S0922" ///
| substr(diag,1,6)=="S09301" ///
| substr(diag,1,6)=="S09302" ///
| substr(diag,1,6)=="S09309" ///
| substr(diag,1,6)=="S09391" ///
| substr(diag,1,6)=="S09392" ///
| substr(diag,1,6)=="S09399" ///
| substr(diag,1,4)=="S098" ///
| substr(diag,1,5)=="S0990" ///
| substr(diag,1,5)=="S0991" ///
| substr(diag,1,5)=="S0992" ///
| substr(diag,1,5)=="S0993" ///
| substr(diag,1,4)=="S100" ///
| substr(diag,1,5)=="S1010" ///
| substr(diag,1,5)=="S1011" ///
| substr(diag,1,5)=="S1080" ///
| substr(diag,1,5)=="S1081" ///
| substr(diag,1,5)=="S1083" ///
| substr(diag,1,5)=="S1085" ///
| substr(diag,1,5)=="S1086" ///
| substr(diag,1,5)=="S1087" ///
| substr(diag,1,5)=="S1090" ///
| substr(diag,1,5)=="S1091" ///
| substr(diag,1,5)=="S1093" ///
| substr(diag,1,5)=="S1094" ///
| substr(diag,1,6)=="S11011" ///
| substr(diag,1,6)=="S11012" ///
| substr(diag,1,6)=="S11013" ///
| substr(diag,1,6)=="S11019" ///
| substr(diag,1,6)=="S11021" ///
| substr(diag,1,6)=="S11022" ///
| substr(diag,1,6)=="S11023" ///
| substr(diag,1,6)=="S11024" ///
| substr(diag,1,6)=="S11029" ///
| substr(diag,1,6)=="S11033" ///
| substr(diag,1,5)=="S1110" ///
| substr(diag,1,5)=="S1111" ///
| substr(diag,1,5)=="S1114" ///
| substr(diag,1,5)=="S1120" ///
| substr(diag,1,5)=="S1121" ///
| substr(diag,1,5)=="S1122" ///
| substr(diag,1,5)=="S1123" ///
| substr(diag,1,5)=="S1124" ///
| substr(diag,1,5)=="S1180" ///
| substr(diag,1,5)=="S1181" ///
| substr(diag,1,5)=="S1182" ///
| substr(diag,1,5)=="S1183" ///
| substr(diag,1,5)=="S1184" ///
| substr(diag,1,5)=="S1185" ///
| substr(diag,1,5)=="S1189" ///
| substr(diag,1,5)=="S1190" ///
| substr(diag,1,5)=="S1191" ///
| substr(diag,1,5)=="S1192" ///
| substr(diag,1,5)=="S1193" ///
| substr(diag,1,5)=="S1194" ///
| substr(diag,1,5)=="S1195" ///
| substr(diag,1,6)=="S12000" ///
| substr(diag,1,6)=="S12001" ///
| substr(diag,1,5)=="S1201" ///
| substr(diag,1,5)=="S1202" ///
| substr(diag,1,6)=="S12030" ///
| substr(diag,1,6)=="S12031" ///
| substr(diag,1,6)=="S12040" ///
| substr(diag,1,6)=="S12041" ///
| substr(diag,1,6)=="S12090" ///
| substr(diag,1,6)=="S12091" 


replace trauma=1 if  substr(diag,1,6)=="S12100" ///
| substr(diag,1,6)=="S12101" ///
| substr(diag,1,6)=="S12110" ///
| substr(diag,1,6)=="S12111" ///
| substr(diag,1,6)=="S12112" ///
| substr(diag,1,6)=="S12120" ///
| substr(diag,1,6)=="S12121" ///
| substr(diag,1,6)=="S12130" ///
| substr(diag,1,5)=="S1214" ///
| substr(diag,1,6)=="S12150" ///
| substr(diag,1,6)=="S12151" ///
| substr(diag,1,6)=="S12190" ///
| substr(diag,1,6)=="S12191" ///
| substr(diag,1,6)=="S12200" ///
| substr(diag,1,6)=="S12201" ///
| substr(diag,1,6)=="S12230" ///
| substr(diag,1,6)=="S12231" ///
| substr(diag,1,5)=="S1224" ///
| substr(diag,1,6)=="S12250" ///
| substr(diag,1,6)=="S12251" ///
| substr(diag,1,6)=="S12290" ///
| substr(diag,1,6)=="S12291" ///
| substr(diag,1,6)=="S12300" ///
| substr(diag,1,6)=="S12301" ///
| substr(diag,1,6)=="S12330" ///
| substr(diag,1,6)=="S12331" ///
| substr(diag,1,6)=="S12350" ///
| substr(diag,1,6)=="S12351" ///
| substr(diag,1,6)=="S12390" ///
| substr(diag,1,6)=="S12391" ///
| substr(diag,1,6)=="S12400" ///
| substr(diag,1,6)=="S12401" ///
| substr(diag,1,6)=="S12430" ///
| substr(diag,1,6)=="S12431" ///
| substr(diag,1,5)=="S1244" ///
| substr(diag,1,6)=="S12450" ///
| substr(diag,1,6)=="S12451" ///
| substr(diag,1,6)=="S12490" ///
| substr(diag,1,6)=="S12491" ///
| substr(diag,1,6)=="S12500" ///
| substr(diag,1,6)=="S12501" ///
| substr(diag,1,6)=="S12530" ///
| substr(diag,1,6)=="S12531" ///
| substr(diag,1,5)=="S1254" ///
| substr(diag,1,6)=="S12550" ///
| substr(diag,1,6)=="S12551" ///
| substr(diag,1,6)=="S12590" ///
| substr(diag,1,6)=="S12591" ///
| substr(diag,1,6)=="S12600" ///
| substr(diag,1,6)=="S12601" ///
| substr(diag,1,6)=="S12630" ///
| substr(diag,1,6)=="S12631" ///
| substr(diag,1,5)=="S1264" ///
| substr(diag,1,6)=="S12650" ///
| substr(diag,1,6)=="S12651" ///
| substr(diag,1,6)=="S12690" ///
| substr(diag,1,6)=="S12691" ///
| substr(diag,1,4)=="S128" ///
| substr(diag,1,4)=="S129" ///
| substr(diag,1,4)=="S130" ///
| substr(diag,1,6)=="S13100" ///
| substr(diag,1,6)=="S13101" ///
| substr(diag,1,6)=="S13110" ///
| substr(diag,1,6)=="S13111" ///
| substr(diag,1,6)=="S13120" ///
| substr(diag,1,6)=="S13121" ///
| substr(diag,1,6)=="S13130" ///
| substr(diag,1,6)=="S13131" ///
| substr(diag,1,6)=="S13140" ///
| substr(diag,1,6)=="S13141" ///
| substr(diag,1,6)=="S13150" ///
| substr(diag,1,6)=="S13151" ///
| substr(diag,1,6)=="S13160" ///
| substr(diag,1,6)=="S13161" ///
| substr(diag,1,6)=="S13170" ///
| substr(diag,1,6)=="S13171" ///
| substr(diag,1,6)=="S13180" ///
| substr(diag,1,6)=="S13181" ///
| substr(diag,1,5)=="S1320" ///
| substr(diag,1,5)=="S1329" ///
| substr(diag,1,4)=="S134" ///
| substr(diag,1,4)=="S135" ///
| substr(diag,1,4)=="S138" ///
| substr(diag,1,4)=="S139" ///
| substr(diag,1,4)=="S140" ///
| substr(diag,1,6)=="S14101" ///
| substr(diag,1,6)=="S14102" ///
| substr(diag,1,6)=="S14103" ///
| substr(diag,1,6)=="S14104" ///
| substr(diag,1,6)=="S14105" ///
| substr(diag,1,6)=="S14106" ///
| substr(diag,1,6)=="S14107" ///
| substr(diag,1,6)=="S14108" ///
| substr(diag,1,6)=="S14109" ///
| substr(diag,1,6)=="S14111" ///
| substr(diag,1,6)=="S14112" ///
| substr(diag,1,6)=="S14113" ///
| substr(diag,1,6)=="S14114" ///
| substr(diag,1,6)=="S14115" ///
| substr(diag,1,6)=="S14116" ///
| substr(diag,1,6)=="S14117" ///
| substr(diag,1,6)=="S14118" ///
| substr(diag,1,6)=="S14119" ///
| substr(diag,1,6)=="S14121" ///
| substr(diag,1,6)=="S14122" ///
| substr(diag,1,6)=="S14123" ///
| substr(diag,1,6)=="S14124" ///
| substr(diag,1,6)=="S14125" ///
| substr(diag,1,6)=="S14126" ///
| substr(diag,1,6)=="S14127" ///
| substr(diag,1,6)=="S14128" ///
| substr(diag,1,6)=="S14129" ///
| substr(diag,1,6)=="S14132" ///
| substr(diag,1,6)=="S14133" ///
| substr(diag,1,6)=="S14134" ///
| substr(diag,1,6)=="S14135" ///
| substr(diag,1,6)=="S14136" ///
| substr(diag,1,6)=="S14137" ///
| substr(diag,1,6)=="S14141" ///
| substr(diag,1,6)=="S14142" ///
| substr(diag,1,6)=="S14143" ///
| substr(diag,1,6)=="S14145" ///
| substr(diag,1,6)=="S14146" ///
| substr(diag,1,6)=="S14149" ///
| substr(diag,1,6)=="S14151" ///
| substr(diag,1,6)=="S14152" ///
| substr(diag,1,6)=="S14153" ///
| substr(diag,1,6)=="S14154" ///
| substr(diag,1,6)=="S14155" ///
| substr(diag,1,6)=="S14156" ///
| substr(diag,1,6)=="S14157" ///
| substr(diag,1,6)=="S14158" ///
| substr(diag,1,6)=="S14159" ///
| substr(diag,1,4)=="S142" ///
| substr(diag,1,4)=="S143" ///
| substr(diag,1,4)=="S144" ///
| substr(diag,1,4)=="S145" ///
| substr(diag,1,4)=="S148" ///
| substr(diag,1,4)=="S149" ///
| substr(diag,1,6)=="S15001" ///
| substr(diag,1,6)=="S15002" ///
| substr(diag,1,6)=="S15009" ///
| substr(diag,1,6)=="S15011" ///
| substr(diag,1,6)=="S15012" ///
| substr(diag,1,6)=="S15019" ///
| substr(diag,1,6)=="S15021" ///
| substr(diag,1,6)=="S15022" ///
| substr(diag,1,6)=="S15029" ///
| substr(diag,1,6)=="S15091" ///
| substr(diag,1,6)=="S15092" ///
| substr(diag,1,6)=="S15099" ///
| substr(diag,1,6)=="S15101" ///
| substr(diag,1,6)=="S15102" ///
| substr(diag,1,6)=="S15109" ///
| substr(diag,1,6)=="S15111" ///
| substr(diag,1,6)=="S15112" ///
| substr(diag,1,6)=="S15119" ///
| substr(diag,1,6)=="S15121" ///
| substr(diag,1,6)=="S15122" ///
| substr(diag,1,6)=="S15129" ///
| substr(diag,1,6)=="S15191" ///
| substr(diag,1,6)=="S15192" ///
| substr(diag,1,6)=="S15199" ///
| substr(diag,1,6)=="S15201" ///
| substr(diag,1,6)=="S15209" ///
| substr(diag,1,6)=="S15211" ///
| substr(diag,1,6)=="S15212" ///
| substr(diag,1,6)=="S15219" ///
| substr(diag,1,6)=="S15221" ///
| substr(diag,1,6)=="S15222" ///
| substr(diag,1,6)=="S15229" ///
| substr(diag,1,6)=="S15291" ///
| substr(diag,1,6)=="S15292" ///
| substr(diag,1,6)=="S15301" ///
| substr(diag,1,6)=="S15302" ///
| substr(diag,1,6)=="S15309" ///
| substr(diag,1,6)=="S15311" ///
| substr(diag,1,6)=="S15312" ///
| substr(diag,1,6)=="S15321" ///
| substr(diag,1,6)=="S15322" ///
| substr(diag,1,6)=="S15329" ///
| substr(diag,1,6)=="S15391" ///
| substr(diag,1,6)=="S15392" ///
| substr(diag,1,4)=="S158" ///
| substr(diag,1,4)=="S159" ///
| substr(diag,1,4)=="S161" ///
| substr(diag,1,4)=="S162" ///
| substr(diag,1,4)=="S168" ///
| substr(diag,1,4)=="S169" ///
| substr(diag,1,4)=="S170" ///
| substr(diag,1,4)=="S179" ///
| substr(diag,1,5)=="S1980" ///
| substr(diag,1,5)=="S1981" ///
| substr(diag,1,5)=="S1982" ///
| substr(diag,1,5)=="S1983" ///
| substr(diag,1,5)=="S1984" ///
| substr(diag,1,5)=="S1985" ///
| substr(diag,1,5)=="S1989" ///
| substr(diag,1,4)=="S199" ///
| substr(diag,1,5)=="S2000" ///
| substr(diag,1,5)=="S2001" ///
| substr(diag,1,5)=="S2002" ///
| substr(diag,1,6)=="S20111"
 
replace trauma=1 if  substr(diag,1,6)=="S20112" ///
| substr(diag,1,6)=="S20119" ///
| substr(diag,1,5)=="S2020" ///
| substr(diag,1,6)=="S20211" ///
| substr(diag,1,6)=="S20212" ///
| substr(diag,1,6)=="S20219" ///
| substr(diag,1,6)=="S20221" ///
| substr(diag,1,6)=="S20222" ///
| substr(diag,1,6)=="S20229" ///
| substr(diag,1,6)=="S20301" ///
| substr(diag,1,6)=="S20302" ///
| substr(diag,1,6)=="S20309" ///
| substr(diag,1,6)=="S20311" ///
| substr(diag,1,6)=="S20312" ///
| substr(diag,1,6)=="S20319" ///
| substr(diag,1,6)=="S20401" ///
| substr(diag,1,6)=="S20402" ///
| substr(diag,1,6)=="S20409" ///
| substr(diag,1,6)=="S20411" ///
| substr(diag,1,6)=="S20412" ///
| substr(diag,1,6)=="S20419" ///
| substr(diag,1,6)=="S20452" ///
| substr(diag,1,5)=="S2090" ///
| substr(diag,1,5)=="S2091" ///
| substr(diag,1,6)=="S21002" ///
| substr(diag,1,6)=="S21009" ///
| substr(diag,1,6)=="S21011" ///
| substr(diag,1,6)=="S21012" ///
| substr(diag,1,6)=="S21021" ///
| substr(diag,1,6)=="S21022" ///
| substr(diag,1,6)=="S21031" ///
| substr(diag,1,6)=="S21041" ///
| substr(diag,1,6)=="S21052" ///
| substr(diag,1,6)=="S21101" ///
| substr(diag,1,6)=="S21102" ///
| substr(diag,1,6)=="S21109" ///
| substr(diag,1,6)=="S21111" ///
| substr(diag,1,6)=="S21112" ///
| substr(diag,1,6)=="S21119" ///
| substr(diag,1,6)=="S21121" ///
| substr(diag,1,6)=="S21122" ///
| substr(diag,1,6)=="S21129" ///
| substr(diag,1,6)=="S21131" ///
| substr(diag,1,6)=="S21132" ///
| substr(diag,1,6)=="S21139" ///
| substr(diag,1,6)=="S21141" ///
| substr(diag,1,6)=="S21142" ///
| substr(diag,1,6)=="S21149" ///
| substr(diag,1,6)=="S21151" ///
| substr(diag,1,6)=="S21152" ///
| substr(diag,1,6)=="S21201" ///
| substr(diag,1,6)=="S21202" ///
| substr(diag,1,6)=="S21209" ///
| substr(diag,1,6)=="S21211" ///
| substr(diag,1,6)=="S21212" ///
| substr(diag,1,6)=="S21219" ///
| substr(diag,1,6)=="S21221" ///
| substr(diag,1,6)=="S21222" ///
| substr(diag,1,6)=="S21229" ///
| substr(diag,1,6)=="S21231" ///
| substr(diag,1,6)=="S21232" ///
| substr(diag,1,6)=="S21239" ///
| substr(diag,1,6)=="S21241" ///
| substr(diag,1,6)=="S21242" ///
| substr(diag,1,6)=="S21249" ///
| substr(diag,1,6)=="S21259" ///
| substr(diag,1,6)=="S21301" ///
| substr(diag,1,6)=="S21302" ///
| substr(diag,1,6)=="S21309" ///
| substr(diag,1,6)=="S21311" ///
| substr(diag,1,6)=="S21312" ///
| substr(diag,1,6)=="S21319" ///
| substr(diag,1,6)=="S21321" ///
| substr(diag,1,6)=="S21322" ///
| substr(diag,1,6)=="S21331" ///
| substr(diag,1,6)=="S21332" ///
| substr(diag,1,6)=="S21339" ///
| substr(diag,1,6)=="S21341" ///
| substr(diag,1,6)=="S21342" ///
| substr(diag,1,6)=="S21349" ///
| substr(diag,1,6)=="S21401" ///
| substr(diag,1,6)=="S21402" ///
| substr(diag,1,6)=="S21409" ///
| substr(diag,1,6)=="S21411" ///
| substr(diag,1,6)=="S21412" ///
| substr(diag,1,6)=="S21419" ///
| substr(diag,1,6)=="S21421" ///
| substr(diag,1,6)=="S21422" ///
| substr(diag,1,6)=="S21429" ///
| substr(diag,1,6)=="S21431" ///
| substr(diag,1,6)=="S21432" ///
| substr(diag,1,6)=="S21439" ///
| substr(diag,1,6)=="S21441" ///
| substr(diag,1,6)=="S21442" ///
| substr(diag,1,5)=="S2190" ///
| substr(diag,1,5)=="S2191" ///
| substr(diag,1,5)=="S2192" ///
| substr(diag,1,5)=="S2193" ///
| substr(diag,1,5)=="S2194" ///
| substr(diag,1,5)=="S2195" ///
| substr(diag,1,6)=="S22000" ///
| substr(diag,1,6)=="S22001" ///
| substr(diag,1,6)=="S22002" ///
| substr(diag,1,6)=="S22008" ///
| substr(diag,1,6)=="S22009" ///
| substr(diag,1,6)=="S22010" ///
| substr(diag,1,6)=="S22011" ///
| substr(diag,1,6)=="S22012" ///
| substr(diag,1,6)=="S22018" ///
| substr(diag,1,6)=="S22019" ///
| substr(diag,1,6)=="S22020" ///
| substr(diag,1,6)=="S22021" ///
| substr(diag,1,6)=="S22022" ///
| substr(diag,1,6)=="S22028" ///
| substr(diag,1,6)=="S22029" ///
| substr(diag,1,6)=="S22030" ///
| substr(diag,1,6)=="S22031" ///
| substr(diag,1,6)=="S22032" ///
| substr(diag,1,6)=="S22038" ///
| substr(diag,1,6)=="S22039" ///
| substr(diag,1,6)=="S22040" ///
| substr(diag,1,6)=="S22041" ///
| substr(diag,1,6)=="S22042" ///
| substr(diag,1,6)=="S22048" ///
| substr(diag,1,6)=="S22049" ///
| substr(diag,1,6)=="S22050" ///
| substr(diag,1,6)=="S22051" ///
| substr(diag,1,6)=="S22052" ///
| substr(diag,1,6)=="S22058" ///
| substr(diag,1,6)=="S22059" ///
| substr(diag,1,6)=="S22060" ///
| substr(diag,1,6)=="S22061" ///
| substr(diag,1,6)=="S22062" ///
| substr(diag,1,6)=="S22068" ///
| substr(diag,1,6)=="S22069" ///
| substr(diag,1,6)=="S22070" ///
| substr(diag,1,6)=="S22071" ///
| substr(diag,1,6)=="S22072" ///
| substr(diag,1,6)=="S22078" ///
| substr(diag,1,6)=="S22079" ///
| substr(diag,1,6)=="S22080" ///
| substr(diag,1,6)=="S22081" ///
| substr(diag,1,6)=="S22082" ///
| substr(diag,1,6)=="S22088" ///
| substr(diag,1,6)=="S22089" ///
| substr(diag,1,5)=="S2220" ///
| substr(diag,1,5)=="S2221" ///
| substr(diag,1,5)=="S2222" ///
| substr(diag,1,5)=="S2223" ///
| substr(diag,1,5)=="S2224" ///
| substr(diag,1,5)=="S2231" ///
| substr(diag,1,5)=="S2232" ///
| substr(diag,1,5)=="S2239" ///
| substr(diag,1,5)=="S2241" ///
| substr(diag,1,5)=="S2242" ///
| substr(diag,1,5)=="S2243" ///
| substr(diag,1,5)=="S2249" ///
| substr(diag,1,4)=="S225" ///
| substr(diag,1,4)=="S229" ///
| substr(diag,1,4)=="S230" ///
| substr(diag,1,6)=="S23101" ///
| substr(diag,1,6)=="S23110" ///
| substr(diag,1,6)=="S23111" ///
| substr(diag,1,6)=="S23123" ///
| substr(diag,1,6)=="S23131" ///
| substr(diag,1,6)=="S23133" ///
| substr(diag,1,6)=="S23141" ///
| substr(diag,1,6)=="S23142" ///
| substr(diag,1,6)=="S23143" ///
| substr(diag,1,6)=="S23150" ///
| substr(diag,1,6)=="S23151" ///
| substr(diag,1,6)=="S23153" ///
| substr(diag,1,6)=="S23160" ///
| substr(diag,1,6)=="S23161" ///
| substr(diag,1,6)=="S23162" ///
| substr(diag,1,6)=="S23163" ///
| substr(diag,1,6)=="S23170" ///
| substr(diag,1,6)=="S23171" ///
| substr(diag,1,5)=="S2320" ///
| substr(diag,1,5)=="S2329" ///
| substr(diag,1,4)=="S233" ///
| substr(diag,1,5)=="S2341" ///
| substr(diag,1,6)=="S23420" ///
| substr(diag,1,6)=="S23428" ///
| substr(diag,1,6)=="S23429" ///
| substr(diag,1,4)=="S238" ///
| substr(diag,1,4)=="S239" ///
| substr(diag,1,4)=="S240" ///
| substr(diag,1,6)=="S24101" ///
| substr(diag,1,6)=="S24102" ///
| substr(diag,1,6)=="S24103" ///
| substr(diag,1,6)=="S24104" ///
| substr(diag,1,6)=="S24109" ///
| substr(diag,1,6)=="S24111" ///
| substr(diag,1,6)=="S24112" ///
| substr(diag,1,6)=="S24113" ///
| substr(diag,1,6)=="S24114" ///
| substr(diag,1,6)=="S24119" ///
| substr(diag,1,6)=="S24132" ///
| substr(diag,1,6)=="S24133" ///
| substr(diag,1,6)=="S24134" ///
| substr(diag,1,6)=="S24139" ///
| substr(diag,1,6)=="S24142" ///
| substr(diag,1,6)=="S24144" ///
| substr(diag,1,6)=="S24149" ///
| substr(diag,1,6)=="S24151" ///
| substr(diag,1,6)=="S24152" ///
| substr(diag,1,6)=="S24153" ///
| substr(diag,1,6)=="S24154" 


replace trauma=1 if  substr(diag,1,4)=="S242" ///
| substr(diag,1,4)=="S249" ///
| substr(diag,1,5)=="S2500" ///
| substr(diag,1,5)=="S2501" ///
| substr(diag,1,5)=="S2502" ///
| substr(diag,1,5)=="S2509" ///
| substr(diag,1,6)=="S25101" ///
| substr(diag,1,6)=="S25102" ///
| substr(diag,1,6)=="S25109" ///
| substr(diag,1,6)=="S25111" ///
| substr(diag,1,6)=="S25112" ///
| substr(diag,1,6)=="S25119" ///
| substr(diag,1,6)=="S25121" ///
| substr(diag,1,6)=="S25122" ///
| substr(diag,1,6)=="S25191" ///
| substr(diag,1,6)=="S25192" ///
| substr(diag,1,5)=="S2520" ///
| substr(diag,1,5)=="S2521" ///
| substr(diag,1,5)=="S2522" ///
| substr(diag,1,5)=="S2529" ///
| substr(diag,1,6)=="S25301" ///
| substr(diag,1,6)=="S25302" ///
| substr(diag,1,6)=="S25309" ///
| substr(diag,1,6)=="S25311" ///
| substr(diag,1,6)=="S25312" ///
| substr(diag,1,6)=="S25322" ///
| substr(diag,1,6)=="S25392" ///
| substr(diag,1,6)=="S25401" ///
| substr(diag,1,6)=="S25409" ///
| substr(diag,1,6)=="S25411" ///
| substr(diag,1,6)=="S25412" ///
| substr(diag,1,6)=="S25419" ///
| substr(diag,1,6)=="S25422" ///
| substr(diag,1,6)=="S25429" ///
| substr(diag,1,6)=="S25491" ///
| substr(diag,1,6)=="S25501" ///
| substr(diag,1,6)=="S25509" ///
| substr(diag,1,6)=="S25511" ///
| substr(diag,1,6)=="S25512" ///
| substr(diag,1,6)=="S25519" ///
| substr(diag,1,6)=="S25599" ///
| substr(diag,1,6)=="S25801" ///
| substr(diag,1,6)=="S25802" ///
| substr(diag,1,6)=="S25809" ///
| substr(diag,1,6)=="S25811" ///
| substr(diag,1,6)=="S25812" ///
| substr(diag,1,6)=="S25819" ///
| substr(diag,1,6)=="S25891" ///
| substr(diag,1,6)=="S25892" ///
| substr(diag,1,6)=="S25899" ///
| substr(diag,1,5)=="S2590" ///
| substr(diag,1,5)=="S2591" ///
| substr(diag,1,5)=="S2599" ///
| substr(diag,1,5)=="S2600" ///
| substr(diag,1,5)=="S2601" ///
| substr(diag,1,6)=="S26020" ///
| substr(diag,1,6)=="S26021" ///
| substr(diag,1,6)=="S26022" ///
| substr(diag,1,5)=="S2609" ///
| substr(diag,1,5)=="S2610" ///
| substr(diag,1,5)=="S2611" ///
| substr(diag,1,5)=="S2612" ///
| substr(diag,1,5)=="S2619" ///
| substr(diag,1,5)=="S2690" ///
| substr(diag,1,5)=="S2691" ///
| substr(diag,1,5)=="S2692" ///
| substr(diag,1,5)=="S2699" ///
| substr(diag,1,4)=="S270" ///
| substr(diag,1,4)=="S271" ///
| substr(diag,1,4)=="S272" ///
| substr(diag,1,6)=="S27301" ///
| substr(diag,1,6)=="S27302" ///
| substr(diag,1,6)=="S27309" ///
| substr(diag,1,6)=="S27311" ///
| substr(diag,1,6)=="S27312" ///
| substr(diag,1,6)=="S27319" ///
| substr(diag,1,6)=="S27321" ///
| substr(diag,1,6)=="S27322" ///
| substr(diag,1,6)=="S27329" ///
| substr(diag,1,6)=="S27331" ///
| substr(diag,1,6)=="S27332" ///
| substr(diag,1,6)=="S27339" ///
| substr(diag,1,6)=="S27391" ///
| substr(diag,1,6)=="S27392" ///
| substr(diag,1,6)=="S27399" ///
| substr(diag,1,6)=="S27402" ///
| substr(diag,1,6)=="S27409" ///
| substr(diag,1,6)=="S27421" ///
| substr(diag,1,6)=="S27422" ///
| substr(diag,1,6)=="S27431" ///
| substr(diag,1,6)=="S27491" ///
| substr(diag,1,5)=="S2753" ///
| substr(diag,1,5)=="S2760" ///
| substr(diag,1,5)=="S2763" ///
| substr(diag,1,5)=="S2769" ///
| substr(diag,1,6)=="S27802" ///
| substr(diag,1,6)=="S27803" ///
| substr(diag,1,6)=="S27808" ///
| substr(diag,1,6)=="S27809" ///
| substr(diag,1,6)=="S27812" ///
| substr(diag,1,6)=="S27813" ///
| substr(diag,1,6)=="S27818" ///
| substr(diag,1,6)=="S27819" ///
| substr(diag,1,6)=="S27892" ///
| substr(diag,1,6)=="S27893" 


replace trauma=1 if substr(diag,1,6)=="S27898" ///
| substr(diag,1,6)=="S27899" ///
| substr(diag,1,4)=="S279" ///
| substr(diag,1,4)=="S280" ///
| substr(diag,1,4)=="S281" ///
| substr(diag,1,6)=="S28222" ///
| substr(diag,1,6)=="S29001" ///
| substr(diag,1,6)=="S29009" ///
| substr(diag,1,6)=="S29011" ///
| substr(diag,1,6)=="S29012" ///
| substr(diag,1,6)=="S29019" ///
| substr(diag,1,6)=="S29021" ///
| substr(diag,1,6)=="S29022" ///
| substr(diag,1,6)=="S29029" ///
| substr(diag,1,6)=="S29091" ///
| substr(diag,1,6)=="S29092" ///
| substr(diag,1,6)=="S29099" ///
| substr(diag,1,4)=="S298" ///
| substr(diag,1,4)=="S299" ///
| substr(diag,1,4)=="S300" ///
| substr(diag,1,4)=="S301" ///
| substr(diag,1,6)=="S30201" ///
| substr(diag,1,6)=="S30202" ///
| substr(diag,1,5)=="S3021" ///
| substr(diag,1,5)=="S3022" ///
| substr(diag,1,5)=="S3023" ///
| substr(diag,1,4)=="S303" ///
| substr(diag,1,6)=="S30810" ///
| substr(diag,1,6)=="S30811" ///
| substr(diag,1,6)=="S30812" ///
| substr(diag,1,6)=="S30813" ///
| substr(diag,1,6)=="S30816" ///
| substr(diag,1,6)=="S30817" ///
| substr(diag,1,6)=="S30820" ///
| substr(diag,1,6)=="S30841" ///
| substr(diag,1,6)=="S30850" ///
| substr(diag,1,6)=="S30851" ///
| substr(diag,1,6)=="S30857" ///
| substr(diag,1,6)=="S30870" ///
| substr(diag,1,6)=="S30871" ///
| substr(diag,1,5)=="S3091" ///
| substr(diag,1,5)=="S3092" ///
| substr(diag,1,5)=="S3094" ///
| substr(diag,1,6)=="S31000" ///
| substr(diag,1,6)=="S31001" ///
| substr(diag,1,6)=="S31010" ///
| substr(diag,1,6)=="S31011" ///
| substr(diag,1,6)=="S31020" ///
| substr(diag,1,6)=="S31021" ///
| substr(diag,1,6)=="S31030" ///
| substr(diag,1,6)=="S31031" ///
| substr(diag,1,6)=="S31040" ///
| substr(diag,1,6)=="S31041" ///
| substr(diag,1,6)=="S31100" ///
| substr(diag,1,6)=="S31101" ///
| substr(diag,1,6)=="S31102" ///
| substr(diag,1,6)=="S31103" ///
| substr(diag,1,6)=="S31104" ///
| substr(diag,1,6)=="S31105" ///
| substr(diag,1,6)=="S31109" ///
| substr(diag,1,6)=="S31110" ///
| substr(diag,1,6)=="S31111" ///
| substr(diag,1,6)=="S31112" ///
| substr(diag,1,6)=="S31113" ///
| substr(diag,1,6)=="S31114" ///
| substr(diag,1,6)=="S31115" ///
| substr(diag,1,6)=="S31119" ///
| substr(diag,1,6)=="S31120" ///
| substr(diag,1,6)=="S31121" ///
| substr(diag,1,6)=="S31122" ///
| substr(diag,1,6)=="S31123" ///
| substr(diag,1,6)=="S31124" ///
| substr(diag,1,6)=="S31125" ///
| substr(diag,1,6)=="S31129" ///
| substr(diag,1,6)=="S31130" ///
| substr(diag,1,6)=="S31131" ///
| substr(diag,1,6)=="S31132" ///
| substr(diag,1,6)=="S31133" ///
| substr(diag,1,6)=="S31134" ///
| substr(diag,1,6)=="S31135" ///
| substr(diag,1,6)=="S31139" ///
| substr(diag,1,6)=="S31140" ///
| substr(diag,1,6)=="S31141" ///
| substr(diag,1,6)=="S31142" ///
| substr(diag,1,6)=="S31143" ///
| substr(diag,1,6)=="S31144" ///
| substr(diag,1,6)=="S31145" ///
| substr(diag,1,6)=="S31149" ///
| substr(diag,1,6)=="S31150" ///
| substr(diag,1,6)=="S31152" ///
| substr(diag,1,6)=="S31153" ///
| substr(diag,1,6)=="S31159" ///
| substr(diag,1,5)=="S3120"  


replace trauma=1 if  substr(diag,1,5)=="S3121" ///
| substr(diag,1,5)=="S3122" ///
| substr(diag,1,5)=="S3123" ///
| substr(diag,1,5)=="S3124" ///
| substr(diag,1,5)=="S3125" ///
| substr(diag,1,5)=="S3130" ///
| substr(diag,1,5)=="S3131" ///
| substr(diag,1,5)=="S3132" ///
| substr(diag,1,5)=="S3133" ///
| substr(diag,1,5)=="S3134" ///
| substr(diag,1,5)=="S3135" ///
| substr(diag,1,5)=="S3140" ///
| substr(diag,1,5)=="S3141" ///
| substr(diag,1,5)=="S3142" ///
| substr(diag,1,5)=="S3143" ///
| substr(diag,1,5)=="S3144" ///
| substr(diag,1,6)=="S31501" ///
| substr(diag,1,6)=="S31502" ///
| substr(diag,1,6)=="S31511" ///
| substr(diag,1,6)=="S31512" ///
| substr(diag,1,6)=="S31522" ///
| substr(diag,1,6)=="S31531" ///
| substr(diag,1,6)=="S31541" ///
| substr(diag,1,6)=="S31600" ///
| substr(diag,1,6)=="S31601" ///
| substr(diag,1,6)=="S31602" ///
| substr(diag,1,6)=="S31603" ///
| substr(diag,1,6)=="S31604" ///
| substr(diag,1,6)=="S31605" ///
| substr(diag,1,6)=="S31609" ///
| substr(diag,1,6)=="S31610" ///
| substr(diag,1,6)=="S31611" ///
| substr(diag,1,6)=="S31612" ///
| substr(diag,1,6)=="S31613" ///
| substr(diag,1,6)=="S31614" ///
| substr(diag,1,6)=="S31615" ///
| substr(diag,1,6)=="S31619" ///
| substr(diag,1,6)=="S31620" ///
| substr(diag,1,6)=="S31621" ///
| substr(diag,1,6)=="S31622" ///
| substr(diag,1,6)=="S31623" ///
| substr(diag,1,6)=="S31624" ///
| substr(diag,1,6)=="S31625" ///
| substr(diag,1,6)=="S31629" ///
| substr(diag,1,6)=="S31630" ///
| substr(diag,1,6)=="S31631" ///
| substr(diag,1,6)=="S31632" ///
| substr(diag,1,6)=="S31633" ///
| substr(diag,1,6)=="S31634" ///
| substr(diag,1,6)=="S31635" ///
| substr(diag,1,6)=="S31639" ///
| substr(diag,1,6)=="S31640" ///
| substr(diag,1,6)=="S31641" ///
| substr(diag,1,6)=="S31643" ///
| substr(diag,1,6)=="S31644" ///
| substr(diag,1,6)=="S31645" ///
| substr(diag,1,6)=="S31649" ///
| substr(diag,1,6)=="S31801" ///
| substr(diag,1,6)=="S31802" ///
| substr(diag,1,6)=="S31803" ///
| substr(diag,1,6)=="S31804" ///
| substr(diag,1,6)=="S31809" ///
| substr(diag,1,6)=="S31811" ///
| substr(diag,1,6)=="S31812" ///
| substr(diag,1,6)=="S31813" ///
| substr(diag,1,6)=="S31814" ///
| substr(diag,1,6)=="S31815" ///
| substr(diag,1,6)=="S31819" ///
| substr(diag,1,6)=="S31821" ///
| substr(diag,1,6)=="S31822" ///
| substr(diag,1,6)=="S31823" ///
| substr(diag,1,6)=="S31824" ///
| substr(diag,1,6)=="S31825" ///
| substr(diag,1,6)=="S31829" ///
| substr(diag,1,6)=="S31831" ///
| substr(diag,1,6)=="S31832" ///
| substr(diag,1,6)=="S31839" ///
| substr(diag,1,6)=="S32000" ///
| substr(diag,1,6)=="S32001" ///
| substr(diag,1,6)=="S32002" ///
| substr(diag,1,6)=="S32008" ///
| substr(diag,1,6)=="S32009" ///
| substr(diag,1,6)=="S32010" ///
| substr(diag,1,6)=="S32011" ///
| substr(diag,1,6)=="S32012"  


replace trauma=1 if  substr(diag,1,6)=="S32018" ///
| substr(diag,1,6)=="S32019" ///
| substr(diag,1,6)=="S32020" ///
| substr(diag,1,6)=="S32021" ///
| substr(diag,1,6)=="S32022" ///
| substr(diag,1,6)=="S32028" ///
| substr(diag,1,6)=="S32029" ///
| substr(diag,1,6)=="S32030" ///
| substr(diag,1,6)=="S32031" ///
| substr(diag,1,6)=="S32032" ///
| substr(diag,1,6)=="S32038" ///
| substr(diag,1,6)=="S32039" ///
| substr(diag,1,6)=="S32040" ///
| substr(diag,1,6)=="S32041" ///
| substr(diag,1,6)=="S32042" ///
| substr(diag,1,6)=="S32048" ///
| substr(diag,1,6)=="S32049" ///
| substr(diag,1,6)=="S32050" ///
| substr(diag,1,6)=="S32051" ///
| substr(diag,1,6)=="S32052" ///
| substr(diag,1,6)=="S32058" ///
| substr(diag,1,6)=="S32059" ///
| substr(diag,1,5)=="S3210" ///
| substr(diag,1,6)=="S32110" ///
| substr(diag,1,6)=="S32111" ///
| substr(diag,1,6)=="S32112" ///
| substr(diag,1,6)=="S32119" ///
| substr(diag,1,6)=="S32120" ///
| substr(diag,1,6)=="S32121" ///
| substr(diag,1,6)=="S32122" ///
| substr(diag,1,6)=="S32129" ///
| substr(diag,1,6)=="S32130" ///
| substr(diag,1,6)=="S32131" ///
| substr(diag,1,6)=="S32132" ///
| substr(diag,1,6)=="S32139" ///
| substr(diag,1,5)=="S3214" ///
| substr(diag,1,5)=="S3215" ///
| substr(diag,1,5)=="S3216" ///
| substr(diag,1,5)=="S3217" ///
| substr(diag,1,5)=="S3219" ///
| substr(diag,1,4)=="S322" ///
| substr(diag,1,6)=="S32301" ///
| substr(diag,1,6)=="S32302" ///
| substr(diag,1,6)=="S32309" ///
| substr(diag,1,6)=="S32311" ///
| substr(diag,1,6)=="S32312" ///
| substr(diag,1,6)=="S32313" ///
| substr(diag,1,6)=="S32314" ///
| substr(diag,1,6)=="S32315" ///
| substr(diag,1,6)=="S32391" ///
| substr(diag,1,6)=="S32392" ///
| substr(diag,1,6)=="S32399" ///
| substr(diag,1,6)=="S32401" ///
| substr(diag,1,6)=="S32402" ///
| substr(diag,1,6)=="S32409" ///
| substr(diag,1,6)=="S32411" ///
| substr(diag,1,6)=="S32412" ///
| substr(diag,1,6)=="S32413" ///
| substr(diag,1,6)=="S32414" ///
| substr(diag,1,6)=="S32415" ///
| substr(diag,1,6)=="S32416" ///
| substr(diag,1,6)=="S32421" ///
| substr(diag,1,6)=="S32422" ///
| substr(diag,1,6)=="S32423" ///
| substr(diag,1,6)=="S32424" ///
| substr(diag,1,6)=="S32425" ///
| substr(diag,1,6)=="S32426" ///
| substr(diag,1,6)=="S32431" ///
| substr(diag,1,6)=="S32432" ///
| substr(diag,1,6)=="S32433" ///
| substr(diag,1,6)=="S32434" ///
| substr(diag,1,6)=="S32435" ///
| substr(diag,1,6)=="S32436" ///
| substr(diag,1,6)=="S32441" ///
| substr(diag,1,6)=="S32442" ///
| substr(diag,1,6)=="S32443" ///
| substr(diag,1,6)=="S32444" ///
| substr(diag,1,6)=="S32445" ///
| substr(diag,1,6)=="S32446" ///
| substr(diag,1,6)=="S32451" ///
| substr(diag,1,6)=="S32452" ///
| substr(diag,1,6)=="S32453" ///
| substr(diag,1,6)=="S32454" ///
| substr(diag,1,6)=="S32455" ///
| substr(diag,1,6)=="S32456" ///
| substr(diag,1,6)=="S32461"  


replace trauma=1 if  substr(diag,1,6)=="S32462" ///
| substr(diag,1,6)=="S32464" ///
| substr(diag,1,6)=="S32465" ///
| substr(diag,1,6)=="S32471" ///
| substr(diag,1,6)=="S32472" ///
| substr(diag,1,6)=="S32473" ///
| substr(diag,1,6)=="S32474" ///
| substr(diag,1,6)=="S32475" ///
| substr(diag,1,6)=="S32476" ///
| substr(diag,1,6)=="S32481" ///
| substr(diag,1,6)=="S32482" ///
| substr(diag,1,6)=="S32484" ///
| substr(diag,1,6)=="S32485" ///
| substr(diag,1,6)=="S32491" ///
| substr(diag,1,6)=="S32492" ///
| substr(diag,1,6)=="S32499" ///
| substr(diag,1,6)=="S32501" ///
| substr(diag,1,6)=="S32502" ///
| substr(diag,1,6)=="S32509" ///
| substr(diag,1,6)=="S32511" ///
| substr(diag,1,6)=="S32512" ///
| substr(diag,1,6)=="S32519" ///
| substr(diag,1,6)=="S32591" ///
| substr(diag,1,6)=="S32592" ///
| substr(diag,1,6)=="S32599" ///
| substr(diag,1,6)=="S32601" ///
| substr(diag,1,6)=="S32602" ///
| substr(diag,1,6)=="S32609" ///
| substr(diag,1,6)=="S32611" ///
| substr(diag,1,6)=="S32612" ///
| substr(diag,1,6)=="S32614" ///
| substr(diag,1,6)=="S32615" ///
| substr(diag,1,6)=="S32616" ///
| substr(diag,1,6)=="S32691" ///
| substr(diag,1,6)=="S32692" ///
| substr(diag,1,6)=="S32699" ///
| substr(diag,1,6)=="S32810" ///
| substr(diag,1,6)=="S32811" ///
| substr(diag,1,5)=="S3282" ///
| substr(diag,1,5)=="S3289" ///
| substr(diag,1,4)=="S329" ///
| substr(diag,1,4)=="S330" ///
| substr(diag,1,6)=="S33101" ///
| substr(diag,1,6)=="S33111" ///
| substr(diag,1,6)=="S33120" ///
| substr(diag,1,6)=="S33121" ///
| substr(diag,1,6)=="S33130" ///
| substr(diag,1,6)=="S33131" ///
| substr(diag,1,6)=="S33140" ///
| substr(diag,1,6)=="S33141" ///
| substr(diag,1,4)=="S332" ///
| substr(diag,1,5)=="S3330" ///
| substr(diag,1,5)=="S3339" ///
| substr(diag,1,4)=="S334" ///
| substr(diag,1,4)=="S335" ///
| substr(diag,1,4)=="S336" ///
| substr(diag,1,4)=="S338" ///
| substr(diag,1,4)=="S339" ///
| substr(diag,1,5)=="S3401" ///
| substr(diag,1,6)=="S34101" ///
| substr(diag,1,6)=="S34102" ///
| substr(diag,1,6)=="S34103" ///
| substr(diag,1,6)=="S34104" ///
| substr(diag,1,6)=="S34105" ///
| substr(diag,1,6)=="S34109" ///
| substr(diag,1,6)=="S34111" ///
| substr(diag,1,6)=="S34112" ///
| substr(diag,1,6)=="S34119" ///
| substr(diag,1,6)=="S34121" ///
| substr(diag,1,6)=="S34122" ///
| substr(diag,1,6)=="S34123" ///
| substr(diag,1,6)=="S34124" ///
| substr(diag,1,6)=="S34125" ///
| substr(diag,1,6)=="S34129" ///
| substr(diag,1,6)=="S34139" ///
| substr(diag,1,5)=="S3421" ///
| substr(diag,1,5)=="S3422" ///
| substr(diag,1,4)=="S343"  


replace trauma=1 if  substr(diag,1,4)=="S344" ///
| substr(diag,1,4)=="S345" ///
| substr(diag,1,4)=="S346" ///
| substr(diag,1,4)=="S348" ///
| substr(diag,1,4)=="S349" ///
| substr(diag,1,5)=="S3500" ///
| substr(diag,1,5)=="S3501" ///
| substr(diag,1,5)=="S3502" ///
| substr(diag,1,5)=="S3509" ///
| substr(diag,1,5)=="S3510" ///
| substr(diag,1,5)=="S3511" ///
| substr(diag,1,5)=="S3512" ///
| substr(diag,1,5)=="S3519" ///
| substr(diag,1,6)=="S35211" ///
| substr(diag,1,6)=="S35212" ///
| substr(diag,1,6)=="S35218" ///
| substr(diag,1,6)=="S35219" ///
| substr(diag,1,6)=="S35221" ///
| substr(diag,1,6)=="S35222" ///
| substr(diag,1,6)=="S35228" ///
| substr(diag,1,6)=="S35229" ///
| substr(diag,1,6)=="S35231" ///
| substr(diag,1,6)=="S35232" ///
| substr(diag,1,6)=="S35239" ///
| substr(diag,1,6)=="S35291" ///
| substr(diag,1,6)=="S35292" ///
| substr(diag,1,6)=="S35298" ///
| substr(diag,1,6)=="S35299" ///
| substr(diag,1,6)=="S35311" ///
| substr(diag,1,6)=="S35319" ///
| substr(diag,1,6)=="S35321" ///
| substr(diag,1,6)=="S35328" ///
| substr(diag,1,6)=="S35329" ///
| substr(diag,1,6)=="S35331" ///
| substr(diag,1,6)=="S35339" ///
| substr(diag,1,6)=="S35341" ///
| substr(diag,1,6)=="S35348" ///
| substr(diag,1,6)=="S35401" ///
| substr(diag,1,6)=="S35402" ///
| substr(diag,1,6)=="S35403" ///
| substr(diag,1,6)=="S35404" ///
| substr(diag,1,6)=="S35405" ///
| substr(diag,1,6)=="S35406" ///
| substr(diag,1,6)=="S35411" ///
| substr(diag,1,6)=="S35412" ///
| substr(diag,1,6)=="S35413" ///
| substr(diag,1,6)=="S35414" ///
| substr(diag,1,6)=="S35415" ///
| substr(diag,1,6)=="S35416" ///
| substr(diag,1,6)=="S35491" ///
| substr(diag,1,6)=="S35492" ///
| substr(diag,1,6)=="S35493" ///
| substr(diag,1,6)=="S35494" ///
| substr(diag,1,5)=="S3550" ///
| substr(diag,1,6)=="S35511" ///
| substr(diag,1,6)=="S35512" ///
| substr(diag,1,6)=="S35513" ///
| substr(diag,1,6)=="S35514" ///
| substr(diag,1,6)=="S35515" ///
| substr(diag,1,6)=="S35516" ///
| substr(diag,1,6)=="S35531" ///
| substr(diag,1,6)=="S35532" ///
| substr(diag,1,5)=="S3559" ///
| substr(diag,1,4)=="S358" ///
| substr(diag,1,5)=="S3590" ///
| substr(diag,1,5)=="S3591" ///
| substr(diag,1,5)=="S3599" ///
| substr(diag,1,5)=="S3600" ///
| substr(diag,1,6)=="S36020" ///
| substr(diag,1,6)=="S36021" ///
| substr(diag,1,6)=="S36029" ///
| substr(diag,1,6)=="S36030" ///
| substr(diag,1,6)=="S36031" ///
| substr(diag,1,6)=="S36032" ///
| substr(diag,1,6)=="S36039" ///
| substr(diag,1,5)=="S3609" ///
| substr(diag,1,6)=="S36112" ///
| substr(diag,1,6)=="S36113" ///
| substr(diag,1,6)=="S36114" ///
| substr(diag,1,6)=="S36115" ///
| substr(diag,1,6)=="S36116" ///
| substr(diag,1,6)=="S36118" ///
| substr(diag,1,6)=="S36119" ///
| substr(diag,1,6)=="S36122" ///
| substr(diag,1,6)=="S36123" ///
| substr(diag,1,6)=="S36128" ///
| substr(diag,1,6)=="S36129" ///
| substr(diag,1,5)=="S3613" ///
| substr(diag,1,6)=="S36200" ///
| substr(diag,1,6)=="S36201" ///
| substr(diag,1,6)=="S36202"  


replace trauma=1 if substr(diag,1,6)=="S36209" ///
| substr(diag,1,6)=="S36220" ///
| substr(diag,1,6)=="S36221" ///
| substr(diag,1,6)=="S36222" ///
| substr(diag,1,6)=="S36229" ///
| substr(diag,1,6)=="S36230" ///
| substr(diag,1,6)=="S36231" ///
| substr(diag,1,6)=="S36232" ///
| substr(diag,1,6)=="S36239" ///
| substr(diag,1,6)=="S36240" ///
| substr(diag,1,6)=="S36241" ///
| substr(diag,1,6)=="S36242" ///
| substr(diag,1,6)=="S36249" ///
| substr(diag,1,6)=="S36250" ///
| substr(diag,1,6)=="S36251" ///
| substr(diag,1,6)=="S36252" ///
| substr(diag,1,6)=="S36259" ///
| substr(diag,1,6)=="S36260" ///
| substr(diag,1,6)=="S36261" ///
| substr(diag,1,6)=="S36262" ///
| substr(diag,1,6)=="S36269" ///
| substr(diag,1,6)=="S36290" ///
| substr(diag,1,6)=="S36291" ///
| substr(diag,1,6)=="S36292" ///
| substr(diag,1,6)=="S36299" ///
| substr(diag,1,5)=="S3630" ///
| substr(diag,1,5)=="S3632" ///
| substr(diag,1,5)=="S3633" ///
| substr(diag,1,5)=="S3639" ///
| substr(diag,1,6)=="S36400" ///
| substr(diag,1,6)=="S36408" ///
| substr(diag,1,6)=="S36409" ///
| substr(diag,1,6)=="S36410" ///
| substr(diag,1,6)=="S36418" ///
| substr(diag,1,6)=="S36419" ///
| substr(diag,1,6)=="S36420" ///
| substr(diag,1,6)=="S36428" ///
| substr(diag,1,6)=="S36429" ///
| substr(diag,1,6)=="S36430" ///
| substr(diag,1,6)=="S36438" ///
| substr(diag,1,6)=="S36439" ///
| substr(diag,1,6)=="S36490" ///
| substr(diag,1,6)=="S36498" ///
| substr(diag,1,6)=="S36499" ///
| substr(diag,1,6)=="S36500" ///
| substr(diag,1,6)=="S36501" ///
| substr(diag,1,6)=="S36502" ///
| substr(diag,1,6)=="S36503" ///
| substr(diag,1,6)=="S36508" ///
| substr(diag,1,6)=="S36509" ///
| substr(diag,1,6)=="S36510" ///
| substr(diag,1,6)=="S36511" ///
| substr(diag,1,6)=="S36512" ///
| substr(diag,1,6)=="S36513" ///
| substr(diag,1,6)=="S36519" ///
| substr(diag,1,6)=="S36520" ///
| substr(diag,1,6)=="S36521" ///
| substr(diag,1,6)=="S36522" ///
| substr(diag,1,6)=="S36523" ///
| substr(diag,1,6)=="S36528" ///
| substr(diag,1,6)=="S36529" ///
| substr(diag,1,6)=="S36530" ///
| substr(diag,1,6)=="S36531" ///
| substr(diag,1,6)=="S36532" ///
| substr(diag,1,6)=="S36533" ///
| substr(diag,1,6)=="S36538" ///
| substr(diag,1,6)=="S36539" ///
| substr(diag,1,6)=="S36590" ///
| substr(diag,1,6)=="S36591" ///
| substr(diag,1,6)=="S36592" ///
| substr(diag,1,6)=="S36593" ///
| substr(diag,1,6)=="S36598" ///
| substr(diag,1,6)=="S36599" ///
| substr(diag,1,5)=="S3660" ///
| substr(diag,1,5)=="S3661" ///
| substr(diag,1,5)=="S3662"  


replace trauma=1 if  substr(diag,1,5)=="S3663" ///
| substr(diag,1,5)=="S3669" ///
| substr(diag,1,5)=="S3681" ///
| substr(diag,1,6)=="S36892" ///
| substr(diag,1,6)=="S36893" ///
| substr(diag,1,6)=="S36898" ///
| substr(diag,1,6)=="S36899" ///
| substr(diag,1,5)=="S3690" ///
| substr(diag,1,5)=="S3692" ///
| substr(diag,1,5)=="S3693" ///
| substr(diag,1,5)=="S3699" ///
| substr(diag,1,6)=="S37001" ///
| substr(diag,1,6)=="S37002" ///
| substr(diag,1,6)=="S37009" ///
| substr(diag,1,6)=="S37011" ///
| substr(diag,1,6)=="S37012" ///
| substr(diag,1,6)=="S37019" ///
| substr(diag,1,6)=="S37021" ///
| substr(diag,1,6)=="S37022" ///
| substr(diag,1,6)=="S37029" ///
| substr(diag,1,6)=="S37031" ///
| substr(diag,1,6)=="S37032" ///
| substr(diag,1,6)=="S37039" ///
| substr(diag,1,6)=="S37041" ///
| substr(diag,1,6)=="S37042" ///
| substr(diag,1,6)=="S37049" ///
| substr(diag,1,6)=="S37051" ///
| substr(diag,1,6)=="S37052" ///
| substr(diag,1,6)=="S37059" ///
| substr(diag,1,6)=="S37061" ///
| substr(diag,1,6)=="S37062" ///
| substr(diag,1,6)=="S37069" ///
| substr(diag,1,6)=="S37091" ///
| substr(diag,1,6)=="S37092" ///
| substr(diag,1,6)=="S37099" ///
| substr(diag,1,5)=="S3710" ///
| substr(diag,1,5)=="S3712" ///
| substr(diag,1,5)=="S3713" ///
| substr(diag,1,5)=="S3719" ///
| substr(diag,1,5)=="S3720" ///
| substr(diag,1,5)=="S3722" ///
| substr(diag,1,5)=="S3723" ///
| substr(diag,1,5)=="S3729" ///
| substr(diag,1,5)=="S3730" ///
| substr(diag,1,5)=="S3732" ///
| substr(diag,1,5)=="S3733" ///
| substr(diag,1,5)=="S3739" ///
| substr(diag,1,6)=="S37421" ///
| substr(diag,1,6)=="S37431" ///
| substr(diag,1,6)=="S37439" ///
| substr(diag,1,6)=="S37521" ///
| substr(diag,1,6)=="S37522" ///
| substr(diag,1,5)=="S3760" ///
| substr(diag,1,5)=="S3762" ///
| substr(diag,1,5)=="S3763" ///
| substr(diag,1,5)=="S3769" ///
| substr(diag,1,6)=="S37812" ///
| substr(diag,1,6)=="S37813" ///
| substr(diag,1,6)=="S37818" ///
| substr(diag,1,6)=="S37819" ///
| substr(diag,1,6)=="S37823" ///
| substr(diag,1,6)=="S37892" ///
| substr(diag,1,6)=="S37893" ///
| substr(diag,1,6)=="S37898" ///
| substr(diag,1,6)=="S37899" ///
| substr(diag,1,5)=="S3790" ///
| substr(diag,1,5)=="S3792" ///
| substr(diag,1,5)=="S3799" ///
| substr(diag,1,6)=="S38001" ///
| substr(diag,1,5)=="S3802" ///
| substr(diag,1,4)=="S381" ///
| substr(diag,1,6)=="S38221" ///
| substr(diag,1,6)=="S38222" ///
| substr(diag,1,6)=="S38231" ///
| substr(diag,1,6)=="S38232" ///
| substr(diag,1,6)=="S39001" ///
| substr(diag,1,6)=="S39003" ///
| substr(diag,1,6)=="S39011" ///
| substr(diag,1,6)=="S39012" ///
| substr(diag,1,6)=="S39013" ///
| substr(diag,1,6)=="S39021" ///
| substr(diag,1,6)=="S39022" ///
| substr(diag,1,6)=="S39023"  


replace trauma=1 if substr(diag,1,6)=="S39091" ///
| substr(diag,1,6)=="S39092" ///
| substr(diag,1,6)=="S39093" ///
| substr(diag,1,5)=="S3981" ///
| substr(diag,1,5)=="S3982" ///
| substr(diag,1,5)=="S3983" ///
| substr(diag,1,6)=="S39840" ///
| substr(diag,1,6)=="S39848" ///
| substr(diag,1,5)=="S3991" ///
| substr(diag,1,5)=="S3992" ///
| substr(diag,1,5)=="S3993" ///
| substr(diag,1,5)=="S3994" ///
| substr(diag,1,6)=="S40011" ///
| substr(diag,1,6)=="S40012" ///
| substr(diag,1,6)=="S40019" ///
| substr(diag,1,6)=="S40021" ///
| substr(diag,1,6)=="S40022" ///
| substr(diag,1,6)=="S40029" ///
| substr(diag,1,6)=="S40211" ///
| substr(diag,1,6)=="S40212" ///
| substr(diag,1,6)=="S40219" ///
| substr(diag,1,6)=="S40811" ///
| substr(diag,1,6)=="S40812" ///
| substr(diag,1,6)=="S40819" ///
| substr(diag,1,6)=="S40841" ///
| substr(diag,1,6)=="S40851" ///
| substr(diag,1,6)=="S40869" ///
| substr(diag,1,6)=="S40872" ///
| substr(diag,1,6)=="S40911" ///
| substr(diag,1,6)=="S40912" ///
| substr(diag,1,6)=="S40919" ///
| substr(diag,1,6)=="S40921" ///
| substr(diag,1,6)=="S40922" ///
| substr(diag,1,6)=="S40929" ///
| substr(diag,1,6)=="S41001" ///
| substr(diag,1,6)=="S41002" ///
| substr(diag,1,6)=="S41009" ///
| substr(diag,1,6)=="S41011" ///
| substr(diag,1,6)=="S41012" ///
| substr(diag,1,6)=="S41019" ///
| substr(diag,1,6)=="S41021" ///
| substr(diag,1,6)=="S41022" ///
| substr(diag,1,6)=="S41029" ///
| substr(diag,1,6)=="S41031" ///
| substr(diag,1,6)=="S41032" ///
| substr(diag,1,6)=="S41039" ///
| substr(diag,1,6)=="S41041" ///
| substr(diag,1,6)=="S41042" ///
| substr(diag,1,6)=="S41051" ///
| substr(diag,1,6)=="S41052" ///
| substr(diag,1,6)=="S41059" ///
| substr(diag,1,6)=="S41101" ///
| substr(diag,1,6)=="S41102" ///
| substr(diag,1,6)=="S41109" ///
| substr(diag,1,6)=="S41111" ///
| substr(diag,1,6)=="S41112" ///
| substr(diag,1,6)=="S41119" ///
| substr(diag,1,6)=="S41121" ///
| substr(diag,1,6)=="S41122" ///
| substr(diag,1,6)=="S41129" ///
| substr(diag,1,6)=="S41131" ///
| substr(diag,1,6)=="S41132" ///
| substr(diag,1,6)=="S41139" ///
| substr(diag,1,6)=="S41141" ///
| substr(diag,1,6)=="S41142" ///
| substr(diag,1,6)=="S41149" ///
| substr(diag,1,6)=="S41151" ///
| substr(diag,1,6)=="S41152" ///
| substr(diag,1,6)=="S41159" ///
| substr(diag,1,6)=="S42001" ///
| substr(diag,1,6)=="S42002" ///
| substr(diag,1,6)=="S42009" ///
| substr(diag,1,6)=="S42011" ///
| substr(diag,1,6)=="S42012" ///
| substr(diag,1,6)=="S42013" ///
| substr(diag,1,6)=="S42014" ///
| substr(diag,1,6)=="S42015" ///
| substr(diag,1,6)=="S42016" ///
| substr(diag,1,6)=="S42017"  


replace trauma=1 if substr(diag,1,6)=="S42018" ///
| substr(diag,1,6)=="S42019" ///
| substr(diag,1,6)=="S42021" ///
| substr(diag,1,6)=="S42022" ///
| substr(diag,1,6)=="S42023" ///
| substr(diag,1,6)=="S42024" ///
| substr(diag,1,6)=="S42025" ///
| substr(diag,1,6)=="S42026" ///
| substr(diag,1,6)=="S42031" ///
| substr(diag,1,6)=="S42032" ///
| substr(diag,1,6)=="S42033" ///
| substr(diag,1,6)=="S42034" ///
| substr(diag,1,6)=="S42035" ///
| substr(diag,1,6)=="S42036" ///
| substr(diag,1,6)=="S42101" ///
| substr(diag,1,6)=="S42102" ///
| substr(diag,1,6)=="S42109" ///
| substr(diag,1,6)=="S42111" ///
| substr(diag,1,6)=="S42112" ///
| substr(diag,1,6)=="S42113" ///
| substr(diag,1,6)=="S42114" ///
| substr(diag,1,6)=="S42115" ///
| substr(diag,1,6)=="S42116" ///
| substr(diag,1,6)=="S42121" ///
| substr(diag,1,6)=="S42122" ///
| substr(diag,1,6)=="S42123" ///
| substr(diag,1,6)=="S42124" ///
| substr(diag,1,6)=="S42125" ///
| substr(diag,1,6)=="S42126" ///
| substr(diag,1,6)=="S42131" ///
| substr(diag,1,6)=="S42132" ///
| substr(diag,1,6)=="S42133" ///
| substr(diag,1,6)=="S42134" ///
| substr(diag,1,6)=="S42135" ///
| substr(diag,1,6)=="S42136" ///
| substr(diag,1,6)=="S42141" ///
| substr(diag,1,6)=="S42142" ///
| substr(diag,1,6)=="S42143" ///
| substr(diag,1,6)=="S42144" ///
| substr(diag,1,6)=="S42145" ///
| substr(diag,1,6)=="S42151" ///
| substr(diag,1,6)=="S42152" ///
| substr(diag,1,6)=="S42153" ///
| substr(diag,1,6)=="S42154" ///
| substr(diag,1,6)=="S42155" ///
| substr(diag,1,6)=="S42156" ///
| substr(diag,1,6)=="S42191" ///
| substr(diag,1,6)=="S42192" ///
| substr(diag,1,6)=="S42199" ///
| substr(diag,1,6)=="S42201" ///
| substr(diag,1,6)=="S42202" ///
| substr(diag,1,6)=="S42209" ///
| substr(diag,1,6)=="S42211" ///
| substr(diag,1,6)=="S42212" ///
| substr(diag,1,6)=="S42213" ///
| substr(diag,1,6)=="S42214" ///
| substr(diag,1,6)=="S42215" ///
| substr(diag,1,6)=="S42216" ///
| substr(diag,1,6)=="S42221" ///
| substr(diag,1,6)=="S42222" ///
| substr(diag,1,6)=="S42223" ///
| substr(diag,1,6)=="S42224" ///
| substr(diag,1,6)=="S42225" ///
| substr(diag,1,6)=="S42231" ///
| substr(diag,1,6)=="S42232" ///
| substr(diag,1,6)=="S42239" ///
| substr(diag,1,6)=="S42241" ///
| substr(diag,1,6)=="S42242" ///
| substr(diag,1,6)=="S42251" ///
| substr(diag,1,6)=="S42252" ///
| substr(diag,1,6)=="S42253" ///
| substr(diag,1,6)=="S42254" ///
| substr(diag,1,6)=="S42255" ///
| substr(diag,1,6)=="S42256" ///
| substr(diag,1,6)=="S42261" ///
| substr(diag,1,6)=="S42262" ///
| substr(diag,1,6)=="S42264" ///
| substr(diag,1,6)=="S42265" ///
| substr(diag,1,6)=="S42272" ///
| substr(diag,1,6)=="S42291" ///
| substr(diag,1,6)=="S42292" ///
| substr(diag,1,6)=="S42293" ///
| substr(diag,1,6)=="S42294" ///
| substr(diag,1,6)=="S42295" ///
| substr(diag,1,6)=="S42296" ///
| substr(diag,1,6)=="S42301" ///
| substr(diag,1,6)=="S42302" ///
| substr(diag,1,6)=="S42309" ///
| substr(diag,1,6)=="S42311" ///
| substr(diag,1,6)=="S42312" ///
| substr(diag,1,6)=="S42321" ///
| substr(diag,1,6)=="S42322" ///
| substr(diag,1,6)=="S42323" ///
| substr(diag,1,6)=="S42324" ///
| substr(diag,1,6)=="S42325" ///
| substr(diag,1,6)=="S42331" ///
| substr(diag,1,6)=="S42332" ///
| substr(diag,1,6)=="S42334" ///
| substr(diag,1,6)=="S42335" ///
| substr(diag,1,6)=="S42341" ///
| substr(diag,1,6)=="S42342" ///
| substr(diag,1,6)=="S42344" ///
| substr(diag,1,6)=="S42345" ///
| substr(diag,1,6)=="S42351" ///
| substr(diag,1,6)=="S42352" ///
| substr(diag,1,6)=="S42353" ///
| substr(diag,1,6)=="S42354" ///
| substr(diag,1,6)=="S42355" ///
| substr(diag,1,6)=="S42361" ///
| substr(diag,1,6)=="S42362" ///
| substr(diag,1,6)=="S42363" ///
| substr(diag,1,6)=="S42364" ///
| substr(diag,1,6)=="S42365" ///
| substr(diag,1,6)=="S42391" ///
| substr(diag,1,6)=="S42392" ///
| substr(diag,1,6)=="S42399" ///
| substr(diag,1,6)=="S42401" ///
| substr(diag,1,6)=="S42402" ///
| substr(diag,1,6)=="S42409" ///
| substr(diag,1,6)=="S42411" ///
| substr(diag,1,6)=="S42412" ///
| substr(diag,1,6)=="S42413" ///
| substr(diag,1,6)=="S42414" ///
| substr(diag,1,6)=="S42415" ///
| substr(diag,1,6)=="S42416" ///
| substr(diag,1,6)=="S42421" ///
| substr(diag,1,6)=="S42422" ///
| substr(diag,1,6)=="S42423" ///
| substr(diag,1,6)=="S42424" ///
| substr(diag,1,6)=="S42425" ///
| substr(diag,1,6)=="S42431" ///
| substr(diag,1,6)=="S42432" ///
| substr(diag,1,6)=="S42433" ///
| substr(diag,1,6)=="S42434" ///
| substr(diag,1,6)=="S42435" ///
| substr(diag,1,6)=="S42441" ///
| substr(diag,1,6)=="S42442" ///
| substr(diag,1,6)=="S42443" ///
| substr(diag,1,6)=="S42444" ///
| substr(diag,1,6)=="S42445" ///
| substr(diag,1,6)=="S42447" ///
| substr(diag,1,6)=="S42448" ///
| substr(diag,1,6)=="S42451" ///
| substr(diag,1,6)=="S42452" ///
| substr(diag,1,6)=="S42453" ///
| substr(diag,1,6)=="S42454" ///
| substr(diag,1,6)=="S42455" ///
| substr(diag,1,6)=="S42456" ///
| substr(diag,1,6)=="S42461" ///
| substr(diag,1,6)=="S42462" ///
| substr(diag,1,6)=="S42464" ///
| substr(diag,1,6)=="S42465" ///
| substr(diag,1,6)=="S42466" ///
| substr(diag,1,6)=="S42471" ///
| substr(diag,1,6)=="S42472" ///
| substr(diag,1,6)=="S42473" ///
| substr(diag,1,6)=="S42474" ///
| substr(diag,1,6)=="S42475" ///
| substr(diag,1,6)=="S42476" ///
| substr(diag,1,6)=="S42481" ///
| substr(diag,1,6)=="S42491" ///
| substr(diag,1,6)=="S42492" ///
| substr(diag,1,6)=="S42494" ///
| substr(diag,1,6)=="S42495"  


replace trauma=1 if substr(diag,1,6)=="S42496" ///
| substr(diag,1,5)=="S4290" ///
| substr(diag,1,5)=="S4291" ///
| substr(diag,1,5)=="S4292" ///
| substr(diag,1,6)=="S43001" ///
| substr(diag,1,6)=="S43002" ///
| substr(diag,1,6)=="S43003" ///
| substr(diag,1,6)=="S43004" ///
| substr(diag,1,6)=="S43005" ///
| substr(diag,1,6)=="S43006" ///
| substr(diag,1,6)=="S43011" ///
| substr(diag,1,6)=="S43012" ///
| substr(diag,1,6)=="S43013" ///
| substr(diag,1,6)=="S43014" ///
| substr(diag,1,6)=="S43015" ///
| substr(diag,1,6)=="S43016" ///
| substr(diag,1,6)=="S43021" ///
| substr(diag,1,6)=="S43022" ///
| substr(diag,1,6)=="S43023" ///
| substr(diag,1,6)=="S43024" ///
| substr(diag,1,6)=="S43025" ///
| substr(diag,1,6)=="S43026" ///
| substr(diag,1,6)=="S43031" ///
| substr(diag,1,6)=="S43032" ///
| substr(diag,1,6)=="S43034" ///
| substr(diag,1,6)=="S43035" ///
| substr(diag,1,6)=="S43036" ///
| substr(diag,1,6)=="S43081" ///
| substr(diag,1,6)=="S43082" ///
| substr(diag,1,6)=="S43083" ///
| substr(diag,1,6)=="S43084" ///
| substr(diag,1,6)=="S43085" ///
| substr(diag,1,6)=="S43086" ///
| substr(diag,1,6)=="S43101" ///
| substr(diag,1,6)=="S43102" ///
| substr(diag,1,6)=="S43109" ///
| substr(diag,1,6)=="S43111" ///
| substr(diag,1,6)=="S43112" ///
| substr(diag,1,6)=="S43119" ///
| substr(diag,1,6)=="S43121" ///
| substr(diag,1,6)=="S43122" ///
| substr(diag,1,6)=="S43131" ///
| substr(diag,1,6)=="S43132" ///
| substr(diag,1,6)=="S43141" ///
| substr(diag,1,6)=="S43142" ///
| substr(diag,1,6)=="S43152" ///
| substr(diag,1,6)=="S43201" ///
| substr(diag,1,6)=="S43202" ///
| substr(diag,1,6)=="S43203" ///
| substr(diag,1,6)=="S43204" ///
| substr(diag,1,6)=="S43205" ///
| substr(diag,1,6)=="S43206" ///
| substr(diag,1,6)=="S43211" ///
| substr(diag,1,6)=="S43212" ///
| substr(diag,1,6)=="S43214" ///
| substr(diag,1,6)=="S43215" ///
| substr(diag,1,6)=="S43221" ///
| substr(diag,1,6)=="S43222" ///
| substr(diag,1,6)=="S43224" ///
| substr(diag,1,6)=="S43225" ///
| substr(diag,1,6)=="S43302" ///
| substr(diag,1,6)=="S43304" ///
| substr(diag,1,6)=="S43305" ///
| substr(diag,1,6)=="S43306" ///
| substr(diag,1,6)=="S43314" ///
| substr(diag,1,6)=="S43315" ///
| substr(diag,1,6)=="S43391" ///
| substr(diag,1,6)=="S43395" ///
| substr(diag,1,6)=="S43401" ///
| substr(diag,1,6)=="S43402" ///
| substr(diag,1,6)=="S43409" ///
| substr(diag,1,6)=="S43411" ///
| substr(diag,1,6)=="S43412" ///
| substr(diag,1,6)=="S43419" ///
| substr(diag,1,6)=="S43421" ///
| substr(diag,1,6)=="S43422" ///
| substr(diag,1,6)=="S43429" ///
| substr(diag,1,6)=="S43431" ///
| substr(diag,1,6)=="S43432" ///
| substr(diag,1,6)=="S43491" ///
| substr(diag,1,6)=="S43492" ///
| substr(diag,1,6)=="S43499" ///
| substr(diag,1,5)=="S4350" ///
| substr(diag,1,5)=="S4351" ///
| substr(diag,1,5)=="S4352" ///
| substr(diag,1,5)=="S4361" ///
| substr(diag,1,5)=="S4380" ///
| substr(diag,1,5)=="S4381" ///
| substr(diag,1,5)=="S4382" ///
| substr(diag,1,5)=="S4390" ///
| substr(diag,1,5)=="S4391" ///
| substr(diag,1,5)=="S4392" ///
| substr(diag,1,5)=="S4400" ///
| substr(diag,1,5)=="S4401" ///
| substr(diag,1,5)=="S4402" ///
| substr(diag,1,5)=="S4410" ///
| substr(diag,1,5)=="S4411" ///
| substr(diag,1,5)=="S4412" ///
| substr(diag,1,5)=="S4420" ///
| substr(diag,1,5)=="S4421" ///
| substr(diag,1,5)=="S4422" ///
| substr(diag,1,5)=="S4430" ///
| substr(diag,1,5)=="S4431" ///
| substr(diag,1,5)=="S4432" ///
| substr(diag,1,5)=="S4442" ///
| substr(diag,1,5)=="S4451" ///
| substr(diag,1,4)=="S448" ///
| substr(diag,1,5)=="S4490" ///
| substr(diag,1,5)=="S4491" ///
| substr(diag,1,5)=="S4492" ///
| substr(diag,1,6)=="S45001" ///
| substr(diag,1,6)=="S45002"  


replace trauma=1 if  substr(diag,1,6)=="S45009" ///
| substr(diag,1,6)=="S45011" ///
| substr(diag,1,6)=="S45012" ///
| substr(diag,1,6)=="S45091" ///
| substr(diag,1,6)=="S45092" ///
| substr(diag,1,6)=="S45101" ///
| substr(diag,1,6)=="S45109" ///
| substr(diag,1,6)=="S45111" ///
| substr(diag,1,6)=="S45112" ///
| substr(diag,1,6)=="S45119" ///
| substr(diag,1,6)=="S45191" ///
| substr(diag,1,6)=="S45192" ///
| substr(diag,1,6)=="S45201" ///
| substr(diag,1,6)=="S45202" ///
| substr(diag,1,6)=="S45209" ///
| substr(diag,1,6)=="S45211" ///
| substr(diag,1,6)=="S45212" ///
| substr(diag,1,6)=="S45291" ///
| substr(diag,1,6)=="S45292" ///
| substr(diag,1,6)=="S45309" ///
| substr(diag,1,6)=="S45311" ///
| substr(diag,1,6)=="S45312" ///
| substr(diag,1,6)=="S45319" ///
| substr(diag,1,6)=="S45392" ///
| substr(diag,1,6)=="S45802" ///
| substr(diag,1,6)=="S45811" ///
| substr(diag,1,6)=="S45812" ///
| substr(diag,1,6)=="S45892" ///
| substr(diag,1,6)=="S45901" ///
| substr(diag,1,6)=="S45909" ///
| substr(diag,1,6)=="S45911" ///
| substr(diag,1,6)=="S45919" ///
| substr(diag,1,6)=="S46001" ///
| substr(diag,1,6)=="S46009" ///
| substr(diag,1,6)=="S46011" ///
| substr(diag,1,6)=="S46012" ///
| substr(diag,1,6)=="S46019" ///
| substr(diag,1,6)=="S46021" ///
| substr(diag,1,6)=="S46022" ///
| substr(diag,1,6)=="S46091" ///
| substr(diag,1,6)=="S46092" ///
| substr(diag,1,6)=="S46102" ///
| substr(diag,1,6)=="S46111" ///
| substr(diag,1,6)=="S46112" ///
| substr(diag,1,6)=="S46121" ///
| substr(diag,1,6)=="S46122" ///
| substr(diag,1,6)=="S46191" ///
| substr(diag,1,6)=="S46201" ///
| substr(diag,1,6)=="S46211" ///
| substr(diag,1,6)=="S46212" ///
| substr(diag,1,6)=="S46221" ///
| substr(diag,1,6)=="S46222" ///
| substr(diag,1,6)=="S46229" ///
| substr(diag,1,6)=="S46291" ///
| substr(diag,1,6)=="S46292" ///
| substr(diag,1,6)=="S46301" ///
| substr(diag,1,6)=="S46302" ///
| substr(diag,1,6)=="S46311" ///
| substr(diag,1,6)=="S46312" ///
| substr(diag,1,6)=="S46319" ///
| substr(diag,1,6)=="S46321" ///
| substr(diag,1,6)=="S46322" ///
| substr(diag,1,6)=="S46391" ///
| substr(diag,1,6)=="S46392" ///
| substr(diag,1,6)=="S46399" ///
| substr(diag,1,6)=="S46801" ///
| substr(diag,1,6)=="S46802" ///
| substr(diag,1,6)=="S46811" ///
| substr(diag,1,6)=="S46812" ///
| substr(diag,1,6)=="S46821" ///
| substr(diag,1,6)=="S46822" ///
| substr(diag,1,6)=="S46829" ///
| substr(diag,1,6)=="S46891" ///
| substr(diag,1,6)=="S46892" ///
| substr(diag,1,6)=="S46901" ///
| substr(diag,1,6)=="S46909" ///
| substr(diag,1,6)=="S46911" ///
| substr(diag,1,6)=="S46912" ///
| substr(diag,1,6)=="S46919" ///
| substr(diag,1,6)=="S46922" ///
| substr(diag,1,6)=="S46929" ///
| substr(diag,1,6)=="S46992" ///
| substr(diag,1,6)=="S46999" ///
| substr(diag,1,4)=="S471" ///
| substr(diag,1,4)=="S472" ///
| substr(diag,1,4)=="S479" ///
| substr(diag,1,6)=="S48011" ///
| substr(diag,1,6)=="S48111" ///
| substr(diag,1,6)=="S48112" ///
| substr(diag,1,6)=="S48121" ///
| substr(diag,1,6)=="S48122" ///
| substr(diag,1,6)=="S48921" ///
| substr(diag,1,6)=="S48929" ///
| substr(diag,1,6)=="S49001" ///
| substr(diag,1,6)=="S49002" ///
| substr(diag,1,6)=="S49011" ///
| substr(diag,1,6)=="S49021" ///
| substr(diag,1,6)=="S49022" ///
| substr(diag,1,6)=="S49091"  


replace trauma=1 if  substr(diag,1,6)=="S49092" ///
| substr(diag,1,6)=="S49099" ///
| substr(diag,1,6)=="S49101" ///
| substr(diag,1,6)=="S49121" ///
| substr(diag,1,6)=="S49131" ///
| substr(diag,1,6)=="S49132" ///
| substr(diag,1,6)=="S49141" ///
| substr(diag,1,6)=="S49191" ///
| substr(diag,1,6)=="S49192" ///
| substr(diag,1,5)=="S4980" ///
| substr(diag,1,5)=="S4981" ///
| substr(diag,1,5)=="S4982" ///
| substr(diag,1,5)=="S4990" ///
| substr(diag,1,5)=="S4991" ///
| substr(diag,1,5)=="S4992" ///
| substr(diag,1,5)=="S5000" ///
| substr(diag,1,5)=="S5001" ///
| substr(diag,1,5)=="S5002" ///
| substr(diag,1,5)=="S5010" ///
| substr(diag,1,5)=="S5011" ///
| substr(diag,1,5)=="S5012" ///
| substr(diag,1,6)=="S50311" ///
| substr(diag,1,6)=="S50312" ///
| substr(diag,1,6)=="S50319" ///
| substr(diag,1,6)=="S50351" ///
| substr(diag,1,6)=="S50352" ///
| substr(diag,1,6)=="S50359" ///
| substr(diag,1,6)=="S50372" ///
| substr(diag,1,6)=="S50811" ///
| substr(diag,1,6)=="S50812" ///
| substr(diag,1,6)=="S50819" ///
| substr(diag,1,6)=="S50851" ///
| substr(diag,1,6)=="S50852" ///
| substr(diag,1,6)=="S50871" ///
| substr(diag,1,6)=="S50872" ///
| substr(diag,1,6)=="S50901" ///
| substr(diag,1,6)=="S50902" ///
| substr(diag,1,6)=="S50911" ///
| substr(diag,1,6)=="S50912" ///
| substr(diag,1,6)=="S51001" ///
| substr(diag,1,6)=="S51002" ///
| substr(diag,1,6)=="S51009" ///
| substr(diag,1,6)=="S51011" ///
| substr(diag,1,6)=="S51012" ///
| substr(diag,1,6)=="S51019" ///
| substr(diag,1,6)=="S51021" ///
| substr(diag,1,6)=="S51022" ///
| substr(diag,1,6)=="S51029" ///
| substr(diag,1,6)=="S51031" ///
| substr(diag,1,6)=="S51032" ///
| substr(diag,1,6)=="S51039" ///
| substr(diag,1,6)=="S51041" ///
| substr(diag,1,6)=="S51042" ///
| substr(diag,1,6)=="S51051" ///
| substr(diag,1,6)=="S51052" ///
| substr(diag,1,6)=="S51801" ///
| substr(diag,1,6)=="S51802" ///
| substr(diag,1,6)=="S51809" ///
| substr(diag,1,6)=="S51811" ///
| substr(diag,1,6)=="S51812" ///
| substr(diag,1,6)=="S51819" ///
| substr(diag,1,6)=="S51821" ///
| substr(diag,1,6)=="S51822" ///
| substr(diag,1,6)=="S51829" ///
| substr(diag,1,6)=="S51831" ///
| substr(diag,1,6)=="S51832" ///
| substr(diag,1,6)=="S51839" ///
| substr(diag,1,6)=="S51841" ///
| substr(diag,1,6)=="S51842" ///
| substr(diag,1,6)=="S51849" ///
| substr(diag,1,6)=="S51851"  


replace trauma=1 if  substr(diag,1,6)=="S51852" ///
| substr(diag,1,6)=="S52001" ///
| substr(diag,1,6)=="S52002" ///
| substr(diag,1,6)=="S52009" ///
| substr(diag,1,6)=="S52011" ///
| substr(diag,1,6)=="S52012" ///
| substr(diag,1,6)=="S52021" ///
| substr(diag,1,6)=="S52022" ///
| substr(diag,1,6)=="S52023" ///
| substr(diag,1,6)=="S52024" ///
| substr(diag,1,6)=="S52025" ///
| substr(diag,1,6)=="S52026" ///
| substr(diag,1,6)=="S52031" ///
| substr(diag,1,6)=="S52032" ///
| substr(diag,1,6)=="S52033" ///
| substr(diag,1,6)=="S52034" ///
| substr(diag,1,6)=="S52035" ///
| substr(diag,1,6)=="S52036" ///
| substr(diag,1,6)=="S52041" ///
| substr(diag,1,6)=="S52042" ///
| substr(diag,1,6)=="S52043" ///
| substr(diag,1,6)=="S52044" ///
| substr(diag,1,6)=="S52045" ///
| substr(diag,1,6)=="S52046" ///
| substr(diag,1,6)=="S52091" ///
| substr(diag,1,6)=="S52092" ///
| substr(diag,1,6)=="S52099" ///
| substr(diag,1,6)=="S52101" ///
| substr(diag,1,6)=="S52102" ///
| substr(diag,1,6)=="S52109" ///
| substr(diag,1,6)=="S52111" ///
| substr(diag,1,6)=="S52112" ///
| substr(diag,1,6)=="S52121" ///
| substr(diag,1,6)=="S52122" ///
| substr(diag,1,6)=="S52123" ///
| substr(diag,1,6)=="S52124" ///
| substr(diag,1,6)=="S52125" ///
| substr(diag,1,6)=="S52126" ///
| substr(diag,1,6)=="S52131" ///
| substr(diag,1,6)=="S52132" ///
| substr(diag,1,6)=="S52133" ///
| substr(diag,1,6)=="S52134" ///
| substr(diag,1,6)=="S52135" ///
| substr(diag,1,6)=="S52136" ///
| substr(diag,1,6)=="S52181" ///
| substr(diag,1,6)=="S52182" ///
| substr(diag,1,6)=="S52201" ///
| substr(diag,1,6)=="S52202" ///
| substr(diag,1,6)=="S52209" ///
| substr(diag,1,6)=="S52211" ///
| substr(diag,1,6)=="S52212" ///
| substr(diag,1,6)=="S52221" ///
| substr(diag,1,6)=="S52222" ///
| substr(diag,1,6)=="S52223" ///
| substr(diag,1,6)=="S52224" ///
| substr(diag,1,6)=="S52225" ///
| substr(diag,1,6)=="S52231" ///
| substr(diag,1,6)=="S52232" ///
| substr(diag,1,6)=="S52233" ///
| substr(diag,1,6)=="S52234" ///
| substr(diag,1,6)=="S52235" ///
| substr(diag,1,6)=="S52241" ///
| substr(diag,1,6)=="S52242" ///
| substr(diag,1,6)=="S52243" ///
| substr(diag,1,6)=="S52251" ///
| substr(diag,1,6)=="S52252" ///
| substr(diag,1,6)=="S52253" ///
| substr(diag,1,6)=="S52254" ///
| substr(diag,1,6)=="S52255" ///
| substr(diag,1,6)=="S52261" ///
| substr(diag,1,6)=="S52262" ///
| substr(diag,1,6)=="S52263" ///
| substr(diag,1,6)=="S52264" ///
| substr(diag,1,6)=="S52265" ///
| substr(diag,1,6)=="S52271" ///
| substr(diag,1,6)=="S52272" ///
| substr(diag,1,6)=="S52279" ///
| substr(diag,1,6)=="S52291" ///
| substr(diag,1,6)=="S52292" ///
| substr(diag,1,6)=="S52301" ///
| substr(diag,1,6)=="S52302" ///
| substr(diag,1,6)=="S52309" ///
| substr(diag,1,6)=="S52311" ///
| substr(diag,1,6)=="S52312" ///
| substr(diag,1,6)=="S52321" ///
| substr(diag,1,6)=="S52322" ///
| substr(diag,1,6)=="S52323" ///
| substr(diag,1,6)=="S52324" ///
| substr(diag,1,6)=="S52325" ///
| substr(diag,1,6)=="S52331" ///
| substr(diag,1,6)=="S52332" ///
| substr(diag,1,6)=="S52334" ///
| substr(diag,1,6)=="S52335" ///
| substr(diag,1,6)=="S52341" ///
| substr(diag,1,6)=="S52342" ///
| substr(diag,1,6)=="S52351" ///
| substr(diag,1,6)=="S52352" ///
| substr(diag,1,6)=="S52353" ///
| substr(diag,1,6)=="S52354" ///
| substr(diag,1,6)=="S52355" ///
| substr(diag,1,6)=="S52361" ///
| substr(diag,1,6)=="S52364" ///
| substr(diag,1,6)=="S52365" ///
| substr(diag,1,6)=="S52371" ///
| substr(diag,1,6)=="S52372" ///
| substr(diag,1,6)=="S52382" ///
| substr(diag,1,6)=="S52391" ///
| substr(diag,1,6)=="S52392" ///
| substr(diag,1,6)=="S52501" ///
| substr(diag,1,6)=="S52502" ///
| substr(diag,1,6)=="S52509" ///
| substr(diag,1,6)=="S52511" ///
| substr(diag,1,6)=="S52512" ///
| substr(diag,1,6)=="S52513" ///
| substr(diag,1,6)=="S52514" ///
| substr(diag,1,6)=="S52515" ///
| substr(diag,1,6)=="S52516" ///
| substr(diag,1,6)=="S52521" ///
| substr(diag,1,6)=="S52522" ///
| substr(diag,1,6)=="S52529" ///
| substr(diag,1,6)=="S52531" ///
| substr(diag,1,6)=="S52532" ///
| substr(diag,1,6)=="S52539" ///
| substr(diag,1,6)=="S52541"  


replace trauma=1 if  substr(diag,1,6)=="S52542" ///
| substr(diag,1,6)=="S52551" ///
| substr(diag,1,6)=="S52552" ///
| substr(diag,1,6)=="S52559" ///
| substr(diag,1,6)=="S52561" ///
| substr(diag,1,6)=="S52562" ///
| substr(diag,1,6)=="S52569" ///
| substr(diag,1,6)=="S52571" ///
| substr(diag,1,6)=="S52572" ///
| substr(diag,1,6)=="S52579" ///
| substr(diag,1,6)=="S52591" ///
| substr(diag,1,6)=="S52592" ///
| substr(diag,1,6)=="S52601" ///
| substr(diag,1,6)=="S52602" ///
| substr(diag,1,6)=="S52609" ///
| substr(diag,1,6)=="S52611" ///
| substr(diag,1,6)=="S52612" ///
| substr(diag,1,6)=="S52613" ///
| substr(diag,1,6)=="S52614" ///
| substr(diag,1,6)=="S52615" ///
| substr(diag,1,6)=="S52621" ///
| substr(diag,1,6)=="S52622" ///
| substr(diag,1,6)=="S52691" ///
| substr(diag,1,6)=="S52692" ///
| substr(diag,1,6)=="S52699" ///
| substr(diag,1,5)=="S5290" ///
| substr(diag,1,5)=="S5291" ///
| substr(diag,1,5)=="S5292" ///
| substr(diag,1,6)=="S53001" ///
| substr(diag,1,6)=="S53002" ///
| substr(diag,1,6)=="S53003" ///
| substr(diag,1,6)=="S53004" ///
| substr(diag,1,6)=="S53005" ///
| substr(diag,1,6)=="S53006" ///
| substr(diag,1,6)=="S53011" ///
| substr(diag,1,6)=="S53012" ///
| substr(diag,1,6)=="S53014" ///
| substr(diag,1,6)=="S53015" ///
| substr(diag,1,6)=="S53016" ///
| substr(diag,1,6)=="S53021" ///
| substr(diag,1,6)=="S53022" ///
| substr(diag,1,6)=="S53024" ///
| substr(diag,1,6)=="S53025" ///
| substr(diag,1,6)=="S53026" ///
| substr(diag,1,6)=="S53031" ///
| substr(diag,1,6)=="S53032" ///
| substr(diag,1,6)=="S53091" ///
| substr(diag,1,6)=="S53092" ///
| substr(diag,1,6)=="S53093" ///
| substr(diag,1,6)=="S53094" ///
| substr(diag,1,6)=="S53095" ///
| substr(diag,1,6)=="S53096" ///
| substr(diag,1,6)=="S53101" ///
| substr(diag,1,6)=="S53102" ///
| substr(diag,1,6)=="S53103" ///
| substr(diag,1,6)=="S53104" ///
| substr(diag,1,6)=="S53105" ///
| substr(diag,1,6)=="S53106" ///
| substr(diag,1,6)=="S53114" ///
| substr(diag,1,6)=="S53121" ///
| substr(diag,1,6)=="S53122" ///
| substr(diag,1,6)=="S53124" ///
| substr(diag,1,6)=="S53125" ///
| substr(diag,1,6)=="S53132" ///
| substr(diag,1,6)=="S53134" ///
| substr(diag,1,6)=="S53135" ///
| substr(diag,1,6)=="S53136" ///
| substr(diag,1,6)=="S53141" ///
| substr(diag,1,6)=="S53144" ///
| substr(diag,1,6)=="S53145" ///
| substr(diag,1,6)=="S53192" ///
| substr(diag,1,6)=="S53194" ///
| substr(diag,1,6)=="S53195" ///
| substr(diag,1,5)=="S5320" ///
| substr(diag,1,5)=="S5321" ///
| substr(diag,1,5)=="S5322" ///
| substr(diag,1,5)=="S5330" ///
| substr(diag,1,5)=="S5331" ///
| substr(diag,1,5)=="S5332" ///
| substr(diag,1,6)=="S53401" ///
| substr(diag,1,6)=="S53402" ///
| substr(diag,1,6)=="S53409" ///
| substr(diag,1,6)=="S53421" ///
| substr(diag,1,6)=="S53422" ///
| substr(diag,1,6)=="S53431"  


replace trauma=1 if  substr(diag,1,6)=="S53432" ///
| substr(diag,1,6)=="S53442" ///
| substr(diag,1,6)=="S53449" ///
| substr(diag,1,6)=="S53492" ///
| substr(diag,1,5)=="S5400" ///
| substr(diag,1,5)=="S5401" ///
| substr(diag,1,5)=="S5402" ///
| substr(diag,1,5)=="S5410" ///
| substr(diag,1,5)=="S5411" ///
| substr(diag,1,5)=="S5412" ///
| substr(diag,1,5)=="S5420" ///
| substr(diag,1,5)=="S5421" ///
| substr(diag,1,5)=="S5422" ///
| substr(diag,1,5)=="S5430" ///
| substr(diag,1,5)=="S5431" ///
| substr(diag,1,5)=="S5432" ///
| substr(diag,1,4)=="S548" ///
| substr(diag,1,5)=="S5492" ///
| substr(diag,1,6)=="S55001" ///
| substr(diag,1,6)=="S55002" ///
| substr(diag,1,6)=="S55009" ///
| substr(diag,1,6)=="S55011" ///
| substr(diag,1,6)=="S55012" ///
| substr(diag,1,6)=="S55019" ///
| substr(diag,1,6)=="S55091" ///
| substr(diag,1,6)=="S55092" ///
| substr(diag,1,6)=="S55101" ///
| substr(diag,1,6)=="S55102" ///
| substr(diag,1,6)=="S55111" ///
| substr(diag,1,6)=="S55112" ///
| substr(diag,1,6)=="S55119" ///
| substr(diag,1,6)=="S55191" ///
| substr(diag,1,6)=="S55192" ///
| substr(diag,1,6)=="S55211" ///
| substr(diag,1,6)=="S55212" ///
| substr(diag,1,6)=="S55812" ///
| substr(diag,1,6)=="S55891" ///
| substr(diag,1,6)=="S55892" ///
| substr(diag,1,6)=="S55911" ///
| substr(diag,1,6)=="S56021" ///
| substr(diag,1,6)=="S56022" ///
| substr(diag,1,6)=="S56101" ///
| substr(diag,1,6)=="S56103" ///
| substr(diag,1,6)=="S56121" ///
| substr(diag,1,6)=="S56122" ///
| substr(diag,1,6)=="S56123" ///
| substr(diag,1,6)=="S56124" ///
| substr(diag,1,6)=="S56125" ///
| substr(diag,1,6)=="S56126" ///
| substr(diag,1,6)=="S56127" ///
| substr(diag,1,6)=="S56128" ///
| substr(diag,1,6)=="S56129" ///
| substr(diag,1,6)=="S56191" ///
| substr(diag,1,6)=="S56199" ///
| substr(diag,1,6)=="S56201" ///
| substr(diag,1,6)=="S56202" ///
| substr(diag,1,6)=="S56211" ///
| substr(diag,1,6)=="S56212" ///
| substr(diag,1,6)=="S56221" ///
| substr(diag,1,6)=="S56222" ///
| substr(diag,1,6)=="S56291" ///
| substr(diag,1,6)=="S56292" ///
| substr(diag,1,6)=="S56321" ///
| substr(diag,1,6)=="S56322" ///
| substr(diag,1,6)=="S56329" ///
| substr(diag,1,6)=="S56391" ///
| substr(diag,1,6)=="S56401" ///
| substr(diag,1,6)=="S56419" ///
| substr(diag,1,6)=="S56421" ///
| substr(diag,1,6)=="S56422" ///
| substr(diag,1,6)=="S56423" ///
| substr(diag,1,6)=="S56424" ///
| substr(diag,1,6)=="S56425" ///
| substr(diag,1,6)=="S56426" ///
| substr(diag,1,6)=="S56427" ///
| substr(diag,1,6)=="S56428" ///
| substr(diag,1,6)=="S56429" ///
| substr(diag,1,6)=="S56492" ///
| substr(diag,1,6)=="S56501" ///
| substr(diag,1,6)=="S56502" ///
| substr(diag,1,6)=="S56521" ///
| substr(diag,1,6)=="S56522" ///
| substr(diag,1,6)=="S56591" ///
| substr(diag,1,6)=="S56592" ///
| substr(diag,1,6)=="S56811" ///
| substr(diag,1,6)=="S56821" ///
| substr(diag,1,6)=="S56822" ///
| substr(diag,1,6)=="S56891" ///
| substr(diag,1,6)=="S56892" ///
| substr(diag,1,6)=="S56901" ///
| substr(diag,1,6)=="S56902" ///
| substr(diag,1,6)=="S56912" ///
| substr(diag,1,6)=="S56921" ///
| substr(diag,1,6)=="S56922" ///
| substr(diag,1,6)=="S56929" ///
| substr(diag,1,6)=="S56992" ///
| substr(diag,1,5)=="S5701" ///
| substr(diag,1,5)=="S5702" ///
| substr(diag,1,5)=="S5780" ///
| substr(diag,1,5)=="S5781" ///
| substr(diag,1,5)=="S5782" ///
| substr(diag,1,6)=="S58011"  


replace trauma=1 if  substr(diag,1,6)=="S58012" ///
| substr(diag,1,6)=="S58021" ///
| substr(diag,1,6)=="S58022" ///
| substr(diag,1,6)=="S58029" ///
| substr(diag,1,6)=="S58111" ///
| substr(diag,1,6)=="S58112" ///
| substr(diag,1,6)=="S58121" ///
| substr(diag,1,6)=="S58122" ///
| substr(diag,1,6)=="S58129" ///
| substr(diag,1,6)=="S58911" ///
| substr(diag,1,6)=="S58921" ///
| substr(diag,1,6)=="S58929" ///
| substr(diag,1,6)=="S59001" ///
| substr(diag,1,6)=="S59002" ///
| substr(diag,1,6)=="S59011" ///
| substr(diag,1,6)=="S59012" ///
| substr(diag,1,6)=="S59021" ///
| substr(diag,1,6)=="S59022" ///
| substr(diag,1,6)=="S59032" ///
| substr(diag,1,6)=="S59041" ///
| substr(diag,1,6)=="S59042" ///
| substr(diag,1,6)=="S59091" ///
| substr(diag,1,6)=="S59092" ///
| substr(diag,1,6)=="S59109" ///
| substr(diag,1,6)=="S59111" ///
| substr(diag,1,6)=="S59122" ///
| substr(diag,1,6)=="S59192" ///
| substr(diag,1,6)=="S59201" ///
| substr(diag,1,6)=="S59202" ///
| substr(diag,1,6)=="S59209" ///
| substr(diag,1,6)=="S59211" ///
| substr(diag,1,6)=="S59212" ///
| substr(diag,1,6)=="S59221" ///
| substr(diag,1,6)=="S59222" ///
| substr(diag,1,6)=="S59231" ///
| substr(diag,1,6)=="S59232" ///
| substr(diag,1,6)=="S59241" ///
| substr(diag,1,6)=="S59291" ///
| substr(diag,1,6)=="S59292" ///
| substr(diag,1,6)=="S59801" ///
| substr(diag,1,6)=="S59802" ///
| substr(diag,1,6)=="S59809" ///
| substr(diag,1,6)=="S59811" ///
| substr(diag,1,6)=="S59812" ///
| substr(diag,1,6)=="S59901" ///
| substr(diag,1,6)=="S59902" ///
| substr(diag,1,6)=="S59911" ///
| substr(diag,1,6)=="S59912" ///
| substr(diag,1,6)=="S59919" ///
| substr(diag,1,5)=="S6000" ///
| substr(diag,1,6)=="S60011" ///
| substr(diag,1,6)=="S60012" ///
| substr(diag,1,6)=="S60021" ///
| substr(diag,1,6)=="S60022" ///
| substr(diag,1,6)=="S60029" ///
| substr(diag,1,6)=="S60031" ///
| substr(diag,1,6)=="S60032" ///
| substr(diag,1,6)=="S60039" ///
| substr(diag,1,6)=="S60041" ///
| substr(diag,1,6)=="S60042" ///
| substr(diag,1,6)=="S60051" ///
| substr(diag,1,6)=="S60052" ///
| substr(diag,1,5)=="S6010" ///
| substr(diag,1,6)=="S60111" ///
| substr(diag,1,6)=="S60141" ///
| substr(diag,1,6)=="S60142" ///
| substr(diag,1,6)=="S60152" ///
| substr(diag,1,6)=="S60211" ///
| substr(diag,1,6)=="S60212" ///
| substr(diag,1,6)=="S60219" ///
| substr(diag,1,6)=="S60221" ///
| substr(diag,1,6)=="S60222" ///
| substr(diag,1,6)=="S60229" ///
| substr(diag,1,6)=="S60311" ///
| substr(diag,1,6)=="S60312" ///
| substr(diag,1,6)=="S60319" ///
| substr(diag,1,6)=="S60351" ///
| substr(diag,1,6)=="S60391" ///
| substr(diag,1,6)=="S60410" ///
| substr(diag,1,6)=="S60411" ///
| substr(diag,1,6)=="S60412" ///
| substr(diag,1,6)=="S60413" ///
| substr(diag,1,6)=="S60414" ///
| substr(diag,1,6)=="S60415" ///
| substr(diag,1,6)=="S60416" ///
| substr(diag,1,6)=="S60417" ///
| substr(diag,1,6)=="S60418" ///
| substr(diag,1,6)=="S60419" ///
| substr(diag,1,6)=="S60429" ///
| substr(diag,1,6)=="S60453" ///
| substr(diag,1,6)=="S60456"  


replace trauma=1 if substr(diag,1,6)=="S60475" ///
| substr(diag,1,6)=="S60511" ///
| substr(diag,1,6)=="S60512" ///
| substr(diag,1,6)=="S60519" ///
| substr(diag,1,6)=="S60551" ///
| substr(diag,1,6)=="S60552" ///
| substr(diag,1,6)=="S60571" ///
| substr(diag,1,6)=="S60572" ///
| substr(diag,1,6)=="S60811" ///
| substr(diag,1,6)=="S60812" ///
| substr(diag,1,6)=="S60819" ///
| substr(diag,1,6)=="S60851" ///
| substr(diag,1,6)=="S60911" ///
| substr(diag,1,6)=="S60912" ///
| substr(diag,1,6)=="S60922" ///
| substr(diag,1,6)=="S60929" ///
| substr(diag,1,6)=="S60943" ///
| substr(diag,1,6)=="S61001" ///
| substr(diag,1,6)=="S61002" ///
| substr(diag,1,6)=="S61009" ///
| substr(diag,1,6)=="S61011" ///
| substr(diag,1,6)=="S61012" ///
| substr(diag,1,6)=="S61019" ///
| substr(diag,1,6)=="S61021" ///
| substr(diag,1,6)=="S61031" ///
| substr(diag,1,6)=="S61032" ///
| substr(diag,1,6)=="S61039" ///
| substr(diag,1,6)=="S61041" ///
| substr(diag,1,6)=="S61051" ///
| substr(diag,1,6)=="S61052" ///
| substr(diag,1,6)=="S61101" ///
| substr(diag,1,6)=="S61102" ///
| substr(diag,1,6)=="S61109" ///
| substr(diag,1,6)=="S61111" ///
| substr(diag,1,6)=="S61112" ///
| substr(diag,1,6)=="S61121" ///
| substr(diag,1,6)=="S61131" ///
| substr(diag,1,6)=="S61132" ///
| substr(diag,1,6)=="S61152" ///
| substr(diag,1,6)=="S61200" ///
| substr(diag,1,6)=="S61201" ///
| substr(diag,1,6)=="S61202" ///
| substr(diag,1,6)=="S61203" ///
| substr(diag,1,6)=="S61204" ///
| substr(diag,1,6)=="S61205" ///
| substr(diag,1,6)=="S61206" ///
| substr(diag,1,6)=="S61207" ///
| substr(diag,1,6)=="S61208" ///
| substr(diag,1,6)=="S61209" ///
| substr(diag,1,6)=="S61210" ///
| substr(diag,1,6)=="S61211" ///
| substr(diag,1,6)=="S61212" ///
| substr(diag,1,6)=="S61213" ///
| substr(diag,1,6)=="S61214" ///
| substr(diag,1,6)=="S61215" ///
| substr(diag,1,6)=="S61216" ///
| substr(diag,1,6)=="S61217" ///
| substr(diag,1,6)=="S61218" ///
| substr(diag,1,6)=="S61219" ///
| substr(diag,1,6)=="S61220" ///
| substr(diag,1,6)=="S61221" ///
| substr(diag,1,6)=="S61222" ///
| substr(diag,1,6)=="S61223" ///
| substr(diag,1,6)=="S61224" ///
| substr(diag,1,6)=="S61225" ///
| substr(diag,1,6)=="S61227" ///
| substr(diag,1,6)=="S61229" ///
| substr(diag,1,6)=="S61230" ///
| substr(diag,1,6)=="S61231" ///
| substr(diag,1,6)=="S61232" ///
| substr(diag,1,6)=="S61233" ///
| substr(diag,1,6)=="S61234" ///
| substr(diag,1,6)=="S61235" ///
| substr(diag,1,6)=="S61237" ///
| substr(diag,1,6)=="S61239" ///
| substr(diag,1,6)=="S61240" ///
| substr(diag,1,6)=="S61241" ///
| substr(diag,1,6)=="S61242" ///
| substr(diag,1,6)=="S61243" ///
| substr(diag,1,6)=="S61244" ///
| substr(diag,1,6)=="S61245" ///
| substr(diag,1,6)=="S61247" ///
| substr(diag,1,6)=="S61250" ///
| substr(diag,1,6)=="S61251" ///
| substr(diag,1,6)=="S61252" ///
| substr(diag,1,6)=="S61253" ///
| substr(diag,1,6)=="S61254" ///
| substr(diag,1,6)=="S61255" ///
| substr(diag,1,6)=="S61257" ///
| substr(diag,1,6)=="S61258" ///
| substr(diag,1,6)=="S61259" ///
| substr(diag,1,6)=="S61300" ///
| substr(diag,1,6)=="S61301" ///
| substr(diag,1,6)=="S61302" ///
| substr(diag,1,6)=="S61303" ///
| substr(diag,1,6)=="S61304" ///
| substr(diag,1,6)=="S61307" ///
| substr(diag,1,6)=="S61308" ///
| substr(diag,1,6)=="S61309" ///
| substr(diag,1,6)=="S61310" ///
| substr(diag,1,6)=="S61311" ///
| substr(diag,1,6)=="S61312" ///
| substr(diag,1,6)=="S61313" ///
| substr(diag,1,6)=="S61314" ///
| substr(diag,1,6)=="S61315" ///
| substr(diag,1,6)=="S61316" ///
| substr(diag,1,6)=="S61317"  


replace trauma=1 if  substr(diag,1,6)=="S61318" ///
| substr(diag,1,6)=="S61319" ///
| substr(diag,1,6)=="S61321" ///
| substr(diag,1,6)=="S61323" ///
| substr(diag,1,6)=="S61324" ///
| substr(diag,1,6)=="S61325" ///
| substr(diag,1,6)=="S61326" ///
| substr(diag,1,6)=="S61327" ///
| substr(diag,1,6)=="S61335" ///
| substr(diag,1,6)=="S61353" ///
| substr(diag,1,6)=="S61357" ///
| substr(diag,1,6)=="S61401" ///
| substr(diag,1,6)=="S61402" ///
| substr(diag,1,6)=="S61409" ///
| substr(diag,1,6)=="S61411" ///
| substr(diag,1,6)=="S61412" ///
| substr(diag,1,6)=="S61419" ///
| substr(diag,1,6)=="S61421" ///
| substr(diag,1,6)=="S61422" ///
| substr(diag,1,6)=="S61429" ///
| substr(diag,1,6)=="S61431" ///
| substr(diag,1,6)=="S61432" ///
| substr(diag,1,6)=="S61439" ///
| substr(diag,1,6)=="S61441" ///
| substr(diag,1,6)=="S61442" ///
| substr(diag,1,6)=="S61451" ///
| substr(diag,1,6)=="S61452" ///
| substr(diag,1,6)=="S61459" ///
| substr(diag,1,6)=="S61501" ///
| substr(diag,1,6)=="S61502" ///
| substr(diag,1,6)=="S61509" ///
| substr(diag,1,6)=="S61511" ///
| substr(diag,1,6)=="S61512" ///
| substr(diag,1,6)=="S61519" ///
| substr(diag,1,6)=="S61521" ///
| substr(diag,1,6)=="S61522" ///
| substr(diag,1,6)=="S61531" ///
| substr(diag,1,6)=="S61532" ///
| substr(diag,1,6)=="S61539" ///
| substr(diag,1,6)=="S61541" ///
| substr(diag,1,6)=="S61551" ///
| substr(diag,1,6)=="S61552" ///
| substr(diag,1,6)=="S62001" ///
| substr(diag,1,6)=="S62002" ///
| substr(diag,1,6)=="S62009" ///
| substr(diag,1,6)=="S62011" ///
| substr(diag,1,6)=="S62012" ///
| substr(diag,1,6)=="S62014" ///
| substr(diag,1,6)=="S62015" ///
| substr(diag,1,6)=="S62021" ///
| substr(diag,1,6)=="S62022" ///
| substr(diag,1,6)=="S62023" ///
| substr(diag,1,6)=="S62024" ///
| substr(diag,1,6)=="S62025" ///
| substr(diag,1,6)=="S62031" ///
| substr(diag,1,6)=="S62032" ///
| substr(diag,1,6)=="S62033" ///
| substr(diag,1,6)=="S62034" ///
| substr(diag,1,6)=="S62035" ///
| substr(diag,1,6)=="S62101" ///
| substr(diag,1,6)=="S62102" ///
| substr(diag,1,6)=="S62109" ///
| substr(diag,1,6)=="S62111" ///
| substr(diag,1,6)=="S62112" ///
| substr(diag,1,6)=="S62113" ///
| substr(diag,1,6)=="S62114" ///
| substr(diag,1,6)=="S62115" ///
| substr(diag,1,6)=="S62116" ///
| substr(diag,1,6)=="S62121" ///
| substr(diag,1,6)=="S62122" ///
| substr(diag,1,6)=="S62125" ///
| substr(diag,1,6)=="S62126" ///
| substr(diag,1,6)=="S62131" ///
| substr(diag,1,6)=="S62132" ///
| substr(diag,1,6)=="S62135" ///
| substr(diag,1,6)=="S62136" ///
| substr(diag,1,6)=="S62141" ///
| substr(diag,1,6)=="S62142" ///
| substr(diag,1,6)=="S62144" ///
| substr(diag,1,6)=="S62145" ///
| substr(diag,1,6)=="S62146" ///
| substr(diag,1,6)=="S62151" ///
| substr(diag,1,6)=="S62152" ///
| substr(diag,1,6)=="S62155" ///
| substr(diag,1,6)=="S62156" ///
| substr(diag,1,6)=="S62162" ///
| substr(diag,1,6)=="S62164" ///
| substr(diag,1,6)=="S62165" ///
| substr(diag,1,6)=="S62166" ///
| substr(diag,1,6)=="S62171" ///
| substr(diag,1,6)=="S62172" ///
| substr(diag,1,6)=="S62173" ///
| substr(diag,1,6)=="S62174" ///
| substr(diag,1,6)=="S62175" ///
| substr(diag,1,6)=="S62176" ///
| substr(diag,1,6)=="S62181" ///
| substr(diag,1,6)=="S62182" ///
| substr(diag,1,6)=="S62201" ///
| substr(diag,1,6)=="S62202" ///
| substr(diag,1,6)=="S62209" ///
| substr(diag,1,6)=="S62211" ///
| substr(diag,1,6)=="S62212" ///
| substr(diag,1,6)=="S62221" ///
| substr(diag,1,6)=="S62222" ///
| substr(diag,1,6)=="S62225" ///
| substr(diag,1,6)=="S62231" ///
| substr(diag,1,6)=="S62232" ///
| substr(diag,1,6)=="S62233" ///
| substr(diag,1,6)=="S62234" ///
| substr(diag,1,6)=="S62235" ///
| substr(diag,1,6)=="S62236" ///
| substr(diag,1,6)=="S62242" ///
| substr(diag,1,6)=="S62244" ///
| substr(diag,1,6)=="S62245" ///
| substr(diag,1,6)=="S62251" ///
| substr(diag,1,6)=="S62252" ///
| substr(diag,1,6)=="S62255" ///
| substr(diag,1,6)=="S62291" ///
| substr(diag,1,6)=="S62292" ///
| substr(diag,1,6)=="S62299" ///
| substr(diag,1,6)=="S62300" ///
| substr(diag,1,6)=="S62301" ///
| substr(diag,1,6)=="S62302" ///
| substr(diag,1,6)=="S62303" ///
| substr(diag,1,6)=="S62304" ///
| substr(diag,1,6)=="S62305" ///
| substr(diag,1,6)=="S62306"  


replace trauma=1 if  substr(diag,1,6)=="S62307" ///
| substr(diag,1,6)=="S62308" ///
| substr(diag,1,6)=="S62309" ///
| substr(diag,1,6)=="S62310" ///
| substr(diag,1,6)=="S62311" ///
| substr(diag,1,6)=="S62312" ///
| substr(diag,1,6)=="S62313" ///
| substr(diag,1,6)=="S62314" ///
| substr(diag,1,6)=="S62315" ///
| substr(diag,1,6)=="S62316" ///
| substr(diag,1,6)=="S62317" ///
| substr(diag,1,6)=="S62318" ///
| substr(diag,1,6)=="S62319" ///
| substr(diag,1,6)=="S62320" ///
| substr(diag,1,6)=="S62321" ///
| substr(diag,1,6)=="S62322" ///
| substr(diag,1,6)=="S62323" ///
| substr(diag,1,6)=="S62324" ///
| substr(diag,1,6)=="S62325" ///
| substr(diag,1,6)=="S62326" ///
| substr(diag,1,6)=="S62327" ///
| substr(diag,1,6)=="S62328" ///
| substr(diag,1,6)=="S62329" ///
| substr(diag,1,6)=="S62330" ///
| substr(diag,1,6)=="S62331" ///
| substr(diag,1,6)=="S62332" ///
| substr(diag,1,6)=="S62333" ///
| substr(diag,1,6)=="S62334" ///
| substr(diag,1,6)=="S62335" ///
| substr(diag,1,6)=="S62336" ///
| substr(diag,1,6)=="S62337" ///
| substr(diag,1,6)=="S62339" ///
| substr(diag,1,6)=="S62340" ///
| substr(diag,1,6)=="S62341" ///
| substr(diag,1,6)=="S62342" ///
| substr(diag,1,6)=="S62343" ///
| substr(diag,1,6)=="S62344" ///
| substr(diag,1,6)=="S62345" ///
| substr(diag,1,6)=="S62346" ///
| substr(diag,1,6)=="S62347" ///
| substr(diag,1,6)=="S62349" ///
| substr(diag,1,6)=="S62350" ///
| substr(diag,1,6)=="S62351" ///
| substr(diag,1,6)=="S62352" ///
| substr(diag,1,6)=="S62353" ///
| substr(diag,1,6)=="S62354" ///
| substr(diag,1,6)=="S62355" ///
| substr(diag,1,6)=="S62356" ///
| substr(diag,1,6)=="S62357" ///
| substr(diag,1,6)=="S62359" ///
| substr(diag,1,6)=="S62360" ///
| substr(diag,1,6)=="S62361" ///
| substr(diag,1,6)=="S62362" ///
| substr(diag,1,6)=="S62363" ///
| substr(diag,1,6)=="S62364" ///
| substr(diag,1,6)=="S62365" ///
| substr(diag,1,6)=="S62366" ///
| substr(diag,1,6)=="S62367" ///
| substr(diag,1,6)=="S62369" ///
| substr(diag,1,6)=="S62390" ///
| substr(diag,1,6)=="S62391" ///
| substr(diag,1,6)=="S62392" ///
| substr(diag,1,6)=="S62393" ///
| substr(diag,1,6)=="S62394" ///
| substr(diag,1,6)=="S62395" ///
| substr(diag,1,6)=="S62396" ///
| substr(diag,1,6)=="S62397" ///
| substr(diag,1,6)=="S62398" ///
| substr(diag,1,6)=="S62399" ///
| substr(diag,1,6)=="S62501" ///
| substr(diag,1,6)=="S62502" ///
| substr(diag,1,6)=="S62509" ///
| substr(diag,1,6)=="S62511" ///
| substr(diag,1,6)=="S62512" ///
| substr(diag,1,6)=="S62514" ///
| substr(diag,1,6)=="S62515" ///
| substr(diag,1,6)=="S62521" ///
| substr(diag,1,6)=="S62522" ///
| substr(diag,1,6)=="S62524" ///
| substr(diag,1,6)=="S62525" ///
| substr(diag,1,6)=="S62600" ///
| substr(diag,1,6)=="S62601" ///
| substr(diag,1,6)=="S62602" ///
| substr(diag,1,6)=="S62603" ///
| substr(diag,1,6)=="S62604" ///
| substr(diag,1,6)=="S62605" ///
| substr(diag,1,6)=="S62606" ///
| substr(diag,1,6)=="S62607" ///
| substr(diag,1,6)=="S62608" ///
| substr(diag,1,6)=="S62609" ///
| substr(diag,1,6)=="S62610" ///
| substr(diag,1,6)=="S62611" ///
| substr(diag,1,6)=="S62612" ///
| substr(diag,1,6)=="S62613" ///
| substr(diag,1,6)=="S62614" ///
| substr(diag,1,6)=="S62615" ///
| substr(diag,1,6)=="S62616" ///
| substr(diag,1,6)=="S62617" ///
| substr(diag,1,6)=="S62618" ///
| substr(diag,1,6)=="S62619" ///
| substr(diag,1,6)=="S62620" ///
| substr(diag,1,6)=="S62621" ///
| substr(diag,1,6)=="S62622" ///
| substr(diag,1,6)=="S62623" ///
| substr(diag,1,6)=="S62624" ///
| substr(diag,1,6)=="S62625" ///
| substr(diag,1,6)=="S62626" ///
| substr(diag,1,6)=="S62627" ///
| substr(diag,1,6)=="S62628" ///
| substr(diag,1,6)=="S62629" ///
| substr(diag,1,6)=="S62630" ///
| substr(diag,1,6)=="S62631" ///
| substr(diag,1,6)=="S62632" ///
| substr(diag,1,6)=="S62633" ///
| substr(diag,1,6)=="S62634" ///
| substr(diag,1,6)=="S62635" ///
| substr(diag,1,6)=="S62636" ///
| substr(diag,1,6)=="S62637" ///
| substr(diag,1,6)=="S62639" ///
| substr(diag,1,6)=="S62640" ///
| substr(diag,1,6)=="S62641" ///
| substr(diag,1,6)=="S62642"  


replace trauma=1 if  substr(diag,1,6)=="S62643" ///
| substr(diag,1,6)=="S62644" ///
| substr(diag,1,6)=="S62645" ///
| substr(diag,1,6)=="S62646" ///
| substr(diag,1,6)=="S62647" ///
| substr(diag,1,6)=="S62648" ///
| substr(diag,1,6)=="S62649" ///
| substr(diag,1,6)=="S62650" ///
| substr(diag,1,6)=="S62651" ///
| substr(diag,1,6)=="S62652" ///
| substr(diag,1,6)=="S62653" ///
| substr(diag,1,6)=="S62654" ///
| substr(diag,1,6)=="S62655" ///
| substr(diag,1,6)=="S62656" ///
| substr(diag,1,6)=="S62657" ///
| substr(diag,1,6)=="S62660" ///
| substr(diag,1,6)=="S62661" ///
| substr(diag,1,6)=="S62662" ///
| substr(diag,1,6)=="S62663" ///
| substr(diag,1,6)=="S62664" ///
| substr(diag,1,6)=="S62665" ///
| substr(diag,1,6)=="S62666" ///
| substr(diag,1,6)=="S62667" ///
| substr(diag,1,6)=="S62669" ///
| substr(diag,1,5)=="S6290" ///
| substr(diag,1,5)=="S6291" ///
| substr(diag,1,5)=="S6292" ///
| substr(diag,1,6)=="S63001" ///
| substr(diag,1,6)=="S63002" ///
| substr(diag,1,6)=="S63003" ///
| substr(diag,1,6)=="S63004" ///
| substr(diag,1,6)=="S63005" ///
| substr(diag,1,6)=="S63006" ///
| substr(diag,1,6)=="S63011" ///
| substr(diag,1,6)=="S63012" ///
| substr(diag,1,6)=="S63014" ///
| substr(diag,1,6)=="S63015" ///
| substr(diag,1,6)=="S63016" ///
| substr(diag,1,6)=="S63021" ///
| substr(diag,1,6)=="S63022" ///
| substr(diag,1,6)=="S63024" ///
| substr(diag,1,6)=="S63025" ///
| substr(diag,1,6)=="S63026" ///
| substr(diag,1,6)=="S63031" ///
| substr(diag,1,6)=="S63032" ///
| substr(diag,1,6)=="S63034" ///
| substr(diag,1,6)=="S63035" ///
| substr(diag,1,6)=="S63044" ///
| substr(diag,1,6)=="S63045" ///
| substr(diag,1,6)=="S63046" ///
| substr(diag,1,6)=="S63051" ///
| substr(diag,1,6)=="S63052" ///
| substr(diag,1,6)=="S63054" ///
| substr(diag,1,6)=="S63055" ///
| substr(diag,1,6)=="S63056" ///
| substr(diag,1,6)=="S63061" ///
| substr(diag,1,6)=="S63062" ///
| substr(diag,1,6)=="S63064" ///
| substr(diag,1,6)=="S63065" ///
| substr(diag,1,6)=="S63066" ///
| substr(diag,1,6)=="S63071" ///
| substr(diag,1,6)=="S63072" ///
| substr(diag,1,6)=="S63074" ///
| substr(diag,1,6)=="S63075" ///
| substr(diag,1,6)=="S63091" ///
| substr(diag,1,6)=="S63092" ///
| substr(diag,1,6)=="S63094" ///
| substr(diag,1,6)=="S63095" ///
| substr(diag,1,6)=="S63096" ///
| substr(diag,1,6)=="S63102" ///
| substr(diag,1,6)=="S63104" ///
| substr(diag,1,6)=="S63105" ///
| substr(diag,1,6)=="S63106" ///
| substr(diag,1,6)=="S63111" ///
| substr(diag,1,6)=="S63112" ///
| substr(diag,1,6)=="S63114" ///
| substr(diag,1,6)=="S63115" ///
| substr(diag,1,6)=="S63116" ///
| substr(diag,1,6)=="S63121" ///
| substr(diag,1,6)=="S63124" ///
| substr(diag,1,6)=="S63125" ///
| substr(diag,1,6)=="S63126" ///
| substr(diag,1,6)=="S63131" ///
| substr(diag,1,6)=="S63132" ///
| substr(diag,1,6)=="S63135" ///
| substr(diag,1,6)=="S63142" ///
| substr(diag,1,6)=="S63144" ///
| substr(diag,1,6)=="S63145" ///
| substr(diag,1,6)=="S63200" ///
| substr(diag,1,6)=="S63201" ///
| substr(diag,1,6)=="S63202" ///
| substr(diag,1,6)=="S63203" ///
| substr(diag,1,6)=="S63206" ///
| substr(diag,1,6)=="S63211" ///
| substr(diag,1,6)=="S63213" ///
| substr(diag,1,6)=="S63215" ///
| substr(diag,1,6)=="S63217" ///
| substr(diag,1,6)=="S63230" ///
| substr(diag,1,6)=="S63231" ///
| substr(diag,1,6)=="S63235" ///
| substr(diag,1,6)=="S63236" ///
| substr(diag,1,6)=="S63237"  


replace trauma=1 if  substr(diag,1,6)=="S63239" ///
| substr(diag,1,6)=="S63241" ///
| substr(diag,1,6)=="S63245" ///
| substr(diag,1,6)=="S63250" ///
| substr(diag,1,6)=="S63251" ///
| substr(diag,1,6)=="S63252" ///
| substr(diag,1,6)=="S63253" ///
| substr(diag,1,6)=="S63254" ///
| substr(diag,1,6)=="S63255" ///
| substr(diag,1,6)=="S63256" ///
| substr(diag,1,6)=="S63257" ///
| substr(diag,1,6)=="S63258" ///
| substr(diag,1,6)=="S63259" ///
| substr(diag,1,6)=="S63260" ///
| substr(diag,1,6)=="S63261" ///
| substr(diag,1,6)=="S63262" ///
| substr(diag,1,6)=="S63263" ///
| substr(diag,1,6)=="S63264" ///
| substr(diag,1,6)=="S63265" ///
| substr(diag,1,6)=="S63266" ///
| substr(diag,1,6)=="S63267" ///
| substr(diag,1,6)=="S63268" ///
| substr(diag,1,6)=="S63269" ///
| substr(diag,1,6)=="S63271" ///
| substr(diag,1,6)=="S63277" ///
| substr(diag,1,6)=="S63279" ///
| substr(diag,1,6)=="S63280" ///
| substr(diag,1,6)=="S63281" ///
| substr(diag,1,6)=="S63282" ///
| substr(diag,1,6)=="S63283" ///
| substr(diag,1,6)=="S63284" ///
| substr(diag,1,6)=="S63285" ///
| substr(diag,1,6)=="S63286" ///
| substr(diag,1,6)=="S63287" ///
| substr(diag,1,6)=="S63288" ///
| substr(diag,1,6)=="S63289" ///
| substr(diag,1,6)=="S63290" ///
| substr(diag,1,6)=="S63291" ///
| substr(diag,1,6)=="S63292" ///
| substr(diag,1,6)=="S63293" ///
| substr(diag,1,6)=="S63294" ///
| substr(diag,1,6)=="S63295" ///
| substr(diag,1,6)=="S63296" ///
| substr(diag,1,6)=="S63297" ///
| substr(diag,1,6)=="S63301" ///
| substr(diag,1,6)=="S63302" ///
| substr(diag,1,6)=="S63321" ///
| substr(diag,1,6)=="S63322" ///
| substr(diag,1,6)=="S63331" ///
| substr(diag,1,6)=="S63391" ///
| substr(diag,1,6)=="S63392" ///
| substr(diag,1,6)=="S63400" ///
| substr(diag,1,6)=="S63401" ///
| substr(diag,1,6)=="S63404" ///
| substr(diag,1,6)=="S63405" ///
| substr(diag,1,6)=="S63415" ///
| substr(diag,1,6)=="S63416" ///
| substr(diag,1,6)=="S63417" ///
| substr(diag,1,6)=="S63418" ///
| substr(diag,1,6)=="S63419" ///
| substr(diag,1,6)=="S63430" ///
| substr(diag,1,6)=="S63433" ///
| substr(diag,1,6)=="S63434" ///
| substr(diag,1,6)=="S63437" ///
| substr(diag,1,6)=="S63496" ///
| substr(diag,1,6)=="S63498" ///
| substr(diag,1,6)=="S63501" ///
| substr(diag,1,6)=="S63502" ///
| substr(diag,1,6)=="S63509" ///
| substr(diag,1,6)=="S63511" ///
| substr(diag,1,6)=="S63512" ///
| substr(diag,1,6)=="S63519" ///
| substr(diag,1,6)=="S63521" ///
| substr(diag,1,6)=="S63591" ///
| substr(diag,1,6)=="S63592" ///
| substr(diag,1,6)=="S63601" ///
| substr(diag,1,6)=="S63602" ///
| substr(diag,1,6)=="S63609" ///
| substr(diag,1,6)=="S63610" ///
| substr(diag,1,6)=="S63611" ///
| substr(diag,1,6)=="S63612" ///
| substr(diag,1,6)=="S63617" ///
| substr(diag,1,6)=="S63619" ///
| substr(diag,1,6)=="S63621" ///
| substr(diag,1,6)=="S63622" ///
| substr(diag,1,6)=="S63630" ///
| substr(diag,1,6)=="S63631" ///
| substr(diag,1,6)=="S63632" ///
| substr(diag,1,6)=="S63633" ///
| substr(diag,1,6)=="S63634" ///
| substr(diag,1,6)=="S63635" ///
| substr(diag,1,6)=="S63636" ///
| substr(diag,1,6)=="S63637" ///
| substr(diag,1,6)=="S63641" ///
| substr(diag,1,6)=="S63642" ///
| substr(diag,1,6)=="S63649" ///
| substr(diag,1,6)=="S63650" ///
| substr(diag,1,6)=="S63654" ///
| substr(diag,1,6)=="S63656" ///
| substr(diag,1,6)=="S63658" ///
| substr(diag,1,6)=="S63691" ///
| substr(diag,1,4)=="S638" ///
| substr(diag,1,5)=="S6390" ///
| substr(diag,1,5)=="S6391" ///
| substr(diag,1,5)=="S6392" ///
| substr(diag,1,5)=="S6400" ///
| substr(diag,1,5)=="S6401" ///
| substr(diag,1,5)=="S6402" ///
| substr(diag,1,5)=="S6410" ///
| substr(diag,1,5)=="S6411" ///
| substr(diag,1,5)=="S6412" ///
| substr(diag,1,5)=="S6420"  


replace trauma=1 if  substr(diag,1,5)=="S6421" ///
| substr(diag,1,5)=="S6422" ///
| substr(diag,1,5)=="S6430" ///
| substr(diag,1,5)=="S6431" ///
| substr(diag,1,5)=="S6432" ///
| substr(diag,1,5)=="S6440" ///
| substr(diag,1,6)=="S64490" ///
| substr(diag,1,6)=="S64491" ///
| substr(diag,1,6)=="S64492" ///
| substr(diag,1,6)=="S64493" ///
| substr(diag,1,6)=="S64494" ///
| substr(diag,1,6)=="S64495" ///
| substr(diag,1,6)=="S64496" ///
| substr(diag,1,6)=="S64497" ///
| substr(diag,1,6)=="S64498" ///
| substr(diag,1,4)=="S648" ///
| substr(diag,1,5)=="S6490" ///
| substr(diag,1,5)=="S6492" ///
| substr(diag,1,6)=="S65002" ///
| substr(diag,1,6)=="S65009" ///
| substr(diag,1,6)=="S65011" ///
| substr(diag,1,6)=="S65012" ///
| substr(diag,1,6)=="S65091" ///
| substr(diag,1,6)=="S65092" ///
| substr(diag,1,6)=="S65101" ///
| substr(diag,1,6)=="S65102" ///
| substr(diag,1,6)=="S65109" ///
| substr(diag,1,6)=="S65111" ///
| substr(diag,1,6)=="S65112" ///
| substr(diag,1,6)=="S65119" ///
| substr(diag,1,6)=="S65192" ///
| substr(diag,1,6)=="S65211" ///
| substr(diag,1,6)=="S65212" ///
| substr(diag,1,6)=="S65311" ///
| substr(diag,1,6)=="S65401" ///
| substr(diag,1,6)=="S65411" ///
| substr(diag,1,6)=="S65412" ///
| substr(diag,1,6)=="S65504" ///
| substr(diag,1,6)=="S65508" ///
| substr(diag,1,6)=="S65509" ///
| substr(diag,1,6)=="S65510" ///
| substr(diag,1,6)=="S65511" ///
| substr(diag,1,6)=="S65512" ///
| substr(diag,1,6)=="S65513" ///
| substr(diag,1,6)=="S65514" ///
| substr(diag,1,6)=="S65515" ///
| substr(diag,1,6)=="S65516" ///
| substr(diag,1,6)=="S65517" ///
| substr(diag,1,6)=="S65518" ///
| substr(diag,1,6)=="S65519" ///
| substr(diag,1,6)=="S65590" ///
| substr(diag,1,6)=="S65591" ///
| substr(diag,1,6)=="S65592" ///
| substr(diag,1,6)=="S65594" ///
| substr(diag,1,6)=="S65596" ///
| substr(diag,1,6)=="S65599" ///
| substr(diag,1,6)=="S65801" ///
| substr(diag,1,6)=="S65809" ///
| substr(diag,1,6)=="S65811" ///
| substr(diag,1,6)=="S65812" ///
| substr(diag,1,6)=="S65902" ///
| substr(diag,1,6)=="S66021" ///
| substr(diag,1,6)=="S66022" ///
| substr(diag,1,6)=="S66091" ///
| substr(diag,1,6)=="S66100" ///
| substr(diag,1,6)=="S66102" ///
| substr(diag,1,6)=="S66104" ///
| substr(diag,1,6)=="S66105" ///
| substr(diag,1,6)=="S66106" ///
| substr(diag,1,6)=="S66112" ///
| substr(diag,1,6)=="S66119" ///
| substr(diag,1,6)=="S66120" ///
| substr(diag,1,6)=="S66121" ///
| substr(diag,1,6)=="S66122" ///
| substr(diag,1,6)=="S66123" ///
| substr(diag,1,6)=="S66124" ///
| substr(diag,1,6)=="S66125" ///
| substr(diag,1,6)=="S66126" ///
| substr(diag,1,6)=="S66127" ///
| substr(diag,1,6)=="S66128" ///
| substr(diag,1,6)=="S66129" ///
| substr(diag,1,6)=="S66190" ///
| substr(diag,1,6)=="S66191" ///
| substr(diag,1,6)=="S66192" ///
| substr(diag,1,6)=="S66201" ///
| substr(diag,1,6)=="S66202" ///
| substr(diag,1,6)=="S66221" ///
| substr(diag,1,6)=="S66222" ///
| substr(diag,1,6)=="S66300" ///
| substr(diag,1,6)=="S66301" ///
| substr(diag,1,6)=="S66302" ///
| substr(diag,1,6)=="S66303" ///
| substr(diag,1,6)=="S66304" ///
| substr(diag,1,6)=="S66305" ///
| substr(diag,1,6)=="S66306" ///
| substr(diag,1,6)=="S66307" ///
| substr(diag,1,6)=="S66308" ///
| substr(diag,1,6)=="S66309" ///
| substr(diag,1,6)=="S66310" ///
| substr(diag,1,6)=="S66312" ///
| substr(diag,1,6)=="S66313" ///
| substr(diag,1,6)=="S66314" ///
| substr(diag,1,6)=="S66315" ///
| substr(diag,1,6)=="S66319" ///
| substr(diag,1,6)=="S66320" ///
| substr(diag,1,6)=="S66321" ///
| substr(diag,1,6)=="S66322" ///
| substr(diag,1,6)=="S66323" ///
| substr(diag,1,6)=="S66324"  


replace trauma=1 if  substr(diag,1,6)=="S66325" ///
| substr(diag,1,6)=="S66326" ///
| substr(diag,1,6)=="S66327" ///
| substr(diag,1,6)=="S66328" ///
| substr(diag,1,6)=="S66329" ///
| substr(diag,1,6)=="S66391" ///
| substr(diag,1,6)=="S66392" ///
| substr(diag,1,6)=="S66393" ///
| substr(diag,1,6)=="S66394" ///
| substr(diag,1,6)=="S66395" ///
| substr(diag,1,6)=="S66396" ///
| substr(diag,1,6)=="S66397" ///
| substr(diag,1,6)=="S66399" ///
| substr(diag,1,6)=="S66421" ///
| substr(diag,1,6)=="S66422" ///
| substr(diag,1,6)=="S66492" ///
| substr(diag,1,6)=="S66509" ///
| substr(diag,1,6)=="S66514" ///
| substr(diag,1,6)=="S66521" ///
| substr(diag,1,6)=="S66522" ///
| substr(diag,1,6)=="S66523" ///
| substr(diag,1,6)=="S66524" ///
| substr(diag,1,6)=="S66525" ///
| substr(diag,1,6)=="S66526" ///
| substr(diag,1,6)=="S66527" ///
| substr(diag,1,6)=="S66529" ///
| substr(diag,1,6)=="S66592" ///
| substr(diag,1,6)=="S66811" ///
| substr(diag,1,6)=="S66812" ///
| substr(diag,1,6)=="S66821" ///
| substr(diag,1,6)=="S66822" ///
| substr(diag,1,6)=="S66891" ///
| substr(diag,1,6)=="S66892" ///
| substr(diag,1,6)=="S66901" ///
| substr(diag,1,6)=="S66902" ///
| substr(diag,1,6)=="S66911" ///
| substr(diag,1,6)=="S66912" ///
| substr(diag,1,6)=="S66919" ///
| substr(diag,1,6)=="S66921" ///
| substr(diag,1,6)=="S66922" ///
| substr(diag,1,6)=="S66929" ///
| substr(diag,1,6)=="S66991" ///
| substr(diag,1,5)=="S6701" ///
| substr(diag,1,5)=="S6702" ///
| substr(diag,1,5)=="S6710" ///
| substr(diag,1,6)=="S67190" ///
| substr(diag,1,6)=="S67191" ///
| substr(diag,1,6)=="S67192" ///
| substr(diag,1,6)=="S67193" ///
| substr(diag,1,6)=="S67194" ///
| substr(diag,1,6)=="S67195" ///
| substr(diag,1,6)=="S67196" ///
| substr(diag,1,6)=="S67197" ///
| substr(diag,1,6)=="S67198" ///
| substr(diag,1,5)=="S6720" ///
| substr(diag,1,5)=="S6721" ///
| substr(diag,1,5)=="S6722" ///
| substr(diag,1,5)=="S6730" ///
| substr(diag,1,5)=="S6731" ///
| substr(diag,1,5)=="S6732" ///
| substr(diag,1,5)=="S6740" ///
| substr(diag,1,5)=="S6741" ///
| substr(diag,1,5)=="S6790" ///
| substr(diag,1,5)=="S6791" ///
| substr(diag,1,6)=="S68011" ///
| substr(diag,1,6)=="S68012" ///
| substr(diag,1,6)=="S68019" ///
| substr(diag,1,6)=="S68021" ///
| substr(diag,1,6)=="S68022" ///
| substr(diag,1,6)=="S68110" ///
| substr(diag,1,6)=="S68111" ///
| substr(diag,1,6)=="S68112" ///
| substr(diag,1,6)=="S68113" ///
| substr(diag,1,6)=="S68114" ///
| substr(diag,1,6)=="S68115" ///
| substr(diag,1,6)=="S68116" ///
| substr(diag,1,6)=="S68117" ///
| substr(diag,1,6)=="S68119" ///
| substr(diag,1,6)=="S68120" ///
| substr(diag,1,6)=="S68121" ///
| substr(diag,1,6)=="S68122" ///
| substr(diag,1,6)=="S68123" ///
| substr(diag,1,6)=="S68124" ///
| substr(diag,1,6)=="S68125" ///
| substr(diag,1,6)=="S68126" ///
| substr(diag,1,6)=="S68127" ///
| substr(diag,1,6)=="S68128" ///
| substr(diag,1,6)=="S68129" ///
| substr(diag,1,6)=="S68411" ///
| substr(diag,1,6)=="S68412" ///
| substr(diag,1,6)=="S68419" ///
| substr(diag,1,6)=="S68421" ///
| substr(diag,1,6)=="S68422" ///
| substr(diag,1,6)=="S68511" ///
| substr(diag,1,6)=="S68512" ///
| substr(diag,1,6)=="S68519" ///
| substr(diag,1,6)=="S68521" ///
| substr(diag,1,6)=="S68522" ///
| substr(diag,1,6)=="S68529" ///
| substr(diag,1,6)=="S68610" ///
| substr(diag,1,6)=="S68611" ///
| substr(diag,1,6)=="S68612" ///
| substr(diag,1,6)=="S68613" ///
| substr(diag,1,6)=="S68614" ///
| substr(diag,1,6)=="S68615" ///
| substr(diag,1,6)=="S68616"  


replace trauma=1 if  substr(diag,1,6)=="S68617" ///
| substr(diag,1,6)=="S68619" ///
| substr(diag,1,6)=="S68620" ///
| substr(diag,1,6)=="S68621" ///
| substr(diag,1,6)=="S68622" ///
| substr(diag,1,6)=="S68623" ///
| substr(diag,1,6)=="S68624" ///
| substr(diag,1,6)=="S68625" ///
| substr(diag,1,6)=="S68626" ///
| substr(diag,1,6)=="S68627" ///
| substr(diag,1,6)=="S68628" ///
| substr(diag,1,6)=="S68629" ///
| substr(diag,1,6)=="S68711" ///
| substr(diag,1,6)=="S68712" ///
| substr(diag,1,6)=="S68721" ///
| substr(diag,1,6)=="S68722" ///
| substr(diag,1,6)=="S68729" ///
| substr(diag,1,5)=="S6980" ///
| substr(diag,1,5)=="S6981" ///
| substr(diag,1,5)=="S6982" ///
| substr(diag,1,5)=="S6990" ///
| substr(diag,1,5)=="S6991" ///
| substr(diag,1,5)=="S6992" ///
| substr(diag,1,5)=="S7000" ///
| substr(diag,1,5)=="S7001" ///
| substr(diag,1,5)=="S7002" ///
| substr(diag,1,5)=="S7010" ///
| substr(diag,1,5)=="S7011" ///
| substr(diag,1,5)=="S7012" ///
| substr(diag,1,6)=="S70211" ///
| substr(diag,1,6)=="S70212" ///
| substr(diag,1,6)=="S70219" ///
| substr(diag,1,6)=="S70252" ///
| substr(diag,1,6)=="S70259" ///
| substr(diag,1,6)=="S70279" ///
| substr(diag,1,6)=="S70311" ///
| substr(diag,1,6)=="S70312" ///
| substr(diag,1,6)=="S70319" ///
| substr(diag,1,6)=="S70342" ///
| substr(diag,1,6)=="S70352" ///
| substr(diag,1,6)=="S70912" ///
| substr(diag,1,6)=="S71001" ///
| substr(diag,1,6)=="S71002" ///
| substr(diag,1,6)=="S71009" ///
| substr(diag,1,6)=="S71011" ///
| substr(diag,1,6)=="S71012" ///
| substr(diag,1,6)=="S71019" ///
| substr(diag,1,6)=="S71021" ///
| substr(diag,1,6)=="S71022" ///
| substr(diag,1,6)=="S71029" ///
| substr(diag,1,6)=="S71031" ///
| substr(diag,1,6)=="S71032" ///
| substr(diag,1,6)=="S71039" ///
| substr(diag,1,6)=="S71041" ///
| substr(diag,1,6)=="S71042" ///
| substr(diag,1,6)=="S71101" ///
| substr(diag,1,6)=="S71102" ///
| substr(diag,1,6)=="S71109" ///
| substr(diag,1,6)=="S71111" ///
| substr(diag,1,6)=="S71112" ///
| substr(diag,1,6)=="S71119" ///
| substr(diag,1,6)=="S71121" ///
| substr(diag,1,6)=="S71122" ///
| substr(diag,1,6)=="S71129" ///
| substr(diag,1,6)=="S71131" ///
| substr(diag,1,6)=="S71132" ///
| substr(diag,1,6)=="S71139" ///
| substr(diag,1,6)=="S71141" ///
| substr(diag,1,6)=="S71142" ///
| substr(diag,1,6)=="S71149" ///
| substr(diag,1,6)=="S71151" ///
| substr(diag,1,6)=="S71152" ///
| substr(diag,1,6)=="S72001" ///
| substr(diag,1,6)=="S72002" ///
| substr(diag,1,6)=="S72009" ///
| substr(diag,1,6)=="S72011" ///
| substr(diag,1,6)=="S72012" ///
| substr(diag,1,6)=="S72019" ///
| substr(diag,1,6)=="S72021" ///
| substr(diag,1,6)=="S72022" ///
| substr(diag,1,6)=="S72023" ///
| substr(diag,1,6)=="S72024" ///
| substr(diag,1,6)=="S72025" ///
| substr(diag,1,6)=="S72031" ///
| substr(diag,1,6)=="S72032" ///
| substr(diag,1,6)=="S72034" ///
| substr(diag,1,6)=="S72035" ///
| substr(diag,1,6)=="S72041" ///
| substr(diag,1,6)=="S72042" ///
| substr(diag,1,6)=="S72044" ///
| substr(diag,1,6)=="S72045" ///
| substr(diag,1,6)=="S72046" ///
| substr(diag,1,6)=="S72051" ///
| substr(diag,1,6)=="S72052" ///
| substr(diag,1,6)=="S72059" ///
| substr(diag,1,6)=="S72061" ///
| substr(diag,1,6)=="S72062" ///
| substr(diag,1,6)=="S72064" ///
| substr(diag,1,6)=="S72065" ///
| substr(diag,1,6)=="S72091" ///
| substr(diag,1,6)=="S72092"  


replace trauma=1 if  substr(diag,1,6)=="S72099" ///
| substr(diag,1,6)=="S72101" ///
| substr(diag,1,6)=="S72102" ///
| substr(diag,1,6)=="S72109" ///
| substr(diag,1,6)=="S72111" ///
| substr(diag,1,6)=="S72112" ///
| substr(diag,1,6)=="S72113" ///
| substr(diag,1,6)=="S72114" ///
| substr(diag,1,6)=="S72115" ///
| substr(diag,1,6)=="S72116" ///
| substr(diag,1,6)=="S72121" ///
| substr(diag,1,6)=="S72122" ///
| substr(diag,1,6)=="S72123" ///
| substr(diag,1,6)=="S72124" ///
| substr(diag,1,6)=="S72125" ///
| substr(diag,1,6)=="S72126" ///
| substr(diag,1,6)=="S72131" ///
| substr(diag,1,6)=="S72132" ///
| substr(diag,1,6)=="S72141" ///
| substr(diag,1,6)=="S72142" ///
| substr(diag,1,6)=="S72143" ///
| substr(diag,1,6)=="S72144" ///
| substr(diag,1,6)=="S72145" ///
| substr(diag,1,6)=="S72146" ///
| substr(diag,1,5)=="S7221" ///
| substr(diag,1,5)=="S7222" ///
| substr(diag,1,5)=="S7223" ///
| substr(diag,1,5)=="S7224" ///
| substr(diag,1,5)=="S7225" ///
| substr(diag,1,5)=="S7226" ///
| substr(diag,1,6)=="S72301" ///
| substr(diag,1,6)=="S72302" ///
| substr(diag,1,6)=="S72309" ///
| substr(diag,1,6)=="S72321" ///
| substr(diag,1,6)=="S72322" ///
| substr(diag,1,6)=="S72323" ///
| substr(diag,1,6)=="S72324" ///
| substr(diag,1,6)=="S72325" ///
| substr(diag,1,6)=="S72331" ///
| substr(diag,1,6)=="S72332" ///
| substr(diag,1,6)=="S72333" ///
| substr(diag,1,6)=="S72334" ///
| substr(diag,1,6)=="S72335" ///
| substr(diag,1,6)=="S72341" ///
| substr(diag,1,6)=="S72342" ///
| substr(diag,1,6)=="S72343" ///
| substr(diag,1,6)=="S72344" ///
| substr(diag,1,6)=="S72345" ///
| substr(diag,1,6)=="S72351" ///
| substr(diag,1,6)=="S72352" ///
| substr(diag,1,6)=="S72353" ///
| substr(diag,1,6)=="S72354" ///
| substr(diag,1,6)=="S72355" ///
| substr(diag,1,6)=="S72361" ///
| substr(diag,1,6)=="S72362" ///
| substr(diag,1,6)=="S72364" ///
| substr(diag,1,6)=="S72391" ///
| substr(diag,1,6)=="S72392" ///
| substr(diag,1,6)=="S72399" ///
| substr(diag,1,6)=="S72401" ///
| substr(diag,1,6)=="S72402" ///
| substr(diag,1,6)=="S72409" ///
| substr(diag,1,6)=="S72411" ///
| substr(diag,1,6)=="S72412" ///
| substr(diag,1,6)=="S72413" ///
| substr(diag,1,6)=="S72414" ///
| substr(diag,1,6)=="S72415" ///
| substr(diag,1,6)=="S72416" ///
| substr(diag,1,6)=="S72421" ///
| substr(diag,1,6)=="S72422" ///
| substr(diag,1,6)=="S72423" ///
| substr(diag,1,6)=="S72424" ///
| substr(diag,1,6)=="S72425" ///
| substr(diag,1,6)=="S72431" ///
| substr(diag,1,6)=="S72432" ///
| substr(diag,1,6)=="S72433" ///
| substr(diag,1,6)=="S72434" ///
| substr(diag,1,6)=="S72435" ///
| substr(diag,1,6)=="S72441" ///
| substr(diag,1,6)=="S72442" ///
| substr(diag,1,6)=="S72444" ///
| substr(diag,1,6)=="S72445" ///
| substr(diag,1,6)=="S72451" ///
| substr(diag,1,6)=="S72452" ///
| substr(diag,1,6)=="S72453" ///
| substr(diag,1,6)=="S72454" ///
| substr(diag,1,6)=="S72455" ///
| substr(diag,1,6)=="S72461" ///
| substr(diag,1,6)=="S72462" ///
| substr(diag,1,6)=="S72463"  


replace trauma=1 if substr(diag,1,6)=="S72464" ///
| substr(diag,1,6)=="S72465" ///
| substr(diag,1,6)=="S72471" ///
| substr(diag,1,6)=="S72472" ///
| substr(diag,1,6)=="S72491" ///
| substr(diag,1,6)=="S72492" ///
| substr(diag,1,6)=="S72499" ///
| substr(diag,1,4)=="S728" ///
| substr(diag,1,5)=="S7290" ///
| substr(diag,1,5)=="S7291" ///
| substr(diag,1,5)=="S7292" ///
| substr(diag,1,6)=="S73001" ///
| substr(diag,1,6)=="S73002" ///
| substr(diag,1,6)=="S73003" ///
| substr(diag,1,6)=="S73004" ///
| substr(diag,1,6)=="S73005" ///
| substr(diag,1,6)=="S73006" ///
| substr(diag,1,6)=="S73011" ///
| substr(diag,1,6)=="S73012" ///
| substr(diag,1,6)=="S73014" ///
| substr(diag,1,6)=="S73015" ///
| substr(diag,1,6)=="S73016" ///
| substr(diag,1,6)=="S73022" ///
| substr(diag,1,6)=="S73025" ///
| substr(diag,1,6)=="S73031" ///
| substr(diag,1,6)=="S73032" ///
| substr(diag,1,6)=="S73034" ///
| substr(diag,1,6)=="S73035" ///
| substr(diag,1,6)=="S73042" ///
| substr(diag,1,6)=="S73044" ///
| substr(diag,1,6)=="S73045" ///
| substr(diag,1,6)=="S73101" ///
| substr(diag,1,6)=="S73102" ///
| substr(diag,1,6)=="S73109" ///
| substr(diag,1,6)=="S73112" ///
| substr(diag,1,6)=="S73191" ///
| substr(diag,1,6)=="S73192" ///
| substr(diag,1,6)=="S73199" ///
| substr(diag,1,5)=="S7400" ///
| substr(diag,1,5)=="S7401" ///
| substr(diag,1,5)=="S7402" ///
| substr(diag,1,5)=="S7410" ///
| substr(diag,1,5)=="S7411" ///
| substr(diag,1,5)=="S7412" ///
| substr(diag,1,5)=="S7421" ///
| substr(diag,1,4)=="S748" ///
| substr(diag,1,5)=="S7491" ///
| substr(diag,1,5)=="S7492" ///
| substr(diag,1,6)=="S75001" ///
| substr(diag,1,6)=="S75002" ///
| substr(diag,1,6)=="S75009" ///
| substr(diag,1,6)=="S75011" ///
| substr(diag,1,6)=="S75012" ///
| substr(diag,1,6)=="S75019" ///
| substr(diag,1,6)=="S75021" ///
| substr(diag,1,6)=="S75022" ///
| substr(diag,1,6)=="S75029" ///
| substr(diag,1,6)=="S75091" ///
| substr(diag,1,6)=="S75092" ///
| substr(diag,1,6)=="S75099" ///
| substr(diag,1,6)=="S75101" ///
| substr(diag,1,6)=="S75102" ///
| substr(diag,1,6)=="S75109" ///
| substr(diag,1,6)=="S75111" ///
| substr(diag,1,6)=="S75112" ///
| substr(diag,1,6)=="S75119" ///
| substr(diag,1,6)=="S75121" ///
| substr(diag,1,6)=="S75122" ///
| substr(diag,1,6)=="S75129" ///
| substr(diag,1,6)=="S75191" ///
| substr(diag,1,6)=="S75192" ///
| substr(diag,1,6)=="S75199" ///
| substr(diag,1,6)=="S75209" ///
| substr(diag,1,6)=="S75212" ///
| substr(diag,1,6)=="S75222" ///
| substr(diag,1,6)=="S75801" ///
| substr(diag,1,6)=="S75811" ///
| substr(diag,1,6)=="S75812" ///
| substr(diag,1,6)=="S75891" ///
| substr(diag,1,6)=="S75892" ///
| substr(diag,1,6)=="S75902" ///
| substr(diag,1,6)=="S75991" ///
| substr(diag,1,6)=="S76001" ///
| substr(diag,1,6)=="S76002" ///
| substr(diag,1,6)=="S76011" ///
| substr(diag,1,6)=="S76012" ///
| substr(diag,1,6)=="S76019" ///
| substr(diag,1,6)=="S76021" ///
| substr(diag,1,6)=="S76022" ///
| substr(diag,1,6)=="S76029" ///
| substr(diag,1,6)=="S76091" ///
| substr(diag,1,6)=="S76092" ///
| substr(diag,1,6)=="S76099" ///
| substr(diag,1,6)=="S76102" ///
| substr(diag,1,6)=="S76111" ///
| substr(diag,1,6)=="S76112"  


replace trauma=1 if  substr(diag,1,6)=="S76119" ///
| substr(diag,1,6)=="S76121" ///
| substr(diag,1,6)=="S76122" ///
| substr(diag,1,6)=="S76129" ///
| substr(diag,1,6)=="S76191" ///
| substr(diag,1,6)=="S76192" ///
| substr(diag,1,6)=="S76199" ///
| substr(diag,1,6)=="S76202" ///
| substr(diag,1,6)=="S76211" ///
| substr(diag,1,6)=="S76212" ///
| substr(diag,1,6)=="S76222" ///
| substr(diag,1,6)=="S76291" ///
| substr(diag,1,6)=="S76309" ///
| substr(diag,1,6)=="S76311" ///
| substr(diag,1,6)=="S76312" ///
| substr(diag,1,6)=="S76319" ///
| substr(diag,1,6)=="S76321" ///
| substr(diag,1,6)=="S76322" ///
| substr(diag,1,6)=="S76329" ///
| substr(diag,1,6)=="S76391" ///
| substr(diag,1,6)=="S76392" ///
| substr(diag,1,6)=="S76802" ///
| substr(diag,1,6)=="S76811" ///
| substr(diag,1,6)=="S76812" ///
| substr(diag,1,6)=="S76821" ///
| substr(diag,1,6)=="S76822" ///
| substr(diag,1,6)=="S76829" ///
| substr(diag,1,6)=="S76891" ///
| substr(diag,1,6)=="S76892" ///
| substr(diag,1,6)=="S76899" ///
| substr(diag,1,6)=="S76901" ///
| substr(diag,1,6)=="S76911" ///
| substr(diag,1,6)=="S76912" ///
| substr(diag,1,6)=="S76921" ///
| substr(diag,1,6)=="S76922" ///
| substr(diag,1,6)=="S76992" ///
| substr(diag,1,5)=="S7710" ///
| substr(diag,1,5)=="S7711" ///
| substr(diag,1,5)=="S7712" ///
| substr(diag,1,5)=="S7720" ///
| substr(diag,1,5)=="S7722" ///
| substr(diag,1,6)=="S78111" ///
| substr(diag,1,6)=="S78112" ///
| substr(diag,1,6)=="S78119" ///
| substr(diag,1,6)=="S78121" ///
| substr(diag,1,6)=="S78122" ///
| substr(diag,1,6)=="S78129" ///
| substr(diag,1,6)=="S79001" ///
| substr(diag,1,6)=="S79002" ///
| substr(diag,1,6)=="S79011" ///
| substr(diag,1,6)=="S79012" ///
| substr(diag,1,6)=="S79091" ///
| substr(diag,1,6)=="S79092" ///
| substr(diag,1,6)=="S79101" ///
| substr(diag,1,6)=="S79102" ///
| substr(diag,1,6)=="S79111" ///
| substr(diag,1,6)=="S79112" ///
| substr(diag,1,6)=="S79121" ///
| substr(diag,1,6)=="S79122" ///
| substr(diag,1,6)=="S79131" ///
| substr(diag,1,6)=="S79132" ///
| substr(diag,1,6)=="S79191" ///
| substr(diag,1,6)=="S79192" ///
| substr(diag,1,6)=="S79811" ///
| substr(diag,1,6)=="S79812" ///
| substr(diag,1,6)=="S79819" ///
| substr(diag,1,6)=="S79821" ///
| substr(diag,1,6)=="S79822" ///
| substr(diag,1,6)=="S79829" ///
| substr(diag,1,6)=="S79911" ///
| substr(diag,1,6)=="S79912" ///
| substr(diag,1,6)=="S79919" ///
| substr(diag,1,6)=="S79921" ///
| substr(diag,1,6)=="S79922" ///
| substr(diag,1,6)=="S79929" ///
| substr(diag,1,5)=="S8000" ///
| substr(diag,1,5)=="S8001" ///
| substr(diag,1,5)=="S8002" ///
| substr(diag,1,5)=="S8010" ///
| substr(diag,1,5)=="S8011" ///
| substr(diag,1,5)=="S8012" ///
| substr(diag,1,6)=="S80211" ///
| substr(diag,1,6)=="S80212" ///
| substr(diag,1,6)=="S80219" ///
| substr(diag,1,6)=="S80221" ///
| substr(diag,1,6)=="S80251" ///
| substr(diag,1,6)=="S80252" ///
| substr(diag,1,6)=="S80811" ///
| substr(diag,1,6)=="S80812" ///
| substr(diag,1,6)=="S80819" ///
| substr(diag,1,6)=="S80821" ///
| substr(diag,1,6)=="S80822" ///
| substr(diag,1,6)=="S80829" ///
| substr(diag,1,6)=="S80872" ///
| substr(diag,1,6)=="S80911" ///
| substr(diag,1,6)=="S80912"  


replace trauma=1 if substr(diag,1,6)=="S80921" ///
| substr(diag,1,6)=="S80922" ///
| substr(diag,1,6)=="S81001" ///
| substr(diag,1,6)=="S81002" ///
| substr(diag,1,6)=="S81009" ///
| substr(diag,1,6)=="S81011" ///
| substr(diag,1,6)=="S81012" ///
| substr(diag,1,6)=="S81019" ///
| substr(diag,1,6)=="S81021" ///
| substr(diag,1,6)=="S81022" ///
| substr(diag,1,6)=="S81029" ///
| substr(diag,1,6)=="S81031" ///
| substr(diag,1,6)=="S81032" ///
| substr(diag,1,6)=="S81039" ///
| substr(diag,1,6)=="S81041" ///
| substr(diag,1,6)=="S81042" ///
| substr(diag,1,6)=="S81051" ///
| substr(diag,1,6)=="S81052" ///
| substr(diag,1,6)=="S81801" ///
| substr(diag,1,6)=="S81802" ///
| substr(diag,1,6)=="S81809" ///
| substr(diag,1,6)=="S81811" ///
| substr(diag,1,6)=="S81812" ///
| substr(diag,1,6)=="S81819" ///
| substr(diag,1,6)=="S81821" ///
| substr(diag,1,6)=="S81822" ///
| substr(diag,1,6)=="S81829" ///
| substr(diag,1,6)=="S81831" ///
| substr(diag,1,6)=="S81832" ///
| substr(diag,1,6)=="S81839" ///
| substr(diag,1,6)=="S81841" ///
| substr(diag,1,6)=="S81842" ///
| substr(diag,1,6)=="S81851" ///
| substr(diag,1,6)=="S81852" ///
| substr(diag,1,6)=="S81859" ///
| substr(diag,1,6)=="S82001" ///
| substr(diag,1,6)=="S82002" ///
| substr(diag,1,6)=="S82009" ///
| substr(diag,1,6)=="S82011" ///
| substr(diag,1,6)=="S82012" ///
| substr(diag,1,6)=="S82014" ///
| substr(diag,1,6)=="S82015" ///
| substr(diag,1,6)=="S82021" ///
| substr(diag,1,6)=="S82022" ///
| substr(diag,1,6)=="S82024" ///
| substr(diag,1,6)=="S82025" ///
| substr(diag,1,6)=="S82031" ///
| substr(diag,1,6)=="S82032" ///
| substr(diag,1,6)=="S82034" ///
| substr(diag,1,6)=="S82035" ///
| substr(diag,1,6)=="S82041" ///
| substr(diag,1,6)=="S82042" ///
| substr(diag,1,6)=="S82043" ///
| substr(diag,1,6)=="S82044" ///
| substr(diag,1,6)=="S82045" ///
| substr(diag,1,6)=="S82046" ///
| substr(diag,1,6)=="S82091" ///
| substr(diag,1,6)=="S82092" ///
| substr(diag,1,6)=="S82099" ///
| substr(diag,1,6)=="S82101" ///
| substr(diag,1,6)=="S82102" ///
| substr(diag,1,6)=="S82109" ///
| substr(diag,1,6)=="S82111" ///
| substr(diag,1,6)=="S82112" ///
| substr(diag,1,6)=="S82113" ///
| substr(diag,1,6)=="S82114" ///
| substr(diag,1,6)=="S82115" ///
| substr(diag,1,6)=="S82116" ///
| substr(diag,1,6)=="S82121" ///
| substr(diag,1,6)=="S82122" ///
| substr(diag,1,6)=="S82123" ///
| substr(diag,1,6)=="S82124" ///
| substr(diag,1,6)=="S82125" 


replace trauma=1 if substr(diag,1,6)=="S82126" ///
| substr(diag,1,6)=="S82131" ///
| substr(diag,1,6)=="S82132" ///
| substr(diag,1,6)=="S82133" ///
| substr(diag,1,6)=="S82134" ///
| substr(diag,1,6)=="S82135" ///
| substr(diag,1,6)=="S82141" ///
| substr(diag,1,6)=="S82142" ///
| substr(diag,1,6)=="S82143" ///
| substr(diag,1,6)=="S82144" ///
| substr(diag,1,6)=="S82145" ///
| substr(diag,1,6)=="S82146" ///
| substr(diag,1,6)=="S82151" ///
| substr(diag,1,6)=="S82152" ///
| substr(diag,1,6)=="S82153" ///
| substr(diag,1,6)=="S82154" ///
| substr(diag,1,6)=="S82155" ///
| substr(diag,1,6)=="S82161" ///
| substr(diag,1,6)=="S82162" ///
| substr(diag,1,6)=="S82191" ///
| substr(diag,1,6)=="S82192" ///
| substr(diag,1,6)=="S82199" ///
| substr(diag,1,6)=="S82201" ///
| substr(diag,1,6)=="S82202" ///
| substr(diag,1,6)=="S82209" ///
| substr(diag,1,6)=="S82221" ///
| substr(diag,1,6)=="S82222" ///
| substr(diag,1,6)=="S82223" ///
| substr(diag,1,6)=="S82224" ///
| substr(diag,1,6)=="S82225" ///
| substr(diag,1,6)=="S82231" ///
| substr(diag,1,6)=="S82232" ///
| substr(diag,1,6)=="S82234" ///
| substr(diag,1,6)=="S82235" ///
| substr(diag,1,6)=="S82241" ///
| substr(diag,1,6)=="S82242" ///
| substr(diag,1,6)=="S82243" ///
| substr(diag,1,6)=="S82244" ///
| substr(diag,1,6)=="S82245" ///
| substr(diag,1,6)=="S82246" ///
| substr(diag,1,6)=="S82251" ///
| substr(diag,1,6)=="S82252" ///
| substr(diag,1,6)=="S82253" ///
| substr(diag,1,6)=="S82254" ///
| substr(diag,1,6)=="S82255" ///
| substr(diag,1,6)=="S82261" ///
| substr(diag,1,6)=="S82262" ///
| substr(diag,1,6)=="S82264" ///
| substr(diag,1,6)=="S82265" ///
| substr(diag,1,6)=="S82291" ///
| substr(diag,1,6)=="S82292" ///
| substr(diag,1,6)=="S82301" ///
| substr(diag,1,6)=="S82302" ///
| substr(diag,1,6)=="S82309" ///
| substr(diag,1,6)=="S82311" ///
| substr(diag,1,6)=="S82312" ///
| substr(diag,1,6)=="S82391" ///
| substr(diag,1,6)=="S82392" ///
| substr(diag,1,6)=="S82399" ///
| substr(diag,1,6)=="S82401" ///
| substr(diag,1,6)=="S82402" ///
| substr(diag,1,6)=="S82409" ///
| substr(diag,1,6)=="S82421" ///
| substr(diag,1,6)=="S82422" ///
| substr(diag,1,6)=="S82423" ///
| substr(diag,1,6)=="S82424" ///
| substr(diag,1,6)=="S82425" ///
| substr(diag,1,6)=="S82431" ///
| substr(diag,1,6)=="S82432" ///
| substr(diag,1,6)=="S82433" ///
| substr(diag,1,6)=="S82434" ///
| substr(diag,1,6)=="S82435" ///
| substr(diag,1,6)=="S82436" ///
| substr(diag,1,6)=="S82441" ///
| substr(diag,1,6)=="S82442" ///
| substr(diag,1,6)=="S82443" ///
| substr(diag,1,6)=="S82444" ///
| substr(diag,1,6)=="S82445" ///
| substr(diag,1,6)=="S82451" ///
| substr(diag,1,6)=="S82452" ///
| substr(diag,1,6)=="S82453" ///
| substr(diag,1,6)=="S82454" ///
| substr(diag,1,6)=="S82455" ///
| substr(diag,1,6)=="S82456" ///
| substr(diag,1,6)=="S82461" ///
| substr(diag,1,6)=="S82462" ///
| substr(diag,1,6)=="S82463" ///
| substr(diag,1,6)=="S82464" ///
| substr(diag,1,6)=="S82465" ///
| substr(diag,1,6)=="S82491" ///
| substr(diag,1,6)=="S82492" ///
| substr(diag,1,5)=="S8251" ///
| substr(diag,1,5)=="S8252" ///
| substr(diag,1,5)=="S8253" ///
| substr(diag,1,5)=="S8254" ///
| substr(diag,1,5)=="S8255" ///
| substr(diag,1,5)=="S8256" ///
| substr(diag,1,5)=="S8261" ///
| substr(diag,1,5)=="S8262" ///
| substr(diag,1,5)=="S8263" ///
| substr(diag,1,5)=="S8264" ///
| substr(diag,1,5)=="S8265" ///
| substr(diag,1,5)=="S8266" ///
| substr(diag,1,6)=="S82811" ///
| substr(diag,1,6)=="S82812" ///
| substr(diag,1,6)=="S82821" ///
| substr(diag,1,6)=="S82822" ///
| substr(diag,1,6)=="S82831" ///
| substr(diag,1,6)=="S82832" ///
| substr(diag,1,6)=="S82839" ///
| substr(diag,1,6)=="S82841" ///
| substr(diag,1,6)=="S82842" ///
| substr(diag,1,6)=="S82843" ///
| substr(diag,1,6)=="S82844" ///
| substr(diag,1,6)=="S82845" ///
| substr(diag,1,6)=="S82851" ///
| substr(diag,1,6)=="S82852" ///
| substr(diag,1,6)=="S82853" ///
| substr(diag,1,6)=="S82854" ///
| substr(diag,1,6)=="S82855" ///
| substr(diag,1,6)=="S82856" ///
| substr(diag,1,6)=="S82861" ///
| substr(diag,1,6)=="S82862" ///
| substr(diag,1,6)=="S82865" ///
| substr(diag,1,6)=="S82871" ///
| substr(diag,1,6)=="S82872" ///
| substr(diag,1,6)=="S82873" ///
| substr(diag,1,6)=="S82874" 


replace trauma=1 if  substr(diag,1,6)=="S82875" ///
| substr(diag,1,6)=="S82891" ///
| substr(diag,1,6)=="S82892" ///
| substr(diag,1,6)=="S82899" ///
| substr(diag,1,5)=="S8290" ///
| substr(diag,1,5)=="S8291" ///
| substr(diag,1,5)=="S8292" ///
| substr(diag,1,6)=="S83001" ///
| substr(diag,1,6)=="S83002" ///
| substr(diag,1,6)=="S83004" ///
| substr(diag,1,6)=="S83005" ///
| substr(diag,1,6)=="S83006" ///
| substr(diag,1,6)=="S83012" ///
| substr(diag,1,6)=="S83014" ///
| substr(diag,1,6)=="S83015" ///
| substr(diag,1,6)=="S83091" ///
| substr(diag,1,6)=="S83094" ///
| substr(diag,1,6)=="S83095" ///
| substr(diag,1,6)=="S83096" ///
| substr(diag,1,6)=="S83101" ///
| substr(diag,1,6)=="S83102" ///
| substr(diag,1,6)=="S83103" ///
| substr(diag,1,6)=="S83104" ///
| substr(diag,1,6)=="S83105" ///
| substr(diag,1,6)=="S83106" ///
| substr(diag,1,6)=="S83111" ///
| substr(diag,1,6)=="S83112" ///
| substr(diag,1,6)=="S83114" ///
| substr(diag,1,6)=="S83115" ///
| substr(diag,1,6)=="S83116" ///
| substr(diag,1,6)=="S83121" ///
| substr(diag,1,6)=="S83124" ///
| substr(diag,1,6)=="S83125" ///
| substr(diag,1,6)=="S83134" ///
| substr(diag,1,6)=="S83135" ///
| substr(diag,1,6)=="S83136" ///
| substr(diag,1,6)=="S83141" ///
| substr(diag,1,6)=="S83142" ///
| substr(diag,1,6)=="S83144" ///
| substr(diag,1,6)=="S83145" ///
| substr(diag,1,6)=="S83191" ///
| substr(diag,1,6)=="S83192" ///
| substr(diag,1,6)=="S83194" ///
| substr(diag,1,6)=="S83195" ///
| substr(diag,1,6)=="S83196" ///
| substr(diag,1,6)=="S83200" ///
| substr(diag,1,6)=="S83201" ///
| substr(diag,1,6)=="S83202" ///
| substr(diag,1,6)=="S83203" ///
| substr(diag,1,6)=="S83204" ///
| substr(diag,1,6)=="S83206" ///
| substr(diag,1,6)=="S83207" ///
| substr(diag,1,6)=="S83209" ///
| substr(diag,1,6)=="S83211" ///
| substr(diag,1,6)=="S83212" ///
| substr(diag,1,6)=="S83221" ///
| substr(diag,1,6)=="S83222" ///
| substr(diag,1,6)=="S83231" ///
| substr(diag,1,6)=="S83232" ///
| substr(diag,1,6)=="S83241" ///
| substr(diag,1,6)=="S83242" ///
| substr(diag,1,6)=="S83249" ///
| substr(diag,1,6)=="S83251" ///
| substr(diag,1,6)=="S83252" ///
| substr(diag,1,6)=="S83261" ///
| substr(diag,1,6)=="S83262" ///
| substr(diag,1,6)=="S83271" ///
| substr(diag,1,6)=="S83272" ///
| substr(diag,1,6)=="S83281" ///
| substr(diag,1,6)=="S83282" ///
| substr(diag,1,5)=="S8330" ///
| substr(diag,1,5)=="S8331" ///
| substr(diag,1,5)=="S8332" ///
| substr(diag,1,6)=="S83401" ///
| substr(diag,1,6)=="S83402" ///
| substr(diag,1,6)=="S83409" ///
| substr(diag,1,6)=="S83411" ///
| substr(diag,1,6)=="S83412" ///
| substr(diag,1,6)=="S83419" ///
| substr(diag,1,6)=="S83421" ///
| substr(diag,1,6)=="S83422" ///
| substr(diag,1,6)=="S83429" ///
| substr(diag,1,6)=="S83501" ///
| substr(diag,1,6)=="S83502" ///
| substr(diag,1,6)=="S83509" ///
| substr(diag,1,6)=="S83511" ///
| substr(diag,1,6)=="S83512" ///
| substr(diag,1,6)=="S83519" ///
| substr(diag,1,6)=="S83521" ///
| substr(diag,1,6)=="S83522" ///
| substr(diag,1,6)=="S83529" ///
| substr(diag,1,5)=="S8361" ///
| substr(diag,1,5)=="S8362" ///
| substr(diag,1,4)=="S838" ///
| substr(diag,1,5)=="S8390" ///
| substr(diag,1,5)=="S8391" ///
| substr(diag,1,5)=="S8392" ///
| substr(diag,1,5)=="S8400" ///
| substr(diag,1,5)=="S8401" ///
| substr(diag,1,5)=="S8402" ///
| substr(diag,1,5)=="S8410" ///
| substr(diag,1,5)=="S8411" ///
| substr(diag,1,5)=="S8412" ///
| substr(diag,1,6)=="S84802" ///
| substr(diag,1,5)=="S8490" ///
| substr(diag,1,5)=="S8491" ///
| substr(diag,1,5)=="S8492" ///
| substr(diag,1,6)=="S85001" ///
| substr(diag,1,6)=="S85002" ///
| substr(diag,1,6)=="S85009" ///
| substr(diag,1,6)=="S85011" ///
| substr(diag,1,6)=="S85012" ///
| substr(diag,1,6)=="S85019" ///
| substr(diag,1,6)=="S85091" ///
| substr(diag,1,6)=="S85092" ///
| substr(diag,1,6)=="S85099" ///
| substr(diag,1,6)=="S85101" ///
| substr(diag,1,6)=="S85102" ///
| substr(diag,1,6)=="S85109" ///
| substr(diag,1,6)=="S85111" ///
| substr(diag,1,6)=="S85112" ///
| substr(diag,1,6)=="S85119" ///
| substr(diag,1,6)=="S85121" ///
| substr(diag,1,6)=="S85122" ///
| substr(diag,1,6)=="S85131" ///
| substr(diag,1,6)=="S85132" ///
| substr(diag,1,6)=="S85139" ///
| substr(diag,1,6)=="S85141" ///
| substr(diag,1,6)=="S85142" ///
| substr(diag,1,6)=="S85149" ///
| substr(diag,1,6)=="S85151" ///
| substr(diag,1,6)=="S85152" ///
| substr(diag,1,6)=="S85159" ///
| substr(diag,1,6)=="S85161" ///
| substr(diag,1,6)=="S85162" ///
| substr(diag,1,6)=="S85171" ///
| substr(diag,1,6)=="S85172" ///
| substr(diag,1,6)=="S85181" ///
| substr(diag,1,6)=="S85182" ///
| substr(diag,1,6)=="S85201" ///
| substr(diag,1,6)=="S85202"  


replace trauma=1 if  substr(diag,1,6)=="S85211" ///
| substr(diag,1,6)=="S85212" ///
| substr(diag,1,6)=="S85219" ///
| substr(diag,1,6)=="S85292" ///
| substr(diag,1,6)=="S85302" ///
| substr(diag,1,6)=="S85311" ///
| substr(diag,1,6)=="S85312" ///
| substr(diag,1,6)=="S85409" ///
| substr(diag,1,6)=="S85412" ///
| substr(diag,1,6)=="S85491" ///
| substr(diag,1,6)=="S85509" ///
| substr(diag,1,6)=="S85511" ///
| substr(diag,1,6)=="S85512" ///
| substr(diag,1,6)=="S85519" ///
| substr(diag,1,6)=="S85591" ///
| substr(diag,1,6)=="S85801" ///
| substr(diag,1,6)=="S85811" ///
| substr(diag,1,6)=="S85812" ///
| substr(diag,1,6)=="S85891" ///
| substr(diag,1,6)=="S85892" ///
| substr(diag,1,6)=="S85899" ///
| substr(diag,1,6)=="S85901" ///
| substr(diag,1,6)=="S85909" ///
| substr(diag,1,6)=="S85912" ///
| substr(diag,1,6)=="S85919" ///
| substr(diag,1,6)=="S86011" ///
| substr(diag,1,6)=="S86012" ///
| substr(diag,1,6)=="S86019" ///
| substr(diag,1,6)=="S86021" ///
| substr(diag,1,6)=="S86022" ///
| substr(diag,1,6)=="S86029" ///
| substr(diag,1,6)=="S86091" ///
| substr(diag,1,6)=="S86102" ///
| substr(diag,1,6)=="S86111" ///
| substr(diag,1,6)=="S86112" ///
| substr(diag,1,6)=="S86121" ///
| substr(diag,1,6)=="S86122" ///
| substr(diag,1,6)=="S86129" ///
| substr(diag,1,6)=="S86191" ///
| substr(diag,1,6)=="S86192" ///
| substr(diag,1,6)=="S86201" ///
| substr(diag,1,6)=="S86211" ///
| substr(diag,1,6)=="S86212" ///
| substr(diag,1,6)=="S86221" ///
| substr(diag,1,6)=="S86222" ///
| substr(diag,1,6)=="S86291" ///
| substr(diag,1,6)=="S86292" ///
| substr(diag,1,6)=="S86302" ///
| substr(diag,1,6)=="S86311" ///
| substr(diag,1,6)=="S86312" ///
| substr(diag,1,6)=="S86321" ///
| substr(diag,1,6)=="S86322" ///
| substr(diag,1,6)=="S86329" ///
| substr(diag,1,6)=="S86391" ///
| substr(diag,1,6)=="S86392" ///
| substr(diag,1,6)=="S86801" ///
| substr(diag,1,6)=="S86802" ///
| substr(diag,1,6)=="S86811" ///
| substr(diag,1,6)=="S86812" ///
| substr(diag,1,6)=="S86819" ///
| substr(diag,1,6)=="S86821" ///
| substr(diag,1,6)=="S86822" ///
| substr(diag,1,6)=="S86891" ///
| substr(diag,1,6)=="S86892" ///
| substr(diag,1,6)=="S86901" ///
| substr(diag,1,6)=="S86902" ///
| substr(diag,1,6)=="S86909" ///
| substr(diag,1,6)=="S86911" ///
| substr(diag,1,6)=="S86912" ///
| substr(diag,1,6)=="S86919" ///
| substr(diag,1,6)=="S86921" ///
| substr(diag,1,6)=="S86922" ///
| substr(diag,1,6)=="S86929" ///
| substr(diag,1,6)=="S86992" ///
| substr(diag,1,6)=="S86999" ///
| substr(diag,1,5)=="S8700" ///
| substr(diag,1,5)=="S8701" ///
| substr(diag,1,5)=="S8702" ///
| substr(diag,1,5)=="S8780" ///
| substr(diag,1,5)=="S8781" ///
| substr(diag,1,5)=="S8782" ///
| substr(diag,1,6)=="S88011" ///
| substr(diag,1,6)=="S88012" ///
| substr(diag,1,6)=="S88021" ///
| substr(diag,1,6)=="S88022" ///
| substr(diag,1,6)=="S88029" ///
| substr(diag,1,6)=="S88111" ///
| substr(diag,1,6)=="S88112" ///
| substr(diag,1,6)=="S88119" ///
| substr(diag,1,6)=="S88121" ///
| substr(diag,1,6)=="S88122" ///
| substr(diag,1,6)=="S88129" ///
| substr(diag,1,6)=="S88921" ///
| substr(diag,1,6)=="S88922" ///
| substr(diag,1,6)=="S88929" ///
| substr(diag,1,6)=="S89001" ///
| substr(diag,1,6)=="S89002" ///
| substr(diag,1,6)=="S89011" ///
| substr(diag,1,6)=="S89012" ///
| substr(diag,1,6)=="S89021" ///
| substr(diag,1,6)=="S89022" ///
| substr(diag,1,6)=="S89029" ///
| substr(diag,1,6)=="S89031" ///
| substr(diag,1,6)=="S89042" ///
| substr(diag,1,6)=="S89091" ///
| substr(diag,1,6)=="S89092" ///
| substr(diag,1,6)=="S89101" ///
| substr(diag,1,6)=="S89102" ///
| substr(diag,1,6)=="S89111" ///
| substr(diag,1,6)=="S89121" ///
| substr(diag,1,6)=="S89122" ///
| substr(diag,1,6)=="S89131" ///
| substr(diag,1,6)=="S89132" ///
| substr(diag,1,6)=="S89141" ///
| substr(diag,1,6)=="S89142" ///
| substr(diag,1,6)=="S89149" ///
| substr(diag,1,6)=="S89191" ///
| substr(diag,1,6)=="S89192" ///
| substr(diag,1,6)=="S89199" ///
| substr(diag,1,6)=="S89201" ///
| substr(diag,1,6)=="S89202" ///
| substr(diag,1,6)=="S89211" ///
| substr(diag,1,6)=="S89212" ///
| substr(diag,1,6)=="S89221" ///
| substr(diag,1,6)=="S89291" ///
| substr(diag,1,6)=="S89292" ///
| substr(diag,1,6)=="S89299" ///
| substr(diag,1,6)=="S89301"  


replace trauma=1 if  substr(diag,1,6)=="S89302" ///
| substr(diag,1,6)=="S89309" ///
| substr(diag,1,6)=="S89311" ///
| substr(diag,1,6)=="S89312" ///
| substr(diag,1,6)=="S89321" ///
| substr(diag,1,6)=="S89322" ///
| substr(diag,1,6)=="S89391" ///
| substr(diag,1,6)=="S89392" ///
| substr(diag,1,5)=="S8980" ///
| substr(diag,1,5)=="S8981" ///
| substr(diag,1,5)=="S8982" ///
| substr(diag,1,5)=="S8990" ///
| substr(diag,1,5)=="S8991" ///
| substr(diag,1,5)=="S8992" ///
| substr(diag,1,5)=="S9000" ///
| substr(diag,1,5)=="S9001" ///
| substr(diag,1,5)=="S9002" ///
| substr(diag,1,6)=="S90111" ///
| substr(diag,1,6)=="S90112" ///
| substr(diag,1,6)=="S90121" ///
| substr(diag,1,6)=="S90122" ///
| substr(diag,1,6)=="S90211" ///
| substr(diag,1,6)=="S90212" ///
| substr(diag,1,6)=="S90229" ///
| substr(diag,1,5)=="S9030" ///
| substr(diag,1,5)=="S9031" ///
| substr(diag,1,5)=="S9032" ///
| substr(diag,1,6)=="S90411" ///
| substr(diag,1,6)=="S90412" ///
| substr(diag,1,6)=="S90413" ///
| substr(diag,1,6)=="S90414" ///
| substr(diag,1,6)=="S90415" ///
| substr(diag,1,6)=="S90416" ///
| substr(diag,1,6)=="S90511" ///
| substr(diag,1,6)=="S90512" ///
| substr(diag,1,6)=="S90519" ///
| substr(diag,1,6)=="S90522" ///
| substr(diag,1,6)=="S90811" ///
| substr(diag,1,6)=="S90812" ///
| substr(diag,1,6)=="S90819" ///
| substr(diag,1,6)=="S90821" ///
| substr(diag,1,6)=="S90822" ///
| substr(diag,1,6)=="S90852" ///
| substr(diag,1,6)=="S90911" ///
| substr(diag,1,6)=="S90929" ///
| substr(diag,1,6)=="S91001" ///
| substr(diag,1,6)=="S91002" ///
| substr(diag,1,6)=="S91009" ///
| substr(diag,1,6)=="S91011" ///
| substr(diag,1,6)=="S91012" ///
| substr(diag,1,6)=="S91019" ///
| substr(diag,1,6)=="S91021" ///
| substr(diag,1,6)=="S91022" ///
| substr(diag,1,6)=="S91029" ///
| substr(diag,1,6)=="S91031" ///
| substr(diag,1,6)=="S91032" ///
| substr(diag,1,6)=="S91041" ///
| substr(diag,1,6)=="S91042" ///
| substr(diag,1,6)=="S91051" ///
| substr(diag,1,6)=="S91052" ///
| substr(diag,1,6)=="S91101" ///
| substr(diag,1,6)=="S91102" ///
| substr(diag,1,6)=="S91105" ///
| substr(diag,1,6)=="S91109" ///
| substr(diag,1,6)=="S91111" ///
| substr(diag,1,6)=="S91112" ///
| substr(diag,1,6)=="S91113" ///
| substr(diag,1,6)=="S91114" ///
| substr(diag,1,6)=="S91115" ///
| substr(diag,1,6)=="S91116" ///
| substr(diag,1,6)=="S91119" ///
| substr(diag,1,6)=="S91121" ///
| substr(diag,1,6)=="S91124" ///
| substr(diag,1,6)=="S91129" ///
| substr(diag,1,6)=="S91131" ///
| substr(diag,1,6)=="S91132" ///
| substr(diag,1,6)=="S91134" ///
| substr(diag,1,6)=="S91135" ///
| substr(diag,1,6)=="S91141" ///
| substr(diag,1,6)=="S91142" ///
| substr(diag,1,6)=="S91155" ///
| substr(diag,1,6)=="S91201" ///
| substr(diag,1,6)=="S91202" ///
| substr(diag,1,6)=="S91204" ///
| substr(diag,1,6)=="S91205" ///
| substr(diag,1,6)=="S91209" ///
| substr(diag,1,6)=="S91211" ///
| substr(diag,1,6)=="S91212" ///
| substr(diag,1,6)=="S91214" ///
| substr(diag,1,6)=="S91215" ///
| substr(diag,1,6)=="S91235" ///
| substr(diag,1,6)=="S91239" ///
| substr(diag,1,6)=="S91301" ///
| substr(diag,1,6)=="S91302" ///
| substr(diag,1,6)=="S91309" ///
| substr(diag,1,6)=="S91311" ///
| substr(diag,1,6)=="S91312" ///
| substr(diag,1,6)=="S91319" ///
| substr(diag,1,6)=="S91321" ///
| substr(diag,1,6)=="S91322" ///
| substr(diag,1,6)=="S91331" ///
| substr(diag,1,6)=="S91332" ///
| substr(diag,1,6)=="S91339" ///
| substr(diag,1,6)=="S91341" ///
| substr(diag,1,6)=="S91342" ///
| substr(diag,1,6)=="S91351" ///
| substr(diag,1,6)=="S91352" ///
| substr(diag,1,6)=="S92001" ///
| substr(diag,1,6)=="S92002" ///
| substr(diag,1,6)=="S92009" ///
| substr(diag,1,6)=="S92011" ///
| substr(diag,1,6)=="S92012" ///
| substr(diag,1,6)=="S92013" ///
| substr(diag,1,6)=="S92014" ///
| substr(diag,1,6)=="S92015" ///
| substr(diag,1,6)=="S92016" ///
| substr(diag,1,6)=="S92021" ///
| substr(diag,1,6)=="S92022" ///
| substr(diag,1,6)=="S92023" ///
| substr(diag,1,6)=="S92024" ///
| substr(diag,1,6)=="S92025" ///
| substr(diag,1,6)=="S92031" ///
| substr(diag,1,6)=="S92032" ///
| substr(diag,1,6)=="S92034" ///
| substr(diag,1,6)=="S92035" ///
| substr(diag,1,6)=="S92041"  


replace trauma=1 if substr(diag,1,6)=="S92042" ///
| substr(diag,1,6)=="S92044" ///
| substr(diag,1,6)=="S92045" ///
| substr(diag,1,6)=="S92051" ///
| substr(diag,1,6)=="S92052" ///
| substr(diag,1,6)=="S92053" ///
| substr(diag,1,6)=="S92054" ///
| substr(diag,1,6)=="S92055" ///
| substr(diag,1,6)=="S92061" ///
| substr(diag,1,6)=="S92062" ///
| substr(diag,1,6)=="S92063" ///
| substr(diag,1,6)=="S92064" ///
| substr(diag,1,6)=="S92065" ///
| substr(diag,1,6)=="S92066" ///
| substr(diag,1,6)=="S92101" ///
| substr(diag,1,6)=="S92102" ///
| substr(diag,1,6)=="S92109" ///
| substr(diag,1,6)=="S92111" ///
| substr(diag,1,6)=="S92112" ///
| substr(diag,1,6)=="S92113" ///
| substr(diag,1,6)=="S92114" ///
| substr(diag,1,6)=="S92115" ///
| substr(diag,1,6)=="S92121" ///
| substr(diag,1,6)=="S92122" ///
| substr(diag,1,6)=="S92123" ///
| substr(diag,1,6)=="S92124" ///
| substr(diag,1,6)=="S92125" ///
| substr(diag,1,6)=="S92131" ///
| substr(diag,1,6)=="S92132" ///
| substr(diag,1,6)=="S92133" ///
| substr(diag,1,6)=="S92134" ///
| substr(diag,1,6)=="S92135" ///
| substr(diag,1,6)=="S92141" ///
| substr(diag,1,6)=="S92142" ///
| substr(diag,1,6)=="S92144" ///
| substr(diag,1,6)=="S92145" ///
| substr(diag,1,6)=="S92151" ///
| substr(diag,1,6)=="S92152" ///
| substr(diag,1,6)=="S92153" ///
| substr(diag,1,6)=="S92154" ///
| substr(diag,1,6)=="S92155" ///
| substr(diag,1,6)=="S92191" ///
| substr(diag,1,6)=="S92192" ///
| substr(diag,1,6)=="S92201" ///
| substr(diag,1,6)=="S92202" ///
| substr(diag,1,6)=="S92209" ///
| substr(diag,1,6)=="S92211" ///
| substr(diag,1,6)=="S92212" ///
| substr(diag,1,6)=="S92213" ///
| substr(diag,1,6)=="S92214" ///
| substr(diag,1,6)=="S92215" ///
| substr(diag,1,6)=="S92221" ///
| substr(diag,1,6)=="S92222" ///
| substr(diag,1,6)=="S92223" ///
| substr(diag,1,6)=="S92224" ///
| substr(diag,1,6)=="S92225" ///
| substr(diag,1,6)=="S92231" ///
| substr(diag,1,6)=="S92232" ///
| substr(diag,1,6)=="S92234" ///
| substr(diag,1,6)=="S92235" ///
| substr(diag,1,6)=="S92241" ///
| substr(diag,1,6)=="S92242" ///
| substr(diag,1,6)=="S92243" ///
| substr(diag,1,6)=="S92244" ///
| substr(diag,1,6)=="S92245" ///
| substr(diag,1,6)=="S92246" ///
| substr(diag,1,6)=="S92251" ///
| substr(diag,1,6)=="S92252" ///
| substr(diag,1,6)=="S92253" ///
| substr(diag,1,6)=="S92254" ///
| substr(diag,1,6)=="S92255" ///
| substr(diag,1,6)=="S92301" ///
| substr(diag,1,6)=="S92302" ///
| substr(diag,1,6)=="S92309" ///
| substr(diag,1,6)=="S92311" ///
| substr(diag,1,6)=="S92312" ///
| substr(diag,1,6)=="S92313" ///
| substr(diag,1,6)=="S92314" ///
| substr(diag,1,6)=="S92315" ///
| substr(diag,1,6)=="S92321" ///
| substr(diag,1,6)=="S92322" ///
| substr(diag,1,6)=="S92323" ///
| substr(diag,1,6)=="S92324" ///
| substr(diag,1,6)=="S92325" ///
| substr(diag,1,6)=="S92326" ///
| substr(diag,1,6)=="S92331" ///
| substr(diag,1,6)=="S92332" ///
| substr(diag,1,6)=="S92333" ///
| substr(diag,1,6)=="S92334" ///
| substr(diag,1,6)=="S92335" ///
| substr(diag,1,6)=="S92336" ///
| substr(diag,1,6)=="S92341" ///
| substr(diag,1,6)=="S92342" ///
| substr(diag,1,6)=="S92343" ///
| substr(diag,1,6)=="S92344" ///
| substr(diag,1,6)=="S92345" ///
| substr(diag,1,6)=="S92346" ///
| substr(diag,1,6)=="S92351" ///
| substr(diag,1,6)=="S92352" ///
| substr(diag,1,6)=="S92353" ///
| substr(diag,1,6)=="S92354" ///
| substr(diag,1,6)=="S92355" ///
| substr(diag,1,6)=="S92356" ///
| substr(diag,1,6)=="S92401" ///
| substr(diag,1,6)=="S92402" ///
| substr(diag,1,6)=="S92403" ///
| substr(diag,1,6)=="S92404" ///
| substr(diag,1,6)=="S92405" ///
| substr(diag,1,6)=="S92406" ///
| substr(diag,1,6)=="S92411" ///
| substr(diag,1,6)=="S92412" ///
| substr(diag,1,6)=="S92413" ///
| substr(diag,1,6)=="S92414" ///
| substr(diag,1,6)=="S92415" ///
| substr(diag,1,6)=="S92421" ///
| substr(diag,1,6)=="S92422" ///
| substr(diag,1,6)=="S92424" ///
| substr(diag,1,6)=="S92425" ///
| substr(diag,1,6)=="S92426" ///
| substr(diag,1,6)=="S92491" ///
| substr(diag,1,6)=="S92492" ///
| substr(diag,1,6)=="S92499" ///
| substr(diag,1,6)=="S92501" ///
| substr(diag,1,6)=="S92502" ///
| substr(diag,1,6)=="S92503" ///
| substr(diag,1,6)=="S92504" ///
| substr(diag,1,6)=="S92505" ///
| substr(diag,1,6)=="S92506" ///
| substr(diag,1,6)=="S92511" ///
| substr(diag,1,6)=="S92512" ///
| substr(diag,1,6)=="S92513" ///
| substr(diag,1,6)=="S92514" ///
| substr(diag,1,6)=="S92515"  


replace trauma=1 if  substr(diag,1,6)=="S92516" ///
| substr(diag,1,6)=="S92521" ///
| substr(diag,1,6)=="S92523" ///
| substr(diag,1,6)=="S92524" ///
| substr(diag,1,6)=="S92525" ///
| substr(diag,1,6)=="S92531" ///
| substr(diag,1,6)=="S92532" ///
| substr(diag,1,6)=="S92534" ///
| substr(diag,1,6)=="S92535" ///
| substr(diag,1,6)=="S92591" ///
| substr(diag,1,6)=="S92592" ///
| substr(diag,1,6)=="S92599" ///
| substr(diag,1,6)=="S92901" ///
| substr(diag,1,6)=="S92902" ///
| substr(diag,1,6)=="S92909" ///
| substr(diag,1,6)=="S92911" ///
| substr(diag,1,6)=="S92912" ///
| substr(diag,1,5)=="S9301" ///
| substr(diag,1,5)=="S9302" ///
| substr(diag,1,5)=="S9303" ///
| substr(diag,1,5)=="S9304" ///
| substr(diag,1,5)=="S9305" ///
| substr(diag,1,5)=="S9306" ///
| substr(diag,1,6)=="S93101" ///
| substr(diag,1,6)=="S93104" ///
| substr(diag,1,6)=="S93105" ///
| substr(diag,1,6)=="S93106" ///
| substr(diag,1,6)=="S93111" ///
| substr(diag,1,6)=="S93112" ///
| substr(diag,1,6)=="S93113" ///
| substr(diag,1,6)=="S93114" ///
| substr(diag,1,6)=="S93115" ///
| substr(diag,1,6)=="S93116" ///
| substr(diag,1,6)=="S93119" ///
| substr(diag,1,6)=="S93121" ///
| substr(diag,1,6)=="S93122" ///
| substr(diag,1,6)=="S93124" ///
| substr(diag,1,6)=="S93125" ///
| substr(diag,1,6)=="S93126" ///
| substr(diag,1,6)=="S93129" ///
| substr(diag,1,6)=="S93131" ///
| substr(diag,1,6)=="S93133" ///
| substr(diag,1,6)=="S93141" ///
| substr(diag,1,6)=="S93301" ///
| substr(diag,1,6)=="S93304" ///
| substr(diag,1,6)=="S93306" ///
| substr(diag,1,6)=="S93311" ///
| substr(diag,1,6)=="S93312" ///
| substr(diag,1,6)=="S93314" ///
| substr(diag,1,6)=="S93315" ///
| substr(diag,1,6)=="S93316" ///
| substr(diag,1,6)=="S93321" ///
| substr(diag,1,6)=="S93322" ///
| substr(diag,1,6)=="S93323" ///
| substr(diag,1,6)=="S93324" ///
| substr(diag,1,6)=="S93325" ///
| substr(diag,1,6)=="S93326" ///
| substr(diag,1,6)=="S93331" ///
| substr(diag,1,6)=="S93332" ///
| substr(diag,1,6)=="S93333" ///
| substr(diag,1,6)=="S93334" ///
| substr(diag,1,6)=="S93335" ///
| substr(diag,1,6)=="S93336" ///
| substr(diag,1,6)=="S93401" ///
| substr(diag,1,6)=="S93402" ///
| substr(diag,1,6)=="S93409" ///
| substr(diag,1,6)=="S93411" ///
| substr(diag,1,6)=="S93412" ///
| substr(diag,1,6)=="S93421" ///
| substr(diag,1,6)=="S93422" ///
| substr(diag,1,6)=="S93431" ///
| substr(diag,1,6)=="S93432" ///
| substr(diag,1,6)=="S93439" ///
| substr(diag,1,6)=="S93491" ///
| substr(diag,1,6)=="S93492" ///
| substr(diag,1,6)=="S93499" ///
| substr(diag,1,6)=="S93502" ///
| substr(diag,1,6)=="S93513" ///
| substr(diag,1,6)=="S93522" ///
| substr(diag,1,6)=="S93524" ///
| substr(diag,1,6)=="S93525" ///
| substr(diag,1,6)=="S93601" ///
| substr(diag,1,6)=="S93602" ///
| substr(diag,1,6)=="S93609" ///
| substr(diag,1,6)=="S93611" ///
| substr(diag,1,6)=="S93621" ///
| substr(diag,1,6)=="S93622" ///
| substr(diag,1,6)=="S93629" ///
| substr(diag,1,6)=="S93691" ///
| substr(diag,1,5)=="S9402" ///
| substr(diag,1,5)=="S9421" ///
| substr(diag,1,5)=="S9422" ///
| substr(diag,1,5)=="S9430" ///
| substr(diag,1,5)=="S9431" ///
| substr(diag,1,5)=="S9432" ///
| substr(diag,1,4)=="S948" ///
| substr(diag,1,5)=="S9491" ///
| substr(diag,1,5)=="S9492" ///
| substr(diag,1,6)=="S95011" ///
| substr(diag,1,6)=="S95012" ///
| substr(diag,1,6)=="S95091" ///
| substr(diag,1,6)=="S95101" ///
| substr(diag,1,6)=="S95111" ///
| substr(diag,1,6)=="S95809" ///
| substr(diag,1,6)=="S95892" ///
| substr(diag,1,6)=="S95912" ///
| substr(diag,1,6)=="S95991" ///
| substr(diag,1,6)=="S96011" ///
| substr(diag,1,6)=="S96019" ///
| substr(diag,1,6)=="S96021" ///
| substr(diag,1,6)=="S96022" ///
| substr(diag,1,6)=="S96111" ///
| substr(diag,1,6)=="S96121" ///
| substr(diag,1,6)=="S96122" ///
| substr(diag,1,6)=="S96191" ///
| substr(diag,1,6)=="S96209" ///
| substr(diag,1,6)=="S96212" ///
| substr(diag,1,6)=="S96221" ///
| substr(diag,1,6)=="S96292" ///
| substr(diag,1,6)=="S96811" ///
| substr(diag,1,6)=="S96812" ///
| substr(diag,1,6)=="S96819" ///
| substr(diag,1,6)=="S96821" ///
| substr(diag,1,6)=="S96822" ///
| substr(diag,1,6)=="S96891" ///
| substr(diag,1,6)=="S96892" ///
| substr(diag,1,6)=="S96901" ///
| substr(diag,1,6)=="S96911" ///
| substr(diag,1,6)=="S96912"  


replace trauma=1 if substr(diag,1,6)=="S96919" ///
| substr(diag,1,6)=="S96921" ///
| substr(diag,1,6)=="S96922" ///
| substr(diag,1,6)=="S96929" ///
| substr(diag,1,6)=="S96991" ///
| substr(diag,1,5)=="S9701" ///
| substr(diag,1,5)=="S9702" ///
| substr(diag,1,6)=="S97101" ///
| substr(diag,1,6)=="S97109" ///
| substr(diag,1,6)=="S97112" ///
| substr(diag,1,6)=="S97121" ///
| substr(diag,1,6)=="S97122" ///
| substr(diag,1,5)=="S9780" ///
| substr(diag,1,5)=="S9781" ///
| substr(diag,1,5)=="S9782" ///
| substr(diag,1,6)=="S98011" ///
| substr(diag,1,6)=="S98012" ///
| substr(diag,1,6)=="S98021" ///
| substr(diag,1,6)=="S98022" ///
| substr(diag,1,6)=="S98111" ///
| substr(diag,1,6)=="S98112" ///
| substr(diag,1,6)=="S98119" ///
| substr(diag,1,6)=="S98121" ///
| substr(diag,1,6)=="S98122" ///
| substr(diag,1,6)=="S98131" ///
| substr(diag,1,6)=="S98132" ///
| substr(diag,1,6)=="S98139" ///
| substr(diag,1,6)=="S98141" ///
| substr(diag,1,6)=="S98142" ///
| substr(diag,1,6)=="S98211" ///
| substr(diag,1,6)=="S98212" ///
| substr(diag,1,6)=="S98219" ///
| substr(diag,1,6)=="S98221" ///
| substr(diag,1,6)=="S98229" ///
| substr(diag,1,6)=="S98321" ///
| substr(diag,1,6)=="S98322" ///
| substr(diag,1,6)=="S98911" ///
| substr(diag,1,6)=="S98912" ///
| substr(diag,1,6)=="S98921" ///
| substr(diag,1,6)=="S98922" ///
| substr(diag,1,6)=="S99811" ///
| substr(diag,1,6)=="S99812" ///
| substr(diag,1,6)=="S99821" ///
| substr(diag,1,6)=="S99822" ///
| substr(diag,1,6)=="S99829" ///
| substr(diag,1,6)=="S99911" ///
| substr(diag,1,6)=="S99912" ///
| substr(diag,1,6)=="S99919" ///
| substr(diag,1,6)=="S99921" ///
| substr(diag,1,6)=="S99922" ///
| substr(diag,1,5)=="T2000" ///
| substr(diag,1,6)=="T20019" ///
| substr(diag,1,5)=="T2002" ///
| substr(diag,1,5)=="T2003" ///
| substr(diag,1,5)=="T2004" ///
| substr(diag,1,5)=="T2005" ///
| substr(diag,1,5)=="T2006" ///
| substr(diag,1,5)=="T2007" 


replace trauma=1 if  substr(diag,1,5)=="T2009" ///
| substr(diag,1,5)=="T2010" ///
| substr(diag,1,6)=="T20111" ///
| substr(diag,1,6)=="T20112" ///
| substr(diag,1,6)=="T20119" ///
| substr(diag,1,5)=="T2012" ///
| substr(diag,1,5)=="T2013" ///
| substr(diag,1,5)=="T2014" ///
| substr(diag,1,5)=="T2015" ///
| substr(diag,1,5)=="T2016" ///
| substr(diag,1,5)=="T2017" ///
| substr(diag,1,5)=="T2019" ///
| substr(diag,1,5)=="T2020" ///
| substr(diag,1,6)=="T20211" ///
| substr(diag,1,6)=="T20212" ///
| substr(diag,1,6)=="T20219" ///
| substr(diag,1,5)=="T2022" ///
| substr(diag,1,5)=="T2023" ///
| substr(diag,1,5)=="T2024" ///
| substr(diag,1,5)=="T2025" ///
| substr(diag,1,5)=="T2026" ///
| substr(diag,1,5)=="T2027" ///
| substr(diag,1,5)=="T2029" ///
| substr(diag,1,5)=="T2030" ///
| substr(diag,1,6)=="T20311" ///
| substr(diag,1,6)=="T20312" ///
| substr(diag,1,5)=="T2032" ///
| substr(diag,1,5)=="T2033" ///
| substr(diag,1,5)=="T2034" ///
| substr(diag,1,5)=="T2035" ///
| substr(diag,1,5)=="T2036" ///
| substr(diag,1,5)=="T2037" ///
| substr(diag,1,5)=="T2039" ///
| substr(diag,1,5)=="T2040" ///
| substr(diag,1,5)=="T2042" ///
| substr(diag,1,5)=="T2045" ///
| substr(diag,1,5)=="T2046" ///
| substr(diag,1,5)=="T2050" ///
| substr(diag,1,6)=="T20512" ///
| substr(diag,1,5)=="T2052" ///
| substr(diag,1,5)=="T2053" ///
| substr(diag,1,5)=="T2054" ///
| substr(diag,1,5)=="T2055" ///
| substr(diag,1,5)=="T2056" ///
| substr(diag,1,5)=="T2062" ///
| substr(diag,1,5)=="T2066" ///
| substr(diag,1,5)=="T2067" ///
| substr(diag,1,5)=="T2069" ///
| substr(diag,1,5)=="T2100" ///
| substr(diag,1,5)=="T2101" ///
| substr(diag,1,5)=="T2102" ///
| substr(diag,1,5)=="T2103" ///
| substr(diag,1,5)=="T2104" ///
| substr(diag,1,5)=="T2105" ///
| substr(diag,1,5)=="T2106" ///
| substr(diag,1,5)=="T2107" ///
| substr(diag,1,5)=="T2109" ///
| substr(diag,1,5)=="T2110" ///
| substr(diag,1,5)=="T2111" ///
| substr(diag,1,5)=="T2112" ///
| substr(diag,1,5)=="T2113" ///
| substr(diag,1,5)=="T2114" ///
| substr(diag,1,5)=="T2115" ///
| substr(diag,1,5)=="T2116" ///
| substr(diag,1,5)=="T2117" ///
| substr(diag,1,5)=="T2120" ///
| substr(diag,1,5)=="T2121" ///
| substr(diag,1,5)=="T2122" ///
| substr(diag,1,5)=="T2123" ///
| substr(diag,1,5)=="T2124" ///
| substr(diag,1,5)=="T2125" ///
| substr(diag,1,5)=="T2126" ///
| substr(diag,1,5)=="T2127" ///
| substr(diag,1,5)=="T2129" ///
| substr(diag,1,5)=="T2130" ///
| substr(diag,1,5)=="T2131" ///
| substr(diag,1,5)=="T2132" ///
| substr(diag,1,5)=="T2133" ///
| substr(diag,1,5)=="T2134" ///
| substr(diag,1,5)=="T2135" ///
| substr(diag,1,5)=="T2136" ///
| substr(diag,1,5)=="T2139" ///
| substr(diag,1,5)=="T2141" ///
| substr(diag,1,5)=="T2143" ///
| substr(diag,1,5)=="T2149" ///
| substr(diag,1,5)=="T2161" ///
| substr(diag,1,5)=="T2163" ///
| substr(diag,1,5)=="T2164" ///
| substr(diag,1,5)=="T2165" ///
| substr(diag,1,5)=="T2166" ///
| substr(diag,1,5)=="T2171" ///
| substr(diag,1,5)=="T2172" ///
| substr(diag,1,5)=="T2200" ///
| substr(diag,1,6)=="T22011" ///
| substr(diag,1,6)=="T22012" ///
| substr(diag,1,6)=="T22019" ///
| substr(diag,1,6)=="T22021" ///
| substr(diag,1,6)=="T22029" ///
| substr(diag,1,6)=="T22031" ///
| substr(diag,1,6)=="T22032" ///
| substr(diag,1,6)=="T22041" ///
| substr(diag,1,6)=="T22051" ///
| substr(diag,1,6)=="T22052" ///
| substr(diag,1,6)=="T22091" ///
| substr(diag,1,6)=="T22092" ///
| substr(diag,1,5)=="T2210" ///
| substr(diag,1,6)=="T22111" ///
| substr(diag,1,6)=="T22112" ///
| substr(diag,1,6)=="T22119" ///
| substr(diag,1,6)=="T22121" ///
| substr(diag,1,6)=="T22122" ///
| substr(diag,1,6)=="T22131" ///
| substr(diag,1,6)=="T22132" ///
| substr(diag,1,6)=="T22139" ///
| substr(diag,1,6)=="T22141" ///
| substr(diag,1,6)=="T22151" ///
| substr(diag,1,6)=="T22152" ///
| substr(diag,1,6)=="T22159" ///
| substr(diag,1,6)=="T22191" ///
| substr(diag,1,6)=="T22192" ///
| substr(diag,1,5)=="T2220" ///
| substr(diag,1,6)=="T22211" ///
| substr(diag,1,6)=="T22212" ///
| substr(diag,1,6)=="T22219" ///
| substr(diag,1,6)=="T22221" ///
| substr(diag,1,6)=="T22222" ///
| substr(diag,1,6)=="T22229" ///
| substr(diag,1,6)=="T22231" 


replace trauma=1 if substr(diag,1,6)=="T22232" ///
| substr(diag,1,6)=="T22239" ///
| substr(diag,1,6)=="T22241" ///
| substr(diag,1,6)=="T22242" ///
| substr(diag,1,6)=="T22249" ///
| substr(diag,1,6)=="T22251" ///
| substr(diag,1,6)=="T22252" ///
| substr(diag,1,6)=="T22259" ///
| substr(diag,1,6)=="T22261" ///
| substr(diag,1,6)=="T22269" ///
| substr(diag,1,6)=="T22291" ///
| substr(diag,1,6)=="T22292" ///
| substr(diag,1,6)=="T22299" ///
| substr(diag,1,5)=="T2230" ///
| substr(diag,1,6)=="T22311" ///
| substr(diag,1,6)=="T22312" ///
| substr(diag,1,6)=="T22321" ///
| substr(diag,1,6)=="T22322" ///
| substr(diag,1,6)=="T22331" ///
| substr(diag,1,6)=="T22332" ///
| substr(diag,1,6)=="T22339" ///
| substr(diag,1,6)=="T22341" ///
| substr(diag,1,6)=="T22342" ///
| substr(diag,1,6)=="T22351" ///
| substr(diag,1,6)=="T22352" ///
| substr(diag,1,6)=="T22361" ///
| substr(diag,1,6)=="T22391" ///
| substr(diag,1,6)=="T22392" ///
| substr(diag,1,6)=="T22399" ///
| substr(diag,1,5)=="T2240" ///
| substr(diag,1,6)=="T22422" ///
| substr(diag,1,6)=="T22559" ///
| substr(diag,1,6)=="T22611" ///
| substr(diag,1,6)=="T22612" ///
| substr(diag,1,6)=="T22631" ///
| substr(diag,1,6)=="T22632" ///
| substr(diag,1,6)=="T22652" ///
| substr(diag,1,6)=="T22659" ///
| substr(diag,1,6)=="T22691" ///
| substr(diag,1,6)=="T22692" ///
| substr(diag,1,6)=="T22711" ///
| substr(diag,1,6)=="T23001" ///
| substr(diag,1,6)=="T23002" ///
| substr(diag,1,6)=="T23009" ///
| substr(diag,1,6)=="T23012" ///
| substr(diag,1,6)=="T23021" ///
| substr(diag,1,6)=="T23022" ///
| substr(diag,1,6)=="T23031" ///
| substr(diag,1,6)=="T23032" ///
| substr(diag,1,6)=="T23039" ///
| substr(diag,1,6)=="T23041" ///
| substr(diag,1,6)=="T23042" ///
| substr(diag,1,6)=="T23051" ///
| substr(diag,1,6)=="T23052" ///
| substr(diag,1,6)=="T23059" ///
| substr(diag,1,6)=="T23071" ///
| substr(diag,1,6)=="T23072" ///
| substr(diag,1,6)=="T23091" ///
| substr(diag,1,6)=="T23092" ///
| substr(diag,1,6)=="T23099" ///
| substr(diag,1,6)=="T23101" ///
| substr(diag,1,6)=="T23102" ///
| substr(diag,1,6)=="T23109" ///
| substr(diag,1,6)=="T23111" ///
| substr(diag,1,6)=="T23119" ///
| substr(diag,1,6)=="T23121" ///
| substr(diag,1,6)=="T23131" ///
| substr(diag,1,6)=="T23132" ///
| substr(diag,1,6)=="T23141" ///
| substr(diag,1,6)=="T23142" ///
| substr(diag,1,6)=="T23151" ///
| substr(diag,1,6)=="T23152" ///
| substr(diag,1,6)=="T23161" ///
| substr(diag,1,6)=="T23162" ///
| substr(diag,1,6)=="T23171" ///
| substr(diag,1,6)=="T23172" ///
| substr(diag,1,6)=="T23179" ///
| substr(diag,1,6)=="T23191" ///
| substr(diag,1,6)=="T23199" ///
| substr(diag,1,6)=="T23201" ///
| substr(diag,1,6)=="T23202" ///
| substr(diag,1,6)=="T23209" ///
| substr(diag,1,6)=="T23211" ///
| substr(diag,1,6)=="T23212" ///
| substr(diag,1,6)=="T23219" ///
| substr(diag,1,6)=="T23221" ///
| substr(diag,1,6)=="T23222" ///
| substr(diag,1,6)=="T23229" ///
| substr(diag,1,6)=="T23231" ///
| substr(diag,1,6)=="T23232" ///
| substr(diag,1,6)=="T23239" ///
| substr(diag,1,6)=="T23241" ///
| substr(diag,1,6)=="T23242" ///
| substr(diag,1,6)=="T23251" ///
| substr(diag,1,6)=="T23252" ///
| substr(diag,1,6)=="T23259" ///
| substr(diag,1,6)=="T23261" ///
| substr(diag,1,6)=="T23262" ///
| substr(diag,1,6)=="T23269" ///
| substr(diag,1,6)=="T23271" ///
| substr(diag,1,6)=="T23272" ///
| substr(diag,1,6)=="T23279" ///
| substr(diag,1,6)=="T23291" ///
| substr(diag,1,6)=="T23292" ///
| substr(diag,1,6)=="T23299" ///
| substr(diag,1,6)=="T23301" ///
| substr(diag,1,6)=="T23302" ///
| substr(diag,1,6)=="T23309" ///
| substr(diag,1,6)=="T23311" ///
| substr(diag,1,6)=="T23312" ///
| substr(diag,1,6)=="T23321" ///
| substr(diag,1,6)=="T23322" ///
| substr(diag,1,6)=="T23329" ///
| substr(diag,1,6)=="T23331" ///
| substr(diag,1,6)=="T23332" ///
| substr(diag,1,6)=="T23341" ///
| substr(diag,1,6)=="T23342" ///
| substr(diag,1,6)=="T23351" ///
| substr(diag,1,6)=="T23352" 


replace trauma=1 if  substr(diag,1,6)=="T23359" ///
| substr(diag,1,6)=="T23361" ///
| substr(diag,1,6)=="T23362" ///
| substr(diag,1,6)=="T23371" ///
| substr(diag,1,6)=="T23372" ///
| substr(diag,1,6)=="T23391" ///
| substr(diag,1,6)=="T23392" ///
| substr(diag,1,6)=="T23492" ///
| substr(diag,1,6)=="T23579" ///
| substr(diag,1,6)=="T23591" ///
| substr(diag,1,6)=="T23602" ///
| substr(diag,1,6)=="T23632" ///
| substr(diag,1,6)=="T23641" ///
| substr(diag,1,6)=="T23652" ///
| substr(diag,1,6)=="T23691" ///
| substr(diag,1,6)=="T23692" ///
| substr(diag,1,6)=="T23731" ///
| substr(diag,1,6)=="T24001" ///
| substr(diag,1,6)=="T24002" ///
| substr(diag,1,6)=="T24009" ///
| substr(diag,1,6)=="T24011" ///
| substr(diag,1,6)=="T24012" ///
| substr(diag,1,6)=="T24019" ///
| substr(diag,1,6)=="T24021" ///
| substr(diag,1,6)=="T24022" ///
| substr(diag,1,6)=="T24031" ///
| substr(diag,1,6)=="T24032" ///
| substr(diag,1,6)=="T24039" ///
| substr(diag,1,6)=="T24091" ///
| substr(diag,1,6)=="T24092" ///
| substr(diag,1,6)=="T24099" ///
| substr(diag,1,6)=="T24101" ///
| substr(diag,1,6)=="T24102" ///
| substr(diag,1,6)=="T24111" ///
| substr(diag,1,6)=="T24112" ///
| substr(diag,1,6)=="T24119" ///
| substr(diag,1,6)=="T24121" ///
| substr(diag,1,6)=="T24122" ///
| substr(diag,1,6)=="T24132" ///
| substr(diag,1,6)=="T24139" ///
| substr(diag,1,6)=="T24191" ///
| substr(diag,1,6)=="T24192" ///
| substr(diag,1,6)=="T24201" ///
| substr(diag,1,6)=="T24202" ///
| substr(diag,1,6)=="T24209" ///
| substr(diag,1,6)=="T24212" ///
| substr(diag,1,6)=="T24219" ///
| substr(diag,1,6)=="T24221" ///
| substr(diag,1,6)=="T24222" ///
| substr(diag,1,6)=="T24229" ///
| substr(diag,1,6)=="T24231" ///
| substr(diag,1,6)=="T24232" ///
| substr(diag,1,6)=="T24239" ///
| substr(diag,1,6)=="T24291" ///
| substr(diag,1,6)=="T24292" ///
| substr(diag,1,6)=="T24299" ///
| substr(diag,1,6)=="T24301" ///
| substr(diag,1,6)=="T24302" ///
| substr(diag,1,6)=="T24309" ///
| substr(diag,1,6)=="T24311" ///
| substr(diag,1,6)=="T24312" ///
| substr(diag,1,6)=="T24319" ///
| substr(diag,1,6)=="T24321" ///
| substr(diag,1,6)=="T24322" ///
| substr(diag,1,6)=="T24331" ///
| substr(diag,1,6)=="T24332" ///
| substr(diag,1,6)=="T24339" ///
| substr(diag,1,6)=="T24391" ///
| substr(diag,1,6)=="T24392" ///
| substr(diag,1,6)=="T24412" ///
| substr(diag,1,6)=="T24432" ///
| substr(diag,1,6)=="T24511" ///
| substr(diag,1,6)=="T24602" ///
| substr(diag,1,6)=="T24611" ///
| substr(diag,1,6)=="T24612" ///
| substr(diag,1,6)=="T24622" ///
| substr(diag,1,6)=="T24631" ///
| substr(diag,1,6)=="T24632" ///
| substr(diag,1,6)=="T24692" ///
| substr(diag,1,6)=="T24699" ///
| substr(diag,1,6)=="T25011" ///
| substr(diag,1,6)=="T25021" ///
| substr(diag,1,6)=="T25022" ///
| substr(diag,1,6)=="T25029" ///
| substr(diag,1,6)=="T25031" ///
| substr(diag,1,6)=="T25032" ///
| substr(diag,1,6)=="T25099" ///
| substr(diag,1,6)=="T25121" ///
| substr(diag,1,6)=="T25122" ///
| substr(diag,1,6)=="T25191" ///
| substr(diag,1,6)=="T25192" ///
| substr(diag,1,6)=="T25211" ///
| substr(diag,1,6)=="T25212" ///
| substr(diag,1,6)=="T25219" ///
| substr(diag,1,6)=="T25221" ///
| substr(diag,1,6)=="T25222" ///
| substr(diag,1,6)=="T25229" ///
| substr(diag,1,6)=="T25231" ///
| substr(diag,1,6)=="T25232" ///
| substr(diag,1,6)=="T25291" ///
| substr(diag,1,6)=="T25292" ///
| substr(diag,1,6)=="T25311" ///
| substr(diag,1,6)=="T25312" ///
| substr(diag,1,6)=="T25321" ///
| substr(diag,1,6)=="T25322" ///
| substr(diag,1,6)=="T25329" ///
| substr(diag,1,6)=="T25331" ///
| substr(diag,1,6)=="T25332" ///
| substr(diag,1,6)=="T25391" ///
| substr(diag,1,6)=="T25392" ///
| substr(diag,1,6)=="T25399" ///
| substr(diag,1,6)=="T25622" ///
| substr(diag,1,6)=="T25722" ///
| substr(diag,1,5)=="T2600" ///
| substr(diag,1,5)=="T2601" ///
| substr(diag,1,5)=="T2602" ///
| substr(diag,1,5)=="T2610" ///
| substr(diag,1,5)=="T2611" ///
| substr(diag,1,5)=="T2612" ///
| substr(diag,1,5)=="T2640" ///
| substr(diag,1,5)=="T2641" ///
| substr(diag,1,5)=="T2642" ///
| substr(diag,1,4)=="T270" ///
| substr(diag,1,4)=="T271" ///
| substr(diag,1,4)=="T272" ///
| substr(diag,1,4)=="T273" ///
| substr(diag,1,4)=="T274" ///
| substr(diag,1,4)=="T275" ///
| substr(diag,1,4)=="T277" ///
| substr(diag,1,4)=="T280" ///
| substr(diag,1,4)=="T281" ///
| substr(diag,1,5)=="T2840" ///
| substr(diag,1,6)=="T28412" 


replace trauma=1 if  substr(diag,1,4)=="T285" ///
| substr(diag,1,4)=="T286" ///
| substr(diag,1,5)=="80000" ///
| substr(diag,1,5)=="80001" ///
| substr(diag,1,5)=="80002" ///
| substr(diag,1,5)=="80003" ///
| substr(diag,1,5)=="80004" ///
| substr(diag,1,5)=="80005" ///
| substr(diag,1,5)=="80006" ///
| substr(diag,1,5)=="80009" ///
| substr(diag,1,5)=="80010" ///
| substr(diag,1,5)=="80011" ///
| substr(diag,1,5)=="80012" ///
| substr(diag,1,5)=="80013" ///
| substr(diag,1,5)=="80014" ///
| substr(diag,1,5)=="80015" ///
| substr(diag,1,5)=="80016" ///
| substr(diag,1,5)=="80019" ///
| substr(diag,1,5)=="80020" ///
| substr(diag,1,5)=="80021" ///
| substr(diag,1,5)=="80022" ///
| substr(diag,1,5)=="80023" ///
| substr(diag,1,5)=="80024" ///
| substr(diag,1,5)=="80025" ///
| substr(diag,1,5)=="80026" ///
| substr(diag,1,5)=="80029" ///
| substr(diag,1,5)=="80030" ///
| substr(diag,1,5)=="80031" ///
| substr(diag,1,5)=="80032" ///
| substr(diag,1,5)=="80033" ///
| substr(diag,1,5)=="80034" ///
| substr(diag,1,5)=="80035" ///
| substr(diag,1,5)=="80036" ///
| substr(diag,1,5)=="80039" ///
| substr(diag,1,5)=="80040" ///
| substr(diag,1,5)=="80041" ///
| substr(diag,1,5)=="80042" ///
| substr(diag,1,5)=="80043" ///
| substr(diag,1,5)=="80044" ///
| substr(diag,1,5)=="80045" ///
| substr(diag,1,5)=="80046" ///
| substr(diag,1,5)=="80049" ///
| substr(diag,1,5)=="80050" ///
| substr(diag,1,5)=="80051" ///
| substr(diag,1,5)=="80052" ///
| substr(diag,1,5)=="80053" ///
| substr(diag,1,5)=="80054" ///
| substr(diag,1,5)=="80055" ///
| substr(diag,1,5)=="80056" ///
| substr(diag,1,5)=="80059" ///
| substr(diag,1,5)=="80060" ///
| substr(diag,1,5)=="80061" ///
| substr(diag,1,5)=="80062" ///
| substr(diag,1,5)=="80063" ///
| substr(diag,1,5)=="80064" ///
| substr(diag,1,5)=="80065" ///
| substr(diag,1,5)=="80066" ///
| substr(diag,1,5)=="80069" ///
| substr(diag,1,5)=="80070" ///
| substr(diag,1,5)=="80071" ///
| substr(diag,1,5)=="80072" ///
| substr(diag,1,5)=="80073" ///
| substr(diag,1,5)=="80074" ///
| substr(diag,1,5)=="80075" ///
| substr(diag,1,5)=="80076" ///
| substr(diag,1,5)=="80079" ///
| substr(diag,1,5)=="80080" ///
| substr(diag,1,5)=="80081" ///
| substr(diag,1,5)=="80082" ///
| substr(diag,1,5)=="80083" ///
| substr(diag,1,5)=="80084" ///
| substr(diag,1,5)=="80085" ///
| substr(diag,1,5)=="80086" ///
| substr(diag,1,5)=="80089" ///
| substr(diag,1,5)=="80090" ///
| substr(diag,1,5)=="80091" ///
| substr(diag,1,5)=="80092" ///
| substr(diag,1,5)=="80093" ///
| substr(diag,1,5)=="80094" ///
| substr(diag,1,5)=="80095" ///
| substr(diag,1,5)=="80096" ///
| substr(diag,1,5)=="80099" ///
| substr(diag,1,5)=="80100" ///
| substr(diag,1,5)=="80101" ///
| substr(diag,1,5)=="80102" ///
| substr(diag,1,5)=="80103" ///
| substr(diag,1,5)=="80104" ///
| substr(diag,1,5)=="80105" ///
| substr(diag,1,5)=="80106" ///
| substr(diag,1,5)=="80109" ///
| substr(diag,1,5)=="80110" ///
| substr(diag,1,5)=="80111" ///
| substr(diag,1,5)=="80112" ///
| substr(diag,1,5)=="80113" ///
| substr(diag,1,5)=="80114" ///
| substr(diag,1,5)=="80115" ///
| substr(diag,1,5)=="80116" ///
| substr(diag,1,5)=="80119" ///
| substr(diag,1,5)=="80120" ///
| substr(diag,1,5)=="80121" ///
| substr(diag,1,5)=="80122" ///
| substr(diag,1,5)=="80123" ///
| substr(diag,1,5)=="80124" ///
| substr(diag,1,5)=="80125" ///
| substr(diag,1,5)=="80126" ///
| substr(diag,1,5)=="80129" ///
| substr(diag,1,5)=="80130" ///
| substr(diag,1,5)=="80131" ///
| substr(diag,1,5)=="80132" ///
| substr(diag,1,5)=="80133" ///
| substr(diag,1,5)=="80134" ///
| substr(diag,1,5)=="80135" ///
| substr(diag,1,5)=="80136" ///
| substr(diag,1,5)=="80139" ///
| substr(diag,1,5)=="80140" ///
| substr(diag,1,5)=="80141" ///
| substr(diag,1,5)=="80142" ///
| substr(diag,1,5)=="80143" ///
| substr(diag,1,5)=="80144" ///
| substr(diag,1,5)=="80145" ///
| substr(diag,1,5)=="80146" ///
| substr(diag,1,5)=="80149" ///
| substr(diag,1,5)=="80150" ///
| substr(diag,1,5)=="80151" ///
| substr(diag,1,5)=="80152" ///
| substr(diag,1,5)=="80153" ///
| substr(diag,1,5)=="80154" 


replace trauma=1 if  substr(diag,1,5)=="80155" ///
| substr(diag,1,5)=="80156" ///
| substr(diag,1,5)=="80159" ///
| substr(diag,1,5)=="80160" ///
| substr(diag,1,5)=="80161" ///
| substr(diag,1,5)=="80162" ///
| substr(diag,1,5)=="80163" ///
| substr(diag,1,5)=="80164" ///
| substr(diag,1,5)=="80165" ///
| substr(diag,1,5)=="80166" ///
| substr(diag,1,5)=="80169" ///
| substr(diag,1,5)=="80170" ///
| substr(diag,1,5)=="80171" ///
| substr(diag,1,5)=="80172" ///
| substr(diag,1,5)=="80173" ///
| substr(diag,1,5)=="80174" ///
| substr(diag,1,5)=="80175" ///
| substr(diag,1,5)=="80176" ///
| substr(diag,1,5)=="80179" ///
| substr(diag,1,5)=="80180" ///
| substr(diag,1,5)=="80181" ///
| substr(diag,1,5)=="80182" ///
| substr(diag,1,5)=="80183" ///
| substr(diag,1,5)=="80184" ///
| substr(diag,1,5)=="80185" ///
| substr(diag,1,5)=="80186" ///
| substr(diag,1,5)=="80189" ///
| substr(diag,1,5)=="80190" ///
| substr(diag,1,5)=="80191" ///
| substr(diag,1,5)=="80192" ///
| substr(diag,1,5)=="80193" ///
| substr(diag,1,5)=="80194" ///
| substr(diag,1,5)=="80195" ///
| substr(diag,1,5)=="80196" ///
| substr(diag,1,5)=="80199" ///
| substr(diag,1,4)=="8020" ///
| substr(diag,1,4)=="8021" ///
| substr(diag,1,5)=="80220" ///
| substr(diag,1,5)=="80221" ///
| substr(diag,1,5)=="80222" ///
| substr(diag,1,5)=="80223" ///
| substr(diag,1,5)=="80224" ///
| substr(diag,1,5)=="80225" ///
| substr(diag,1,5)=="80226" ///
| substr(diag,1,5)=="80227" ///
| substr(diag,1,5)=="80228" ///
| substr(diag,1,5)=="80229" ///
| substr(diag,1,5)=="80230" ///
| substr(diag,1,5)=="80231" ///
| substr(diag,1,5)=="80232" ///
| substr(diag,1,5)=="80233" ///
| substr(diag,1,5)=="80234" ///
| substr(diag,1,5)=="80235" ///
| substr(diag,1,5)=="80236" ///
| substr(diag,1,5)=="80237" ///
| substr(diag,1,5)=="80238" ///
| substr(diag,1,5)=="80239" ///
| substr(diag,1,4)=="8024" ///
| substr(diag,1,4)=="8025" ///
| substr(diag,1,4)=="8026" ///
| substr(diag,1,4)=="8027" ///
| substr(diag,1,4)=="8028" ///
| substr(diag,1,4)=="8029" ///
| substr(diag,1,5)=="80300" ///
| substr(diag,1,5)=="80301" ///
| substr(diag,1,5)=="80302" ///
| substr(diag,1,5)=="80303" ///
| substr(diag,1,5)=="80304" ///
| substr(diag,1,5)=="80305" ///
| substr(diag,1,5)=="80306" ///
| substr(diag,1,5)=="80309" ///
| substr(diag,1,5)=="80310" ///
| substr(diag,1,5)=="80311" ///
| substr(diag,1,5)=="80312" ///
| substr(diag,1,5)=="80313" ///
| substr(diag,1,5)=="80314" ///
| substr(diag,1,5)=="80315" ///
| substr(diag,1,5)=="80316" ///
| substr(diag,1,5)=="80319" ///
| substr(diag,1,5)=="80320" ///
| substr(diag,1,5)=="80321" ///
| substr(diag,1,5)=="80322" ///
| substr(diag,1,5)=="80323" ///
| substr(diag,1,5)=="80324" ///
| substr(diag,1,5)=="80325" ///
| substr(diag,1,5)=="80326" ///
| substr(diag,1,5)=="80329" ///
| substr(diag,1,5)=="80330" ///
| substr(diag,1,5)=="80331" ///
| substr(diag,1,5)=="80332" ///
| substr(diag,1,5)=="80333" ///
| substr(diag,1,5)=="80334" ///
| substr(diag,1,5)=="80335" ///
| substr(diag,1,5)=="80336" ///
| substr(diag,1,5)=="80339" ///
| substr(diag,1,5)=="80340" ///
| substr(diag,1,5)=="80341" ///
| substr(diag,1,5)=="80342" ///
| substr(diag,1,5)=="80343" ///
| substr(diag,1,5)=="80344" ///
| substr(diag,1,5)=="80345" ///
| substr(diag,1,5)=="80346" ///
| substr(diag,1,5)=="80349" ///
| substr(diag,1,5)=="80350" ///
| substr(diag,1,5)=="80351" ///
| substr(diag,1,5)=="80352" ///
| substr(diag,1,5)=="80353" ///
| substr(diag,1,5)=="80354" ///
| substr(diag,1,5)=="80355" ///
| substr(diag,1,5)=="80356" ///
| substr(diag,1,5)=="80359" ///
| substr(diag,1,5)=="80360" ///
| substr(diag,1,5)=="80361" ///
| substr(diag,1,5)=="80362" ///
| substr(diag,1,5)=="80363" ///
| substr(diag,1,5)=="80364" ///
| substr(diag,1,5)=="80365" ///
| substr(diag,1,5)=="80366" ///
| substr(diag,1,5)=="80369" ///
| substr(diag,1,5)=="80370" ///
| substr(diag,1,5)=="80371" ///
| substr(diag,1,5)=="80372" ///
| substr(diag,1,5)=="80373" ///
| substr(diag,1,5)=="80374" ///
| substr(diag,1,5)=="80375" ///
| substr(diag,1,5)=="80376" ///
| substr(diag,1,5)=="80379" 


replace trauma=1 if  substr(diag,1,5)=="80380" ///
| substr(diag,1,5)=="80381" ///
| substr(diag,1,5)=="80382" ///
| substr(diag,1,5)=="80383" ///
| substr(diag,1,5)=="80384" ///
| substr(diag,1,5)=="80385" ///
| substr(diag,1,5)=="80386" ///
| substr(diag,1,5)=="80389" ///
| substr(diag,1,5)=="80390" ///
| substr(diag,1,5)=="80391" ///
| substr(diag,1,5)=="80392" ///
| substr(diag,1,5)=="80393" ///
| substr(diag,1,5)=="80394" ///
| substr(diag,1,5)=="80395" ///
| substr(diag,1,5)=="80396" ///
| substr(diag,1,5)=="80399" ///
| substr(diag,1,5)=="80400" ///
| substr(diag,1,5)=="80401" ///
| substr(diag,1,5)=="80402" ///
| substr(diag,1,5)=="80403" ///
| substr(diag,1,5)=="80404" ///
| substr(diag,1,5)=="80405" ///
| substr(diag,1,5)=="80406" ///
| substr(diag,1,5)=="80409" ///
| substr(diag,1,5)=="80410" ///
| substr(diag,1,5)=="80411" ///
| substr(diag,1,5)=="80412" ///
| substr(diag,1,5)=="80413" ///
| substr(diag,1,5)=="80414" ///
| substr(diag,1,5)=="80415" ///
| substr(diag,1,5)=="80416" ///
| substr(diag,1,5)=="80419" ///
| substr(diag,1,5)=="80420" ///
| substr(diag,1,5)=="80421" ///
| substr(diag,1,5)=="80422" ///
| substr(diag,1,5)=="80423" ///
| substr(diag,1,5)=="80424" ///
| substr(diag,1,5)=="80425" ///
| substr(diag,1,5)=="80426" ///
| substr(diag,1,5)=="80429" ///
| substr(diag,1,5)=="80430" ///
| substr(diag,1,5)=="80431" ///
| substr(diag,1,5)=="80432" ///
| substr(diag,1,5)=="80433" ///
| substr(diag,1,5)=="80434" ///
| substr(diag,1,5)=="80435" ///
| substr(diag,1,5)=="80436" ///
| substr(diag,1,5)=="80439" ///
| substr(diag,1,5)=="80440" ///
| substr(diag,1,5)=="80441" ///
| substr(diag,1,5)=="80442" ///
| substr(diag,1,5)=="80443" ///
| substr(diag,1,5)=="80444" ///
| substr(diag,1,5)=="80445" ///
| substr(diag,1,5)=="80446" ///
| substr(diag,1,5)=="80449" ///
| substr(diag,1,5)=="80450" ///
| substr(diag,1,5)=="80451" ///
| substr(diag,1,5)=="80452" ///
| substr(diag,1,5)=="80453" ///
| substr(diag,1,5)=="80454" ///
| substr(diag,1,5)=="80455" ///
| substr(diag,1,5)=="80456" ///
| substr(diag,1,5)=="80459" ///
| substr(diag,1,5)=="80460" ///
| substr(diag,1,5)=="80461" ///
| substr(diag,1,5)=="80462" ///
| substr(diag,1,5)=="80463" ///
| substr(diag,1,5)=="80464" ///
| substr(diag,1,5)=="80465" ///
| substr(diag,1,5)=="80466" ///
| substr(diag,1,5)=="80469" ///
| substr(diag,1,5)=="80470" ///
| substr(diag,1,5)=="80471" ///
| substr(diag,1,5)=="80472" ///
| substr(diag,1,5)=="80473" ///
| substr(diag,1,5)=="80474" ///
| substr(diag,1,5)=="80475" ///
| substr(diag,1,5)=="80476" ///
| substr(diag,1,5)=="80479" ///
| substr(diag,1,5)=="80480" ///
| substr(diag,1,5)=="80481" ///
| substr(diag,1,5)=="80482" ///
| substr(diag,1,5)=="80483" ///
| substr(diag,1,5)=="80484" ///
| substr(diag,1,5)=="80485" ///
| substr(diag,1,5)=="80486" ///
| substr(diag,1,5)=="80489" ///
| substr(diag,1,5)=="80490" ///
| substr(diag,1,5)=="80491" ///
| substr(diag,1,5)=="80492" ///
| substr(diag,1,5)=="80493" ///
| substr(diag,1,5)=="80494" ///
| substr(diag,1,5)=="80495" ///
| substr(diag,1,5)=="80496" ///
| substr(diag,1,5)=="80499" ///
| substr(diag,1,5)=="80500" ///
| substr(diag,1,5)=="80501" ///
| substr(diag,1,5)=="80502" ///
| substr(diag,1,5)=="80503" ///
| substr(diag,1,5)=="80504" ///
| substr(diag,1,5)=="80505" ///
| substr(diag,1,5)=="80506" ///
| substr(diag,1,5)=="80507" ///
| substr(diag,1,5)=="80508" ///
| substr(diag,1,5)=="80510" ///
| substr(diag,1,5)=="80511" ///
| substr(diag,1,5)=="80512" ///
| substr(diag,1,5)=="80513" ///
| substr(diag,1,5)=="80514" ///
| substr(diag,1,5)=="80515" ///
| substr(diag,1,5)=="80516" ///
| substr(diag,1,5)=="80517" ///
| substr(diag,1,5)=="80518" ///
| substr(diag,1,4)=="8052" ///
| substr(diag,1,4)=="8053" ///
| substr(diag,1,4)=="8054" ///
| substr(diag,1,4)=="8055" ///
| substr(diag,1,4)=="8056" ///
| substr(diag,1,4)=="8057" ///
| substr(diag,1,4)=="8058" ///
| substr(diag,1,4)=="8059" ///
| substr(diag,1,5)=="80600" ///
| substr(diag,1,5)=="80601" ///
| substr(diag,1,5)=="80602" ///
| substr(diag,1,5)=="80603" ///
| substr(diag,1,5)=="80604" 


replace trauma=1 if  substr(diag,1,5)=="80605" ///
| substr(diag,1,5)=="80606" ///
| substr(diag,1,5)=="80607" ///
| substr(diag,1,5)=="80608" ///
| substr(diag,1,5)=="80609" ///
| substr(diag,1,5)=="80610" ///
| substr(diag,1,5)=="80611" ///
| substr(diag,1,5)=="80612" ///
| substr(diag,1,5)=="80613" ///
| substr(diag,1,5)=="80614" ///
| substr(diag,1,5)=="80615" ///
| substr(diag,1,5)=="80616" ///
| substr(diag,1,5)=="80617" ///
| substr(diag,1,5)=="80618" ///
| substr(diag,1,5)=="80619" ///
| substr(diag,1,5)=="80620" ///
| substr(diag,1,5)=="80621" ///
| substr(diag,1,5)=="80622" ///
| substr(diag,1,5)=="80623" ///
| substr(diag,1,5)=="80624" ///
| substr(diag,1,5)=="80625" ///
| substr(diag,1,5)=="80626" ///
| substr(diag,1,5)=="80627" ///
| substr(diag,1,5)=="80628" ///
| substr(diag,1,5)=="80629" ///
| substr(diag,1,5)=="80630" ///
| substr(diag,1,5)=="80631" ///
| substr(diag,1,5)=="80632" ///
| substr(diag,1,5)=="80633" ///
| substr(diag,1,5)=="80634" ///
| substr(diag,1,5)=="80635" ///
| substr(diag,1,5)=="80636" ///
| substr(diag,1,5)=="80637" ///
| substr(diag,1,5)=="80638" ///
| substr(diag,1,5)=="80639" ///
| substr(diag,1,4)=="8064" ///
| substr(diag,1,4)=="8065" ///
| substr(diag,1,5)=="80660" ///
| substr(diag,1,5)=="80661" ///
| substr(diag,1,5)=="80662" ///
| substr(diag,1,5)=="80669" ///
| substr(diag,1,5)=="80670" ///
| substr(diag,1,5)=="80671" ///
| substr(diag,1,5)=="80672" ///
| substr(diag,1,5)=="80679" ///
| substr(diag,1,4)=="8068" ///
| substr(diag,1,4)=="8069" ///
| substr(diag,1,5)=="80700" ///
| substr(diag,1,5)=="80701" ///
| substr(diag,1,5)=="80702" ///
| substr(diag,1,5)=="80703" ///
| substr(diag,1,5)=="80704" ///
| substr(diag,1,5)=="80705" ///
| substr(diag,1,5)=="80706" ///
| substr(diag,1,5)=="80707" ///
| substr(diag,1,5)=="80708" ///
| substr(diag,1,5)=="80709" ///
| substr(diag,1,5)=="80710" ///
| substr(diag,1,5)=="80711" ///
| substr(diag,1,5)=="80712" ///
| substr(diag,1,5)=="80713" ///
| substr(diag,1,5)=="80714" ///
| substr(diag,1,5)=="80715" ///
| substr(diag,1,5)=="80716" ///
| substr(diag,1,5)=="80717" ///
| substr(diag,1,5)=="80718" ///
| substr(diag,1,5)=="80719" ///
| substr(diag,1,4)=="8072" ///
| substr(diag,1,4)=="8073" ///
| substr(diag,1,4)=="8074" ///
| substr(diag,1,4)=="8075" ///
| substr(diag,1,4)=="8076" ///
| substr(diag,1,4)=="8080" ///
| substr(diag,1,4)=="8081" ///
| substr(diag,1,4)=="8082" ///
| substr(diag,1,4)=="8083" ///
| substr(diag,1,5)=="80841" ///
| substr(diag,1,5)=="80842" ///
| substr(diag,1,5)=="80843" ///
| substr(diag,1,5)=="80849" ///
| substr(diag,1,5)=="80851" ///
| substr(diag,1,5)=="80852" ///
| substr(diag,1,5)=="80853" ///
| substr(diag,1,5)=="80859" ///
| substr(diag,1,4)=="8088" ///
| substr(diag,1,4)=="8089" ///
| substr(diag,1,4)=="8090" ///
| substr(diag,1,4)=="8091" ///
| substr(diag,1,5)=="81000" ///
| substr(diag,1,5)=="81001" ///
| substr(diag,1,5)=="81002" ///
| substr(diag,1,5)=="81003" ///
| substr(diag,1,5)=="81010" ///
| substr(diag,1,5)=="81011" ///
| substr(diag,1,5)=="81012" ///
| substr(diag,1,5)=="81013" ///
| substr(diag,1,5)=="81100" ///
| substr(diag,1,5)=="81101" ///
| substr(diag,1,5)=="81102" ///
| substr(diag,1,5)=="81103" ///
| substr(diag,1,5)=="81109" ///
| substr(diag,1,5)=="81110" ///
| substr(diag,1,5)=="81111" ///
| substr(diag,1,5)=="81112" ///
| substr(diag,1,5)=="81113" ///
| substr(diag,1,5)=="81119" ///
| substr(diag,1,5)=="81200" ///
| substr(diag,1,5)=="81201" ///
| substr(diag,1,5)=="81202" ///
| substr(diag,1,5)=="81203" ///
| substr(diag,1,5)=="81209" ///
| substr(diag,1,5)=="81210" ///
| substr(diag,1,5)=="81211" ///
| substr(diag,1,5)=="81212" 


replace trauma=1 if  substr(diag,1,5)=="81213" ///
| substr(diag,1,5)=="81219" ///
| substr(diag,1,5)=="81220" ///
| substr(diag,1,5)=="81221" ///
| substr(diag,1,5)=="81230" ///
| substr(diag,1,5)=="81231" ///
| substr(diag,1,5)=="81240" ///
| substr(diag,1,5)=="81241" ///
| substr(diag,1,5)=="81242" ///
| substr(diag,1,5)=="81243" ///
| substr(diag,1,5)=="81244" ///
| substr(diag,1,5)=="81249" ///
| substr(diag,1,5)=="81250" ///
| substr(diag,1,5)=="81251" ///
| substr(diag,1,5)=="81252" ///
| substr(diag,1,5)=="81253" ///
| substr(diag,1,5)=="81254" ///
| substr(diag,1,5)=="81259" ///
| substr(diag,1,5)=="81300" ///
| substr(diag,1,5)=="81301" ///
| substr(diag,1,5)=="81302" ///
| substr(diag,1,5)=="81303" ///
| substr(diag,1,5)=="81304" ///
| substr(diag,1,5)=="81305" ///
| substr(diag,1,5)=="81306" ///
| substr(diag,1,5)=="81307" ///
| substr(diag,1,5)=="81308" ///
| substr(diag,1,5)=="81310" ///
| substr(diag,1,5)=="81311" ///
| substr(diag,1,5)=="81312" ///
| substr(diag,1,5)=="81313" ///
| substr(diag,1,5)=="81314" ///
| substr(diag,1,5)=="81315" ///
| substr(diag,1,5)=="81316" ///
| substr(diag,1,5)=="81317" ///
| substr(diag,1,5)=="81318" ///
| substr(diag,1,5)=="81320" ///
| substr(diag,1,5)=="81321" ///
| substr(diag,1,5)=="81322" ///
| substr(diag,1,5)=="81323" ///
| substr(diag,1,5)=="81330" ///
| substr(diag,1,5)=="81331" ///
| substr(diag,1,5)=="81332" ///
| substr(diag,1,5)=="81333" ///
| substr(diag,1,5)=="81340" ///
| substr(diag,1,5)=="81341" ///
| substr(diag,1,5)=="81342" ///
| substr(diag,1,5)=="81343" ///
| substr(diag,1,5)=="81344" ///
| substr(diag,1,5)=="81345" ///
| substr(diag,1,5)=="81346" ///
| substr(diag,1,5)=="81347" ///
| substr(diag,1,5)=="81350" ///
| substr(diag,1,5)=="81351" ///
| substr(diag,1,5)=="81352" ///
| substr(diag,1,5)=="81353" ///
| substr(diag,1,5)=="81354" ///
| substr(diag,1,5)=="81380" ///
| substr(diag,1,5)=="81381" ///
| substr(diag,1,5)=="81382" ///
| substr(diag,1,5)=="81383" ///
| substr(diag,1,5)=="81390" ///
| substr(diag,1,5)=="81391" ///
| substr(diag,1,5)=="81392" ///
| substr(diag,1,5)=="81393" ///
| substr(diag,1,5)=="81400" ///
| substr(diag,1,5)=="81401" ///
| substr(diag,1,5)=="81402" ///
| substr(diag,1,5)=="81403" ///
| substr(diag,1,5)=="81404" ///
| substr(diag,1,5)=="81405" ///
| substr(diag,1,5)=="81406" ///
| substr(diag,1,5)=="81407" ///
| substr(diag,1,5)=="81408" ///
| substr(diag,1,5)=="81409" ///
| substr(diag,1,5)=="81410" ///
| substr(diag,1,5)=="81411" ///
| substr(diag,1,5)=="81412" ///
| substr(diag,1,5)=="81413" ///
| substr(diag,1,5)=="81414" ///
| substr(diag,1,5)=="81415" ///
| substr(diag,1,5)=="81416" ///
| substr(diag,1,5)=="81417" ///
| substr(diag,1,5)=="81418" ///
| substr(diag,1,5)=="81419" ///
| substr(diag,1,5)=="81500" ///
| substr(diag,1,5)=="81501" ///
| substr(diag,1,5)=="81502" ///
| substr(diag,1,5)=="81503" ///
| substr(diag,1,5)=="81504" ///
| substr(diag,1,5)=="81509" ///
| substr(diag,1,5)=="81510" ///
| substr(diag,1,5)=="81511" ///
| substr(diag,1,5)=="81512" ///
| substr(diag,1,5)=="81513" ///
| substr(diag,1,5)=="81514" ///
| substr(diag,1,5)=="81519" ///
| substr(diag,1,5)=="81600" ///
| substr(diag,1,5)=="81601" ///
| substr(diag,1,5)=="81602" ///
| substr(diag,1,5)=="81603" ///
| substr(diag,1,5)=="81610" ///
| substr(diag,1,5)=="81611" ///
| substr(diag,1,5)=="81612" ///
| substr(diag,1,5)=="81613" ///
| substr(diag,1,4)=="8170" ///
| substr(diag,1,4)=="8171" ///
| substr(diag,1,4)=="8180" ///
| substr(diag,1,4)=="8181" ///
| substr(diag,1,4)=="8190" ///
| substr(diag,1,4)=="8191" ///
| substr(diag,1,5)=="82000" ///
| substr(diag,1,5)=="82001" ///
| substr(diag,1,5)=="82002" ///
| substr(diag,1,5)=="82003" ///
| substr(diag,1,5)=="82009" ///
| substr(diag,1,5)=="82010" ///
| substr(diag,1,5)=="82011" ///
| substr(diag,1,5)=="82012" ///
| substr(diag,1,5)=="82013" ///
| substr(diag,1,5)=="82019" ///
| substr(diag,1,5)=="82020" ///
| substr(diag,1,5)=="82021" ///
| substr(diag,1,5)=="82022" ///
| substr(diag,1,5)=="82030" 


replace trauma=1 if  substr(diag,1,5)=="82031" ///
| substr(diag,1,5)=="82032" ///
| substr(diag,1,4)=="8208" ///
| substr(diag,1,4)=="8209" ///
| substr(diag,1,5)=="82100" ///
| substr(diag,1,5)=="82101" ///
| substr(diag,1,5)=="82110" ///
| substr(diag,1,5)=="82111" ///
| substr(diag,1,5)=="82120" ///
| substr(diag,1,5)=="82121" ///
| substr(diag,1,5)=="82122" ///
| substr(diag,1,5)=="82123" ///
| substr(diag,1,5)=="82129" ///
| substr(diag,1,5)=="82130" ///
| substr(diag,1,5)=="82131" ///
| substr(diag,1,5)=="82132" ///
| substr(diag,1,5)=="82133" ///
| substr(diag,1,5)=="82139" ///
| substr(diag,1,4)=="8220" ///
| substr(diag,1,4)=="8221" ///
| substr(diag,1,5)=="82300" ///
| substr(diag,1,5)=="82301" ///
| substr(diag,1,5)=="82302" ///
| substr(diag,1,5)=="82310" ///
| substr(diag,1,5)=="82311" ///
| substr(diag,1,5)=="82312" ///
| substr(diag,1,5)=="82320" ///
| substr(diag,1,5)=="82321" ///
| substr(diag,1,5)=="82322" ///
| substr(diag,1,5)=="82330" ///
| substr(diag,1,5)=="82331" ///
| substr(diag,1,5)=="82332" ///
| substr(diag,1,5)=="82340" ///
| substr(diag,1,5)=="82341" ///
| substr(diag,1,5)=="82342" ///
| substr(diag,1,5)=="82380" ///
| substr(diag,1,5)=="82381" ///
| substr(diag,1,5)=="82382" ///
| substr(diag,1,5)=="82390" ///
| substr(diag,1,5)=="82391" ///
| substr(diag,1,5)=="82392" ///
| substr(diag,1,4)=="8240" ///
| substr(diag,1,4)=="8241" ///
| substr(diag,1,4)=="8242" ///
| substr(diag,1,4)=="8243" ///
| substr(diag,1,4)=="8244" ///
| substr(diag,1,4)=="8245" ///
| substr(diag,1,4)=="8246" ///
| substr(diag,1,4)=="8247" ///
| substr(diag,1,4)=="8248" ///
| substr(diag,1,4)=="8249" ///
| substr(diag,1,4)=="8250" ///
| substr(diag,1,4)=="8251" ///
| substr(diag,1,5)=="82520" ///
| substr(diag,1,5)=="82521" ///
| substr(diag,1,5)=="82522" ///
| substr(diag,1,5)=="82523" ///
| substr(diag,1,5)=="82524" ///
| substr(diag,1,5)=="82525" ///
| substr(diag,1,5)=="82529" ///
| substr(diag,1,5)=="82530" ///
| substr(diag,1,5)=="82531" ///
| substr(diag,1,5)=="82532" ///
| substr(diag,1,5)=="82533" ///
| substr(diag,1,5)=="82534" ///
| substr(diag,1,5)=="82535" ///
| substr(diag,1,5)=="82539" ///
| substr(diag,1,4)=="8260" ///
| substr(diag,1,4)=="8261" ///
| substr(diag,1,4)=="8270" ///
| substr(diag,1,4)=="8271" ///
| substr(diag,1,4)=="8280" ///
| substr(diag,1,4)=="8281" ///
| substr(diag,1,4)=="8290" ///
| substr(diag,1,4)=="8291" ///
| substr(diag,1,4)=="8300" ///
| substr(diag,1,4)=="8301" ///
| substr(diag,1,5)=="83100" ///
| substr(diag,1,5)=="83101" ///
| substr(diag,1,5)=="83102" ///
| substr(diag,1,5)=="83103" ///
| substr(diag,1,5)=="83104" ///
| substr(diag,1,5)=="83109" ///
| substr(diag,1,5)=="83110" ///
| substr(diag,1,5)=="83111" ///
| substr(diag,1,5)=="83112" ///
| substr(diag,1,5)=="83113" ///
| substr(diag,1,5)=="83114" ///
| substr(diag,1,5)=="83119" ///
| substr(diag,1,5)=="83200" ///
| substr(diag,1,5)=="83201" ///
| substr(diag,1,5)=="83202" ///
| substr(diag,1,5)=="83203" ///
| substr(diag,1,5)=="83204" ///
| substr(diag,1,5)=="83209" ///
| substr(diag,1,5)=="83210" ///
| substr(diag,1,5)=="83211" ///
| substr(diag,1,5)=="83212" ///
| substr(diag,1,5)=="83213" ///
| substr(diag,1,5)=="83214" ///
| substr(diag,1,5)=="83219" ///
| substr(diag,1,4)=="8322" ///
| substr(diag,1,5)=="83300" ///
| substr(diag,1,5)=="83301" ///
| substr(diag,1,5)=="83302" ///
| substr(diag,1,5)=="83303" ///
| substr(diag,1,5)=="83304" ///
| substr(diag,1,5)=="83305" ///
| substr(diag,1,5)=="83309" ///
| substr(diag,1,5)=="83310" ///
| substr(diag,1,5)=="83311" ///
| substr(diag,1,5)=="83312" ///
| substr(diag,1,5)=="83313" ///
| substr(diag,1,5)=="83314" ///
| substr(diag,1,5)=="83315" ///
| substr(diag,1,5)=="83319" ///
| substr(diag,1,5)=="83400" ///
| substr(diag,1,5)=="83401" ///
| substr(diag,1,5)=="83402" ///
| substr(diag,1,5)=="83410" ///
| substr(diag,1,5)=="83411" ///
| substr(diag,1,5)=="83412" ///
| substr(diag,1,5)=="83500" ///
| substr(diag,1,5)=="83501" ///
| substr(diag,1,5)=="83502" ///
| substr(diag,1,5)=="83503" ///
| substr(diag,1,5)=="83510" ///
| substr(diag,1,5)=="83511" ///
| substr(diag,1,5)=="83512" ///
| substr(diag,1,5)=="83513" ///
| substr(diag,1,4)=="8360" ///
| substr(diag,1,4)=="8361" ///
| substr(diag,1,4)=="8362" ///
| substr(diag,1,4)=="8363" ///
| substr(diag,1,4)=="8364" ///
| substr(diag,1,5)=="83650" ///
| substr(diag,1,5)=="83651" ///
| substr(diag,1,5)=="83652" ///
| substr(diag,1,5)=="83653" ///
| substr(diag,1,5)=="83654" ///
| substr(diag,1,5)=="83659" ///
| substr(diag,1,5)=="83660" ///
| substr(diag,1,5)=="83661" ///
| substr(diag,1,5)=="83662" ///
| substr(diag,1,5)=="83663"

 
replace trauma=1 if substr(diag,1,5)=="83664" ///
| substr(diag,1,5)=="83669" ///
| substr(diag,1,4)=="8370" ///
| substr(diag,1,4)=="8371" ///
| substr(diag,1,5)=="83800" ///
| substr(diag,1,5)=="83801" ///
| substr(diag,1,5)=="83802" ///
| substr(diag,1,5)=="83803" ///
| substr(diag,1,5)=="83804" ///
| substr(diag,1,5)=="83805" ///
| substr(diag,1,5)=="83806" ///
| substr(diag,1,5)=="83809" ///
| substr(diag,1,5)=="83810" ///
| substr(diag,1,5)=="83811" ///
| substr(diag,1,5)=="83812" ///
| substr(diag,1,5)=="83813" ///
| substr(diag,1,5)=="83814" ///
| substr(diag,1,5)=="83815" ///
| substr(diag,1,5)=="83816" ///
| substr(diag,1,5)=="83819" ///
| substr(diag,1,5)=="83900" ///
| substr(diag,1,5)=="83901" ///
| substr(diag,1,5)=="83902" ///
| substr(diag,1,5)=="83903" ///
| substr(diag,1,5)=="83904" ///
| substr(diag,1,5)=="83905" ///
| substr(diag,1,5)=="83906" ///
| substr(diag,1,5)=="83907" ///
| substr(diag,1,5)=="83908" ///
| substr(diag,1,5)=="83910" ///
| substr(diag,1,5)=="83911" ///
| substr(diag,1,5)=="83912" ///
| substr(diag,1,5)=="83913" ///
| substr(diag,1,5)=="83914" ///
| substr(diag,1,5)=="83915" ///
| substr(diag,1,5)=="83916" ///
| substr(diag,1,5)=="83917" ///
| substr(diag,1,5)=="83918" ///
| substr(diag,1,5)=="83920" ///
| substr(diag,1,5)=="83921" ///
| substr(diag,1,5)=="83930" ///
| substr(diag,1,5)=="83931" ///
| substr(diag,1,5)=="83940" ///
| substr(diag,1,5)=="83941" ///
| substr(diag,1,5)=="83942" ///
| substr(diag,1,5)=="83949" ///
| substr(diag,1,5)=="83950" ///
| substr(diag,1,5)=="83951" ///
| substr(diag,1,5)=="83952" ///
| substr(diag,1,5)=="83959" ///
| substr(diag,1,5)=="83961" ///
| substr(diag,1,5)=="83969" ///
| substr(diag,1,5)=="83971" ///
| substr(diag,1,5)=="83979" ///
| substr(diag,1,4)=="8398" ///
| substr(diag,1,4)=="8399" ///
| substr(diag,1,4)=="8400" ///
| substr(diag,1,4)=="8401" ///
| substr(diag,1,4)=="8402" ///
| substr(diag,1,4)=="8403" ///
| substr(diag,1,4)=="8404" ///
| substr(diag,1,4)=="8405" ///
| substr(diag,1,4)=="8406" ///
| substr(diag,1,4)=="8407" ///
| substr(diag,1,4)=="8408" ///
| substr(diag,1,4)=="8409" ///
| substr(diag,1,4)=="8410" ///
| substr(diag,1,4)=="8411" ///
| substr(diag,1,4)=="8412" ///
| substr(diag,1,4)=="8413" ///
| substr(diag,1,4)=="8418" ///
| substr(diag,1,4)=="8419" ///
| substr(diag,1,5)=="84200" ///
| substr(diag,1,5)=="84201" ///
| substr(diag,1,5)=="84202" ///
| substr(diag,1,5)=="84209" ///
| substr(diag,1,5)=="84210" ///
| substr(diag,1,5)=="84211" ///
| substr(diag,1,5)=="84212" ///
| substr(diag,1,5)=="84213" ///
| substr(diag,1,5)=="84219" ///
| substr(diag,1,4)=="8430" ///
| substr(diag,1,4)=="8431" ///
| substr(diag,1,4)=="8438" ///
| substr(diag,1,4)=="8439" ///
| substr(diag,1,4)=="8440" ///
| substr(diag,1,4)=="8441" ///
| substr(diag,1,4)=="8442" ///
| substr(diag,1,4)=="8443" ///
| substr(diag,1,4)=="8448" ///
| substr(diag,1,4)=="8449" ///
| substr(diag,1,5)=="84500" ///
| substr(diag,1,5)=="84501" ///
| substr(diag,1,5)=="84502" ///
| substr(diag,1,5)=="84503" ///
| substr(diag,1,5)=="84509" ///
| substr(diag,1,5)=="84510" ///
| substr(diag,1,5)=="84511" ///
| substr(diag,1,5)=="84512" ///
| substr(diag,1,5)=="84513" ///
| substr(diag,1,5)=="84519" ///
| substr(diag,1,4)=="8460" ///
| substr(diag,1,4)=="8461" ///
| substr(diag,1,4)=="8462" ///
| substr(diag,1,4)=="8463" ///
| substr(diag,1,4)=="8468" ///
| substr(diag,1,4)=="8469" ///
| substr(diag,1,4)=="8470" ///
| substr(diag,1,4)=="8471" ///
| substr(diag,1,4)=="8472" ///
| substr(diag,1,4)=="8473" ///
| substr(diag,1,4)=="8474" ///
| substr(diag,1,4)=="8479" ///
| substr(diag,1,4)=="8480" ///
| substr(diag,1,4)=="8481" ///
| substr(diag,1,4)=="8482" ///
| substr(diag,1,4)=="8483" ///
| substr(diag,1,5)=="84840" ///
| substr(diag,1,5)=="84841" ///
| substr(diag,1,5)=="84842" ///
| substr(diag,1,5)=="84849" ///
| substr(diag,1,4)=="8485" 


replace trauma=1 if  substr(diag,1,4)=="8488" ///
| substr(diag,1,4)=="8489" ///
| substr(diag,1,4)=="8500" ///
| substr(diag,1,4)=="8501" ///
| substr(diag,1,5)=="85011" ///
| substr(diag,1,5)=="85012" ///
| substr(diag,1,4)=="8502" ///
| substr(diag,1,4)=="8503" ///
| substr(diag,1,4)=="8504" ///
| substr(diag,1,4)=="8505" ///
| substr(diag,1,4)=="8509" ///
| substr(diag,1,5)=="85100" ///
| substr(diag,1,5)=="85101" ///
| substr(diag,1,5)=="85102" ///
| substr(diag,1,5)=="85103" ///
| substr(diag,1,5)=="85104" ///
| substr(diag,1,5)=="85105" ///
| substr(diag,1,5)=="85106" ///
| substr(diag,1,5)=="85109" ///
| substr(diag,1,5)=="85110" ///
| substr(diag,1,5)=="85111" ///
| substr(diag,1,5)=="85112" ///
| substr(diag,1,5)=="85113" ///
| substr(diag,1,5)=="85114" ///
| substr(diag,1,5)=="85115" ///
| substr(diag,1,5)=="85116" ///
| substr(diag,1,5)=="85119" ///
| substr(diag,1,5)=="85120" ///
| substr(diag,1,5)=="85121" ///
| substr(diag,1,5)=="85122" ///
| substr(diag,1,5)=="85123" ///
| substr(diag,1,5)=="85124" ///
| substr(diag,1,5)=="85125" ///
| substr(diag,1,5)=="85126" ///
| substr(diag,1,5)=="85129" ///
| substr(diag,1,5)=="85130" ///
| substr(diag,1,5)=="85131" ///
| substr(diag,1,5)=="85132" ///
| substr(diag,1,5)=="85133" ///
| substr(diag,1,5)=="85134" ///
| substr(diag,1,5)=="85135" ///
| substr(diag,1,5)=="85136" ///
| substr(diag,1,5)=="85139" ///
| substr(diag,1,5)=="85140" ///
| substr(diag,1,5)=="85141" ///
| substr(diag,1,5)=="85142" ///
| substr(diag,1,5)=="85143" ///
| substr(diag,1,5)=="85144" ///
| substr(diag,1,5)=="85145" ///
| substr(diag,1,5)=="85146" ///
| substr(diag,1,5)=="85149" ///
| substr(diag,1,5)=="85150" ///
| substr(diag,1,5)=="85151" ///
| substr(diag,1,5)=="85152" ///
| substr(diag,1,5)=="85153" ///
| substr(diag,1,5)=="85154" ///
| substr(diag,1,5)=="85155" ///
| substr(diag,1,5)=="85156" ///
| substr(diag,1,5)=="85159" ///
| substr(diag,1,5)=="85160" ///
| substr(diag,1,5)=="85161" ///
| substr(diag,1,5)=="85162" ///
| substr(diag,1,5)=="85163" ///
| substr(diag,1,5)=="85164" ///
| substr(diag,1,5)=="85165" ///
| substr(diag,1,5)=="85166" ///
| substr(diag,1,5)=="85169" ///
| substr(diag,1,5)=="85170" ///
| substr(diag,1,5)=="85171" ///
| substr(diag,1,5)=="85172" ///
| substr(diag,1,5)=="85173" ///
| substr(diag,1,5)=="85174" ///
| substr(diag,1,5)=="85175" ///
| substr(diag,1,5)=="85176" ///
| substr(diag,1,5)=="85179" ///
| substr(diag,1,5)=="85180" ///
| substr(diag,1,5)=="85181" ///
| substr(diag,1,5)=="85182" ///
| substr(diag,1,5)=="85183" ///
| substr(diag,1,5)=="85184" ///
| substr(diag,1,5)=="85185" ///
| substr(diag,1,5)=="85186" ///
| substr(diag,1,5)=="85189" ///
| substr(diag,1,5)=="85190" ///
| substr(diag,1,5)=="85191" ///
| substr(diag,1,5)=="85192" ///
| substr(diag,1,5)=="85193" ///
| substr(diag,1,5)=="85194" ///
| substr(diag,1,5)=="85195" ///
| substr(diag,1,5)=="85196" ///
| substr(diag,1,5)=="85199" ///
| substr(diag,1,5)=="85200" ///
| substr(diag,1,5)=="85201" ///
| substr(diag,1,5)=="85202" ///
| substr(diag,1,5)=="85203" ///
| substr(diag,1,5)=="85204" ///
| substr(diag,1,5)=="85205" ///
| substr(diag,1,5)=="85206" ///
| substr(diag,1,5)=="85209" ///
| substr(diag,1,5)=="85210" ///
| substr(diag,1,5)=="85211" ///
| substr(diag,1,5)=="85212" ///
| substr(diag,1,5)=="85213" ///
| substr(diag,1,5)=="85214" ///
| substr(diag,1,5)=="85215" ///
| substr(diag,1,5)=="85216" ///
| substr(diag,1,5)=="85219" ///
| substr(diag,1,5)=="85220" ///
| substr(diag,1,5)=="85221" ///
| substr(diag,1,5)=="85222" ///
| substr(diag,1,5)=="85223" ///
| substr(diag,1,5)=="85224" ///
| substr(diag,1,5)=="85225" ///
| substr(diag,1,5)=="85226" ///
| substr(diag,1,5)=="85229" ///
| substr(diag,1,5)=="85230" ///
| substr(diag,1,5)=="85231" ///
| substr(diag,1,5)=="85232" ///
| substr(diag,1,5)=="85233" ///
| substr(diag,1,5)=="85234" ///
| substr(diag,1,5)=="85235" ///
| substr(diag,1,5)=="85236" ///
| substr(diag,1,5)=="85239" ///
| substr(diag,1,5)=="85240" ///
| substr(diag,1,5)=="85241" ///
| substr(diag,1,5)=="85242" ///
| substr(diag,1,5)=="85243" ///
| substr(diag,1,5)=="85244" ///
| substr(diag,1,5)=="85245" ///
| substr(diag,1,5)=="85246" ///
| substr(diag,1,5)=="85249" ///
| substr(diag,1,5)=="85250" ///
| substr(diag,1,5)=="85251" ///
| substr(diag,1,5)=="85252"


replace trauma=1 if  substr(diag,1,5)=="85253" ///
| substr(diag,1,5)=="85254" ///
| substr(diag,1,5)=="85255" ///
| substr(diag,1,5)=="85256" ///
| substr(diag,1,5)=="85259" ///
| substr(diag,1,5)=="85300" ///
| substr(diag,1,5)=="85301" ///
| substr(diag,1,5)=="85302" ///
| substr(diag,1,5)=="85303" ///
| substr(diag,1,5)=="85304" ///
| substr(diag,1,5)=="85305" ///
| substr(diag,1,5)=="85306" ///
| substr(diag,1,5)=="85309" ///
| substr(diag,1,5)=="85310" ///
| substr(diag,1,5)=="85311" ///
| substr(diag,1,5)=="85312" ///
| substr(diag,1,5)=="85313" ///
| substr(diag,1,5)=="85314" ///
| substr(diag,1,5)=="85315" ///
| substr(diag,1,5)=="85316" ///
| substr(diag,1,5)=="85319" ///
| substr(diag,1,5)=="85400" ///
| substr(diag,1,5)=="85401" ///
| substr(diag,1,5)=="85402" ///
| substr(diag,1,5)=="85403" ///
| substr(diag,1,5)=="85404" ///
| substr(diag,1,5)=="85405" ///
| substr(diag,1,5)=="85406" ///
| substr(diag,1,5)=="85409" ///
| substr(diag,1,5)=="85410" ///
| substr(diag,1,5)=="85411" ///
| substr(diag,1,5)=="85412" ///
| substr(diag,1,5)=="85413" ///
| substr(diag,1,5)=="85414" ///
| substr(diag,1,5)=="85415" ///
| substr(diag,1,5)=="85416" ///
| substr(diag,1,5)=="85419" ///
| substr(diag,1,4)=="8600" ///
| substr(diag,1,4)=="8601" ///
| substr(diag,1,4)=="8602" ///
| substr(diag,1,4)=="8603" ///
| substr(diag,1,4)=="8604" ///
| substr(diag,1,4)=="8605" ///
| substr(diag,1,5)=="86100" ///
| substr(diag,1,5)=="86101" ///
| substr(diag,1,5)=="86102" ///
| substr(diag,1,5)=="86103" ///
| substr(diag,1,5)=="86110" ///
| substr(diag,1,5)=="86111" ///
| substr(diag,1,5)=="86112" ///
| substr(diag,1,5)=="86113" ///
| substr(diag,1,5)=="86120" ///
| substr(diag,1,5)=="86121" ///
| substr(diag,1,5)=="86122" ///
| substr(diag,1,5)=="86130" ///
| substr(diag,1,5)=="86131" ///
| substr(diag,1,5)=="86132" ///
| substr(diag,1,4)=="8620" ///
| substr(diag,1,4)=="8621" ///
| substr(diag,1,5)=="86221" ///
| substr(diag,1,5)=="86222" ///
| substr(diag,1,5)=="86229" ///
| substr(diag,1,5)=="86231" ///
| substr(diag,1,5)=="86232" ///
| substr(diag,1,5)=="86239" ///
| substr(diag,1,4)=="8628" ///
| substr(diag,1,4)=="8629" ///
| substr(diag,1,4)=="8630" ///
| substr(diag,1,4)=="8631" ///
| substr(diag,1,5)=="86320" ///
| substr(diag,1,5)=="86321" ///
| substr(diag,1,5)=="86329" ///
| substr(diag,1,5)=="86330" ///
| substr(diag,1,5)=="86331" ///
| substr(diag,1,5)=="86339" ///
| substr(diag,1,5)=="86340" ///
| substr(diag,1,5)=="86341" ///
| substr(diag,1,5)=="86342" ///
| substr(diag,1,5)=="86343" ///
| substr(diag,1,5)=="86344" ///
| substr(diag,1,5)=="86345" ///
| substr(diag,1,5)=="86346" ///
| substr(diag,1,5)=="86349" ///
| substr(diag,1,5)=="86350" ///
| substr(diag,1,5)=="86351" ///
| substr(diag,1,5)=="86352" ///
| substr(diag,1,5)=="86353" ///
| substr(diag,1,5)=="86354" ///
| substr(diag,1,5)=="86355" ///
| substr(diag,1,5)=="86356" ///
| substr(diag,1,5)=="86359" ///
| substr(diag,1,5)=="86380" ///
| substr(diag,1,5)=="86381" ///
| substr(diag,1,5)=="86382" ///
| substr(diag,1,5)=="86383" ///
| substr(diag,1,5)=="86384" ///
| substr(diag,1,5)=="86385" ///
| substr(diag,1,5)=="86389" ///
| substr(diag,1,5)=="86390" ///
| substr(diag,1,5)=="86391" ///
| substr(diag,1,5)=="86392" ///
| substr(diag,1,5)=="86393" ///
| substr(diag,1,5)=="86394" ///
| substr(diag,1,5)=="86395" ///
| substr(diag,1,5)=="86399" ///
| substr(diag,1,5)=="86400" ///
| substr(diag,1,5)=="86401" ///
| substr(diag,1,5)=="86402" ///
| substr(diag,1,5)=="86403" ///
| substr(diag,1,5)=="86404" ///
| substr(diag,1,5)=="86405" ///
| substr(diag,1,5)=="86409" ///
| substr(diag,1,5)=="86410" ///
| substr(diag,1,5)=="86411" ///
| substr(diag,1,5)=="86412" ///
| substr(diag,1,5)=="86413" ///
| substr(diag,1,5)=="86414" ///
| substr(diag,1,5)=="86415" ///
| substr(diag,1,5)=="86419" ///
| substr(diag,1,5)=="86500" ///
| substr(diag,1,5)=="86501" 


replace trauma=1 if  substr(diag,1,5)=="86502" ///
| substr(diag,1,5)=="86503" ///
| substr(diag,1,5)=="86504" ///
| substr(diag,1,5)=="86509" ///
| substr(diag,1,5)=="86510" ///
| substr(diag,1,5)=="86511" ///
| substr(diag,1,5)=="86512" ///
| substr(diag,1,5)=="86513" ///
| substr(diag,1,5)=="86514" ///
| substr(diag,1,5)=="86519" ///
| substr(diag,1,5)=="86600" ///
| substr(diag,1,5)=="86601" ///
| substr(diag,1,5)=="86602" ///
| substr(diag,1,5)=="86603" ///
| substr(diag,1,5)=="86610" ///
| substr(diag,1,5)=="86611" ///
| substr(diag,1,5)=="86612" ///
| substr(diag,1,5)=="86613" ///
| substr(diag,1,4)=="8670" ///
| substr(diag,1,4)=="8671" ///
| substr(diag,1,4)=="8672" ///
| substr(diag,1,4)=="8673" ///
| substr(diag,1,4)=="8674" ///
| substr(diag,1,4)=="8675" ///
| substr(diag,1,4)=="8676" ///
| substr(diag,1,4)=="8677" ///
| substr(diag,1,4)=="8678" ///
| substr(diag,1,4)=="8679" ///
| substr(diag,1,5)=="86800" ///
| substr(diag,1,5)=="86801" ///
| substr(diag,1,5)=="86802" ///
| substr(diag,1,5)=="86803" ///
| substr(diag,1,5)=="86804" ///
| substr(diag,1,5)=="86809" ///
| substr(diag,1,5)=="86810" ///
| substr(diag,1,5)=="86811" ///
| substr(diag,1,5)=="86812" ///
| substr(diag,1,5)=="86813" ///
| substr(diag,1,5)=="86814" ///
| substr(diag,1,5)=="86819" ///
| substr(diag,1,4)=="8690" ///
| substr(diag,1,4)=="8691" ///
| substr(diag,1,4)=="8700" ///
| substr(diag,1,4)=="8701" ///
| substr(diag,1,4)=="8702" ///
| substr(diag,1,4)=="8703" ///
| substr(diag,1,4)=="8704" ///
| substr(diag,1,4)=="8708" ///
| substr(diag,1,4)=="8709" ///
| substr(diag,1,4)=="8710" ///
| substr(diag,1,4)=="8711" ///
| substr(diag,1,4)=="8712" ///
| substr(diag,1,4)=="8713" ///
| substr(diag,1,4)=="8714" ///
| substr(diag,1,4)=="8715" ///
| substr(diag,1,4)=="8716" ///
| substr(diag,1,4)=="8717" ///
| substr(diag,1,4)=="8719" ///
| substr(diag,1,5)=="87200" ///
| substr(diag,1,5)=="87201" ///
| substr(diag,1,5)=="87202" ///
| substr(diag,1,5)=="87210" ///
| substr(diag,1,5)=="87211" ///
| substr(diag,1,5)=="87212" ///
| substr(diag,1,5)=="87261" ///
| substr(diag,1,5)=="87262" ///
| substr(diag,1,5)=="87263" ///
| substr(diag,1,5)=="87264" ///
| substr(diag,1,5)=="87269" ///
| substr(diag,1,5)=="87271" ///
| substr(diag,1,5)=="87272" ///
| substr(diag,1,5)=="87273" ///
| substr(diag,1,5)=="87274" ///
| substr(diag,1,5)=="87279" ///
| substr(diag,1,4)=="8728" ///
| substr(diag,1,4)=="8729" ///
| substr(diag,1,4)=="8730" ///
| substr(diag,1,4)=="8731" ///
| substr(diag,1,5)=="87320" ///
| substr(diag,1,5)=="87321" ///
| substr(diag,1,5)=="87322" ///
| substr(diag,1,5)=="87323" ///
| substr(diag,1,5)=="87329" ///
| substr(diag,1,5)=="87330" ///
| substr(diag,1,5)=="87331" ///
| substr(diag,1,5)=="87332" ///
| substr(diag,1,5)=="87333" ///
| substr(diag,1,5)=="87339" ///
| substr(diag,1,5)=="87340" ///
| substr(diag,1,5)=="87341" ///
| substr(diag,1,5)=="87342" ///
| substr(diag,1,5)=="87343" ///
| substr(diag,1,5)=="87344" ///
| substr(diag,1,5)=="87349" ///
| substr(diag,1,5)=="87350" ///
| substr(diag,1,5)=="87351" ///
| substr(diag,1,5)=="87352" ///
| substr(diag,1,5)=="87353" ///
| substr(diag,1,5)=="87354" ///
| substr(diag,1,5)=="87359" ///
| substr(diag,1,5)=="87360" ///
| substr(diag,1,5)=="87361" ///
| substr(diag,1,5)=="87362" ///
| substr(diag,1,5)=="87363" ///
| substr(diag,1,5)=="87364" ///
| substr(diag,1,5)=="87365" ///
| substr(diag,1,5)=="87369" ///
| substr(diag,1,5)=="87370" ///
| substr(diag,1,5)=="87371" ///
| substr(diag,1,5)=="87372" ///
| substr(diag,1,5)=="87373" ///
| substr(diag,1,5)=="87374" ///
| substr(diag,1,5)=="87375" ///
| substr(diag,1,5)=="87379" ///
| substr(diag,1,4)=="8738" ///
| substr(diag,1,4)=="8739" ///
| substr(diag,1,5)=="87400" ///
| substr(diag,1,5)=="87401" ///
| substr(diag,1,5)=="87402" ///
| substr(diag,1,5)=="87410" ///
| substr(diag,1,5)=="87411" 


replace trauma=1 if  substr(diag,1,5)=="87412" ///
| substr(diag,1,4)=="8742" ///
| substr(diag,1,4)=="8743" ///
| substr(diag,1,4)=="8744" ///
| substr(diag,1,4)=="8745" ///
| substr(diag,1,4)=="8748" ///
| substr(diag,1,4)=="8749" ///
| substr(diag,1,4)=="8750" ///
| substr(diag,1,4)=="8751" ///
| substr(diag,1,4)=="8760" ///
| substr(diag,1,4)=="8761" ///
| substr(diag,1,4)=="8770" ///
| substr(diag,1,4)=="8771" ///
| substr(diag,1,4)=="8780" ///
| substr(diag,1,4)=="8781" ///
| substr(diag,1,4)=="8782" ///
| substr(diag,1,4)=="8783" ///
| substr(diag,1,4)=="8784" ///
| substr(diag,1,4)=="8785" ///
| substr(diag,1,4)=="8786" ///
| substr(diag,1,4)=="8787" ///
| substr(diag,1,4)=="8788" ///
| substr(diag,1,4)=="8789" ///
| substr(diag,1,4)=="8790" ///
| substr(diag,1,4)=="8791" ///
| substr(diag,1,4)=="8792" ///
| substr(diag,1,4)=="8793" ///
| substr(diag,1,4)=="8794" ///
| substr(diag,1,4)=="8795" ///
| substr(diag,1,4)=="8796" ///
| substr(diag,1,4)=="8797" ///
| substr(diag,1,4)=="8798" ///
| substr(diag,1,4)=="8799" ///
| substr(diag,1,5)=="88000" ///
| substr(diag,1,5)=="88001" ///
| substr(diag,1,5)=="88002" ///
| substr(diag,1,5)=="88003" ///
| substr(diag,1,5)=="88009" ///
| substr(diag,1,5)=="88010" ///
| substr(diag,1,5)=="88011" ///
| substr(diag,1,5)=="88012" ///
| substr(diag,1,5)=="88013" ///
| substr(diag,1,5)=="88019" ///
| substr(diag,1,5)=="88020" ///
| substr(diag,1,5)=="88021" ///
| substr(diag,1,5)=="88022" ///
| substr(diag,1,5)=="88023" ///
| substr(diag,1,5)=="88029" ///
| substr(diag,1,5)=="88100" ///
| substr(diag,1,5)=="88101" ///
| substr(diag,1,5)=="88102" ///
| substr(diag,1,5)=="88110" ///
| substr(diag,1,5)=="88111" ///
| substr(diag,1,5)=="88112" ///
| substr(diag,1,5)=="88120" ///
| substr(diag,1,5)=="88121" ///
| substr(diag,1,5)=="88122" ///
| substr(diag,1,4)=="8820" ///
| substr(diag,1,4)=="8821" ///
| substr(diag,1,4)=="8822" ///
| substr(diag,1,4)=="8830" ///
| substr(diag,1,4)=="8831" ///
| substr(diag,1,4)=="8832" ///
| substr(diag,1,4)=="8840" ///
| substr(diag,1,4)=="8841" ///
| substr(diag,1,4)=="8842" ///
| substr(diag,1,4)=="8850" ///
| substr(diag,1,4)=="8851" ///
| substr(diag,1,4)=="8860" ///
| substr(diag,1,4)=="8861" ///
| substr(diag,1,4)=="8870" ///
| substr(diag,1,4)=="8871" ///
| substr(diag,1,4)=="8872" ///
| substr(diag,1,4)=="8873" ///
| substr(diag,1,4)=="8874" ///
| substr(diag,1,4)=="8875" ///
| substr(diag,1,4)=="8876" ///
| substr(diag,1,4)=="8877" ///
| substr(diag,1,4)=="8900" ///
| substr(diag,1,4)=="8901" ///
| substr(diag,1,4)=="8902" ///
| substr(diag,1,4)=="8910" ///
| substr(diag,1,4)=="8911" ///
| substr(diag,1,4)=="8912" ///
| substr(diag,1,4)=="8920" ///
| substr(diag,1,4)=="8921" ///
| substr(diag,1,4)=="8922" ///
| substr(diag,1,4)=="8930" ///
| substr(diag,1,4)=="8931" ///
| substr(diag,1,4)=="8932" ///
| substr(diag,1,4)=="8940" ///
| substr(diag,1,4)=="8941" ///
| substr(diag,1,4)=="8942" ///
| substr(diag,1,4)=="8950" ///
| substr(diag,1,4)=="8951" ///
| substr(diag,1,4)=="8960" ///
| substr(diag,1,4)=="8961" ///
| substr(diag,1,4)=="8962" ///
| substr(diag,1,4)=="8963" ///
| substr(diag,1,4)=="8970" ///
| substr(diag,1,4)=="8971" ///
| substr(diag,1,4)=="8972" ///
| substr(diag,1,4)=="8973" ///
| substr(diag,1,4)=="8974" ///
| substr(diag,1,4)=="8975" ///
| substr(diag,1,4)=="8976" 


replace trauma=1 if  substr(diag,1,4)=="8977" ///
| substr(diag,1,5)=="90000" ///
| substr(diag,1,5)=="90001" ///
| substr(diag,1,5)=="90002" ///
| substr(diag,1,5)=="90003" ///
| substr(diag,1,4)=="9001" ///
| substr(diag,1,5)=="90081" ///
| substr(diag,1,5)=="90082" ///
| substr(diag,1,5)=="90089" ///
| substr(diag,1,4)=="9009" ///
| substr(diag,1,4)=="9010" ///
| substr(diag,1,4)=="9011" ///
| substr(diag,1,4)=="9012" ///
| substr(diag,1,4)=="9013" ///
| substr(diag,1,5)=="90140" ///
| substr(diag,1,5)=="90141" ///
| substr(diag,1,5)=="90142" ///
| substr(diag,1,5)=="90181" ///
| substr(diag,1,5)=="90182" ///
| substr(diag,1,5)=="90183" ///
| substr(diag,1,5)=="90189" ///
| substr(diag,1,4)=="9019" ///
| substr(diag,1,4)=="9020" ///
| substr(diag,1,5)=="90210" ///
| substr(diag,1,5)=="90211" ///
| substr(diag,1,5)=="90219" ///
| substr(diag,1,5)=="90220" ///
| substr(diag,1,5)=="90221" ///
| substr(diag,1,5)=="90222" ///
| substr(diag,1,5)=="90223" ///
| substr(diag,1,5)=="90224" ///
| substr(diag,1,5)=="90225" ///
| substr(diag,1,5)=="90226" ///
| substr(diag,1,5)=="90227" ///
| substr(diag,1,5)=="90229" ///
| substr(diag,1,5)=="90231" ///
| substr(diag,1,5)=="90232" ///
| substr(diag,1,5)=="90233" ///
| substr(diag,1,5)=="90234" ///
| substr(diag,1,5)=="90239" ///
| substr(diag,1,5)=="90240" ///
| substr(diag,1,5)=="90241" ///
| substr(diag,1,5)=="90242" ///
| substr(diag,1,5)=="90249" ///
| substr(diag,1,5)=="90250" ///
| substr(diag,1,5)=="90251" ///
| substr(diag,1,5)=="90252" ///
| substr(diag,1,5)=="90253" ///
| substr(diag,1,5)=="90254" ///
| substr(diag,1,5)=="90255" ///
| substr(diag,1,5)=="90256" ///
| substr(diag,1,5)=="90259" ///
| substr(diag,1,5)=="90281" ///
| substr(diag,1,5)=="90282" ///
| substr(diag,1,5)=="90287" ///
| substr(diag,1,5)=="90289" ///
| substr(diag,1,4)=="9029" ///
| substr(diag,1,5)=="90300" ///
| substr(diag,1,5)=="90301" ///
| substr(diag,1,5)=="90302" ///
| substr(diag,1,4)=="9031" ///
| substr(diag,1,4)=="9032" ///
| substr(diag,1,4)=="9033" ///
| substr(diag,1,4)=="9034" ///
| substr(diag,1,4)=="9035" ///
| substr(diag,1,4)=="9038" ///
| substr(diag,1,4)=="9039" ///
| substr(diag,1,4)=="9040" ///
| substr(diag,1,4)=="9041" ///
| substr(diag,1,4)=="9042" ///
| substr(diag,1,4)=="9043" ///
| substr(diag,1,5)=="90440" ///
| substr(diag,1,5)=="90441" ///
| substr(diag,1,5)=="90442" ///
| substr(diag,1,5)=="90450" ///
| substr(diag,1,5)=="90451" ///
| substr(diag,1,5)=="90452" ///
| substr(diag,1,5)=="90453" ///
| substr(diag,1,5)=="90454" ///
| substr(diag,1,4)=="9046" ///
| substr(diag,1,4)=="9047" ///
| substr(diag,1,4)=="9048" ///
| substr(diag,1,4)=="9049" ///
| substr(diag,1,4)=="9100" ///
| substr(diag,1,4)=="9101" ///
| substr(diag,1,4)=="9102" ///
| substr(diag,1,4)=="9103" ///
| substr(diag,1,4)=="9104" ///
| substr(diag,1,4)=="9105" ///
| substr(diag,1,4)=="9106" ///
| substr(diag,1,4)=="9107" ///
| substr(diag,1,4)=="9108" ///
| substr(diag,1,4)=="9109" ///
| substr(diag,1,4)=="9110" ///
| substr(diag,1,4)=="9111" ///
| substr(diag,1,4)=="9112" ///
| substr(diag,1,4)=="9113" ///
| substr(diag,1,4)=="9114" ///
| substr(diag,1,4)=="9115" ///
| substr(diag,1,4)=="9116" ///
| substr(diag,1,4)=="9117" ///
| substr(diag,1,4)=="9118" ///
| substr(diag,1,4)=="9119" ///
| substr(diag,1,4)=="9120" ///
| substr(diag,1,4)=="9121" 


replace trauma=1 if  substr(diag,1,4)=="9122" ///
| substr(diag,1,4)=="9123" ///
| substr(diag,1,4)=="9124" ///
| substr(diag,1,4)=="9125" ///
| substr(diag,1,4)=="9126" ///
| substr(diag,1,4)=="9127" ///
| substr(diag,1,4)=="9128" ///
| substr(diag,1,4)=="9129" ///
| substr(diag,1,4)=="9130" ///
| substr(diag,1,4)=="9131" ///
| substr(diag,1,4)=="9132" ///
| substr(diag,1,4)=="9133" ///
| substr(diag,1,4)=="9134" ///
| substr(diag,1,4)=="9135" ///
| substr(diag,1,4)=="9136" ///
| substr(diag,1,4)=="9137" ///
| substr(diag,1,4)=="9138" ///
| substr(diag,1,4)=="9139" ///
| substr(diag,1,4)=="9140" ///
| substr(diag,1,4)=="9141" ///
| substr(diag,1,4)=="9142" ///
| substr(diag,1,4)=="9143" ///
| substr(diag,1,4)=="9144" ///
| substr(diag,1,4)=="9145" ///
| substr(diag,1,4)=="9146" ///
| substr(diag,1,4)=="9147" ///
| substr(diag,1,4)=="9148" ///
| substr(diag,1,4)=="9149" ///
| substr(diag,1,4)=="9150" ///
| substr(diag,1,4)=="9151" ///
| substr(diag,1,4)=="9152" ///
| substr(diag,1,4)=="9153" ///
| substr(diag,1,4)=="9154" ///
| substr(diag,1,4)=="9155" ///
| substr(diag,1,4)=="9156" ///
| substr(diag,1,4)=="9157" ///
| substr(diag,1,4)=="9158" ///
| substr(diag,1,4)=="9159" ///
| substr(diag,1,4)=="9160" ///
| substr(diag,1,4)=="9161" ///
| substr(diag,1,4)=="9162" ///
| substr(diag,1,4)=="9163" ///
| substr(diag,1,4)=="9164" ///
| substr(diag,1,4)=="9165" ///
| substr(diag,1,4)=="9166" ///
| substr(diag,1,4)=="9167" ///
| substr(diag,1,4)=="9168" ///
| substr(diag,1,4)=="9169" ///
| substr(diag,1,4)=="9170" ///
| substr(diag,1,4)=="9171" ///
| substr(diag,1,4)=="9172" ///
| substr(diag,1,4)=="9173" ///
| substr(diag,1,4)=="9174" ///
| substr(diag,1,4)=="9175" ///
| substr(diag,1,4)=="9176" ///
| substr(diag,1,4)=="9177" ///
| substr(diag,1,4)=="9178" ///
| substr(diag,1,4)=="9179" ///
| substr(diag,1,4)=="9180" ///
| substr(diag,1,4)=="9181" ///
| substr(diag,1,4)=="9182" ///
| substr(diag,1,4)=="9189" ///
| substr(diag,1,4)=="9190" ///
| substr(diag,1,4)=="9191" ///
| substr(diag,1,4)=="9192" ///
| substr(diag,1,4)=="9193" ///
| substr(diag,1,4)=="9194" ///
| substr(diag,1,4)=="9195" ///
| substr(diag,1,4)=="9196" ///
| substr(diag,1,4)=="9197" ///
| substr(diag,1,4)=="9198" ///
| substr(diag,1,4)=="9199" ///
| substr(diag,1,3)=="920" ///
| substr(diag,1,4)=="9210" ///
| substr(diag,1,4)=="9211" ///
| substr(diag,1,4)=="9212" ///
| substr(diag,1,4)=="9213" ///
| substr(diag,1,4)=="9219" ///
| substr(diag,1,4)=="9220" ///
| substr(diag,1,4)=="9221" ///
| substr(diag,1,4)=="9222" ///
| substr(diag,1,5)=="92231" ///
| substr(diag,1,5)=="92232" ///
| substr(diag,1,5)=="92233" ///
| substr(diag,1,4)=="9224" ///
| substr(diag,1,4)=="9228" ///
| substr(diag,1,4)=="9229" ///
| substr(diag,1,5)=="92300" ///
| substr(diag,1,5)=="92301" ///
| substr(diag,1,5)=="92302" ///
| substr(diag,1,5)=="92303" ///
| substr(diag,1,5)=="92309" ///
| substr(diag,1,5)=="92310" ///
| substr(diag,1,5)=="92311" ///
| substr(diag,1,5)=="92320" ///
| substr(diag,1,5)=="92321" ///
| substr(diag,1,4)=="9233" ///
| substr(diag,1,4)=="9238" ///
| substr(diag,1,4)=="9239" ///
| substr(diag,1,5)=="92400" ///
| substr(diag,1,5)=="92401" ///
| substr(diag,1,5)=="92410" ///
| substr(diag,1,5)=="92411" ///
| substr(diag,1,5)=="92420" ///
| substr(diag,1,5)=="92421" ///
| substr(diag,1,4)=="9243" ///
| substr(diag,1,4)=="9244" 


replace trauma=1 if substr(diag,1,4)=="9245" ///
| substr(diag,1,4)=="9248" ///
| substr(diag,1,4)=="9249" ///
| substr(diag,1,4)=="9251" ///
| substr(diag,1,4)=="9252" ///
| substr(diag,1,4)=="9260" ///
| substr(diag,1,5)=="92611" ///
| substr(diag,1,5)=="92612" ///
| substr(diag,1,5)=="92619" ///
| substr(diag,1,4)=="9268" ///
| substr(diag,1,4)=="9269" ///
| substr(diag,1,5)=="92700" ///
| substr(diag,1,5)=="92701" ///
| substr(diag,1,5)=="92702" ///
| substr(diag,1,5)=="92703" ///
| substr(diag,1,5)=="92709" ///
| substr(diag,1,5)=="92710" ///
| substr(diag,1,5)=="92711" ///
| substr(diag,1,5)=="92720" ///
| substr(diag,1,5)=="92721" ///
| substr(diag,1,4)=="9273" ///
| substr(diag,1,4)=="9278" ///
| substr(diag,1,4)=="9279" ///
| substr(diag,1,5)=="92800" ///
| substr(diag,1,5)=="92801" ///
| substr(diag,1,5)=="92810" ///
| substr(diag,1,5)=="92811" ///
| substr(diag,1,5)=="92820" ///
| substr(diag,1,5)=="92821" ///
| substr(diag,1,4)=="9283" ///
| substr(diag,1,4)=="9288" ///
| substr(diag,1,4)=="9289" ///
| substr(diag,1,4)=="9290" ///
| substr(diag,1,4)=="9299" ///
| substr(diag,1,4)=="9400" ///
| substr(diag,1,4)=="9401" ///
| substr(diag,1,4)=="9402" ///
| substr(diag,1,4)=="9403" ///
| substr(diag,1,4)=="9404" ///
| substr(diag,1,4)=="9405" ///
| substr(diag,1,4)=="9409" ///
| substr(diag,1,5)=="94100" ///
| substr(diag,1,5)=="94101" ///
| substr(diag,1,5)=="94102" ///
| substr(diag,1,5)=="94103" ///
| substr(diag,1,5)=="94104" ///
| substr(diag,1,5)=="94105" ///
| substr(diag,1,5)=="94106" ///
| substr(diag,1,5)=="94107" ///
| substr(diag,1,5)=="94108" ///
| substr(diag,1,5)=="94109" ///
| substr(diag,1,5)=="94110" ///
| substr(diag,1,5)=="94111" ///
| substr(diag,1,5)=="94112" ///
| substr(diag,1,5)=="94113" ///
| substr(diag,1,5)=="94114" ///
| substr(diag,1,5)=="94115" ///
| substr(diag,1,5)=="94116" ///
| substr(diag,1,5)=="94117" ///
| substr(diag,1,5)=="94118" ///
| substr(diag,1,5)=="94119" ///
| substr(diag,1,5)=="94120" ///
| substr(diag,1,5)=="94121" ///
| substr(diag,1,5)=="94122" ///
| substr(diag,1,5)=="94123" ///
| substr(diag,1,5)=="94124" ///
| substr(diag,1,5)=="94125" ///
| substr(diag,1,5)=="94126" ///
| substr(diag,1,5)=="94127" ///
| substr(diag,1,5)=="94128" ///
| substr(diag,1,5)=="94129" ///
| substr(diag,1,5)=="94130" ///
| substr(diag,1,5)=="94131" ///
| substr(diag,1,5)=="94132" ///
| substr(diag,1,5)=="94133" ///
| substr(diag,1,5)=="94134" ///
| substr(diag,1,5)=="94135" ///
| substr(diag,1,5)=="94136" ///
| substr(diag,1,5)=="94137" ///
| substr(diag,1,5)=="94138" ///
| substr(diag,1,5)=="94139" ///
| substr(diag,1,5)=="94140" ///
| substr(diag,1,5)=="94141" 


replace trauma=1 if  substr(diag,1,5)=="94142" ///
| substr(diag,1,5)=="94143" ///
| substr(diag,1,5)=="94144" ///
| substr(diag,1,5)=="94145" ///
| substr(diag,1,5)=="94146" ///
| substr(diag,1,5)=="94147" ///
| substr(diag,1,5)=="94148" ///
| substr(diag,1,5)=="94149" ///
| substr(diag,1,5)=="94150" ///
| substr(diag,1,5)=="94151" ///
| substr(diag,1,5)=="94152" ///
| substr(diag,1,5)=="94153" ///
| substr(diag,1,5)=="94154" ///
| substr(diag,1,5)=="94155" ///
| substr(diag,1,5)=="94156" ///
| substr(diag,1,5)=="94157" ///
| substr(diag,1,5)=="94158" ///
| substr(diag,1,5)=="94159" ///
| substr(diag,1,5)=="94200" ///
| substr(diag,1,5)=="94201" ///
| substr(diag,1,5)=="94202" ///
| substr(diag,1,5)=="94203" ///
| substr(diag,1,5)=="94204" ///
| substr(diag,1,5)=="94205" ///
| substr(diag,1,5)=="94209" ///
| substr(diag,1,5)=="94210" ///
| substr(diag,1,5)=="94211" ///
| substr(diag,1,5)=="94212" ///
| substr(diag,1,5)=="94213" ///
| substr(diag,1,5)=="94214" ///
| substr(diag,1,5)=="94215" ///
| substr(diag,1,5)=="94219" ///
| substr(diag,1,5)=="94220" ///
| substr(diag,1,5)=="94221" ///
| substr(diag,1,5)=="94222" ///
| substr(diag,1,5)=="94223" ///
| substr(diag,1,5)=="94224" ///
| substr(diag,1,5)=="94225" ///
| substr(diag,1,5)=="94229" ///
| substr(diag,1,5)=="94230" ///
| substr(diag,1,5)=="94231" ///
| substr(diag,1,5)=="94232" ///
| substr(diag,1,5)=="94233" ///
| substr(diag,1,5)=="94234" ///
| substr(diag,1,5)=="94235" ///
| substr(diag,1,5)=="94239" ///
| substr(diag,1,5)=="94240" ///
| substr(diag,1,5)=="94241" ///
| substr(diag,1,5)=="94242" ///
| substr(diag,1,5)=="94243" ///
| substr(diag,1,5)=="94244" ///
| substr(diag,1,5)=="94245" ///
| substr(diag,1,5)=="94249" ///
| substr(diag,1,5)=="94250" ///
| substr(diag,1,5)=="94251" ///
| substr(diag,1,5)=="94252" ///
| substr(diag,1,5)=="94253" ///
| substr(diag,1,5)=="94254" ///
| substr(diag,1,5)=="94255" ///
| substr(diag,1,5)=="94259" ///
| substr(diag,1,5)=="94300" ///
| substr(diag,1,5)=="94301" ///
| substr(diag,1,5)=="94302" ///
| substr(diag,1,5)=="94303" ///
| substr(diag,1,5)=="94304" ///
| substr(diag,1,5)=="94305" ///
| substr(diag,1,5)=="94306" ///
| substr(diag,1,5)=="94309" ///
| substr(diag,1,5)=="94310" ///
| substr(diag,1,5)=="94311" ///
| substr(diag,1,5)=="94312" ///
| substr(diag,1,5)=="94313" ///
| substr(diag,1,5)=="94314" ///
| substr(diag,1,5)=="94315" ///
| substr(diag,1,5)=="94316" ///
| substr(diag,1,5)=="94319" ///
| substr(diag,1,5)=="94320" ///
| substr(diag,1,5)=="94321" ///
| substr(diag,1,5)=="94322" ///
| substr(diag,1,5)=="94323" ///
| substr(diag,1,5)=="94324" ///
| substr(diag,1,5)=="94325" ///
| substr(diag,1,5)=="94326" ///
| substr(diag,1,5)=="94329" ///
| substr(diag,1,5)=="94330" ///
| substr(diag,1,5)=="94331" ///
| substr(diag,1,5)=="94332" ///
| substr(diag,1,5)=="94333" ///
| substr(diag,1,5)=="94334" ///
| substr(diag,1,5)=="94335" ///
| substr(diag,1,5)=="94336" ///
| substr(diag,1,5)=="94339" ///
| substr(diag,1,5)=="94340" ///
| substr(diag,1,5)=="94341" ///
| substr(diag,1,5)=="94342" ///
| substr(diag,1,5)=="94343" ///
| substr(diag,1,5)=="94344" ///
| substr(diag,1,5)=="94345" ///
| substr(diag,1,5)=="94346" ///
| substr(diag,1,5)=="94349" ///
| substr(diag,1,5)=="94350" ///
| substr(diag,1,5)=="94351" ///
| substr(diag,1,5)=="94352" ///
| substr(diag,1,5)=="94353" ///
| substr(diag,1,5)=="94354" ///
| substr(diag,1,5)=="94355" ///
| substr(diag,1,5)=="94356" ///
| substr(diag,1,5)=="94359" ///
| substr(diag,1,5)=="94400" ///
| substr(diag,1,5)=="94401" ///
| substr(diag,1,5)=="94402" ///
| substr(diag,1,5)=="94403" ///
| substr(diag,1,5)=="94404" ///
| substr(diag,1,5)=="94405" ///
| substr(diag,1,5)=="94406" ///
| substr(diag,1,5)=="94407" ///
| substr(diag,1,5)=="94408" ///
| substr(diag,1,5)=="94410" ///
| substr(diag,1,5)=="94411" ///
| substr(diag,1,5)=="94412" ///
| substr(diag,1,5)=="94413" ///
| substr(diag,1,5)=="94414" ///
| substr(diag,1,5)=="94415" ///
| substr(diag,1,5)=="94416" ///
| substr(diag,1,5)=="94417" ///
| substr(diag,1,5)=="94418" ///
| substr(diag,1,5)=="94420" ///
| substr(diag,1,5)=="94421" ///
| substr(diag,1,5)=="94422" 


replace trauma=1 if  substr(diag,1,5)=="94423" ///
| substr(diag,1,5)=="94424" ///
| substr(diag,1,5)=="94425" ///
| substr(diag,1,5)=="94426" ///
| substr(diag,1,5)=="94427" ///
| substr(diag,1,5)=="94428" ///
| substr(diag,1,5)=="94430" ///
| substr(diag,1,5)=="94431" ///
| substr(diag,1,5)=="94432" ///
| substr(diag,1,5)=="94433" ///
| substr(diag,1,5)=="94434" ///
| substr(diag,1,5)=="94435" ///
| substr(diag,1,5)=="94436" ///
| substr(diag,1,5)=="94437" ///
| substr(diag,1,5)=="94438" ///
| substr(diag,1,5)=="94440" ///
| substr(diag,1,5)=="94441" ///
| substr(diag,1,5)=="94442" ///
| substr(diag,1,5)=="94443" ///
| substr(diag,1,5)=="94444" ///
| substr(diag,1,5)=="94445" ///
| substr(diag,1,5)=="94446" ///
| substr(diag,1,5)=="94447" ///
| substr(diag,1,5)=="94448" ///
| substr(diag,1,5)=="94450" ///
| substr(diag,1,5)=="94451" ///
| substr(diag,1,5)=="94452" ///
| substr(diag,1,5)=="94453" ///
| substr(diag,1,5)=="94454" ///
| substr(diag,1,5)=="94455" ///
| substr(diag,1,5)=="94456" ///
| substr(diag,1,5)=="94457" ///
| substr(diag,1,5)=="94458" ///
| substr(diag,1,5)=="94500" ///
| substr(diag,1,5)=="94501" ///
| substr(diag,1,5)=="94502" ///
| substr(diag,1,5)=="94503" ///
| substr(diag,1,5)=="94504" ///
| substr(diag,1,5)=="94505" ///
| substr(diag,1,5)=="94506" ///
| substr(diag,1,5)=="94509" ///
| substr(diag,1,5)=="94510" ///
| substr(diag,1,5)=="94511" ///
| substr(diag,1,5)=="94512" ///
| substr(diag,1,5)=="94513" ///
| substr(diag,1,5)=="94514" ///
| substr(diag,1,5)=="94515" ///
| substr(diag,1,5)=="94516" ///
| substr(diag,1,5)=="94519" ///
| substr(diag,1,5)=="94520" ///
| substr(diag,1,5)=="94521" ///
| substr(diag,1,5)=="94522" ///
| substr(diag,1,5)=="94523" ///
| substr(diag,1,5)=="94524" ///
| substr(diag,1,5)=="94525" ///
| substr(diag,1,5)=="94526" ///
| substr(diag,1,5)=="94529" ///
| substr(diag,1,5)=="94530" ///
| substr(diag,1,5)=="94531" ///
| substr(diag,1,5)=="94532" ///
| substr(diag,1,5)=="94533" ///
| substr(diag,1,5)=="94534" ///
| substr(diag,1,5)=="94535" ///
| substr(diag,1,5)=="94536" ///
| substr(diag,1,5)=="94539" ///
| substr(diag,1,5)=="94540" ///
| substr(diag,1,5)=="94541" ///
| substr(diag,1,5)=="94542" ///
| substr(diag,1,5)=="94543" ///
| substr(diag,1,5)=="94544" ///
| substr(diag,1,5)=="94545" ///
| substr(diag,1,5)=="94546" ///
| substr(diag,1,5)=="94549" ///
| substr(diag,1,5)=="94550" ///
| substr(diag,1,5)=="94551" ///
| substr(diag,1,5)=="94552" ///
| substr(diag,1,5)=="94553" ///
| substr(diag,1,5)=="94554" ///
| substr(diag,1,5)=="94555" ///
| substr(diag,1,5)=="94556" ///
| substr(diag,1,5)=="94559" ///
| substr(diag,1,4)=="9460" ///
| substr(diag,1,4)=="9461" ///
| substr(diag,1,4)=="9462" ///
| substr(diag,1,4)=="9463" ///
| substr(diag,1,4)=="9464" ///
| substr(diag,1,4)=="9465" ///
| substr(diag,1,4)=="9470" ///
| substr(diag,1,4)=="9471" ///
| substr(diag,1,4)=="9472" ///
| substr(diag,1,4)=="9473" ///
| substr(diag,1,4)=="9474" ///
| substr(diag,1,4)=="9478" ///
| substr(diag,1,4)=="9479" ///
| substr(diag,1,5)=="94800" ///
| substr(diag,1,5)=="94810" ///
| substr(diag,1,5)=="94811" ///
| substr(diag,1,5)=="94820" ///
| substr(diag,1,5)=="94821" ///
| substr(diag,1,5)=="94822" ///
| substr(diag,1,5)=="94830" ///
| substr(diag,1,5)=="94831" ///
| substr(diag,1,5)=="94832" ///
| substr(diag,1,5)=="94833" ///
| substr(diag,1,5)=="94840" ///
| substr(diag,1,5)=="94841" ///
| substr(diag,1,5)=="94842" ///
| substr(diag,1,5)=="94843" ///
| substr(diag,1,5)=="94844" ///
| substr(diag,1,5)=="94850" ///
| substr(diag,1,5)=="94851" ///
| substr(diag,1,5)=="94852" 


replace trauma=1 if  substr(diag,1,5)=="94853" ///
| substr(diag,1,5)=="94854" ///
| substr(diag,1,5)=="94855" ///
| substr(diag,1,5)=="94860" ///
| substr(diag,1,5)=="94861" ///
| substr(diag,1,5)=="94862" ///
| substr(diag,1,5)=="94863" ///
| substr(diag,1,5)=="94864" ///
| substr(diag,1,5)=="94865" ///
| substr(diag,1,5)=="94866" ///
| substr(diag,1,5)=="94870" ///
| substr(diag,1,5)=="94871" ///
| substr(diag,1,5)=="94872" ///
| substr(diag,1,5)=="94873" ///
| substr(diag,1,5)=="94874" ///
| substr(diag,1,5)=="94875" ///
| substr(diag,1,5)=="94876" ///
| substr(diag,1,5)=="94877" ///
| substr(diag,1,5)=="94880" ///
| substr(diag,1,5)=="94881" ///
| substr(diag,1,5)=="94882" ///
| substr(diag,1,5)=="94883" ///
| substr(diag,1,5)=="94884" ///
| substr(diag,1,5)=="94885" ///
| substr(diag,1,5)=="94886" ///
| substr(diag,1,5)=="94887" ///
| substr(diag,1,5)=="94888" ///
| substr(diag,1,5)=="94890" ///
| substr(diag,1,5)=="94891" ///
| substr(diag,1,5)=="94892" ///
| substr(diag,1,5)=="94893" ///
| substr(diag,1,5)=="94894" ///
| substr(diag,1,5)=="94895" ///
| substr(diag,1,5)=="94896" ///
| substr(diag,1,5)=="94897" ///
| substr(diag,1,5)=="94898" ///
| substr(diag,1,5)=="94899" ///
| substr(diag,1,4)=="9490" ///
| substr(diag,1,4)=="9491" ///
| substr(diag,1,4)=="9492" ///
| substr(diag,1,4)=="9493" ///
| substr(diag,1,4)=="9494" ///
| substr(diag,1,4)=="9495" ///
| substr(diag,1,4)=="9500" ///
| substr(diag,1,4)=="9501" ///
| substr(diag,1,4)=="9502" ///
| substr(diag,1,4)=="9503" ///
| substr(diag,1,4)=="9509" ///
| substr(diag,1,4)=="9510" ///
| substr(diag,1,4)=="9511" ///
| substr(diag,1,4)=="9512" ///
| substr(diag,1,4)=="9513" ///
| substr(diag,1,4)=="9514" ///
| substr(diag,1,4)=="9515" ///
| substr(diag,1,4)=="9516" ///
| substr(diag,1,4)=="9517" ///
| substr(diag,1,4)=="9518" ///
| substr(diag,1,4)=="9519" ///
| substr(diag,1,5)=="95200" ///
| substr(diag,1,5)=="95201" ///
| substr(diag,1,5)=="95202" ///
| substr(diag,1,5)=="95203" ///
| substr(diag,1,5)=="95204" ///
| substr(diag,1,5)=="95205" ///
| substr(diag,1,5)=="95206" ///
| substr(diag,1,5)=="95207" ///
| substr(diag,1,5)=="95208" ///
| substr(diag,1,5)=="95209" ///
| substr(diag,1,5)=="95210" ///
| substr(diag,1,5)=="95211" ///
| substr(diag,1,5)=="95212" ///
| substr(diag,1,5)=="95213" ///
| substr(diag,1,5)=="95214" ///
| substr(diag,1,5)=="95215" ///
| substr(diag,1,5)=="95216" ///
| substr(diag,1,5)=="95217" ///
| substr(diag,1,5)=="95218" ///
| substr(diag,1,5)=="95219" ///
| substr(diag,1,4)=="9522" ///
| substr(diag,1,4)=="9523" ///
| substr(diag,1,4)=="9524" ///
| substr(diag,1,4)=="9528" ///
| substr(diag,1,4)=="9529" ///
| substr(diag,1,4)=="9530" ///
| substr(diag,1,4)=="9531" ///
| substr(diag,1,4)=="9532" ///
| substr(diag,1,4)=="9533" ///
| substr(diag,1,4)=="9534" ///
| substr(diag,1,4)=="9535" ///
| substr(diag,1,4)=="9538" ///
| substr(diag,1,4)=="9539" ///
| substr(diag,1,4)=="9540" ///
| substr(diag,1,4)=="9541" ///
| substr(diag,1,4)=="9548" ///
| substr(diag,1,4)=="9549" ///
| substr(diag,1,4)=="9550" ///
| substr(diag,1,4)=="9551" ///
| substr(diag,1,4)=="9552" ///
| substr(diag,1,4)=="9553" ///
| substr(diag,1,4)=="9554" ///
| substr(diag,1,4)=="9555" ///
| substr(diag,1,4)=="9556" ///
| substr(diag,1,4)=="9557" ///
| substr(diag,1,4)=="9558" ///
| substr(diag,1,4)=="9559" ///
| substr(diag,1,4)=="9560" ///
| substr(diag,1,4)=="9561" ///
| substr(diag,1,4)=="9562" ///
| substr(diag,1,4)=="9563" ///
| substr(diag,1,4)=="9564" ///
| substr(diag,1,4)=="9565" ///
| substr(diag,1,4)=="9568" ///
| substr(diag,1,4)=="9569" ///
| substr(diag,1,4)=="9570" ///
| substr(diag,1,4)=="9571" ///
| substr(diag,1,4)=="9578" ///
| substr(diag,1,4)=="9579" ///
| substr(diag,1,5)=="95901" ///
| substr(diag,1,5)=="95909" ///
| substr(diag,1,4)=="9591" ///
| substr(diag,1,5)=="95911" ///
| substr(diag,1,5)=="95912" ///
| substr(diag,1,5)=="95913" ///
| substr(diag,1,5)=="95914" ///
| substr(diag,1,5)=="95919" ///
| substr(diag,1,4)=="9592" ///
| substr(diag,1,4)=="9593" ///
| substr(diag,1,4)=="9594" ///
| substr(diag,1,4)=="9595" ///
| substr(diag,1,4)=="9596" ///
| substr(diag,1,4)=="9597" ///
| substr(diag,1,4)=="9598" ///
| substr(diag,1,4)=="9599"


//tbi
gen tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"0") & ///
inlist(substr(diag,3,1),"0","1","3","4")

replace tbi=trauma==1 & inlist(substr(diag,1,1),"8") & inlist(substr(diag,2,1),"5") & ///
inlist(substr(diag,3,1),"0","1","2","3","4")

replace tbi=trauma==1 & diag=="95901"

replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"0","1","8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S02") & inlist(substr(diag,4,1),"9") ///
 & inlist(substr(diag,5,1),"1")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S06") & ///
inlist(substr(diag,4,1),"0","1","2","3","4","5","6","8","9")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"8")
replace tbi=trauma==1 if inlist(substr(diag,1,3),"S09") & inlist(substr(diag,4,1),"9") & ///
inlist(substr(diag,5,1),"0")


//motor vehicle crash--V87?
gen vehicle_crash=/*inlist(substr(ecode,1,4),"V890","V892","V894") ///
| inlist(substr(ecode,1,3),"X82","V38","V34","V30","V39","E81","V00","V02","V03") ///
| inlist(substr(ecode,1,3),"V04","V05","V09") ///
| inlist(substr(ecode,1,2),"V6")*/ inlist(substr(ecode,1,3),"V12","V13","V14") | inlist(substr(ecode,1,2),"V2","V3","V4","V5","V6","V7") | (inlist(substr(ecode,1,2),"E8") & inlist(substr(ecode,3,1),"1","2"))

//falls
gen fall=inlist(substr(ecode,1,3),"E88") | inlist(substr(ecode,1,1),"W") & ///
 inlist(substr(ecode,2,1),"0","1")

//get complications 
//note--only have ICD-9, need to get 10 from Zara at some point
gen ind_comp_intraop=inlist(substr(diag,1,3),"900","901","902","903","904") & num>1
replace ind_comp_intraop=inlist(substr(diag,1,4),"4582","5121","9982","9991") & num>1
replace ind_comp_intraop=inlist(substr(diag,1,5),"41511") & num>1

gen ind_comp_cardiac=inlist(substr(diag,1,3),"410","411") & num>1
replace ind_comp_cardiac=inlist(substr(diag,1,4),"4275","9971","4294") & num>1

gen ind_comp_resp=inlist(substr(diag,1,3),"480","481","482","483","485","486","514") & num>1
replace ind_comp_resp=inlist(substr(diag,1,4),"5070","5184","5185","7991","9973") & num>1
replace ind_comp_resp=inlist(substr(diag,1,5),"51881") & num>1

gen ind_comp_vasc=inlist(substr(diag,1,3),"430","431","433","434","435","436","451","453") & num>1
replace ind_comp_vasc=inlist(substr(diag,1,4),"4151","442","4448","4599","9972","9997","9992") & num>1

gen ind_comp_wound=inlist(substr(diag,1,3),"567") & num>1
replace ind_comp_wound=inlist(substr(diag,1,4),"5688","5697","6088","9981","9983","9986") & num>1
replace ind_comp_wound=inlist(substr(diag,1,5),"99814","99851") & num>1

gen ind_comp_genitourinary=inlist(substr(diag,1,3),"590","591","596","597","604") & num>1
replace ind_comp_genitourinary=inlist(substr(diag,1,4),"5933","5934","5935","5991","7882","9963","9975") & num>1

gen ind_comp_gastro=inlist(substr(diag,1,3),"558","560") & num>1
replace ind_comp_gastro=inlist(substr(diag,1,4),"5311","5312","5321","5322","5323","5401","7876") & num>1
replace ind_comp_gastro=inlist(substr(diag,1,4),"9974","5692","5693","5695","5696","5793") & num>1
replace ind_comp_gastro=inlist(substr(diag,1,5),"00845") & num>1

gen ind_comp_neuro=inlist(substr(diag,1,3),"436","951","952","953","954","955","956","354","355") & num>1
replace ind_comp_neuro=inlist(substr(diag,1,4),"9970","7234") & num>1

gen ind_comp_infect=inlist(substr(diag,1,3),"038") & num>1
replace ind_comp_infect=inlist(substr(diag,1,4),"9985","9993","0545","7907") & num>1
replace ind_comp_infect=inlist(substr(diag,1,5),"53641","51901","99591","99592") & num>1

gen ind_comp_misc=inlist(substr(diag,1,3),"584") & num>1
replace ind_comp_misc=inlist(substr(diag,1,4),"0418","2768","4589","7823","7824","7855","9950","9954","9994") & num>1
replace ind_comp_misc=inlist(substr(diag,1,4),"9996","9997","9984","9987","9988","9989","5364","5793") & num>1
replace ind_comp_misc=inlist(substr(diag,1,5),"99586") & num>1

egen ind_comp_any=rowmax(ind_comp*)
label var ind_comp_any "Any complication during index stay"

//use egen to add complications to the trauma dx rows
foreach x of varlist ind_comp* {
	by bene_id clm_num type, sort: egen this=max(`x')
	replace `x'=this
	drop this
}

gen icd9=inlist(substr(diag,1,1),"8","9")


keep if trauma
duplicates drop

gen length=length(diag)
gen dtrunc=diag

merge m:1 dtrunc using `t1', keep(match master) gen(m1)
gen anym=m1==3

forvalues m=2/5 {

	replace dtrunc=substr(dtrunc,1,length-1)
	replace length=length-1

	merge m:1 dtrunc using `t1', update keep(match master match_update) gen(m`m')
	replace anym=1 if m`m'==3
	
}

rename discharge_disp z

drop m* d* ecode n num
rename z discharge_disp
duplicates drop

tempfile trauma
save `trauma'

//only use NSOC waves
forvalues i=1/7 {
	use `nhats' if wave==`i', clear
	merge 1:m bene_id using `trauma', keep(match) nogen
	drop if admit_date>=ivw_date | (admit_date<ivw_date_n1 & !missing(ivw_date_n1)) | ///
	(ivw_date-admit_date>365)
	tempfile traum`i'
	save `traum`i''
}

clear
forvalues i=1/7 {
	append using `traum`i''
}

//# of trauma hospitalizations
by spid wave, sort: gen n_trauma=_N
by spid: gen ind_prev_trauma=_n>1
label var n_trauma "Number of hospitalizations for trauma observed prior to wave (or since prev wave)"
label var ind_prev_trauma "Indicator index trauma is first traumatic hospitalization observed"


/*generate iss code using severity and body type

iss is the sum of the squared value of the three most-severely-injured body regions
iss is max (75) if the severity in any region is 6 (6=currently unsurvivable)
*/

/*it looks like the severity=9 are burn codes that (at least for ICD-9) don't 
have ISSs associated with them*/
replace severity=. if severity==9

levelsof issbr, local(levels)
foreach l of local levels {
	gen issbr_`l'=issbr==`l'
	local lab : label issbr `l'
	by bene_id clm_num type ivw_date, sort: egen ind_issbr_`l'=max(issbr_`l')
	label var ind_issbr_`l' "`lab'"
}
egen n_issbr=rowtotal(ind_issbr_*)
label var n_issbr "# of different body regions"

by bene_id clm_num type issbr, sort: egen maxsev=max(severity)
keep if severity==maxsev
drop maxsev

sort bene_id clm_num type severity
by bene_id clm_num type: keep if _n<=3
gen sev2=severity^2

by bene_id clm_num type: egen iss=total(sev2)
label var iss "ISS"
by bene_id clm_num type, sort: egen maxsev=max(severity)
replace iss=75 if maxsev==6
replace iss=. if iss==0
drop clm_num trauma length severity issbr* anym sev2 maxsev 
rename admit_date index_date
destring traumhos, replace
by spid wave index_date, sort: egen ind_trauma_hosp=max(traumhos)
label var ind_trauma_hosp "Trauma hospital"
drop traumhos
preserve

//only keep highest iss per ivw
sort spid wave iss
by spid wave: keep if _n==_N
//only first per person
by spid: keep if _n==1

save "${intpath}\index_stay", replace

keep spid bene_id index_date ivw_date
gen ivw_year=year(ivw_date)
saveold "${intpath}\index", replace version(12)

H="compare identificaiton approaches"


use "D:\NHATS\Projects\trauma\zc_trauma_dyad\data\int_data\traumacodesoldway.dta", clear
gen cat=1
append using "D:\NHATS\Projects\trauma\zc_trauma_dyad\data\int_data\traumacodesnewway.dta"
replace cat=2 if missing(cat)
append using "D:\NHATS\Projects\trauma\zc_trauma_dyad\data\int_data\traumacodesfromstata.dta"
replace cat=3 if missing(cat)
label define cat 1 "Original" 2 "From Molly" 3 "From ICDPIC command"
label values cat cat
gen ind_icd9=admit_date<td(01oct2015)
keep diag cat ind_icd9
duplicates drop
by diag, sort: gen num=_N
drop if num>=3

tab ind if cat==3
tab cat ind
tab cat num
tab cat
forvalues i=1/3 {
by diag, sort: egen grp`i'=max(cond(cat==`i',1,0))
local lab : label cat `i'
label var grp`i' "`lab'"
}
rename cat source
forvalues i=1/3 {
}
gen cat=grp1
replace cat=2 if grp2==1
replace cat=3 if grp3==1
replace cat=4 if grp1==1 & grp2==1
replace cat=5 if grp1 & grp3
replace cat=6 if grp2 & grp3
label define cat 1 "Original only" 2 "From Molly only" 3 "From ICDPIC only" 4 "Original & Molly" 5 "Original & ICPDIC" 6 "Molly & ICDPIC", modify
label values cat cat
drop source num 
replace ind_icd9=0 if substr(diag,1,1)=="S"
duplicates drop
gen excl10=inlist(substr(diag,7,1),"D","G","K","S") | (substr(diag,1,1)=="S" & substr(diag,3,1)=="0")
gen excl9=inrange(real(substr(diag,1,3)),905,909) | inrange(real(substr(diag,1,3)),910,924) | inrange(real(substr(diag,1,3)),930,939)
drop if cat==3
export excel using "D:\NHATS\Projects\trauma\zc_trauma_dyad\data\int_data\trauma_dx_discrepancies.xls", firstrow(variables)


H="xexploring discrepancies"
use "${intpath}\trauma_dyad_nhatspost", clear
duplicates report spid
keep spid wave ivw_date index_date
foreach x of varlist w i* {
rename `x' `x'_n1
}
gen wave=wave+1
tempfile pre
save `pre'

merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", keep(match master) 
replace _m=1 if !sp_ivw

gen cat=_m==1
replace cat=2 if lml==1
replace cat=3 if _m==3 & cat!=2
replace cat=4 if _m==3 & wave==8
label define cat 1 "No p1 interviews" 2 "LML interview only" 3 "P1 interview in waves 2-7" 4 "P1 interview wave 8" 
label values cat cat
tab cat
drop _m
replace wave=wave_n1
tempfile t1
save `t1'


use "${intpath}\trauma_dyad_nhatspre", clear
duplicates report spid
keep spid wave ivw_date index_date
foreach x of varlist w i* {
rename `x' `x'_p1
}
gen wave=wave-1
tempfile pre
save `pre'

merge 1:1 spid wave using "D:\NHATS\Shared\base_data\NHATS cleaned\sp_round_1_8.dta", keep(match master) gen(othm)
replace othm=1 if !sp_ivw


*append using `t1'
*merge 1:1 spid wave using `t1'
gen cat=1 if othm==1
replace cat=2 if othm==3 
label define cat2 1 "First trauma prior to first interview" 2 "N1 interview in waves 1-6, P1 2-7" 3 "N1 interview wave 7, P1 8" 4 "N1 interview, only LML following trauma" 5 "No P1 interview following trauma" 6 "P1 interview, but >365 days after trauma", modify
label values cat cat2

tab cat
gen set=!missing(othm)
label var set "NHATS post trauma"
tempfile cat 
save `cat'
tab cat

use `t1', clear
tab cat
rename cat catn1
gen time=ivw_date-index_date
keep spid catn1 wave_n1 time

merge 1:1 spid using `cat'

replace cat=3 if catn1==4 & missing(cat)
replace cat=4 if catn1==2 & missing(cat)
replace cat=5 if catn1==1 & missing(cat)
replace cat=6 if missing(cat)